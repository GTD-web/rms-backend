/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./libs/configs/env.config.ts":
/*!************************************!*\
  !*** ./libs/configs/env.config.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FIREBASE_CONFIG = exports.APP_CONFIG = exports.WEB_PUSH_CONFIG = exports.JWT_CONFIG = exports.ENV = void 0;
const dotenv_1 = __webpack_require__(/*! dotenv */ "dotenv");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
(0, dotenv_1.config)();
exports.ENV = process.env;
exports["default"] = (0, config_1.registerAs)('database', () => {
    return {
        host: process.env.POSTGRES_HOST || 'localhost',
        port: parseInt(process.env.POSTGRES_PORT, 10) || 5432,
        username: process.env.POSTGRES_USER || 'admin',
        password: process.env.POSTGRES_PASSWORD || 'tech7admin!',
        database: process.env.POSTGRES_DB || 'resource-server',
        schema: process.env.POSTGRES_SCHEMA || 'public',
    };
});
exports.JWT_CONFIG = (0, config_1.registerAs)('jwt', () => {
    return {
        secret: process.env.GLOBAL_SECRET,
        expiresIn: process.env.JWT_EXPIRES_IN,
    };
});
exports.WEB_PUSH_CONFIG = (0, config_1.registerAs)('webPush', () => {
    return {
        publicKey: process.env.WEB_PUSH_PUBLIC_KEY,
        privateKey: process.env.WEB_PUSH_PRIVATE_KEY,
    };
});
exports.APP_CONFIG = (0, config_1.registerAs)('app', () => {
    return {
        url: process.env.NODE_ENV === 'production' ? 'http://localhost:5001' : 'http://localhost:3000',
        port: process.env.NODE_ENV === 'production' ? 5001 : 3000,
        storage: {
            type: process.env.NODE_ENV,
        },
    };
});
exports.FIREBASE_CONFIG = (0, config_1.registerAs)('firebase', () => {
    return {
        type: process.env.FIREBASE_TYPE,
        projectId: process.env.FIREBASE_PROJECT_ID,
        privateKeyId: process.env.FIREBASE_PRIVATE_KEY_ID,
        privateKey: process.env.FIREBASE_PRIVATE_KEY,
        clientEmail: process.env.FIREBASE_CLIENT_EMAIL,
        clientId: process.env.FIREBASE_CLIENT_ID,
        authUri: process.env.FIREBASE_AUTH_URI,
        tokenUri: process.env.FIREBASE_TOKEN_URI,
        authProviderX509CertUrl: process.env.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,
        clientX509CertUrl: process.env.FIREBASE_CLIENT_X509_CERT_URL,
        universeDomain: process.env.FIREBASE_UNIVERSE_DOMAIN,
    };
});


/***/ }),

/***/ "./libs/configs/jwt.config.ts":
/*!************************************!*\
  !*** ./libs/configs/jwt.config.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.jwtConfig = void 0;
const jwtConfig = (configService) => ({
    secret: configService.get('GLOBAL_SECRET'),
    signOptions: {
        expiresIn: configService.get('JWT_EXPIRES_IN'),
    },
});
exports.jwtConfig = jwtConfig;


/***/ }),

/***/ "./libs/configs/typeorm.config.ts":
/*!****************************************!*\
  !*** ./libs/configs/typeorm.config.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.typeOrmConfig = void 0;
const entities_1 = __webpack_require__(/*! ../entities */ "./libs/entities/index.ts");
const path_1 = __webpack_require__(/*! path */ "path");
const typeOrmConfig = (configService) => {
    console.log('configService.get(NODE_ENV)', configService.get('database.database'));
    return {
        type: 'postgres',
        host: configService.get('database.host'),
        port: configService.get('database.port'),
        username: configService.get('database.username'),
        password: configService.get('database.password'),
        database: configService.get('database.database'),
        entities: entities_1.Entities,
        schema: configService.get('database.schema'),
        migrations: [(0, path_1.join)(__dirname, 'libs/migrations/*.ts')],
        migrationsRun: configService.get('database.port') === 6543,
        ssl: configService.get('database.port') === 6543,
        extra: {
            ssl: configService.get('database.port') === 6543 ? { rejectUnauthorized: false } : null,
        },
    };
};
exports.typeOrmConfig = typeOrmConfig;


/***/ }),

/***/ "./libs/constants/error-message.ts":
/*!*****************************************!*\
  !*** ./libs/constants/error-message.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ERROR_MESSAGE = void 0;
const ValidationErrorMessage = {
    REQUIRED: (field) => `${field}은(는) 필수 값입니다.`,
    IS_INT: (field) => `${field}은(는) 정수여야 합니다.`,
    IS_ARRAY: (field) => `${field}은(는) 배열이어야 합니다.`,
    IS_STRING: (field) => `${field}은(는) 문자열이어야 합니다.`,
    IS_NUMBER: (field) => `${field}은(는) 숫자여야 합니다.`,
    IS_BOOLEAN: (field) => `${field}은(는) 불리언이어야 합니다.`,
    IS_DATE: (field) => `${field}은(는) 날짜여야 합니다.`,
    IS_EMAIL: (field) => `${field}은(는) 이메일 형식이어야 합니다.`,
    IS_URL: (field) => `${field}은(는) URL 형식이어야 합니다.`,
    IS_PHONE: (field) => `${field}은(는) 전화번호 형식이어야 합니다.`,
    IS_MIN: (field, min) => `${field}은(는) ${min} 이상이어야 합니다.`,
    IS_MAX: (field, max) => `${field}은(는) ${max} 이하이어야 합니다.`,
    IS_MIN_LENGTH: (field, minLength) => `${field}은(는) ${minLength} 글자 이상이어야 합니다.`,
    IS_MAX_LENGTH: (field, maxLength) => `${field}은(는) ${maxLength} 글자 이하이어야 합니다.`,
    IS_LENGTH: (field, minLength, maxLength) => `${field}은(는) ${minLength} 글자 이상 ${maxLength} 글자 이하이어야 합니다.`,
    IS_REGEX: (field, regex) => `${field}은(는) ${regex} 형식이어야 합니다.`,
    IS_ENUM: (field, enumValues) => `${field}은(는) ${enumValues.join(', ')} 중 하나여야 합니다.`,
    IS_IN: (field, values) => `${field}은(는) ${values.join(', ')} 중 하나여야 합니다.`,
    IS_NOT_IN: (field, values) => `${field}은(는) ${values.join(', ')} 중 하나여야 합니다.`,
    IS_NOT_NULL: (field) => `${field}은(는) NULL이 아니어야 합니다.`,
    IS_NULL: (field) => `${field}은(는) NULL이어야 합니다.`,
    IS_POSITIVE: (field) => `${field}은(는) 양수여야 합니다.`,
    IS_NEGATIVE: (field) => `${field}은(는) 음수여야 합니다.`,
    IS_ZERO: (field) => `${field}은(는) 0이어야 합니다.`,
    IS_NOT_ZERO: (field) => `${field}은(는) 0이 아니어야 합니다.`,
    INVALID_DATE_FORMAT: (field, format) => `${field}의 날짜 형식이 올바르지 않습니다. ${format} 형식이어야 합니다.`,
    INVALID_ARRAY_ITEM_TYPE: (field, type) => `${field}의 모든 항목은 ${type}이어야 합니다.`,
    INVALID_MILEAGE: (field) => `${field}은(는) 0 이상 999,999,999 이하의 정수여야 합니다.`,
};
const BusinessErrorMessage = {
    COMMON: {
        NOT_FOUND: '요청한 데이터를 찾을 수 없습니다.',
        DUPLICATE_USER: '이미 존재하는 사용자입니다.',
        UNAUTHORIZED: '권한이 없습니다.',
    },
    AUTH: {
        USER_NOT_FOUND: '사용자를 찾을 수 없습니다.',
        INVALID_PASSWORD: '비밀번호가 일치하지 않습니다.',
        SSO_LOGIN_FAILED: 'SSO 로그인에 실패했습니다.',
    },
    RESOURCE: {
        NOT_FOUND: '요청한 자원을 찾을 수 없습니다.',
        INVALID_STATUS: '잘못된 상태입니다.',
        HAS_RESOURCES: '자원이 포함된 그룹은 삭제할 수 없습니다.',
        IS_AVAILABLE: '사용 가능한 자원은 삭제할 수 없습니다.',
        GROUP_ID_REQUIRED: '자원 그룹 ID는 필수입니다.',
        MANAGERS_REQUIRED: '자원 관리자는 필수입니다.',
        UNSUPPORTED_TYPE: (type) => `지원하지 않는 자원 타입입니다: ${type}`,
        FAILED_CREATE: '자원 생성에 실패했습니다.',
        FAILED_UPDATE: '자원 수정에 실패했습니다.',
        FAILED_DELETE: '자원 삭제에 실패했습니다.',
        FAILED_REORDER: '자원 순서 변경에 실패했습니다.',
        DATE_REQUIRED: '시작 날짜와 종료 날짜는 필수입니다.',
        INVALID_DATE_RANGE: '시작 날짜는 종료 날짜보다 이전이어야 합니다.',
        TIME_RANGE_CONFLICT: '시간 범위와 시간 단위는 동시에 선택할 수 없습니다.',
    },
    RESOURCE_GROUP: {
        NOT_FOUND: '요청한 자원 그룹을 찾을 수 없습니다.',
        FAILED_REORDER: '자원 그룹 순서 변경에 실패했습니다.',
    },
    RESOURCE_MANAGER: {
        NOT_FOUND: '요청한 자원 관리자를 찾을 수 없습니다.',
    },
    VEHICLE_INFO: {
        NOT_FOUND: '요청한 차량 정보를 찾을 수 없습니다.',
        FAILED_RETURN: '차량 반납에 실패했습니다.',
    },
    CONSUMABLE: {
        NOT_FOUND: '요청한 소모품 정보를 찾을 수 없습니다.',
        UNAUTHORIZED: '소모품 관리 권한이 없습니다.',
        ALREADY_EXISTS: '이미 존재하는 소모품입니다.',
    },
    MAINTENANCE: {
        NOT_FOUND: '요청한 정비 정보를 찾을 수 없습니다.',
        UNAUTHORIZED: '정비 관리 권한이 없습니다.',
        INVALID_DATE: '직전 정비 이력 보다 이전 날짜에 정비 이력을 등록할 수 없습니다.',
    },
    RESERVATION: {
        NOT_FOUND: '요청한 예약 정보를 찾을 수 없습니다.',
        TIME_CONFLICT: '해당 시간엔 이미 예약이 되어있습니다.',
        INVALID_DATE_RANGE: '시작 시간은 종료 시간보다 이전이어야 합니다.',
        CANNOT_UPDATE_ACCOMMODATION_TIME: '확정된 숙소 예약의 시간은 변경할 수 없습니다.',
        CANNOT_UPDATE_STATUS: (status) => `${status} 상태의 예약은 수정할 수 없습니다.`,
        INVALID_RESOURCE_TYPE: '잘못된 자원 타입입니다.',
        CANNOT_RETURN_STATUS: (status) => `${status} 상태의 예약은 차량을 반납할 수 없습니다.`,
        VEHICLE_NOT_FOUND: '예약된 차량을 찾을 수 없습니다.',
        VEHICLE_ALREADY_RETURNED: '이미 반납된 차량입니다.',
        INVALID_MILEAGE: '반납 주행거리는 이전 주행거리보다 작을 수 없습니다.',
        RESOURCE_UNAVAILABLE: '예약 가능한 자원이 아닙니다.',
        INVALID_DATE_REQUIRED: '시작 날짜와 종료 날짜는 필수입니다.',
    },
    FILE: {
        NOT_FOUND: '요청한 파일을 찾을 수 없습니다.',
        ID_OR_PATH_REQUIRED: '파일 ID 또는 파일 경로는 필수입니다.',
    },
    EMPLOYEE: {
        NOT_FOUND: '존재하지 않는 사용자입니다.',
        SYNC_FAILED: '직원 정보 동기화에 실패했습니다.',
    },
};
exports.ERROR_MESSAGE = {
    VALIDATION: ValidationErrorMessage,
    BUSINESS: BusinessErrorMessage,
};


/***/ }),

/***/ "./libs/decorators/api-responses.decorator.ts":
/*!****************************************************!*\
  !*** ./libs/decorators/api-responses.decorator.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ApiDataResponse = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const pagination_response_dto_1 = __webpack_require__(/*! ../dtos/pagination-response.dto */ "./libs/dtos/pagination-response.dto.ts");
const response_dto_1 = __webpack_require__(/*! ../dtos/response.dto */ "./libs/dtos/response.dto.ts");
const ApiCommonErrors = () => (0, common_1.applyDecorators)((0, swagger_1.ApiBadRequestResponse)({ description: '잘못된 요청입니다.', type: response_dto_1.ErrorResponseDto }), (0, swagger_1.ApiUnauthorizedResponse)({ description: '인증되지 않은 요청입니다.' }), (0, swagger_1.ApiForbiddenResponse)({ description: '권한이 없습니다.' }), (0, swagger_1.ApiNotFoundResponse)({ description: '리소스를 찾을 수 없습니다.' }), (0, swagger_1.ApiConflictResponse)({ description: '중복된 리소스입니다.' }), (0, swagger_1.ApiInternalServerErrorResponse)({ description: '서버 에러가 발생했습니다.' }));
const ApiDataResponse = (options) => {
    const schema = options.type
        ? {
            allOf: [
                {
                    $ref: (0, swagger_1.getSchemaPath)(response_dto_1.BaseResponseDto),
                },
                {
                    properties: {
                        data: options.isPaginated
                            ? {
                                type: 'object',
                                properties: {
                                    items: {
                                        type: 'array',
                                        items: { $ref: (0, swagger_1.getSchemaPath)(options.type[0]) },
                                    },
                                    meta: {
                                        $ref: (0, swagger_1.getSchemaPath)(pagination_response_dto_1.PaginationMetaDto),
                                    },
                                },
                            }
                            : Array.isArray(options.type)
                                ? {
                                    type: 'array',
                                    items: { $ref: (0, swagger_1.getSchemaPath)(options.type[0]) },
                                }
                                : {
                                    $ref: (0, swagger_1.getSchemaPath)(options.type),
                                },
                    },
                },
            ],
        }
        : {
            properties: {
                success: { type: 'boolean', example: true },
                message: { type: 'string', example: options.description },
            },
        };
    return (0, common_1.applyDecorators)((0, swagger_1.ApiOkResponse)({
        status: options.status || 200,
        description: options.description || '성공적으로 처리되었습니다.',
        schema,
    }), ApiCommonErrors());
};
exports.ApiDataResponse = ApiDataResponse;


/***/ }),

/***/ "./libs/decorators/public.decorator.ts":
/*!*********************************************!*\
  !*** ./libs/decorators/public.decorator.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Public = exports.IS_PUBLIC_KEY = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
exports.IS_PUBLIC_KEY = 'isPublic';
const Public = () => (0, common_1.SetMetadata)(exports.IS_PUBLIC_KEY, true);
exports.Public = Public;


/***/ }),

/***/ "./libs/decorators/role.decorator.ts":
/*!*******************************************!*\
  !*** ./libs/decorators/role.decorator.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Roles = exports.ROLES_KEY = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
exports.ROLES_KEY = 'roles';
const Roles = (...roles) => (0, common_1.SetMetadata)(exports.ROLES_KEY, roles);
exports.Roles = Roles;


/***/ }),

/***/ "./libs/decorators/user.decorator.ts":
/*!*******************************************!*\
  !*** ./libs/decorators/user.decorator.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.User = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
exports.User = (0, common_1.createParamDecorator)((data, ctx) => {
    const request = ctx.switchToHttp().getRequest();
    const user = request.user;
    return data ? user?.[data] : user;
});


/***/ }),

/***/ "./libs/dtos/pagination-query.dto.ts":
/*!*******************************************!*\
  !*** ./libs/dtos/pagination-query.dto.ts ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PaginationQueryDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class PaginationQueryDto {
    constructor() {
        this.page = 1;
        this.limit = 100;
    }
    getOffset() {
        return (this.page - 1) * this.limit;
    }
}
exports.PaginationQueryDto = PaginationQueryDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '페이지 번호 (1부터 시작)',
        type: Number,
        default: 1,
        minimum: 1,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)(),
    (0, class_validator_1.Min)(1),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], PaginationQueryDto.prototype, "page", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '한 페이지당 항목 수',
        type: Number,
        default: 100,
        minimum: 1,
        maximum: 100,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)(),
    (0, class_validator_1.Min)(1),
    (0, class_validator_1.Max)(100),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], PaginationQueryDto.prototype, "limit", void 0);


/***/ }),

/***/ "./libs/dtos/pagination-response.dto.ts":
/*!**********************************************!*\
  !*** ./libs/dtos/pagination-response.dto.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PaginationData = exports.PaginationMetaDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class PaginationMetaDto {
}
exports.PaginationMetaDto = PaginationMetaDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '전체 아이템 수',
        type: Number,
        example: 100,
    }),
    __metadata("design:type", Number)
], PaginationMetaDto.prototype, "total", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '현재 페이지 번호',
        type: Number,
        example: 1,
    }),
    __metadata("design:type", Number)
], PaginationMetaDto.prototype, "page", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '페이지당 아이템 수',
        type: Number,
        example: 20,
    }),
    __metadata("design:type", Number)
], PaginationMetaDto.prototype, "limit", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '다음 페이지 존재 여부',
        type: Boolean,
        example: true,
    }),
    __metadata("design:type", Boolean)
], PaginationMetaDto.prototype, "hasNext", void 0);
class PaginationData {
}
exports.PaginationData = PaginationData;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '결과 아이템 배열',
        isArray: true,
    }),
    __metadata("design:type", Array)
], PaginationData.prototype, "items", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '페이지네이션 메타데이터',
        type: PaginationMetaDto,
    }),
    __metadata("design:type", PaginationMetaDto)
], PaginationData.prototype, "meta", void 0);


/***/ }),

/***/ "./libs/dtos/response.dto.ts":
/*!***********************************!*\
  !*** ./libs/dtos/response.dto.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ErrorResponseDto = exports.BaseResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class BaseResponseDto {
}
exports.BaseResponseDto = BaseResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: true, type: 'except' }),
    __metadata("design:type", Boolean)
], BaseResponseDto.prototype, "success", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: true, description: '응답 데이터', type: 'except' }),
    __metadata("design:type", Object)
], BaseResponseDto.prototype, "data", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, example: '성공적으로 처리되었습니다.', description: '성공 메시지', type: 'except' }),
    __metadata("design:type", String)
], BaseResponseDto.prototype, "message", void 0);
class ErrorResponseDto {
}
exports.ErrorResponseDto = ErrorResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: false, type: 'except' }),
    __metadata("design:type", Boolean)
], ErrorResponseDto.prototype, "success", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 400, type: 'except' }),
    __metadata("design:type", Number)
], ErrorResponseDto.prototype, "statusCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: '잘못된 요청입니다.', type: 'except' }),
    __metadata("design:type", String)
], ErrorResponseDto.prototype, "message", void 0);


/***/ }),

/***/ "./libs/entities/accommodation-info.entity.ts":
/*!****************************************************!*\
  !*** ./libs/entities/accommodation-info.entity.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationInfo = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
let AccommodationInfo = class AccommodationInfo {
};
exports.AccommodationInfo = AccommodationInfo;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], AccommodationInfo.prototype, "accommodationInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], AccommodationInfo.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], AccommodationInfo.prototype, "locationURLs", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => resource_entity_1.Resource, (resource) => resource.accommodationInfo),
    (0, typeorm_1.JoinColumn)({ name: 'resourceId' }),
    __metadata("design:type", typeof (_a = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _a : Object)
], AccommodationInfo.prototype, "resource", void 0);
exports.AccommodationInfo = AccommodationInfo = __decorate([
    (0, typeorm_1.Entity)('accommodation_infos')
], AccommodationInfo);


/***/ }),

/***/ "./libs/entities/consumable.entity.ts":
/*!********************************************!*\
  !*** ./libs/entities/consumable.entity.ts ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Consumable = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const vehicle_info_entity_1 = __webpack_require__(/*! ./vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
const maintenance_entity_1 = __webpack_require__(/*! ./maintenance.entity */ "./libs/entities/maintenance.entity.ts");
let Consumable = class Consumable {
};
exports.Consumable = Consumable;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Consumable.prototype, "consumableId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Consumable.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Consumable.prototype, "name", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Consumable.prototype, "replaceCycle", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Consumable.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Consumable.prototype, "initMileage", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Consumable.prototype, "deletedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => vehicle_info_entity_1.VehicleInfo),
    (0, typeorm_1.JoinColumn)({ name: 'vehicleInfoId', referencedColumnName: 'vehicleInfoId' }),
    __metadata("design:type", typeof (_b = typeof vehicle_info_entity_1.VehicleInfo !== "undefined" && vehicle_info_entity_1.VehicleInfo) === "function" ? _b : Object)
], Consumable.prototype, "vehicleInfo", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => maintenance_entity_1.Maintenance, (maintenance) => maintenance.consumable),
    __metadata("design:type", Array)
], Consumable.prototype, "maintenances", void 0);
exports.Consumable = Consumable = __decorate([
    (0, typeorm_1.Entity)('consumables')
], Consumable);


/***/ }),

/***/ "./libs/entities/employee-notification.entity.ts":
/*!*******************************************************!*\
  !*** ./libs/entities/employee-notification.entity.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeNotification = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./libs/entities/employee.entity.ts");
const notification_entity_1 = __webpack_require__(/*! ./notification.entity */ "./libs/entities/notification.entity.ts");
let EmployeeNotification = class EmployeeNotification {
};
exports.EmployeeNotification = EmployeeNotification;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], EmployeeNotification.prototype, "employeeNotificationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], EmployeeNotification.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], EmployeeNotification.prototype, "notificationId", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], EmployeeNotification.prototype, "isRead", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => notification_entity_1.Notification),
    (0, typeorm_1.JoinColumn)({ name: 'notificationId' }),
    __metadata("design:type", typeof (_a = typeof notification_entity_1.Notification !== "undefined" && notification_entity_1.Notification) === "function" ? _a : Object)
], EmployeeNotification.prototype, "notification", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_b = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _b : Object)
], EmployeeNotification.prototype, "employee", void 0);
exports.EmployeeNotification = EmployeeNotification = __decorate([
    (0, typeorm_1.Entity)('employee_notifications')
], EmployeeNotification);


/***/ }),

/***/ "./libs/entities/employee.entity.ts":
/*!******************************************!*\
  !*** ./libs/entities/employee.entity.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Employee = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_notification_entity_1 = __webpack_require__(/*! ./employee-notification.entity */ "./libs/entities/employee-notification.entity.ts");
const reservation_participant_entity_1 = __webpack_require__(/*! ./reservation-participant.entity */ "./libs/entities/reservation-participant.entity.ts");
const resource_manager_entity_1 = __webpack_require__(/*! ./resource-manager.entity */ "./libs/entities/resource-manager.entity.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
let Employee = class Employee {
};
exports.Employee = Employee;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Employee.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Employee.prototype, "name", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Employee.prototype, "employeeNumber", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Employee.prototype, "department", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Employee.prototype, "position", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "email", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "mobile", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "password", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "accessToken", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "expiredAt", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true, comment: '웹푸시 알림 관련 구독 정보 배열' }),
    __metadata("design:type", Array)
], Employee.prototype, "subscriptions", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true, comment: '웹푸시 알림 설정 여부' }),
    __metadata("design:type", Boolean)
], Employee.prototype, "isPushNotificationEnabled", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'enum', enum: role_type_enum_1.Role, array: true, default: [role_type_enum_1.Role.USER], comment: '사용자 역할' }),
    __metadata("design:type", Array)
], Employee.prototype, "roles", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => reservation_participant_entity_1.ReservationParticipant, (participant) => participant.employee),
    __metadata("design:type", Array)
], Employee.prototype, "participants", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => employee_notification_entity_1.EmployeeNotification, (notification) => notification.employee),
    __metadata("design:type", Array)
], Employee.prototype, "notifications", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => resource_manager_entity_1.ResourceManager, (resourceManager) => resourceManager.employee),
    __metadata("design:type", Array)
], Employee.prototype, "resourceManagers", void 0);
exports.Employee = Employee = __decorate([
    (0, typeorm_1.Entity)('employees')
], Employee);


/***/ }),

/***/ "./libs/entities/equipment-info.entity.ts":
/*!************************************************!*\
  !*** ./libs/entities/equipment-info.entity.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EquipmentInfo = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
let EquipmentInfo = class EquipmentInfo {
};
exports.EquipmentInfo = EquipmentInfo;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], EquipmentInfo.prototype, "equipmentInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], EquipmentInfo.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => resource_entity_1.Resource, (resource) => resource.equipmentInfo),
    (0, typeorm_1.JoinColumn)({ name: 'resourceId' }),
    __metadata("design:type", typeof (_a = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _a : Object)
], EquipmentInfo.prototype, "resource", void 0);
exports.EquipmentInfo = EquipmentInfo = __decorate([
    (0, typeorm_1.Entity)('equipment_infos')
], EquipmentInfo);


/***/ }),

/***/ "./libs/entities/file-maintenance.entity.ts":
/*!**************************************************!*\
  !*** ./libs/entities/file-maintenance.entity.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileMaintenance = void 0;
const file_entity_1 = __webpack_require__(/*! ./file.entity */ "./libs/entities/file.entity.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const maintenance_entity_1 = __webpack_require__(/*! ./maintenance.entity */ "./libs/entities/maintenance.entity.ts");
let FileMaintenance = class FileMaintenance {
};
exports.FileMaintenance = FileMaintenance;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], FileMaintenance.prototype, "fileMaintenanceId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], FileMaintenance.prototype, "maintenanceId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], FileMaintenance.prototype, "fileId", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => maintenance_entity_1.Maintenance),
    (0, typeorm_1.JoinColumn)({ name: 'maintenanceId' }),
    __metadata("design:type", typeof (_a = typeof maintenance_entity_1.Maintenance !== "undefined" && maintenance_entity_1.Maintenance) === "function" ? _a : Object)
], FileMaintenance.prototype, "maintenance", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => file_entity_1.File),
    (0, typeorm_1.JoinColumn)({ name: 'fileId' }),
    __metadata("design:type", typeof (_b = typeof file_entity_1.File !== "undefined" && file_entity_1.File) === "function" ? _b : Object)
], FileMaintenance.prototype, "file", void 0);
exports.FileMaintenance = FileMaintenance = __decorate([
    (0, typeorm_1.Entity)('file_maintenances')
], FileMaintenance);


/***/ }),

/***/ "./libs/entities/file-reservation-vehicle.entity.ts":
/*!**********************************************************!*\
  !*** ./libs/entities/file-reservation-vehicle.entity.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileReservationVehicle = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const file_entity_1 = __webpack_require__(/*! ./file.entity */ "./libs/entities/file.entity.ts");
const reservation_vehicle_entity_1 = __webpack_require__(/*! ./reservation-vehicle.entity */ "./libs/entities/reservation-vehicle.entity.ts");
let FileReservationVehicle = class FileReservationVehicle {
};
exports.FileReservationVehicle = FileReservationVehicle;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], FileReservationVehicle.prototype, "fileReservationVehicleId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], FileReservationVehicle.prototype, "reservationVehicleId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], FileReservationVehicle.prototype, "fileId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], FileReservationVehicle.prototype, "type", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => reservation_vehicle_entity_1.ReservationVehicle),
    (0, typeorm_1.JoinColumn)({ name: 'reservationVehicleId' }),
    __metadata("design:type", typeof (_a = typeof reservation_vehicle_entity_1.ReservationVehicle !== "undefined" && reservation_vehicle_entity_1.ReservationVehicle) === "function" ? _a : Object)
], FileReservationVehicle.prototype, "reservationVehicle", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => file_entity_1.File),
    (0, typeorm_1.JoinColumn)({ name: 'fileId' }),
    __metadata("design:type", typeof (_b = typeof file_entity_1.File !== "undefined" && file_entity_1.File) === "function" ? _b : Object)
], FileReservationVehicle.prototype, "file", void 0);
exports.FileReservationVehicle = FileReservationVehicle = __decorate([
    (0, typeorm_1.Entity)('file_reservation_vehicles')
], FileReservationVehicle);


/***/ }),

/***/ "./libs/entities/file-resource.entity.ts":
/*!***********************************************!*\
  !*** ./libs/entities/file-resource.entity.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileResource = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
const file_entity_1 = __webpack_require__(/*! ./file.entity */ "./libs/entities/file.entity.ts");
let FileResource = class FileResource {
};
exports.FileResource = FileResource;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], FileResource.prototype, "fileResourceId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], FileResource.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], FileResource.prototype, "fileId", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => resource_entity_1.Resource),
    (0, typeorm_1.JoinColumn)({ name: 'resourceId' }),
    __metadata("design:type", typeof (_a = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _a : Object)
], FileResource.prototype, "resource", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => file_entity_1.File),
    (0, typeorm_1.JoinColumn)({ name: 'fileId' }),
    __metadata("design:type", typeof (_b = typeof file_entity_1.File !== "undefined" && file_entity_1.File) === "function" ? _b : Object)
], FileResource.prototype, "file", void 0);
exports.FileResource = FileResource = __decorate([
    (0, typeorm_1.Entity)('file_resources')
], FileResource);


/***/ }),

/***/ "./libs/entities/file-vehicle-info.entity.ts":
/*!***************************************************!*\
  !*** ./libs/entities/file-vehicle-info.entity.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileVehicleInfo = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const vehicle_info_entity_1 = __webpack_require__(/*! ./vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
const file_entity_1 = __webpack_require__(/*! ./file.entity */ "./libs/entities/file.entity.ts");
let FileVehicleInfo = class FileVehicleInfo {
};
exports.FileVehicleInfo = FileVehicleInfo;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], FileVehicleInfo.prototype, "fileVehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], FileVehicleInfo.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], FileVehicleInfo.prototype, "fileId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], FileVehicleInfo.prototype, "type", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => vehicle_info_entity_1.VehicleInfo),
    (0, typeorm_1.JoinColumn)({ name: 'vehicleInfoId' }),
    __metadata("design:type", typeof (_a = typeof vehicle_info_entity_1.VehicleInfo !== "undefined" && vehicle_info_entity_1.VehicleInfo) === "function" ? _a : Object)
], FileVehicleInfo.prototype, "vehicleInfo", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => file_entity_1.File),
    (0, typeorm_1.JoinColumn)({ name: 'fileId' }),
    __metadata("design:type", typeof (_b = typeof file_entity_1.File !== "undefined" && file_entity_1.File) === "function" ? _b : Object)
], FileVehicleInfo.prototype, "file", void 0);
exports.FileVehicleInfo = FileVehicleInfo = __decorate([
    (0, typeorm_1.Entity)('file_vehicle_infos')
], FileVehicleInfo);


/***/ }),

/***/ "./libs/entities/file.entity.ts":
/*!**************************************!*\
  !*** ./libs/entities/file.entity.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.File = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let File = class File {
};
exports.File = File;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], File.prototype, "fileId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], File.prototype, "fileName", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    __metadata("design:type", String)
], File.prototype, "filePath", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], File.prototype, "isTemporary", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], File.prototype, "createdAt", void 0);
exports.File = File = __decorate([
    (0, typeorm_1.Entity)('files')
], File);


/***/ }),

/***/ "./libs/entities/index.ts":
/*!********************************!*\
  !*** ./libs/entities/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleRelation = exports.ScheduleParticipant = exports.Schedule = exports.FileVehicleInfo = exports.FileResource = exports.FileReservationVehicle = exports.FileMaintenance = exports.ConsumableMaintenanceStats = exports.VehicleMaintenanceHistory = exports.ResourceUsageStats = exports.EmployeeReservationStats = exports.File = exports.EmployeeNotification = exports.NotificationTypeEntity = exports.Notification = exports.Maintenance = exports.Consumable = exports.ResourceManager = exports.ReservationParticipant = exports.ReservationSnapshot = exports.ReservationVehicle = exports.Reservation = exports.EquipmentInfo = exports.AccommodationInfo = exports.MeetingRoomInfo = exports.VehicleInfo = exports.ResourceGroup = exports.Resource = exports.Employee = exports.EntitiesMap = exports.Entities = void 0;
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./libs/entities/employee.entity.ts");
Object.defineProperty(exports, "Employee", ({ enumerable: true, get: function () { return employee_entity_1.Employee; } }));
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
Object.defineProperty(exports, "Resource", ({ enumerable: true, get: function () { return resource_entity_1.Resource; } }));
const resource_group_entity_1 = __webpack_require__(/*! ./resource-group.entity */ "./libs/entities/resource-group.entity.ts");
Object.defineProperty(exports, "ResourceGroup", ({ enumerable: true, get: function () { return resource_group_entity_1.ResourceGroup; } }));
const vehicle_info_entity_1 = __webpack_require__(/*! ./vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
Object.defineProperty(exports, "VehicleInfo", ({ enumerable: true, get: function () { return vehicle_info_entity_1.VehicleInfo; } }));
const meeting_room_info_entity_1 = __webpack_require__(/*! ./meeting-room-info.entity */ "./libs/entities/meeting-room-info.entity.ts");
Object.defineProperty(exports, "MeetingRoomInfo", ({ enumerable: true, get: function () { return meeting_room_info_entity_1.MeetingRoomInfo; } }));
const accommodation_info_entity_1 = __webpack_require__(/*! ./accommodation-info.entity */ "./libs/entities/accommodation-info.entity.ts");
Object.defineProperty(exports, "AccommodationInfo", ({ enumerable: true, get: function () { return accommodation_info_entity_1.AccommodationInfo; } }));
const equipment_info_entity_1 = __webpack_require__(/*! ./equipment-info.entity */ "./libs/entities/equipment-info.entity.ts");
Object.defineProperty(exports, "EquipmentInfo", ({ enumerable: true, get: function () { return equipment_info_entity_1.EquipmentInfo; } }));
const reservation_entity_1 = __webpack_require__(/*! ./reservation.entity */ "./libs/entities/reservation.entity.ts");
Object.defineProperty(exports, "Reservation", ({ enumerable: true, get: function () { return reservation_entity_1.Reservation; } }));
const reservation_participant_entity_1 = __webpack_require__(/*! ./reservation-participant.entity */ "./libs/entities/reservation-participant.entity.ts");
Object.defineProperty(exports, "ReservationParticipant", ({ enumerable: true, get: function () { return reservation_participant_entity_1.ReservationParticipant; } }));
const resource_manager_entity_1 = __webpack_require__(/*! ./resource-manager.entity */ "./libs/entities/resource-manager.entity.ts");
Object.defineProperty(exports, "ResourceManager", ({ enumerable: true, get: function () { return resource_manager_entity_1.ResourceManager; } }));
const consumable_entity_1 = __webpack_require__(/*! ./consumable.entity */ "./libs/entities/consumable.entity.ts");
Object.defineProperty(exports, "Consumable", ({ enumerable: true, get: function () { return consumable_entity_1.Consumable; } }));
const maintenance_entity_1 = __webpack_require__(/*! ./maintenance.entity */ "./libs/entities/maintenance.entity.ts");
Object.defineProperty(exports, "Maintenance", ({ enumerable: true, get: function () { return maintenance_entity_1.Maintenance; } }));
const notification_entity_1 = __webpack_require__(/*! ./notification.entity */ "./libs/entities/notification.entity.ts");
Object.defineProperty(exports, "Notification", ({ enumerable: true, get: function () { return notification_entity_1.Notification; } }));
const notification_type_entity_1 = __webpack_require__(/*! ./notification-type.entity */ "./libs/entities/notification-type.entity.ts");
Object.defineProperty(exports, "NotificationTypeEntity", ({ enumerable: true, get: function () { return notification_type_entity_1.NotificationTypeEntity; } }));
const employee_notification_entity_1 = __webpack_require__(/*! ./employee-notification.entity */ "./libs/entities/employee-notification.entity.ts");
Object.defineProperty(exports, "EmployeeNotification", ({ enumerable: true, get: function () { return employee_notification_entity_1.EmployeeNotification; } }));
const file_entity_1 = __webpack_require__(/*! ./file.entity */ "./libs/entities/file.entity.ts");
Object.defineProperty(exports, "File", ({ enumerable: true, get: function () { return file_entity_1.File; } }));
const view_1 = __webpack_require__(/*! ./view */ "./libs/entities/view/index.ts");
Object.defineProperty(exports, "EmployeeReservationStats", ({ enumerable: true, get: function () { return view_1.EmployeeReservationStats; } }));
Object.defineProperty(exports, "ResourceUsageStats", ({ enumerable: true, get: function () { return view_1.ResourceUsageStats; } }));
Object.defineProperty(exports, "VehicleMaintenanceHistory", ({ enumerable: true, get: function () { return view_1.VehicleMaintenanceHistory; } }));
Object.defineProperty(exports, "ConsumableMaintenanceStats", ({ enumerable: true, get: function () { return view_1.ConsumableMaintenanceStats; } }));
const reservation_snapshot_entity_1 = __webpack_require__(/*! ./reservation-snapshot.entity */ "./libs/entities/reservation-snapshot.entity.ts");
Object.defineProperty(exports, "ReservationSnapshot", ({ enumerable: true, get: function () { return reservation_snapshot_entity_1.ReservationSnapshot; } }));
const reservation_vehicle_entity_1 = __webpack_require__(/*! ./reservation-vehicle.entity */ "./libs/entities/reservation-vehicle.entity.ts");
Object.defineProperty(exports, "ReservationVehicle", ({ enumerable: true, get: function () { return reservation_vehicle_entity_1.ReservationVehicle; } }));
const file_maintenance_entity_1 = __webpack_require__(/*! ./file-maintenance.entity */ "./libs/entities/file-maintenance.entity.ts");
Object.defineProperty(exports, "FileMaintenance", ({ enumerable: true, get: function () { return file_maintenance_entity_1.FileMaintenance; } }));
const file_reservation_vehicle_entity_1 = __webpack_require__(/*! ./file-reservation-vehicle.entity */ "./libs/entities/file-reservation-vehicle.entity.ts");
Object.defineProperty(exports, "FileReservationVehicle", ({ enumerable: true, get: function () { return file_reservation_vehicle_entity_1.FileReservationVehicle; } }));
const file_resource_entity_1 = __webpack_require__(/*! ./file-resource.entity */ "./libs/entities/file-resource.entity.ts");
Object.defineProperty(exports, "FileResource", ({ enumerable: true, get: function () { return file_resource_entity_1.FileResource; } }));
const file_vehicle_info_entity_1 = __webpack_require__(/*! ./file-vehicle-info.entity */ "./libs/entities/file-vehicle-info.entity.ts");
Object.defineProperty(exports, "FileVehicleInfo", ({ enumerable: true, get: function () { return file_vehicle_info_entity_1.FileVehicleInfo; } }));
const schedule_participant_entity_1 = __webpack_require__(/*! ./schedule-participant.entity */ "./libs/entities/schedule-participant.entity.ts");
Object.defineProperty(exports, "ScheduleParticipant", ({ enumerable: true, get: function () { return schedule_participant_entity_1.ScheduleParticipant; } }));
const schedule_entity_1 = __webpack_require__(/*! ./schedule.entity */ "./libs/entities/schedule.entity.ts");
Object.defineProperty(exports, "Schedule", ({ enumerable: true, get: function () { return schedule_entity_1.Schedule; } }));
const schedule_relations_entity_1 = __webpack_require__(/*! ./schedule-relations.entity */ "./libs/entities/schedule-relations.entity.ts");
Object.defineProperty(exports, "ScheduleRelation", ({ enumerable: true, get: function () { return schedule_relations_entity_1.ScheduleRelation; } }));
exports.Entities = [
    employee_entity_1.Employee,
    resource_entity_1.Resource,
    resource_group_entity_1.ResourceGroup,
    vehicle_info_entity_1.VehicleInfo,
    meeting_room_info_entity_1.MeetingRoomInfo,
    accommodation_info_entity_1.AccommodationInfo,
    equipment_info_entity_1.EquipmentInfo,
    reservation_entity_1.Reservation,
    reservation_vehicle_entity_1.ReservationVehicle,
    reservation_snapshot_entity_1.ReservationSnapshot,
    reservation_participant_entity_1.ReservationParticipant,
    resource_manager_entity_1.ResourceManager,
    consumable_entity_1.Consumable,
    maintenance_entity_1.Maintenance,
    notification_entity_1.Notification,
    notification_type_entity_1.NotificationTypeEntity,
    employee_notification_entity_1.EmployeeNotification,
    file_entity_1.File,
    view_1.EmployeeReservationStats,
    view_1.ResourceUsageStats,
    view_1.VehicleMaintenanceHistory,
    view_1.ConsumableMaintenanceStats,
    file_maintenance_entity_1.FileMaintenance,
    file_reservation_vehicle_entity_1.FileReservationVehicle,
    file_resource_entity_1.FileResource,
    file_vehicle_info_entity_1.FileVehicleInfo,
    schedule_entity_1.Schedule,
    schedule_relations_entity_1.ScheduleRelation,
    schedule_participant_entity_1.ScheduleParticipant,
];
exports.EntitiesMap = {
    Employee: employee_entity_1.Employee,
    Resource: resource_entity_1.Resource,
    ResourceGroup: resource_group_entity_1.ResourceGroup,
    VehicleInfo: vehicle_info_entity_1.VehicleInfo,
    MeetingRoomInfo: meeting_room_info_entity_1.MeetingRoomInfo,
    AccommodationInfo: accommodation_info_entity_1.AccommodationInfo,
    EquipmentInfo: equipment_info_entity_1.EquipmentInfo,
    Reservation: reservation_entity_1.Reservation,
    ReservationVehicle: reservation_vehicle_entity_1.ReservationVehicle,
    ReservationSnapshot: reservation_snapshot_entity_1.ReservationSnapshot,
    ReservationParticipant: reservation_participant_entity_1.ReservationParticipant,
    ResourceManager: resource_manager_entity_1.ResourceManager,
    Consumable: consumable_entity_1.Consumable,
    Maintenance: maintenance_entity_1.Maintenance,
    Notification: notification_entity_1.Notification,
    NotificationTypeEntity: notification_type_entity_1.NotificationTypeEntity,
    EmployeeNotification: employee_notification_entity_1.EmployeeNotification,
    File: file_entity_1.File,
    EmployeeReservationStats: view_1.EmployeeReservationStats,
    ResourceUsageStats: view_1.ResourceUsageStats,
    VehicleMaintenanceHistory: view_1.VehicleMaintenanceHistory,
    ConsumableMaintenanceStats: view_1.ConsumableMaintenanceStats,
    FileMaintenance: file_maintenance_entity_1.FileMaintenance,
    FileReservationVehicle: file_reservation_vehicle_entity_1.FileReservationVehicle,
    FileResource: file_resource_entity_1.FileResource,
    FileVehicleInfo: file_vehicle_info_entity_1.FileVehicleInfo,
    Schedule: schedule_entity_1.Schedule,
    ScheduleParticipant: schedule_participant_entity_1.ScheduleParticipant,
    ScheduleRelation: schedule_relations_entity_1.ScheduleRelation,
};


/***/ }),

/***/ "./libs/entities/maintenance.entity.ts":
/*!*********************************************!*\
  !*** ./libs/entities/maintenance.entity.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Maintenance = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const consumable_entity_1 = __webpack_require__(/*! ./consumable.entity */ "./libs/entities/consumable.entity.ts");
let Maintenance = class Maintenance {
};
exports.Maintenance = Maintenance;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Maintenance.prototype, "maintenanceId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Maintenance.prototype, "consumableId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Maintenance.prototype, "date", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Maintenance.prototype, "mileage", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Maintenance.prototype, "cost", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'json', nullable: true, comment: '정비사진 배열' }),
    __metadata("design:type", Array)
], Maintenance.prototype, "images", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Maintenance.prototype, "maintananceBy", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Maintenance.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Maintenance.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => consumable_entity_1.Consumable),
    (0, typeorm_1.JoinColumn)({ name: 'consumableId' }),
    __metadata("design:type", typeof (_c = typeof consumable_entity_1.Consumable !== "undefined" && consumable_entity_1.Consumable) === "function" ? _c : Object)
], Maintenance.prototype, "consumable", void 0);
exports.Maintenance = Maintenance = __decorate([
    (0, typeorm_1.Entity)('maintenances')
], Maintenance);


/***/ }),

/***/ "./libs/entities/meeting-room-info.entity.ts":
/*!***************************************************!*\
  !*** ./libs/entities/meeting-room-info.entity.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomInfo = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
let MeetingRoomInfo = class MeetingRoomInfo {
};
exports.MeetingRoomInfo = MeetingRoomInfo;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], MeetingRoomInfo.prototype, "meetingRoomInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], MeetingRoomInfo.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => resource_entity_1.Resource, resource => resource.meetingRoomInfo),
    (0, typeorm_1.JoinColumn)({ name: 'resourceId' }),
    __metadata("design:type", typeof (_a = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _a : Object)
], MeetingRoomInfo.prototype, "resource", void 0);
exports.MeetingRoomInfo = MeetingRoomInfo = __decorate([
    (0, typeorm_1.Entity)('meeting_room_infos')
], MeetingRoomInfo);


/***/ }),

/***/ "./libs/entities/notification-type.entity.ts":
/*!***************************************************!*\
  !*** ./libs/entities/notification-type.entity.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationTypeEntity = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
let NotificationTypeEntity = class NotificationTypeEntity {
};
exports.NotificationTypeEntity = NotificationTypeEntity;
__decorate([
    (0, typeorm_1.PrimaryColumn)({
        type: 'enum',
        enum: notification_type_enum_1.NotificationType,
        enumName: 'notifications_notificationtype_enum',
        comment: '알림 타입 (기존 notifications 테이블과 동일한 ENUM 사용)',
    }),
    __metadata("design:type", typeof (_a = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _a : Object)
], NotificationTypeEntity.prototype, "notificationType", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'jsonb',
        comment: '알림 발송 시 필요한 정보 요구사항',
    }),
    __metadata("design:type", Object)
], NotificationTypeEntity.prototype, "requirements", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: '기본 알림 제목 템플릿',
    }),
    __metadata("design:type", String)
], NotificationTypeEntity.prototype, "defaultTitleTemplate", void 0);
__decorate([
    (0, typeorm_1.Column)({
        comment: '기본 알림 내용 템플릿',
    }),
    __metadata("design:type", String)
], NotificationTypeEntity.prototype, "defaultBodyTemplate", void 0);
__decorate([
    (0, typeorm_1.Column)({
        nullable: true,
        comment: '알림 설명',
    }),
    __metadata("design:type", String)
], NotificationTypeEntity.prototype, "description", void 0);
exports.NotificationTypeEntity = NotificationTypeEntity = __decorate([
    (0, typeorm_1.Entity)('notification_types')
], NotificationTypeEntity);


/***/ }),

/***/ "./libs/entities/notification.entity.ts":
/*!**********************************************!*\
  !*** ./libs/entities/notification.entity.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Notification = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_notification_entity_1 = __webpack_require__(/*! ./employee-notification.entity */ "./libs/entities/employee-notification.entity.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
let Notification = class Notification {
};
exports.Notification = Notification;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Notification.prototype, "notificationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Notification.prototype, "title", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Notification.prototype, "body", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: notification_type_enum_1.NotificationType,
        nullable: true,
    }),
    __metadata("design:type", typeof (_a = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _a : Object)
], Notification.prototype, "notificationType", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Notification.prototype, "notificationData", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Notification.prototype, "isSent", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Notification.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => employee_notification_entity_1.EmployeeNotification, (notification) => notification.notification),
    __metadata("design:type", Array)
], Notification.prototype, "employees", void 0);
exports.Notification = Notification = __decorate([
    (0, typeorm_1.Entity)('notifications')
], Notification);


/***/ }),

/***/ "./libs/entities/reservation-participant.entity.ts":
/*!*********************************************************!*\
  !*** ./libs/entities/reservation-participant.entity.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationParticipant = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_entity_1 = __webpack_require__(/*! ./reservation.entity */ "./libs/entities/reservation.entity.ts");
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./libs/entities/employee.entity.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
let ReservationParticipant = class ReservationParticipant {
};
exports.ReservationParticipant = ReservationParticipant;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], ReservationParticipant.prototype, "participantId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ReservationParticipant.prototype, "reservationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ReservationParticipant.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: reservation_type_enum_1.ParticipantsType,
    }),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ParticipantsType !== "undefined" && reservation_type_enum_1.ParticipantsType) === "function" ? _a : Object)
], ReservationParticipant.prototype, "type", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => reservation_entity_1.Reservation),
    (0, typeorm_1.JoinColumn)({ name: 'reservationId' }),
    __metadata("design:type", typeof (_b = typeof reservation_entity_1.Reservation !== "undefined" && reservation_entity_1.Reservation) === "function" ? _b : Object)
], ReservationParticipant.prototype, "reservation", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_c = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _c : Object)
], ReservationParticipant.prototype, "employee", void 0);
exports.ReservationParticipant = ReservationParticipant = __decorate([
    (0, typeorm_1.Entity)('reservation_participants')
], ReservationParticipant);


/***/ }),

/***/ "./libs/entities/reservation-snapshot.entity.ts":
/*!******************************************************!*\
  !*** ./libs/entities/reservation-snapshot.entity.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationSnapshot = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./libs/entities/employee.entity.ts");
let ReservationSnapshot = class ReservationSnapshot {
};
exports.ReservationSnapshot = ReservationSnapshot;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], ReservationSnapshot.prototype, "snapshotId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ReservationSnapshot.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ReservationSnapshot.prototype, "step", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ReservationSnapshot.prototype, "resourceType", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "droppableGroupData", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "dateRange", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "startTime", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "endTime", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "timeRange", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", Number)
], ReservationSnapshot.prototype, "timeUnit", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "selectedResource", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ReservationSnapshot.prototype, "title", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], ReservationSnapshot.prototype, "reminderTimes", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], ReservationSnapshot.prototype, "isAllDay", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], ReservationSnapshot.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], ReservationSnapshot.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], ReservationSnapshot.prototype, "attendees", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ReservationSnapshot.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ReservationSnapshot.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_c = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _c : Object)
], ReservationSnapshot.prototype, "employee", void 0);
exports.ReservationSnapshot = ReservationSnapshot = __decorate([
    (0, typeorm_1.Entity)('reservation_snapshots')
], ReservationSnapshot);


/***/ }),

/***/ "./libs/entities/reservation-vehicle.entity.ts":
/*!*****************************************************!*\
  !*** ./libs/entities/reservation-vehicle.entity.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationVehicle = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_entity_1 = __webpack_require__(/*! ./reservation.entity */ "./libs/entities/reservation.entity.ts");
const vehicle_info_entity_1 = __webpack_require__(/*! ./vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
let ReservationVehicle = class ReservationVehicle {
};
exports.ReservationVehicle = ReservationVehicle;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], ReservationVehicle.prototype, "reservationVehicleId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ReservationVehicle.prototype, "reservationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ReservationVehicle.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", Number)
], ReservationVehicle.prototype, "startOdometer", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", Number)
], ReservationVehicle.prototype, "endOdometer", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", Number)
], ReservationVehicle.prototype, "startFuelLevel", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", Number)
], ReservationVehicle.prototype, "endFuelLevel", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], ReservationVehicle.prototype, "isReturned", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp with time zone', nullable: true }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ReservationVehicle.prototype, "returnedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => reservation_entity_1.Reservation),
    (0, typeorm_1.JoinColumn)({ name: 'reservationId' }),
    __metadata("design:type", typeof (_b = typeof reservation_entity_1.Reservation !== "undefined" && reservation_entity_1.Reservation) === "function" ? _b : Object)
], ReservationVehicle.prototype, "reservation", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => vehicle_info_entity_1.VehicleInfo),
    (0, typeorm_1.JoinColumn)({ name: 'vehicleInfoId' }),
    __metadata("design:type", typeof (_c = typeof vehicle_info_entity_1.VehicleInfo !== "undefined" && vehicle_info_entity_1.VehicleInfo) === "function" ? _c : Object)
], ReservationVehicle.prototype, "vehicleInfo", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", Object)
], ReservationVehicle.prototype, "location", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ReservationVehicle.prototype, "returnedBy", void 0);
exports.ReservationVehicle = ReservationVehicle = __decorate([
    (0, typeorm_1.Entity)('reservation_vehicles')
], ReservationVehicle);


/***/ }),

/***/ "./libs/entities/reservation.entity.ts":
/*!*********************************************!*\
  !*** ./libs/entities/reservation.entity.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Reservation = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
const reservation_participant_entity_1 = __webpack_require__(/*! ./reservation-participant.entity */ "./libs/entities/reservation-participant.entity.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_vehicle_entity_1 = __webpack_require__(/*! ./reservation-vehicle.entity */ "./libs/entities/reservation-vehicle.entity.ts");
let Reservation = class Reservation {
};
exports.Reservation = Reservation;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Reservation.prototype, "reservationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Reservation.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Reservation.prototype, "title", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Reservation.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Reservation.prototype, "startDate", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Reservation.prototype, "endDate", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: reservation_type_enum_1.ReservationStatus,
    }),
    __metadata("design:type", typeof (_c = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _c : Object)
], Reservation.prototype, "status", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Reservation.prototype, "rejectReason", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Reservation.prototype, "isAllDay", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Reservation.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], Reservation.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => resource_entity_1.Resource),
    (0, typeorm_1.JoinColumn)({ name: 'resourceId' }),
    __metadata("design:type", typeof (_d = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _d : Object)
], Reservation.prototype, "resource", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => reservation_participant_entity_1.ReservationParticipant, (participant) => participant.reservation),
    __metadata("design:type", Array)
], Reservation.prototype, "participants", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => reservation_vehicle_entity_1.ReservationVehicle, (reservationVehicle) => reservationVehicle.reservation),
    __metadata("design:type", Array)
], Reservation.prototype, "reservationVehicles", void 0);
exports.Reservation = Reservation = __decorate([
    (0, typeorm_1.Entity)('reservations')
], Reservation);


/***/ }),

/***/ "./libs/entities/resource-group.entity.ts":
/*!************************************************!*\
  !*** ./libs/entities/resource-group.entity.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroup = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
const resource_type_enum_1 = __webpack_require__(/*! ../enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
let ResourceGroup = class ResourceGroup {
};
exports.ResourceGroup = ResourceGroup;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], ResourceGroup.prototype, "resourceGroupId", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    __metadata("design:type", String)
], ResourceGroup.prototype, "title", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ResourceGroup.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ResourceGroup.prototype, "parentResourceGroupId", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: resource_type_enum_1.ResourceType,
    }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], ResourceGroup.prototype, "type", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], ResourceGroup.prototype, "order", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => resource_entity_1.Resource, (resource) => resource.resourceGroup),
    __metadata("design:type", Array)
], ResourceGroup.prototype, "resources", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => ResourceGroup, (resourceGroup) => resourceGroup.children),
    (0, typeorm_1.JoinColumn)({ name: 'parentResourceGroupId' }),
    __metadata("design:type", ResourceGroup)
], ResourceGroup.prototype, "parent", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => ResourceGroup, (resourceGroup) => resourceGroup.parent),
    __metadata("design:type", Array)
], ResourceGroup.prototype, "children", void 0);
exports.ResourceGroup = ResourceGroup = __decorate([
    (0, typeorm_1.Entity)('resource_groups')
], ResourceGroup);


/***/ }),

/***/ "./libs/entities/resource-manager.entity.ts":
/*!**************************************************!*\
  !*** ./libs/entities/resource-manager.entity.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceManager = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./libs/entities/employee.entity.ts");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
let ResourceManager = class ResourceManager {
};
exports.ResourceManager = ResourceManager;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], ResourceManager.prototype, "resourceManagerId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ResourceManager.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ResourceManager.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_a = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _a : Object)
], ResourceManager.prototype, "employee", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => resource_entity_1.Resource),
    (0, typeorm_1.JoinColumn)({ name: 'resourceId' }),
    __metadata("design:type", typeof (_b = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _b : Object)
], ResourceManager.prototype, "resource", void 0);
exports.ResourceManager = ResourceManager = __decorate([
    (0, typeorm_1.Entity)('resource_managers')
], ResourceManager);


/***/ }),

/***/ "./libs/entities/resource.entity.ts":
/*!******************************************!*\
  !*** ./libs/entities/resource.entity.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Resource = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_group_entity_1 = __webpack_require__(/*! ./resource-group.entity */ "./libs/entities/resource-group.entity.ts");
const vehicle_info_entity_1 = __webpack_require__(/*! ./vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
const meeting_room_info_entity_1 = __webpack_require__(/*! ./meeting-room-info.entity */ "./libs/entities/meeting-room-info.entity.ts");
const accommodation_info_entity_1 = __webpack_require__(/*! ./accommodation-info.entity */ "./libs/entities/accommodation-info.entity.ts");
const reservation_entity_1 = __webpack_require__(/*! ./reservation.entity */ "./libs/entities/reservation.entity.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const resource_manager_entity_1 = __webpack_require__(/*! ./resource-manager.entity */ "./libs/entities/resource-manager.entity.ts");
const equipment_info_entity_1 = __webpack_require__(/*! ./equipment-info.entity */ "./libs/entities/equipment-info.entity.ts");
let Resource = class Resource {
};
exports.Resource = Resource;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Resource.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], Resource.prototype, "resourceGroupId", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    __metadata("design:type", String)
], Resource.prototype, "name", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Resource.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Resource.prototype, "location", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Resource.prototype, "locationURLs", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Resource.prototype, "isAvailable", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Resource.prototype, "unavailableReason", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb'),
    __metadata("design:type", Array)
], Resource.prototype, "images", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Resource.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Resource.prototype, "notifyReservationChange", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'enum', enum: resource_type_enum_1.ResourceType }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], Resource.prototype, "type", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Resource.prototype, "order", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Resource.prototype, "deletedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => resource_group_entity_1.ResourceGroup),
    (0, typeorm_1.JoinColumn)({ name: 'resourceGroupId' }),
    __metadata("design:type", typeof (_c = typeof resource_group_entity_1.ResourceGroup !== "undefined" && resource_group_entity_1.ResourceGroup) === "function" ? _c : Object)
], Resource.prototype, "resourceGroup", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => vehicle_info_entity_1.VehicleInfo, (vehicleInfo) => vehicleInfo.resource),
    __metadata("design:type", typeof (_d = typeof vehicle_info_entity_1.VehicleInfo !== "undefined" && vehicle_info_entity_1.VehicleInfo) === "function" ? _d : Object)
], Resource.prototype, "vehicleInfo", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => meeting_room_info_entity_1.MeetingRoomInfo, (meetingRoomInfo) => meetingRoomInfo.resource),
    __metadata("design:type", typeof (_e = typeof meeting_room_info_entity_1.MeetingRoomInfo !== "undefined" && meeting_room_info_entity_1.MeetingRoomInfo) === "function" ? _e : Object)
], Resource.prototype, "meetingRoomInfo", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => accommodation_info_entity_1.AccommodationInfo, (accommodationInfo) => accommodationInfo.resource),
    __metadata("design:type", typeof (_f = typeof accommodation_info_entity_1.AccommodationInfo !== "undefined" && accommodation_info_entity_1.AccommodationInfo) === "function" ? _f : Object)
], Resource.prototype, "accommodationInfo", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => equipment_info_entity_1.EquipmentInfo, (equipmentInfo) => equipmentInfo.resource),
    __metadata("design:type", typeof (_g = typeof equipment_info_entity_1.EquipmentInfo !== "undefined" && equipment_info_entity_1.EquipmentInfo) === "function" ? _g : Object)
], Resource.prototype, "equipmentInfo", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => reservation_entity_1.Reservation, (reservation) => reservation.resource),
    __metadata("design:type", Array)
], Resource.prototype, "reservations", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => resource_manager_entity_1.ResourceManager, (resourceManager) => resourceManager.resource),
    __metadata("design:type", Array)
], Resource.prototype, "resourceManagers", void 0);
exports.Resource = Resource = __decorate([
    (0, typeorm_1.Entity)('resources')
], Resource);


/***/ }),

/***/ "./libs/entities/schedule-participant.entity.ts":
/*!******************************************************!*\
  !*** ./libs/entities/schedule-participant.entity.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleParticipant = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const schedule_entity_1 = __webpack_require__(/*! ./schedule.entity */ "./libs/entities/schedule.entity.ts");
let ScheduleParticipant = class ScheduleParticipant {
};
exports.ScheduleParticipant = ScheduleParticipant;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], ScheduleParticipant.prototype, "participantId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ScheduleParticipant.prototype, "scheduleId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ScheduleParticipant.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: reservation_type_enum_1.ParticipantsType,
    }),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ParticipantsType !== "undefined" && reservation_type_enum_1.ParticipantsType) === "function" ? _a : Object)
], ScheduleParticipant.prototype, "type", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => schedule_entity_1.Schedule),
    (0, typeorm_1.JoinColumn)({ name: 'scheduleId' }),
    __metadata("design:type", typeof (_b = typeof schedule_entity_1.Schedule !== "undefined" && schedule_entity_1.Schedule) === "function" ? _b : Object)
], ScheduleParticipant.prototype, "schedule", void 0);
exports.ScheduleParticipant = ScheduleParticipant = __decorate([
    (0, typeorm_1.Entity)('schedule_participants')
], ScheduleParticipant);


/***/ }),

/***/ "./libs/entities/schedule-relations.entity.ts":
/*!****************************************************!*\
  !*** ./libs/entities/schedule-relations.entity.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleRelation = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let ScheduleRelation = class ScheduleRelation {
};
exports.ScheduleRelation = ScheduleRelation;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], ScheduleRelation.prototype, "scheduleRelationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ScheduleRelation.prototype, "scheduleId", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ScheduleRelation.prototype, "reservationId", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ScheduleRelation.prototype, "projectId", void 0);
exports.ScheduleRelation = ScheduleRelation = __decorate([
    (0, typeorm_1.Entity)('schedule_relations')
], ScheduleRelation);


/***/ }),

/***/ "./libs/entities/schedule.entity.ts":
/*!******************************************!*\
  !*** ./libs/entities/schedule.entity.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Schedule = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const schedule_participant_entity_1 = __webpack_require__(/*! ./schedule-participant.entity */ "./libs/entities/schedule-participant.entity.ts");
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
let Schedule = class Schedule {
};
exports.Schedule = Schedule;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Schedule.prototype, "scheduleId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Schedule.prototype, "title", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Schedule.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Schedule.prototype, "location", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Schedule.prototype, "startDate", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Schedule.prototype, "endDate", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Schedule.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], Schedule.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: schedule_type_enum_1.ScheduleType,
        default: schedule_type_enum_1.ScheduleType.PERSONAL,
        comment: '일정 유형 (회사전체/부서/개인)',
    }),
    __metadata("design:type", typeof (_c = typeof schedule_type_enum_1.ScheduleType !== "undefined" && schedule_type_enum_1.ScheduleType) === "function" ? _c : Object)
], Schedule.prototype, "scheduleType", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: schedule_type_enum_1.ScheduleStatus,
        default: schedule_type_enum_1.ScheduleStatus.PENDING,
        comment: '일정 상태 (대기/진행중/완료/취소)',
    }),
    __metadata("design:type", typeof (_d = typeof schedule_type_enum_1.ScheduleStatus !== "undefined" && schedule_type_enum_1.ScheduleStatus) === "function" ? _d : Object)
], Schedule.prototype, "status", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true, comment: '완료 사유' }),
    __metadata("design:type", String)
], Schedule.prototype, "completionReason", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], Schedule.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], Schedule.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_g = typeof Date !== "undefined" && Date) === "function" ? _g : Object)
], Schedule.prototype, "deletedAt", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => schedule_participant_entity_1.ScheduleParticipant, (participant) => participant.schedule),
    __metadata("design:type", Array)
], Schedule.prototype, "participants", void 0);
exports.Schedule = Schedule = __decorate([
    (0, typeorm_1.Entity)('schedules')
], Schedule);


/***/ }),

/***/ "./libs/entities/vehicle-info.entity.ts":
/*!**********************************************!*\
  !*** ./libs/entities/vehicle-info.entity.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfo = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
const consumable_entity_1 = __webpack_require__(/*! ./consumable.entity */ "./libs/entities/consumable.entity.ts");
let VehicleInfo = class VehicleInfo {
};
exports.VehicleInfo = VehicleInfo;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], VehicleInfo.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], VehicleInfo.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], VehicleInfo.prototype, "vehicleNumber", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], VehicleInfo.prototype, "leftMileage", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], VehicleInfo.prototype, "totalMileage", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], VehicleInfo.prototype, "insuranceName", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], VehicleInfo.prototype, "insuranceNumber", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true, comment: '주차위치 이미지 배열' }),
    __metadata("design:type", Array)
], VehicleInfo.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true, comment: '계기판 이미지 배열' }),
    __metadata("design:type", Array)
], VehicleInfo.prototype, "odometerImages", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true, comment: '차량 실내 이미지 배열' }),
    __metadata("design:type", Array)
], VehicleInfo.prototype, "indoorImages", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => resource_entity_1.Resource, (resource) => resource.vehicleInfo),
    (0, typeorm_1.JoinColumn)({ name: `resourceId` }),
    __metadata("design:type", typeof (_a = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _a : Object)
], VehicleInfo.prototype, "resource", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => consumable_entity_1.Consumable, (consumable) => consumable.vehicleInfo),
    __metadata("design:type", Array)
], VehicleInfo.prototype, "consumables", void 0);
exports.VehicleInfo = VehicleInfo = __decorate([
    (0, typeorm_1.Entity)('vehicle_infos')
], VehicleInfo);


/***/ }),

/***/ "./libs/entities/view/consumable-maintenance-stats.entity.ts":
/*!*******************************************************************!*\
  !*** ./libs/entities/view/consumable-maintenance-stats.entity.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStats = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let ConsumableMaintenanceStats = class ConsumableMaintenanceStats {
};
exports.ConsumableMaintenanceStats = ConsumableMaintenanceStats;
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "resourceName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "resourceType", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "vehicleNumber", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "consumableId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "consumableName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "replaceCycle", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Boolean)
], ConsumableMaintenanceStats.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "maintenanceCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ConsumableMaintenanceStats.prototype, "firstMaintenanceDate", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ConsumableMaintenanceStats.prototype, "lastMaintenanceDate", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "totalCost", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "averageCost", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "minMileage", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "maxMileage", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "averageMileage", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "averageDaysBetweenMaintenances", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "currentYear", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "currentMonth", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "recentMaintenanceCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ConsumableMaintenanceStats.prototype, "computedAt", void 0);
exports.ConsumableMaintenanceStats = ConsumableMaintenanceStats = __decorate([
    (0, typeorm_1.ViewEntity)({
        expression: `SELECT
    -- 자원 정보
    res."resourceId",
    res.name AS "resourceName",
    res.type AS "resourceType",
    
    -- 차량 정보
    vi."vehicleInfoId",
    vi."vehicleNumber",
    
    -- 소모품 정보
    c."consumableId",
    c.name AS "consumableName",
    c."replaceCycle",
    c."notifyReplacementCycle",
    
    -- 정비 통계
    COUNT(m."maintenanceId") AS "maintenanceCount",
    MIN(CAST(m.date AS timestamp)) AS "firstMaintenanceDate",
    MAX(CAST(m.date AS timestamp)) AS "lastMaintenanceDate",
    SUM(m.cost) AS "totalCost",
    AVG(m.cost) AS "averageCost",
    
    -- 마일리지 통계
    MIN(m.mileage) AS "minMileage",
    MAX(m.mileage) AS "maxMileage",
    AVG(m.mileage) AS "averageMileage",
    
    -- 정비 주기 분석
    (MAX(CAST(m.date AS timestamp)) - MIN(CAST(m.date AS timestamp))) / 
        NULLIF(COUNT(m."maintenanceId") - 1, 0) AS "averageDaysBetweenMaintenances",
    
    -- 년/월별 집계를 위한 필드
    EXTRACT(YEAR FROM NOW()) AS "currentYear",
    EXTRACT(MONTH FROM NOW()) AS "currentMonth",
    
    -- 최근 3개월 내 정비 횟수
    COUNT(CASE WHEN CAST(m.date AS timestamp) > NOW() - INTERVAL '3 months' THEN m."maintenanceId" END) AS "recentMaintenanceCount",
    
    -- 집계 시점
    NOW() AS "computedAt"
FROM
    resources res
    JOIN vehicle_infos vi ON res."resourceId" = vi."resourceId"
    JOIN consumables c ON vi."vehicleInfoId" = c."vehicleInfoId"
    LEFT JOIN maintenances m ON c."consumableId" = m."consumableId"
WHERE
    res.type = 'VEHICLE'
GROUP BY
    res."resourceId",
    res.name,
    res.type,
    vi."vehicleInfoId",
    vi."vehicleNumber",
    c."consumableId",
    c.name,
    c."replaceCycle",
    c."notifyReplacementCycle"
ORDER BY
    "resourceName",
    "consumableName"`,
    })
], ConsumableMaintenanceStats);


/***/ }),

/***/ "./libs/entities/view/employee-reservation-stats.entity.ts":
/*!*****************************************************************!*\
  !*** ./libs/entities/view/employee-reservation-stats.entity.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeReservationStats = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let EmployeeReservationStats = class EmployeeReservationStats {
};
exports.EmployeeReservationStats = EmployeeReservationStats;
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "year", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "month", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], EmployeeReservationStats.prototype, "yearMonth", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], EmployeeReservationStats.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], EmployeeReservationStats.prototype, "employeeName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "reservationCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "totalHours", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "avgHoursPerReservation", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "vehicleCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "meetingRoomCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "accommodationCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "cancellationCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeReservationStats.prototype, "computedAt", void 0);
exports.EmployeeReservationStats = EmployeeReservationStats = __decorate([
    (0, typeorm_1.ViewEntity)({
        expression: `SELECT
    -- 시간 기준
    EXTRACT(YEAR FROM r."startDate") AS year,
    EXTRACT(MONTH FROM r."startDate") AS month,
    TO_CHAR(r."startDate", 'YYYY-MM') AS "yearMonth",
    
    -- 직원 정보
    rp."employeeId",
    e.name AS "employeeName",
    
    -- 예약 통계
    COUNT(DISTINCT r."reservationId") AS "reservationCount",
    SUM(EXTRACT(EPOCH FROM (r."endDate" - r."startDate"))/3600) AS "totalHours",
    AVG(EXTRACT(EPOCH FROM (r."endDate" - r."startDate"))/3600) AS "avgHoursPerReservation",
    
    -- 자원 유형별 예약 횟수
    COUNT(DISTINCT CASE WHEN res.type = 'VEHICLE' THEN r."reservationId" END) AS "vehicleCount",
    COUNT(DISTINCT CASE WHEN res.type = 'MEETING_ROOM' THEN r."reservationId" END) AS "meetingRoomCount",
    COUNT(DISTINCT CASE WHEN res.type = 'ACCOMMODATION' THEN r."reservationId" END) AS "accommodationCount",

    -- 취소 및 변경 빈도
    COUNT(DISTINCT CASE WHEN r.status = 'CANCELLED' THEN r."reservationId" END) AS "cancellationCount",
    
    -- 가장 많이 예약한 자원 (서브쿼리로 처리해야 할 수 있음)
    -- 복잡한 구현은 애플리케이션 코드에서 처리 가능
    
    -- 집계 시점
    NOW() AS "computedAt"
FROM 
    reservations r
    JOIN reservation_participants rp ON r."reservationId" = rp."reservationId"
    JOIN resources res ON r."resourceId" = res."resourceId"
    JOIN employees e ON rp."employeeId" = e."employeeId"
WHERE
    rp.type = 'RESERVER'
GROUP BY
    EXTRACT(YEAR FROM r."startDate"),
    EXTRACT(MONTH FROM r."startDate"),
    TO_CHAR(r."startDate", 'YYYY-MM'),
    rp."employeeId",
    e.name`,
    })
], EmployeeReservationStats);


/***/ }),

/***/ "./libs/entities/view/index.ts":
/*!*************************************!*\
  !*** ./libs/entities/view/index.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStats = exports.VehicleMaintenanceHistory = exports.ResourceUsageStats = exports.EmployeeReservationStats = void 0;
var employee_reservation_stats_entity_1 = __webpack_require__(/*! ./employee-reservation-stats.entity */ "./libs/entities/view/employee-reservation-stats.entity.ts");
Object.defineProperty(exports, "EmployeeReservationStats", ({ enumerable: true, get: function () { return employee_reservation_stats_entity_1.EmployeeReservationStats; } }));
var resource_usage_stats_entity_1 = __webpack_require__(/*! ./resource-usage-stats.entity */ "./libs/entities/view/resource-usage-stats.entity.ts");
Object.defineProperty(exports, "ResourceUsageStats", ({ enumerable: true, get: function () { return resource_usage_stats_entity_1.ResourceUsageStats; } }));
var vehicle_maintenance_history_entity_1 = __webpack_require__(/*! ./vehicle-maintenance-history.entity */ "./libs/entities/view/vehicle-maintenance-history.entity.ts");
Object.defineProperty(exports, "VehicleMaintenanceHistory", ({ enumerable: true, get: function () { return vehicle_maintenance_history_entity_1.VehicleMaintenanceHistory; } }));
var consumable_maintenance_stats_entity_1 = __webpack_require__(/*! ./consumable-maintenance-stats.entity */ "./libs/entities/view/consumable-maintenance-stats.entity.ts");
Object.defineProperty(exports, "ConsumableMaintenanceStats", ({ enumerable: true, get: function () { return consumable_maintenance_stats_entity_1.ConsumableMaintenanceStats; } }));


/***/ }),

/***/ "./libs/entities/view/resource-usage-stats.entity.ts":
/*!***********************************************************!*\
  !*** ./libs/entities/view/resource-usage-stats.entity.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceUsageStats = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let ResourceUsageStats = class ResourceUsageStats {
};
exports.ResourceUsageStats = ResourceUsageStats;
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "resourceName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "resourceType", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "employeeName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "year", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "month", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "yearMonth", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "reservationCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "totalHours", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "countRank", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "hoursRank", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ResourceUsageStats.prototype, "computedAt", void 0);
exports.ResourceUsageStats = ResourceUsageStats = __decorate([
    (0, typeorm_1.ViewEntity)({
        expression: `SELECT
    -- 자원 정보
    res."resourceId",
    res.name AS "resourceName",
    res.type AS "resourceType",
    
    -- 직원 정보
    rp."employeeId",
    e.name AS "employeeName",
    
    -- 시간 기준
    EXTRACT(YEAR FROM r."startDate") AS year,
    EXTRACT(MONTH FROM r."startDate") AS month,
    TO_CHAR(r."startDate", 'YYYY-MM') AS "yearMonth",
    
    -- 이용 통계
    COUNT(DISTINCT r."reservationId") AS "reservationCount",
    SUM(EXTRACT(EPOCH FROM (r."endDate" - r."startDate"))/3600) AS "totalHours",
    
    -- 순위 계산 (동일 자원에 대한 직원별 예약 횟수 순위)
    RANK() OVER (
        PARTITION BY res."resourceId", EXTRACT(YEAR FROM r."startDate"), EXTRACT(MONTH FROM r."startDate")
        ORDER BY COUNT(DISTINCT r."reservationId") DESC
    ) AS "countRank",
    
    -- 시간 기준 순위 계산
    RANK() OVER (
        PARTITION BY res."resourceId", EXTRACT(YEAR FROM r."startDate"), EXTRACT(MONTH FROM r."startDate")
        ORDER BY SUM(EXTRACT(EPOCH FROM (r."endDate" - r."startDate"))/3600) DESC
    ) AS "hoursRank",
    
    -- 집계 시점
    NOW() AS "computedAt"
FROM 
    reservations r
    JOIN reservation_participants rp ON r."reservationId" = rp."reservationId"
    JOIN resources res ON r."resourceId" = res."resourceId"
    JOIN employees e ON rp."employeeId" = e."employeeId"
WHERE
    rp.type = 'RESERVER' -- 예약 주체만 집계
    AND r.status <> 'CANCELLED' -- 취소된 예약 제외
GROUP BY
    res."resourceId",
    res.name,
    res.type,
    rp."employeeId",
    e.name,
    EXTRACT(YEAR FROM r."startDate"),
    EXTRACT(MONTH FROM r."startDate"),
    TO_CHAR(r."startDate", 'YYYY-MM')
ORDER BY
    res."resourceId",
    year,
    month,
    "reservationCount" DESC,
    "totalHours" DESC`,
    })
], ResourceUsageStats);


/***/ }),

/***/ "./libs/entities/view/vehicle-maintenance-history.entity.ts":
/*!******************************************************************!*\
  !*** ./libs/entities/view/vehicle-maintenance-history.entity.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleMaintenanceHistory = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let VehicleMaintenanceHistory = class VehicleMaintenanceHistory {
};
exports.VehicleMaintenanceHistory = VehicleMaintenanceHistory;
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "resourceName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "vehicleNumber", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "consumableId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "consumableName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], VehicleMaintenanceHistory.prototype, "replaceCycle", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Boolean)
], VehicleMaintenanceHistory.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "maintenanceId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "maintenanceDate", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], VehicleMaintenanceHistory.prototype, "mileage", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], VehicleMaintenanceHistory.prototype, "cost", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "maintananceBy", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Array)
], VehicleMaintenanceHistory.prototype, "images", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], VehicleMaintenanceHistory.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], VehicleMaintenanceHistory.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "responsibleEmployeeId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "responsibleEmployeeName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "department", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "position", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], VehicleMaintenanceHistory.prototype, "year", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], VehicleMaintenanceHistory.prototype, "month", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "dateStr", void 0);
exports.VehicleMaintenanceHistory = VehicleMaintenanceHistory = __decorate([
    (0, typeorm_1.ViewEntity)({
        expression: `SELECT
    -- 자원 정보
    res."resourceId",
    res.name AS "resourceName",
    vi."vehicleInfoId",
    vi."vehicleNumber",
    
    -- 소모품 정보
    c."consumableId",
    c.name AS "consumableName",
    c."replaceCycle",
    c."notifyReplacementCycle",
    
    -- 정비 정보
    m."maintenanceId",
    m.date AS "maintenanceDate",
    m.mileage,
    m.cost,
    m."maintananceBy",
    m.images,
    m."createdAt",
    m."updatedAt",
    
    -- 담당자 정보
    e."employeeId" AS "responsibleEmployeeId",
    e.name AS "responsibleEmployeeName",
    e.department,
    e.position,
    
    -- 시간 정보
    EXTRACT(YEAR FROM CAST(m.date AS timestamp)) AS year,
    EXTRACT(MONTH FROM CAST(m.date AS timestamp)) AS month,
    m.date AS "dateStr"
FROM
    resources res
    JOIN vehicle_infos vi ON res."resourceId" = vi."resourceId"
    LEFT JOIN consumables c ON vi."vehicleInfoId" = c."vehicleInfoId"
    LEFT JOIN maintenances m ON c."consumableId" = m."consumableId"
    LEFT JOIN employees e ON m."maintananceBy"::uuid = e."employeeId"
WHERE
    res.type = 'VEHICLE'
    AND m."maintenanceId" IS NOT NULL
ORDER BY
    res."resourceId",
    CAST(m.date AS timestamp) DESC`,
    })
], VehicleMaintenanceHistory);


/***/ }),

/***/ "./libs/enums/mime-type.enum.ts":
/*!**************************************!*\
  !*** ./libs/enums/mime-type.enum.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MimeType = void 0;
var MimeType;
(function (MimeType) {
    MimeType["IMAGE_JPEG"] = "image/jpeg";
    MimeType["IMAGE_PNG"] = "image/png";
    MimeType["IMAGE_WEBP"] = "image/webp";
})(MimeType || (exports.MimeType = MimeType = {}));


/***/ }),

/***/ "./libs/enums/notification-type.enum.ts":
/*!**********************************************!*\
  !*** ./libs/enums/notification-type.enum.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationType = void 0;
var NotificationType;
(function (NotificationType) {
    NotificationType["RESERVATION_STATUS_PENDING"] = "RESERVATION_STATUS_PENDING";
    NotificationType["RESERVATION_STATUS_CONFIRMED"] = "RESERVATION_STATUS_CONFIRMED";
    NotificationType["RESERVATION_STATUS_CANCELLED"] = "RESERVATION_STATUS_CANCELLED";
    NotificationType["RESERVATION_STATUS_REJECTED"] = "RESERVATION_STATUS_REJECTED";
    NotificationType["RESERVATION_DATE_UPCOMING"] = "RESERVATION_DATE_UPCOMING";
    NotificationType["RESERVATION_DATE_REMINDING"] = "RESERVATION_DATE_REMINDING";
    NotificationType["RESERVATION_TIME_CHANGED"] = "RESERVATION_TIME_CHANGED";
    NotificationType["RESERVATION_PARTICIPANT_CHANGED"] = "RESERVATION_PARTICIPANT_CHANGED";
    NotificationType["RESOURCE_CONSUMABLE_REPLACING"] = "RESOURCE_CONSUMABLE_REPLACING";
    NotificationType["RESOURCE_CONSUMABLE_DELAYED_REPLACING"] = "RESOURCE_CONSUMABLE_DELAYED_REPLACING";
    NotificationType["RESOURCE_VEHICLE_RETURNED"] = "RESOURCE_VEHICLE_RETURNED";
    NotificationType["RESOURCE_VEHICLE_DELAYED_RETURNED"] = "RESOURCE_VEHICLE_DELAYED_RETURNED";
    NotificationType["RESOURCE_MAINTENANCE_COMPLETED"] = "RESOURCE_MAINTENANCE_COMPLETED";
})(NotificationType || (exports.NotificationType = NotificationType = {}));


/***/ }),

/***/ "./libs/enums/reservation-type.enum.ts":
/*!*********************************************!*\
  !*** ./libs/enums/reservation-type.enum.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ParticipantsType = exports.ReservationStatus = void 0;
var ReservationStatus;
(function (ReservationStatus) {
    ReservationStatus["PENDING"] = "PENDING";
    ReservationStatus["CONFIRMED"] = "CONFIRMED";
    ReservationStatus["USING"] = "USING";
    ReservationStatus["CANCELLED"] = "CANCELLED";
    ReservationStatus["REJECTED"] = "REJECTED";
    ReservationStatus["CLOSED"] = "CLOSED";
})(ReservationStatus || (exports.ReservationStatus = ReservationStatus = {}));
var ParticipantsType;
(function (ParticipantsType) {
    ParticipantsType["RESERVER"] = "RESERVER";
    ParticipantsType["PARTICIPANT"] = "PARTICIPANT";
    ParticipantsType["CC_RECEIPIENT"] = "CC_RECEIPIENT";
})(ParticipantsType || (exports.ParticipantsType = ParticipantsType = {}));


/***/ }),

/***/ "./libs/enums/resource-type.enum.ts":
/*!******************************************!*\
  !*** ./libs/enums/resource-type.enum.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceType = void 0;
var ResourceType;
(function (ResourceType) {
    ResourceType["MEETING_ROOM"] = "MEETING_ROOM";
    ResourceType["VEHICLE"] = "VEHICLE";
    ResourceType["ACCOMMODATION"] = "ACCOMMODATION";
    ResourceType["EQUIPMENT"] = "EQUIPMENT";
})(ResourceType || (exports.ResourceType = ResourceType = {}));


/***/ }),

/***/ "./libs/enums/role-type.enum.ts":
/*!**************************************!*\
  !*** ./libs/enums/role-type.enum.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Role = void 0;
var Role;
(function (Role) {
    Role["USER"] = "USER";
    Role["RESOURCE_ADMIN"] = "RESOURCE_ADMIN";
    Role["SYSTEM_ADMIN"] = "SYSTEM_ADMIN";
})(Role || (exports.Role = Role = {}));


/***/ }),

/***/ "./libs/enums/schedule-type.enum.ts":
/*!******************************************!*\
  !*** ./libs/enums/schedule-type.enum.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleStatus = exports.ScheduleType = void 0;
var ScheduleType;
(function (ScheduleType) {
    ScheduleType["COMPANY"] = "COMPANY";
    ScheduleType["DEPARTMENT"] = "DEPARTMENT";
    ScheduleType["PERSONAL"] = "PERSONAL";
})(ScheduleType || (exports.ScheduleType = ScheduleType = {}));
var ScheduleStatus;
(function (ScheduleStatus) {
    ScheduleStatus["PENDING"] = "PENDING";
    ScheduleStatus["PROCESSING"] = "PROCESSING";
    ScheduleStatus["COMPLETED"] = "COMPLETED";
    ScheduleStatus["CANCELLED"] = "CANCELLED";
})(ScheduleStatus || (exports.ScheduleStatus = ScheduleStatus = {}));


/***/ }),

/***/ "./libs/guards/jwt-auth.guard.ts":
/*!***************************************!*\
  !*** ./libs/guards/jwt-auth.guard.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.JwtAuthGuard = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const passport_1 = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
let JwtAuthGuard = class JwtAuthGuard extends (0, passport_1.AuthGuard)('jwt') {
    constructor(reflector) {
        super();
        this.reflector = reflector;
    }
    canActivate(context) {
        const isPublic = this.reflector.getAllAndOverride(public_decorator_1.IS_PUBLIC_KEY, [
            context.getHandler(),
            context.getClass(),
        ]);
        if (isPublic) {
            return true;
        }
        return super.canActivate(context);
    }
};
exports.JwtAuthGuard = JwtAuthGuard;
exports.JwtAuthGuard = JwtAuthGuard = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof core_1.Reflector !== "undefined" && core_1.Reflector) === "function" ? _a : Object])
], JwtAuthGuard);


/***/ }),

/***/ "./libs/guards/role.guard.ts":
/*!***********************************!*\
  !*** ./libs/guards/role.guard.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.RolesGuard = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
let RolesGuard = class RolesGuard {
    constructor(reflector) {
        this.reflector = reflector;
    }
    canActivate(context) {
        const requiredRoles = this.reflector.getAllAndOverride(role_decorator_1.ROLES_KEY, [
            context.getHandler(),
            context.getClass(),
        ]);
        if (!requiredRoles) {
            return true;
        }
        const { user } = context.switchToHttp().getRequest();
        return requiredRoles.some((role) => user.roles?.includes(role));
    }
};
exports.RolesGuard = RolesGuard;
exports.RolesGuard = RolesGuard = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof core_1.Reflector !== "undefined" && core_1.Reflector) === "function" ? _a : Object])
], RolesGuard);


/***/ }),

/***/ "./libs/interceptors/error.interceptor.ts":
/*!************************************************!*\
  !*** ./libs/interceptors/error.interceptor.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ErrorInterceptor = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const rxjs_1 = __webpack_require__(/*! rxjs */ "rxjs");
const operators_1 = __webpack_require__(/*! rxjs/operators */ "rxjs/operators");
let ErrorInterceptor = class ErrorInterceptor {
    intercept(context, next) {
        return next.handle().pipe((0, operators_1.catchError)((error) => {
            if (error instanceof common_1.HttpException) {
                console.error('Error:', error);
                const response = error.getResponse();
                const message = response.message;
                const errorMessage = typeof message === 'object'
                    ? Array.isArray(message)
                        ? message.join('\n')
                        : message
                    : error.message;
                return (0, rxjs_1.throwError)(() => ({
                    success: false,
                    message: errorMessage,
                    statusCode: error.getStatus(),
                }));
            }
            console.error('Unexpected error:', error);
            return (0, rxjs_1.throwError)(() => ({
                success: false,
                message: '예상치 못한 오류가 발생했습니다.',
                statusCode: 500,
            }));
        }));
    }
};
exports.ErrorInterceptor = ErrorInterceptor;
exports.ErrorInterceptor = ErrorInterceptor = __decorate([
    (0, common_1.Injectable)()
], ErrorInterceptor);


/***/ }),

/***/ "./libs/interceptors/request.interceptor.ts":
/*!**************************************************!*\
  !*** ./libs/interceptors/request.interceptor.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.RequestInterceptor = void 0;
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const operators_1 = __webpack_require__(/*! rxjs/operators */ "rxjs/operators");
let RequestInterceptor = class RequestInterceptor {
    intercept(context, next) {
        const request = context.switchToHttp().getRequest();
        const { method, url, body, query, params } = request;
        const now = Date.now();
        console.log(`[Request] ${date_util_1.DateUtil.now().toISOString()} ${method} ${url}`);
        if (Object.keys(body).length > 0) {
            console.log('Body:', body);
        }
        if (Object.keys(query).length > 0) {
            console.log('Query:', query);
        }
        if (Object.keys(params).length > 0) {
            console.log('Params:', params);
        }
        return next.handle().pipe((0, operators_1.tap)(() => {
            console.log(`[Response Time] ${Date.now() - now}ms`);
        }));
    }
};
exports.RequestInterceptor = RequestInterceptor;
exports.RequestInterceptor = RequestInterceptor = __decorate([
    (0, common_1.Injectable)()
], RequestInterceptor);


/***/ }),

/***/ "./libs/interceptors/response.interceptor.ts":
/*!***************************************************!*\
  !*** ./libs/interceptors/response.interceptor.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResponseInterceptor = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const operators_1 = __webpack_require__(/*! rxjs/operators */ "rxjs/operators");
let ResponseInterceptor = class ResponseInterceptor {
    intercept(context, next) {
        return next.handle().pipe((0, operators_1.map)((data) => {
            console.log('data', data);
            return {
                success: true,
                data: data,
                message: '요청이 성공적으로 처리되었습니다.',
            };
        }));
    }
};
exports.ResponseInterceptor = ResponseInterceptor;
exports.ResponseInterceptor = ResponseInterceptor = __decorate([
    (0, common_1.Injectable)()
], ResponseInterceptor);


/***/ }),

/***/ "./libs/interfaces/repository.interface.ts":
/*!*************************************************!*\
  !*** ./libs/interfaces/repository.interface.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./libs/repositories/base.repository.ts":
/*!**********************************************!*\
  !*** ./libs/repositories/base.repository.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BaseRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let BaseRepository = class BaseRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async create(entity, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.create(entity);
    }
    async save(entity, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.save(entity);
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return await repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            withDeleted: repositoryOptions?.withDeleted,
        });
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
    }
    async update(entityId, entityData, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        const primaryColumn = repository.metadata.primaryColumns[0].propertyName;
        await repository.update(entityId, entityData);
        const updated = await repository.findOne({
            where: { [primaryColumn]: entityId },
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            withDeleted: repositoryOptions?.withDeleted,
        });
        return updated;
    }
    async delete(entityId, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        await repository.delete(entityId);
    }
    async count(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.count({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
    }
};
exports.BaseRepository = BaseRepository;
exports.BaseRepository = BaseRepository = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _a : Object])
], BaseRepository);


/***/ }),

/***/ "./libs/services/base.service.ts":
/*!***************************************!*\
  !*** ./libs/services/base.service.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.BaseService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const repository_interface_1 = __webpack_require__(/*! ../interfaces/repository.interface */ "./libs/interfaces/repository.interface.ts");
let BaseService = class BaseService {
    constructor(repository) {
        this.repository = repository;
    }
    async create(entity, options) {
        return this.repository.create(entity, options);
    }
    async save(entity, options) {
        return this.repository.save(entity, options);
    }
    async findAll(options) {
        return this.repository.findAll(options);
    }
    async findOne(options) {
        return this.repository.findOne(options);
    }
    async update(entityId, entity, options) {
        return this.repository.update(entityId, entity, options);
    }
    async delete(entityId, options) {
        return this.repository.delete(entityId, options);
    }
    async count(options) {
        return this.repository.count(options);
    }
};
exports.BaseService = BaseService;
exports.BaseService = BaseService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof repository_interface_1.IRepository !== "undefined" && repository_interface_1.IRepository) === "function" ? _a : Object])
], BaseService);


/***/ }),

/***/ "./libs/swagger/swagger.ts":
/*!*********************************!*\
  !*** ./libs/swagger/swagger.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.setupSwagger = setupSwagger;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const response_dto_1 = __webpack_require__(/*! ../dtos/response.dto */ "./libs/dtos/response.dto.ts");
const pagination_response_dto_1 = __webpack_require__(/*! ../dtos/pagination-response.dto */ "./libs/dtos/pagination-response.dto.ts");
function setupSwagger(app, dtos) {
    const config = new swagger_1.DocumentBuilder()
        .setTitle('Resource Management API')
        .setDescription('Resource Management API Description')
        .setVersion('2.0')
        .addBearerAuth()
        .build();
    const document = swagger_1.SwaggerModule.createDocument(app, config, {
        extraModels: [response_dto_1.BaseResponseDto, pagination_response_dto_1.PaginationData, ...dtos],
    });
    swagger_1.SwaggerModule.setup('api-docs', app, document, {
        jsonDocumentUrl: '/api-docs-json',
        customJs: [
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-bundle.min.js',
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.js',
        ],
        customCssUrl: [
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui.min.css',
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.css',
        ],
        swaggerOptions: {
            tagsSorter: (a, b) => {
                const isAEnglish = /^[A-Za-z]/.test(a);
                const isBEnglish = /^[A-Za-z]/.test(b);
                if (isAEnglish && !isBEnglish)
                    return -1;
                if (!isAEnglish && isBEnglish)
                    return 1;
                return a.localeCompare(b, 'en');
            },
            docExpansion: 'none',
            persistAuthorization: true,
        },
    });
}


/***/ }),

/***/ "./libs/utils/date.util.ts":
/*!*********************************!*\
  !*** ./libs/utils/date.util.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DateUtil = void 0;
const dayjs = __webpack_require__(/*! dayjs */ "dayjs");
const utc = __webpack_require__(/*! dayjs/plugin/utc */ "dayjs/plugin/utc");
const timezone = __webpack_require__(/*! dayjs/plugin/timezone */ "dayjs/plugin/timezone");
dayjs.extend(utc);
dayjs.extend(timezone);
dayjs.tz.setDefault('Asia/Seoul');
class DateUtilWrapper {
    constructor(date) {
        this.date = date;
    }
    toDate() {
        return this.date.toDate();
    }
    format(format = 'YYYY-MM-DD HH:mm:ss') {
        return this.date.format(format);
    }
    addMonth(months) {
        return new DateUtilWrapper(this.date.add(months, 'month'));
    }
    addDays(days) {
        return new DateUtilWrapper(this.date.add(days, 'day'));
    }
    addMinutes(minutes) {
        return new DateUtilWrapper(this.date.add(minutes, 'minute'));
    }
    toISOString() {
        return this.date.toISOString();
    }
    toMinutes() {
        return this.date.hour() * 60 + this.date.minute();
    }
    hour(hours) {
        return new DateUtilWrapper(this.date.hour(hours));
    }
    minute(minutes) {
        return new DateUtilWrapper(this.date.minute(minutes));
    }
    second(seconds) {
        return new DateUtilWrapper(this.date.second(seconds));
    }
    getYear() {
        return this.date.year();
    }
    getMonth() {
        return this.date.month() + 1;
    }
    getDate() {
        return this.date.date();
    }
    getDaysInMonth() {
        return this.date.daysInMonth();
    }
    getFirstDayOfMonth() {
        return new DateUtilWrapper(this.date.startOf('month'));
    }
    getLastDayOfMonth() {
        return new DateUtilWrapper(this.date.endOf('month'));
    }
}
class DateUtil {
    static now() {
        return new DateUtilWrapper(dayjs().tz('Asia/Seoul'));
    }
    static date(date) {
        return new DateUtilWrapper(dayjs.tz(date, 'Asia/Seoul'));
    }
    static format(date, format = 'YYYY-MM-DD HH:mm:ss') {
        return this.date(date).format(format);
    }
    static parse(dateString) {
        return this.date(dateString);
    }
    static addDays(date, days) {
        return this.date(date).addDays(days);
    }
    static addMinutes(date, minutes) {
        return this.date(date).addMinutes(minutes);
    }
    static toISOString(date) {
        return this.date(date).toISOString();
    }
    static toMinutes(date) {
        const d = this.date(date);
        return d.toMinutes();
    }
    static fromMinutes(minutes) {
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        return this.now().hour(hours).minute(mins).second(0);
    }
    static ceilTo30Minutes(date = new Date()) {
        const d = this.date(date);
        const minutes = d.toDate().getMinutes();
        if (minutes === 0) {
            return d.second(0);
        }
        else if (minutes <= 30) {
            return d.minute(30).second(0);
        }
        else {
            return d.addMinutes(60 - minutes).second(0);
        }
    }
    static getYear(date = new Date()) {
        return this.date(date).getYear();
    }
    static getMonth(date = new Date()) {
        return this.date(date).getMonth();
    }
    static getDate(date = new Date()) {
        return this.date(date).getDate();
    }
    static getDaysInMonth(date = new Date()) {
        return this.date(date).getDaysInMonth();
    }
    static getFirstDayOfMonth(date = new Date()) {
        return this.date(date).getFirstDayOfMonth();
    }
    static getLastDayOfMonth(date = new Date()) {
        return this.date(date).getLastDayOfMonth();
    }
    static toAlarmRangeString(startDate, endDate) {
        const start = dayjs(startDate);
        const end = dayjs(endDate);
        if (start.isSame(end, 'day')) {
            return `${this.replaceWeekday(start.format('YY.MM.DD(ddd) HH:mm'))} ~ ${end.format('HH:mm')}`;
        }
        return `${this.replaceWeekday(start.format('YY.MM.DD(ddd) HH:mm'))} ~ ${this.replaceWeekday(end.format('YY.MM.DD(ddd) HH:mm'))}`;
    }
    static replaceWeekday(str) {
        return str
            .replace('Mon', '월')
            .replace('Tue', '화')
            .replace('Wed', '수')
            .replace('Thu', '목')
            .replace('Fri', '금')
            .replace('Sat', '토')
            .replace('Sun', '일');
    }
}
exports.DateUtil = DateUtil;


/***/ }),

/***/ "./src/app.module.ts":
/*!***************************!*\
  !*** ./src/app.module.ts ***!
  \***************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AppModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const jwt_1 = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const typeorm_config_1 = __webpack_require__(/*! @libs/configs/typeorm.config */ "./libs/configs/typeorm.config.ts");
const env_config_1 = __webpack_require__(/*! @libs/configs/env.config */ "./libs/configs/env.config.ts");
const jwt_config_1 = __webpack_require__(/*! @libs/configs/jwt.config */ "./libs/configs/jwt.config.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const legacy_application_module_1 = __webpack_require__(/*! ./legacy-application.module */ "./src/legacy-application.module.ts");
const file_context_module_1 = __webpack_require__(/*! ./context/file/file.context.module */ "./src/context/file/file.context.module.ts");
const resource_management_module_1 = __webpack_require__(/*! ./business/resource-management/resource-management.module */ "./src/business/resource-management/resource-management.module.ts");
const reservation_management_module_1 = __webpack_require__(/*! ./business/reservation-management/reservation-management.module */ "./src/business/reservation-management/reservation-management.module.ts");
const schedule_management_module_1 = __webpack_require__(/*! ./business/schedule-management/schedule-management.module */ "./src/business/schedule-management/schedule-management.module.ts");
const employee_management_module_1 = __webpack_require__(/*! ./business/employee-management/employee-management.module */ "./src/business/employee-management/employee-management.module.ts");
const task_management_module_1 = __webpack_require__(/*! ./business/task-management/task-management.module */ "./src/business/task-management/task-management.module.ts");
const notification_management_module_1 = __webpack_require__(/*! ./business/notification-management/notification-management.module */ "./src/business/notification-management/notification-management.module.ts");
const statistics_module_1 = __webpack_require__(/*! ./business/statistics/statistics.module */ "./src/business/statistics/statistics.module.ts");
let AppModule = class AppModule {
};
exports.AppModule = AppModule;
exports.AppModule = AppModule = __decorate([
    (0, common_1.Module)({
        imports: [
            config_1.ConfigModule.forRoot({
                isGlobal: true,
                load: [env_config_1.default, env_config_1.JWT_CONFIG],
            }),
            event_emitter_1.EventEmitterModule.forRoot(),
            jwt_1.JwtModule.registerAsync({
                global: true,
                useFactory: jwt_config_1.jwtConfig,
                inject: [config_1.ConfigService],
            }),
            typeorm_1.TypeOrmModule.forRootAsync({
                inject: [config_1.ConfigService],
                useFactory: typeorm_config_1.typeOrmConfig,
            }),
            typeorm_1.TypeOrmModule.forFeature(entities_1.Entities),
            legacy_application_module_1.LegacyApplicationModule,
            file_context_module_1.FileContextModule,
            resource_management_module_1.ResourceManagementModule,
            reservation_management_module_1.ReservationManagementModule,
            schedule_management_module_1.ScheduleManagementModule,
            employee_management_module_1.EmployeeManagementModule,
            task_management_module_1.TaskManagementModule,
            notification_management_module_1.NotificationManagementModule,
            statistics_module_1.StatisticsModule,
        ],
        providers: [],
    })
], AppModule);


/***/ }),

/***/ "./src/application/auth/auth.module.ts":
/*!*********************************************!*\
  !*** ./src/application/auth/auth.module.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AuthModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const passport_1 = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const jwt_strategy_1 = __webpack_require__(/*! @resource/application/auth/strategies/jwt.strategy */ "./src/application/auth/strategies/jwt.strategy.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const auth_controller_1 = __webpack_require__(/*! ./controllers/auth.controller */ "./src/application/auth/controllers/auth.controller.ts");
const employee_module_1 = __webpack_require__(/*! @src/domain/employee/employee.module */ "./src/domain/employee/employee.module.ts");
const auth_service_1 = __webpack_require__(/*! ./auth.service */ "./src/application/auth/auth.service.ts");
const validate_usecase_1 = __webpack_require__(/*! ./usecases/validate.usecase */ "./src/application/auth/usecases/validate.usecase.ts");
const sso_login_usecase_1 = __webpack_require__(/*! ./usecases/sso-login.usecase */ "./src/application/auth/usecases/sso-login.usecase.ts");
const update_auth_info_usecase_1 = __webpack_require__(/*! ./usecases/update-auth-info.usecase */ "./src/application/auth/usecases/update-auth-info.usecase.ts");
const system_admin_usecase_1 = __webpack_require__(/*! ./usecases/system-admin.usecase */ "./src/application/auth/usecases/system-admin.usecase.ts");
const get_token_usecase_1 = __webpack_require__(/*! ./usecases/get-token.usecase */ "./src/application/auth/usecases/get-token.usecase.ts");
let AuthModule = class AuthModule {
};
exports.AuthModule = AuthModule;
exports.AuthModule = AuthModule = __decorate([
    (0, common_1.Module)({
        imports: [passport_1.PassportModule, employee_module_1.DomainEmployeeModule, typeorm_1.TypeOrmModule.forFeature([entities_1.Employee])],
        providers: [
            jwt_strategy_1.JwtStrategy,
            auth_service_1.AuthService,
            validate_usecase_1.ValidateUsecase,
            sso_login_usecase_1.SsoLoginUsecase,
            update_auth_info_usecase_1.UpdateAuthInfoUsecase,
            system_admin_usecase_1.CheckSystemAdminUsecase,
            get_token_usecase_1.GetTokenUsecase,
        ],
        controllers: [auth_controller_1.AuthController],
        exports: [jwt_strategy_1.JwtStrategy],
    })
], AuthModule);


/***/ }),

/***/ "./src/application/auth/auth.service.ts":
/*!**********************************************!*\
  !*** ./src/application/auth/auth.service.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AuthService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const validate_usecase_1 = __webpack_require__(/*! ./usecases/validate.usecase */ "./src/application/auth/usecases/validate.usecase.ts");
const sso_login_usecase_1 = __webpack_require__(/*! ./usecases/sso-login.usecase */ "./src/application/auth/usecases/sso-login.usecase.ts");
const update_auth_info_usecase_1 = __webpack_require__(/*! ./usecases/update-auth-info.usecase */ "./src/application/auth/usecases/update-auth-info.usecase.ts");
const system_admin_usecase_1 = __webpack_require__(/*! ./usecases/system-admin.usecase */ "./src/application/auth/usecases/system-admin.usecase.ts");
const get_token_usecase_1 = __webpack_require__(/*! ./usecases/get-token.usecase */ "./src/application/auth/usecases/get-token.usecase.ts");
let AuthService = class AuthService {
    constructor(validateUsecase, ssoLoginUsecase, updateAuthInfoUsecase, checkSystemAdminUsecase, getTokenUsecase) {
        this.validateUsecase = validateUsecase;
        this.ssoLoginUsecase = ssoLoginUsecase;
        this.updateAuthInfoUsecase = updateAuthInfoUsecase;
        this.checkSystemAdminUsecase = checkSystemAdminUsecase;
        this.getTokenUsecase = getTokenUsecase;
    }
    async login(loginDto) {
        const systemAdminResult = await this.checkSystemAdminUsecase.execute(loginDto.email, loginDto.password);
        if (systemAdminResult.success) {
            return await this.getTokenUsecase.execute(systemAdminResult.employee);
        }
        const ssoResponse = await this.ssoLoginUsecase.execute(loginDto.email, loginDto.password);
        const updatedEmployee = await this.updateAuthInfoUsecase.execute(ssoResponse);
        return {
            accessToken: updatedEmployee.accessToken,
            email: updatedEmployee.email,
            name: updatedEmployee.name,
            department: updatedEmployee.department,
            position: updatedEmployee.position,
            roles: updatedEmployee.roles,
        };
    }
};
exports.AuthService = AuthService;
exports.AuthService = AuthService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof validate_usecase_1.ValidateUsecase !== "undefined" && validate_usecase_1.ValidateUsecase) === "function" ? _a : Object, typeof (_b = typeof sso_login_usecase_1.SsoLoginUsecase !== "undefined" && sso_login_usecase_1.SsoLoginUsecase) === "function" ? _b : Object, typeof (_c = typeof update_auth_info_usecase_1.UpdateAuthInfoUsecase !== "undefined" && update_auth_info_usecase_1.UpdateAuthInfoUsecase) === "function" ? _c : Object, typeof (_d = typeof system_admin_usecase_1.CheckSystemAdminUsecase !== "undefined" && system_admin_usecase_1.CheckSystemAdminUsecase) === "function" ? _d : Object, typeof (_e = typeof get_token_usecase_1.GetTokenUsecase !== "undefined" && get_token_usecase_1.GetTokenUsecase) === "function" ? _e : Object])
], AuthService);


/***/ }),

/***/ "./src/application/auth/controllers/auth.controller.ts":
/*!*************************************************************!*\
  !*** ./src/application/auth/controllers/auth.controller.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AuthController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const login_dto_1 = __webpack_require__(/*! @resource/application/auth/dto/login.dto */ "./src/application/auth/dto/login.dto.ts");
const auth_service_1 = __webpack_require__(/*! @resource/application/auth/auth.service */ "./src/application/auth/auth.service.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const login_response_dto_1 = __webpack_require__(/*! @resource/application/auth/dto/login-response.dto */ "./src/application/auth/dto/login-response.dto.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
let AuthController = class AuthController {
    constructor(authService) {
        this.authService = authService;
    }
    login(loginDto) {
        return this.authService.login(loginDto);
    }
};
exports.AuthController = AuthController;
__decorate([
    (0, common_1.Post)('login'),
    (0, swagger_1.ApiOperation)({ summary: '로그인' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 201, description: '로그인 성공', type: login_response_dto_1.LoginResponseDto }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof login_dto_1.LoginDto !== "undefined" && login_dto_1.LoginDto) === "function" ? _b : Object]),
    __metadata("design:returntype", void 0)
], AuthController.prototype, "login", null);
exports.AuthController = AuthController = __decorate([
    (0, swagger_1.ApiTags)('1. 인증 '),
    (0, common_1.Controller)('v1/auth'),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    (0, public_decorator_1.Public)(),
    __metadata("design:paramtypes", [typeof (_a = typeof auth_service_1.AuthService !== "undefined" && auth_service_1.AuthService) === "function" ? _a : Object])
], AuthController);


/***/ }),

/***/ "./src/application/auth/dto/change-password.dto.ts":
/*!*********************************************************!*\
  !*** ./src/application/auth/dto/change-password.dto.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangePasswordDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ChangePasswordDto {
}
exports.ChangePasswordDto = ChangePasswordDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'newPassword123',
        description: '새로운 비밀번호',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], ChangePasswordDto.prototype, "newPassword", void 0);


/***/ }),

/***/ "./src/application/auth/dto/change-role.dto.ts":
/*!*****************************************************!*\
  !*** ./src/application/auth/dto/change-role.dto.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangeRoleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ChangeRoleDto {
}
exports.ChangeRoleDto = ChangeRoleDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'userId',
        description: '유저 아이디',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], ChangeRoleDto.prototype, "userId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: true,
        description: '자원 담당자 여부',
    }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", Boolean)
], ChangeRoleDto.prototype, "isResourceAdmin", void 0);


/***/ }),

/***/ "./src/application/auth/dto/check-password.dto.ts":
/*!********************************************************!*\
  !*** ./src/application/auth/dto/check-password.dto.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckPasswordDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CheckPasswordDto {
}
exports.CheckPasswordDto = CheckPasswordDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'currentPassword123',
        description: '현재 비밀번호',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], CheckPasswordDto.prototype, "password", void 0);


/***/ }),

/***/ "./src/application/auth/dto/login-response.dto.ts":
/*!********************************************************!*\
  !*** ./src/application/auth/dto/login-response.dto.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LoginResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class LoginResponseDto {
}
exports.LoginResponseDto = LoginResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9....',
    }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "accessToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'test@lumir.space',
    }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '홍길동',
    }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'Web 파트',
    }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '연구원',
    }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: ['USER', 'RESOURCE_ADMIN', 'SYSTEM_ADMIN'],
    }),
    __metadata("design:type", Array)
], LoginResponseDto.prototype, "roles", void 0);


/***/ }),

/***/ "./src/application/auth/dto/login.dto.ts":
/*!***********************************************!*\
  !*** ./src/application/auth/dto/login.dto.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LoginDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class LoginDto {
}
exports.LoginDto = LoginDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'admin@lumir.space' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    (0, class_transformer_1.Transform)(({ value }) => value.toLowerCase()),
    __metadata("design:type", String)
], LoginDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: '1234' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], LoginDto.prototype, "password", void 0);


/***/ }),

/***/ "./src/application/auth/dto/notification-settings.dto.ts":
/*!***************************************************************!*\
  !*** ./src/application/auth/dto/notification-settings.dto.ts ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateNotificationSettingsDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class UpdateNotificationSettingsDto {
}
exports.UpdateNotificationSettingsDto = UpdateNotificationSettingsDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '웹푸시 알림 설정 여부',
        default: true
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateNotificationSettingsDto.prototype, "isPushNotificationEnabled", void 0);


/***/ }),

/***/ "./src/application/auth/dto/user-response.dto.ts":
/*!*******************************************************!*\
  !*** ./src/application/auth/dto/user-response.dto.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class UserResponseDto {
}
exports.UserResponseDto = UserResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '550e8400-e29b-41d4-a716-446655440000',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "userId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'test@lumir.space',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '01012345678',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "mobile", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '홍길동',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'Web 파트',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '연구원',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: ['USER', 'RESOURCE_ADMIN', 'SYSTEM_ADMIN'],
    }),
    __metadata("design:type", Array)
], UserResponseDto.prototype, "roles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: true,
    }),
    __metadata("design:type", Boolean)
], UserResponseDto.prototype, "isPushNotificationEnabled", void 0);


/***/ }),

/***/ "./src/application/auth/strategies/jwt.strategy.ts":
/*!*********************************************************!*\
  !*** ./src/application/auth/strategies/jwt.strategy.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.JwtStrategy = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const passport_1 = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
const passport_jwt_1 = __webpack_require__(/*! passport-jwt */ "passport-jwt");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
let JwtStrategy = class JwtStrategy extends (0, passport_1.PassportStrategy)(passport_jwt_1.Strategy) {
    constructor(employeeService, configService) {
        super({
            jwtFromRequest: passport_jwt_1.ExtractJwt.fromAuthHeaderAsBearerToken(),
            ignoreExpiration: false,
            secretOrKey: configService.get('jwt.secret'),
        });
        this.employeeService = employeeService;
    }
    async validate(payload) {
        const employee = await this.employeeService.findByEmployeeNumber(payload.employeeNumber);
        if (!employee || employee.employeeNumber !== payload.employeeNumber) {
            throw new common_1.UnauthorizedException();
        }
        return employee;
    }
};
exports.JwtStrategy = JwtStrategy;
exports.JwtStrategy = JwtStrategy = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object, typeof (_b = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _b : Object])
], JwtStrategy);


/***/ }),

/***/ "./src/application/auth/usecases/get-token.usecase.ts":
/*!************************************************************!*\
  !*** ./src/application/auth/usecases/get-token.usecase.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetTokenUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const jwt_1 = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
let GetTokenUsecase = class GetTokenUsecase {
    constructor(jwtService) {
        this.jwtService = jwtService;
    }
    async execute(employee) {
        const payload = {
            sub: employee.employeeId,
            employeeNumber: employee.employeeNumber,
            type: 'access',
        };
        const accessToken = this.jwtService.sign(payload, {
            expiresIn: '1d',
            secret: process.env.GLOBAL_SECRET,
        });
        return {
            accessToken,
            email: employee.email,
            name: employee.name,
            department: employee.department,
            position: employee.position,
            roles: employee.roles,
        };
    }
};
exports.GetTokenUsecase = GetTokenUsecase;
exports.GetTokenUsecase = GetTokenUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof jwt_1.JwtService !== "undefined" && jwt_1.JwtService) === "function" ? _a : Object])
], GetTokenUsecase);


/***/ }),

/***/ "./src/application/auth/usecases/sso-login.usecase.ts":
/*!************************************************************!*\
  !*** ./src/application/auth/usecases/sso-login.usecase.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SsoLoginUsecase = void 0;
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const axios_1 = __webpack_require__(/*! axios */ "axios");
const bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");
let SsoLoginUsecase = class SsoLoginUsecase {
    constructor() { }
    async execute(email, password) {
        try {
            const client_id = process.env.SSO_CLIENT_ID;
            const client_secret = process.env.SSO_CLIENT_SECRET;
            const basicAuth = Buffer.from(`${client_id}:${client_secret}`).toString('base64');
            const ssoApiUrl = process.env.SSO_API_URL;
            const response = await axios_1.default.post(`${ssoApiUrl}/api/auth/login`, {
                grant_type: 'password',
                email: email,
                password: password,
            }, {
                headers: {
                    Authorization: `Basic ${basicAuth}`,
                },
            });
            const data = response.data;
            data.password = await bcrypt.hash(password, 10);
            return data;
        }
        catch (error) {
            console.log(error);
            throw new common_1.UnauthorizedException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.SSO_LOGIN_FAILED);
        }
    }
};
exports.SsoLoginUsecase = SsoLoginUsecase;
exports.SsoLoginUsecase = SsoLoginUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [])
], SsoLoginUsecase);


/***/ }),

/***/ "./src/application/auth/usecases/system-admin.usecase.ts":
/*!***************************************************************!*\
  !*** ./src/application/auth/usecases/system-admin.usecase.ts ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckSystemAdminUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let CheckSystemAdminUsecase = class CheckSystemAdminUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute(email, password) {
        const admin = await this.employeeService.findOne({ where: { email } });
        if (!admin || !admin.roles.includes(role_type_enum_1.Role.SYSTEM_ADMIN)) {
            return {
                success: false,
                employee: null,
                message: error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND,
            };
        }
        const isPasswordValid = await bcrypt.compare(password, admin.password);
        if (!isPasswordValid) {
            return {
                success: false,
                employee: null,
                message: error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.INVALID_PASSWORD,
            };
        }
        return {
            success: true,
            employee: admin,
            message: '로그인 성공',
        };
    }
};
exports.CheckSystemAdminUsecase = CheckSystemAdminUsecase;
exports.CheckSystemAdminUsecase = CheckSystemAdminUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], CheckSystemAdminUsecase);


/***/ }),

/***/ "./src/application/auth/usecases/update-auth-info.usecase.ts":
/*!*******************************************************************!*\
  !*** ./src/application/auth/usecases/update-auth-info.usecase.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateAuthInfoUsecase = void 0;
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
let UpdateAuthInfoUsecase = class UpdateAuthInfoUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute(ssoResponse) {
        const employee = await this.employeeService.findOne({
            where: {
                employeeNumber: ssoResponse.employeeNumber,
            },
        });
        if (!employee) {
            const newEmployee = await this.employeeService.create({
                employeeNumber: ssoResponse.employeeNumber,
                name: ssoResponse.name,
                email: ssoResponse.email,
                department: ssoResponse.department,
                position: ssoResponse.position,
                mobile: ssoResponse.phoneNumber,
                accessToken: ssoResponse.accessToken,
                expiredAt: date_util_1.DateUtil.format(ssoResponse.expiresAt, 'YYYY-MM-DD HH:mm:ss'),
            });
            return await this.employeeService.save(newEmployee);
        }
        employee.password = ssoResponse.password;
        employee.mobile = ssoResponse.phoneNumber;
        employee.accessToken = ssoResponse.accessToken;
        employee.expiredAt = date_util_1.DateUtil.format(ssoResponse.expiresAt);
        employee.department = ssoResponse.department;
        employee.position = ssoResponse.position;
        return await this.employeeService.save(employee);
    }
};
exports.UpdateAuthInfoUsecase = UpdateAuthInfoUsecase;
exports.UpdateAuthInfoUsecase = UpdateAuthInfoUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], UpdateAuthInfoUsecase);


/***/ }),

/***/ "./src/application/auth/usecases/validate.usecase.ts":
/*!***********************************************************!*\
  !*** ./src/application/auth/usecases/validate.usecase.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ValidateUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let ValidateUsecase = class ValidateUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute(email, password) {
        const employee = await this.employeeService.findByEmail(email);
        if (!employee) {
            throw new common_1.UnauthorizedException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        if (employee.position === '퇴사') {
            throw new common_1.UnauthorizedException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        if (!employee.accessToken ||
            !employee.password ||
            (employee.expiredAt && date_util_1.DateUtil.now().format() > employee.expiredAt)) {
            return null;
        }
        const isPasswordValid = await bcrypt.compare(password, employee.password);
        if (!isPasswordValid) {
            console.log('패스워드 불일치, SSO 비밀번호 확인 필요');
            return null;
        }
        return employee;
    }
};
exports.ValidateUsecase = ValidateUsecase;
exports.ValidateUsecase = ValidateUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], ValidateUsecase);


/***/ }),

/***/ "./src/application/employee/controllers/admin.resource-manager.controller.ts":
/*!***********************************************************************************!*\
  !*** ./src/application/employee/controllers/admin.resource-manager.controller.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminResourceManagerController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const employee_service_1 = __webpack_require__(/*! @src/application/employee/employee.service */ "./src/application/employee/employee.service.ts");
const employees_by_department_response_dto_1 = __webpack_require__(/*! @resource/application/employee/dtos/employees-by-department-response.dto */ "./src/application/employee/dtos/employees-by-department-response.dto.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
let AdminResourceManagerController = class AdminResourceManagerController {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async findAllResourceManagers() {
        return this.employeeService.findResourceManagers();
    }
};
exports.AdminResourceManagerController = AdminResourceManagerController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 관리자 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 관리자 목록 조회 성공',
        type: [employees_by_department_response_dto_1.EmplyeesByDepartmentResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], AdminResourceManagerController.prototype, "findAllResourceManagers", null);
exports.AdminResourceManagerController = AdminResourceManagerController = __decorate([
    (0, swagger_1.ApiTags)('3. 자원 관리자 - 관리자 '),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('v1/admin/resource-managers'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.EmployeeService !== "undefined" && employee_service_1.EmployeeService) === "function" ? _a : Object])
], AdminResourceManagerController);


/***/ }),

/***/ "./src/application/employee/controllers/admin.user.controller.ts":
/*!***********************************************************************!*\
  !*** ./src/application/employee/controllers/admin.user.controller.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminUserController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const user_response_dto_1 = __webpack_require__(/*! @resource/application/employee/dtos/user-response.dto */ "./src/application/employee/dtos/user-response.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const change_role_dto_1 = __webpack_require__(/*! @resource/application/employee/dtos/change-role.dto */ "./src/application/employee/dtos/change-role.dto.ts");
const employee_service_1 = __webpack_require__(/*! ../employee.service */ "./src/application/employee/employee.service.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
let AdminUserController = class AdminUserController {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    findUser() {
        return this.employeeService.findManagerCandidates();
    }
    changeRole(changeRoleDto) {
        return this.employeeService.changeRole(changeRoleDto);
    }
};
exports.AdminUserController = AdminUserController;
__decorate([
    (0, common_1.Get)(''),
    (0, swagger_1.ApiOperation)({ summary: '직원 목록 조회	자원담당자로 설정하기 위한 직원 목록' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '내 상세 정보 조회 성공', type: user_response_dto_1.UserResponseDto }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], AdminUserController.prototype, "findUser", null);
__decorate([
    (0, common_1.Patch)('change/role'),
    (0, swagger_1.ApiOperation)({ summary: '자원 담당자 설정	자원별 담당자 설정 또는 토글 방식' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '자원 담당자 설정 성공' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof change_role_dto_1.ChangeRoleDto !== "undefined" && change_role_dto_1.ChangeRoleDto) === "function" ? _b : Object]),
    __metadata("design:returntype", void 0)
], AdminUserController.prototype, "changeRole", null);
exports.AdminUserController = AdminUserController = __decorate([
    (0, swagger_1.ApiTags)('5. 유저 - 관리자 '),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('v1/admin/users'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.EmployeeService !== "undefined" && employee_service_1.EmployeeService) === "function" ? _a : Object])
], AdminUserController);


/***/ }),

/***/ "./src/application/employee/controllers/employee.controller.ts":
/*!*********************************************************************!*\
  !*** ./src/application/employee/controllers/employee.controller.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserEmployeeController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! ../employee.service */ "./src/application/employee/employee.service.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const employees_by_department_response_dto_1 = __webpack_require__(/*! @resource/application/employee/dtos/employees-by-department-response.dto */ "./src/application/employee/dtos/employees-by-department-response.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
let UserEmployeeController = class UserEmployeeController {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async findAllEmplyeesByDepartment() {
        return this.employeeService.findEmployeeList();
    }
};
exports.UserEmployeeController = UserEmployeeController;
__decorate([
    (0, common_1.Get)('department'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, swagger_1.ApiOperation)({ summary: '부서별 직원 목록 조회 #사용자/참석자설정/모달' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '부서별 직원 목록을 성공적으로 조회했습니다.',
        type: [employees_by_department_response_dto_1.EmplyeesByDepartmentResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], UserEmployeeController.prototype, "findAllEmplyeesByDepartment", null);
exports.UserEmployeeController = UserEmployeeController = __decorate([
    (0, swagger_1.ApiTags)('5. 직원 '),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('v1/employees'),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.EmployeeService !== "undefined" && employee_service_1.EmployeeService) === "function" ? _a : Object])
], UserEmployeeController);


/***/ }),

/***/ "./src/application/employee/controllers/user.controller.ts":
/*!*****************************************************************!*\
  !*** ./src/application/employee/controllers/user.controller.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserUserController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const user_response_dto_1 = __webpack_require__(/*! @resource/application/employee/dtos/user-response.dto */ "./src/application/employee/dtos/user-response.dto.ts");
const check_password_dto_1 = __webpack_require__(/*! @resource/application/employee/dtos/check-password.dto */ "./src/application/employee/dtos/check-password.dto.ts");
const change_password_dto_1 = __webpack_require__(/*! @resource/application/employee/dtos/change-password.dto */ "./src/application/employee/dtos/change-password.dto.ts");
const notification_settings_dto_1 = __webpack_require__(/*! @resource/application/employee/dtos/notification-settings.dto */ "./src/application/employee/dtos/notification-settings.dto.ts");
const employee_service_1 = __webpack_require__(/*! ../employee.service */ "./src/application/employee/employee.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
let UserUserController = class UserUserController {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    findUser(user) {
        return this.employeeService.findEmployeeDetail(user.employeeId);
    }
    checkPassword(user, checkPasswordDto) {
        return this.employeeService.checkPassword(user.employeeId, checkPasswordDto.password);
    }
    changePassword(user, changePasswordDto) {
        return this.employeeService.changePassword(user.employeeId, changePasswordDto.newPassword);
    }
    async changeNotificationSettings(user, updateDto) {
        return this.employeeService.changeNotificationSettings(user.employeeId, updateDto);
    }
};
exports.UserUserController = UserUserController;
__decorate([
    (0, common_1.Get)('me'),
    (0, swagger_1.ApiOperation)({ summary: '내 상세 정보 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '내 상세 정보 조회 성공', type: user_response_dto_1.UserResponseDto }),
    __param(0, (0, user_decorator_1.User)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object]),
    __metadata("design:returntype", void 0)
], UserUserController.prototype, "findUser", null);
__decorate([
    (0, common_1.Post)('check-password'),
    (0, swagger_1.ApiOperation)({ summary: '비밀번호 확인' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '비밀번호 확인 성공' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _c : Object, typeof (_d = typeof check_password_dto_1.CheckPasswordDto !== "undefined" && check_password_dto_1.CheckPasswordDto) === "function" ? _d : Object]),
    __metadata("design:returntype", void 0)
], UserUserController.prototype, "checkPassword", null);
__decorate([
    (0, common_1.Post)('change-password'),
    (0, swagger_1.ApiOperation)({ summary: '비밀번호 변경' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '비밀번호 변경 성공' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _e : Object, typeof (_f = typeof change_password_dto_1.ChangePasswordDto !== "undefined" && change_password_dto_1.ChangePasswordDto) === "function" ? _f : Object]),
    __metadata("design:returntype", void 0)
], UserUserController.prototype, "changePassword", null);
__decorate([
    (0, common_1.Patch)('me/notification-settings'),
    (0, swagger_1.ApiOperation)({ summary: '알림 설정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '알림 설정 성공',
        type: user_response_dto_1.UserResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _g : Object, typeof (_h = typeof notification_settings_dto_1.UpdateNotificationSettingsDto !== "undefined" && notification_settings_dto_1.UpdateNotificationSettingsDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], UserUserController.prototype, "changeNotificationSettings", null);
exports.UserUserController = UserUserController = __decorate([
    (0, swagger_1.ApiTags)('5. 유저 '),
    (0, common_1.Controller)('v1/users'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.EmployeeService !== "undefined" && employee_service_1.EmployeeService) === "function" ? _a : Object])
], UserUserController);


/***/ }),

/***/ "./src/application/employee/controllers/webhook.controller.ts":
/*!********************************************************************!*\
  !*** ./src/application/employee/controllers/webhook.controller.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeWebhookController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! ../employee.service */ "./src/application/employee/employee.service.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const throttler_decorator_1 = __webpack_require__(/*! @nestjs/throttler/dist/throttler.decorator */ "@nestjs/throttler/dist/throttler.decorator");
const mms_employee_response_dto_1 = __webpack_require__(/*! @resource/application/employee/dtos/mms-employee-response.dto */ "./src/application/employee/dtos/mms-employee-response.dto.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
let EmployeeWebhookController = class EmployeeWebhookController {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async syncEmployees() {
        return await this.employeeService.syncEmployees();
    }
    async webhookCreate(body) {
        console.log('created employee', body);
        await this.employeeService.syncEmployees(body.employee_number);
    }
    async webhookUpdate(body) {
        console.log('updated employee', body);
        await this.employeeService.syncEmployees(body.employee_number);
    }
    async webhookPositionChanged(body) {
        console.log('position changed', body);
        await this.employeeService.syncEmployees(body.employee_number);
    }
    async webhookDepartmentChanged(body) {
        console.log('department changed', body);
        await this.employeeService.syncEmployees(body.employee_number);
    }
    async webhookDelete(body) {
        console.log('deleted employee', body);
    }
};
exports.EmployeeWebhookController = EmployeeWebhookController;
__decorate([
    (0, common_1.Get)('sync'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], EmployeeWebhookController.prototype, "syncEmployees", null);
__decorate([
    (0, common_1.Post)('webhook/create'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, public_decorator_1.Public)(),
    (0, throttler_decorator_1.Throttle)(5, 60),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof mms_employee_response_dto_1.MMSEmployeeResponseDto !== "undefined" && mms_employee_response_dto_1.MMSEmployeeResponseDto) === "function" ? _b : Object]),
    __metadata("design:returntype", Promise)
], EmployeeWebhookController.prototype, "webhookCreate", null);
__decorate([
    (0, common_1.Post)('webhook/update'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, public_decorator_1.Public)(),
    (0, throttler_decorator_1.Throttle)(5, 60),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof mms_employee_response_dto_1.MMSEmployeeResponseDto !== "undefined" && mms_employee_response_dto_1.MMSEmployeeResponseDto) === "function" ? _c : Object]),
    __metadata("design:returntype", Promise)
], EmployeeWebhookController.prototype, "webhookUpdate", null);
__decorate([
    (0, common_1.Post)('webhook/position_changed'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, public_decorator_1.Public)(),
    (0, throttler_decorator_1.Throttle)(5, 60),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof mms_employee_response_dto_1.MMSEmployeeResponseDto !== "undefined" && mms_employee_response_dto_1.MMSEmployeeResponseDto) === "function" ? _d : Object]),
    __metadata("design:returntype", Promise)
], EmployeeWebhookController.prototype, "webhookPositionChanged", null);
__decorate([
    (0, common_1.Post)('webhook/department_changed'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, public_decorator_1.Public)(),
    (0, throttler_decorator_1.Throttle)(5, 60),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof mms_employee_response_dto_1.MMSEmployeeResponseDto !== "undefined" && mms_employee_response_dto_1.MMSEmployeeResponseDto) === "function" ? _e : Object]),
    __metadata("design:returntype", Promise)
], EmployeeWebhookController.prototype, "webhookDepartmentChanged", null);
__decorate([
    (0, common_1.Post)('webhook/delete'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, public_decorator_1.Public)(),
    (0, throttler_decorator_1.Throttle)(5, 60),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof mms_employee_response_dto_1.MMSEmployeeResponseDto !== "undefined" && mms_employee_response_dto_1.MMSEmployeeResponseDto) === "function" ? _f : Object]),
    __metadata("design:returntype", Promise)
], EmployeeWebhookController.prototype, "webhookDelete", null);
exports.EmployeeWebhookController = EmployeeWebhookController = __decorate([
    (0, swagger_1.ApiTags)('5. 직원 '),
    (0, public_decorator_1.Public)(),
    (0, common_1.Controller)('v1/employees'),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.EmployeeService !== "undefined" && employee_service_1.EmployeeService) === "function" ? _a : Object])
], EmployeeWebhookController);


/***/ }),

/***/ "./src/application/employee/dtos/change-password.dto.ts":
/*!**************************************************************!*\
  !*** ./src/application/employee/dtos/change-password.dto.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangePasswordDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ChangePasswordDto {
}
exports.ChangePasswordDto = ChangePasswordDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'newPassword123',
        description: '새로운 비밀번호',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], ChangePasswordDto.prototype, "newPassword", void 0);


/***/ }),

/***/ "./src/application/employee/dtos/change-role.dto.ts":
/*!**********************************************************!*\
  !*** ./src/application/employee/dtos/change-role.dto.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangeRoleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ChangeRoleDto {
}
exports.ChangeRoleDto = ChangeRoleDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'employeeId',
        description: '직원 아이디',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], ChangeRoleDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: true,
        description: '자원 담당자 여부',
    }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", Boolean)
], ChangeRoleDto.prototype, "isResourceAdmin", void 0);


/***/ }),

/***/ "./src/application/employee/dtos/check-password.dto.ts":
/*!*************************************************************!*\
  !*** ./src/application/employee/dtos/check-password.dto.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckPasswordDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CheckPasswordDto {
}
exports.CheckPasswordDto = CheckPasswordDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'currentPassword123',
        description: '현재 비밀번호',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], CheckPasswordDto.prototype, "password", void 0);


/***/ }),

/***/ "./src/application/employee/dtos/create-employee.dto.ts":
/*!**************************************************************!*\
  !*** ./src/application/employee/dtos/create-employee.dto.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateEmployeeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreateEmployeeDto {
}
exports.CreateEmployeeDto = CreateEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "position", void 0);


/***/ }),

/***/ "./src/application/employee/dtos/employee-response.dto.ts":
/*!****************************************************************!*\
  !*** ./src/application/employee/dtos/employee-response.dto.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EmployeeResponseDto {
}
exports.EmployeeResponseDto = EmployeeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "position", void 0);


/***/ }),

/***/ "./src/application/employee/dtos/employees-by-department-response.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/application/employee/dtos/employees-by-department-response.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmplyeesByDepartmentResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EmplyeesByDepartmentResponseDto {
}
exports.EmplyeesByDepartmentResponseDto = EmplyeesByDepartmentResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmplyeesByDepartmentResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], EmplyeesByDepartmentResponseDto.prototype, "employees", void 0);


/***/ }),

/***/ "./src/application/employee/dtos/mms-employee-response.dto.ts":
/*!********************************************************************!*\
  !*** ./src/application/employee/dtos/mms-employee-response.dto.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MMSWebhookRequestDto = exports.MMSEmployeeResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class MMSEmployeeResponseDto {
    constructor(employee) {
        this.id = employee.id;
        this.employee_number = employee.employee_number;
        this.name = employee.name;
        this.email = employee.email;
        this.phone_number = employee.phone_number;
        this.date_of_birth = employee.date_of_birth;
        this.gender = employee.gender;
        this.hire_date = employee.hire_date;
        this.status = employee.status;
        this.department = employee.department?.department_code;
        this.position = employee.position?.position_title;
        this.rank = employee.rank?.rank_name;
    }
}
exports.MMSEmployeeResponseDto = MMSEmployeeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID', example: '67d116b591e5366c327915d2' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '사번', example: '24020' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "employee_number", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이름', example: '구석현' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이메일', example: 'koo.sukhyun@lumir.space' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '전화번호', example: '010-1234-5678' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "phone_number", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '생년월일', example: '1980-07-04T00:00:00.000Z' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], MMSEmployeeResponseDto.prototype, "date_of_birth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '성별', example: 'MALE' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '입사일', example: '2024-05-21T00:00:00.000Z' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], MMSEmployeeResponseDto.prototype, "hire_date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '재직 상태', example: '재직중' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '부서', example: '대표이사' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직위', example: '대표이사' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직급', example: '대표이사' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "rank", void 0);
class MMSWebhookRequestDto {
}
exports.MMSWebhookRequestDto = MMSWebhookRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이벤트 타입', example: 'employee.updated' }),
    __metadata("design:type", String)
], MMSWebhookRequestDto.prototype, "event_type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '엔티티 타입', example: 'employee' }),
    __metadata("design:type", String)
], MMSWebhookRequestDto.prototype, "entity_type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '타임스탬프', example: '2025-04-29T02:11:51.794Z' }),
    __metadata("design:type", String)
], MMSWebhookRequestDto.prototype, "timestamp", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '페이로드' }),
    __metadata("design:type", MMSEmployeeResponseDto)
], MMSWebhookRequestDto.prototype, "payload", void 0);


/***/ }),

/***/ "./src/application/employee/dtos/notification-settings.dto.ts":
/*!********************************************************************!*\
  !*** ./src/application/employee/dtos/notification-settings.dto.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateNotificationSettingsDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class UpdateNotificationSettingsDto {
}
exports.UpdateNotificationSettingsDto = UpdateNotificationSettingsDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '웹푸시 알림 설정 여부',
        default: true
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateNotificationSettingsDto.prototype, "isPushNotificationEnabled", void 0);


/***/ }),

/***/ "./src/application/employee/dtos/update-employee.dto.ts":
/*!**************************************************************!*\
  !*** ./src/application/employee/dtos/update-employee.dto.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateEmployeeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class UpdateEmployeeDto {
}
exports.UpdateEmployeeDto = UpdateEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "position", void 0);


/***/ }),

/***/ "./src/application/employee/dtos/user-response.dto.ts":
/*!************************************************************!*\
  !*** ./src/application/employee/dtos/user-response.dto.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class UserResponseDto {
}
exports.UserResponseDto = UserResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '550e8400-e29b-41d4-a716-446655440000',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'test@lumir.space',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '01012345678',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "mobile", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '홍길동',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'Web 파트',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '연구원',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: ['USER', 'RESOURCE_ADMIN', 'SYSTEM_ADMIN'],
    }),
    __metadata("design:type", Array)
], UserResponseDto.prototype, "roles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: true,
    }),
    __metadata("design:type", Boolean)
], UserResponseDto.prototype, "isPushNotificationEnabled", void 0);


/***/ }),

/***/ "./src/application/employee/employee.module.ts":
/*!*****************************************************!*\
  !*** ./src/application/employee/employee.module.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const webhook_controller_1 = __webpack_require__(/*! ./controllers/webhook.controller */ "./src/application/employee/controllers/webhook.controller.ts");
const employee_service_1 = __webpack_require__(/*! ./employee.service */ "./src/application/employee/employee.service.ts");
const admin_resource_manager_controller_1 = __webpack_require__(/*! ./controllers/admin.resource-manager.controller */ "./src/application/employee/controllers/admin.resource-manager.controller.ts");
const employee_module_1 = __webpack_require__(/*! @src/domain/employee/employee.module */ "./src/domain/employee/employee.module.ts");
const usecases_1 = __webpack_require__(/*! ./usecases */ "./src/application/employee/usecases/index.ts");
const admin_user_controller_1 = __webpack_require__(/*! ./controllers/admin.user.controller */ "./src/application/employee/controllers/admin.user.controller.ts");
const employee_controller_1 = __webpack_require__(/*! ./controllers/employee.controller */ "./src/application/employee/controllers/employee.controller.ts");
const user_controller_1 = __webpack_require__(/*! ./controllers/user.controller */ "./src/application/employee/controllers/user.controller.ts");
let EmployeeModule = class EmployeeModule {
};
exports.EmployeeModule = EmployeeModule;
exports.EmployeeModule = EmployeeModule = __decorate([
    (0, common_1.Module)({
        imports: [employee_module_1.DomainEmployeeModule, typeorm_1.TypeOrmModule.forFeature([entities_1.Employee])],
        controllers: [
            webhook_controller_1.EmployeeWebhookController,
            admin_resource_manager_controller_1.AdminResourceManagerController,
            admin_user_controller_1.AdminUserController,
            employee_controller_1.UserEmployeeController,
            user_controller_1.UserUserController,
        ],
        providers: [
            employee_service_1.EmployeeService,
            usecases_1.GetEmployeeInfoUsecase,
            usecases_1.SyncEmployeeUsecase,
            usecases_1.GetResourceManagersUsecase,
            usecases_1.GetEmployeeListUsecase,
            usecases_1.GetManagerCandidatesUsecase,
            usecases_1.ChangeRoleUsecase,
            usecases_1.GetEmployeeDetailUsecase,
            usecases_1.CheckPasswordUsecase,
            usecases_1.ChangePasswordUsecase,
            usecases_1.ChangeNotificationSettingsUsecase,
        ],
        exports: [employee_service_1.EmployeeService],
    })
], EmployeeModule);


/***/ }),

/***/ "./src/application/employee/employee.service.ts":
/*!******************************************************!*\
  !*** ./src/application/employee/employee.service.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const usecases_1 = __webpack_require__(/*! ./usecases */ "./src/application/employee/usecases/index.ts");
let EmployeeService = class EmployeeService {
    constructor(getEmployeeInfoUsecase, syncEmployeeUsecase, getResourceManagersUsecase, getEmployeeListUsecase, getManagerCandidatesUsecase, changeRoleUsecase, getEmployeeDetailUsecase, checkPasswordUsecase, changePasswordUsecase, changeNotificationSettingsUsecase) {
        this.getEmployeeInfoUsecase = getEmployeeInfoUsecase;
        this.syncEmployeeUsecase = syncEmployeeUsecase;
        this.getResourceManagersUsecase = getResourceManagersUsecase;
        this.getEmployeeListUsecase = getEmployeeListUsecase;
        this.getManagerCandidatesUsecase = getManagerCandidatesUsecase;
        this.changeRoleUsecase = changeRoleUsecase;
        this.getEmployeeDetailUsecase = getEmployeeDetailUsecase;
        this.checkPasswordUsecase = checkPasswordUsecase;
        this.changePasswordUsecase = changePasswordUsecase;
        this.changeNotificationSettingsUsecase = changeNotificationSettingsUsecase;
    }
    async syncEmployees(employeeNumber) {
        const employees = await this.getEmployeeInfoUsecase.execute(employeeNumber);
        await this.syncEmployeeUsecase.execute(employees);
    }
    async findResourceManagers() {
        return this.getResourceManagersUsecase.execute();
    }
    async findEmployeeList() {
        return this.getEmployeeListUsecase.execute();
    }
    async findManagerCandidates() {
        return this.getManagerCandidatesUsecase.execute();
    }
    async changeRole(changeRoleDto) {
        await this.changeRoleUsecase.execute(changeRoleDto);
    }
    async findEmployeeDetail(employeeId) {
        return this.getEmployeeDetailUsecase.execute(employeeId);
    }
    async checkPassword(employeeId, password) {
        return this.checkPasswordUsecase.execute(employeeId, password);
    }
    async changePassword(employeeId, password) {
        return this.changePasswordUsecase.execute(employeeId, password);
    }
    async changeNotificationSettings(employeeId, updateDto) {
        return this.changeNotificationSettingsUsecase.execute(employeeId, updateDto);
    }
};
exports.EmployeeService = EmployeeService;
exports.EmployeeService = EmployeeService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof usecases_1.GetEmployeeInfoUsecase !== "undefined" && usecases_1.GetEmployeeInfoUsecase) === "function" ? _a : Object, typeof (_b = typeof usecases_1.SyncEmployeeUsecase !== "undefined" && usecases_1.SyncEmployeeUsecase) === "function" ? _b : Object, typeof (_c = typeof usecases_1.GetResourceManagersUsecase !== "undefined" && usecases_1.GetResourceManagersUsecase) === "function" ? _c : Object, typeof (_d = typeof usecases_1.GetEmployeeListUsecase !== "undefined" && usecases_1.GetEmployeeListUsecase) === "function" ? _d : Object, typeof (_e = typeof usecases_1.GetManagerCandidatesUsecase !== "undefined" && usecases_1.GetManagerCandidatesUsecase) === "function" ? _e : Object, typeof (_f = typeof usecases_1.ChangeRoleUsecase !== "undefined" && usecases_1.ChangeRoleUsecase) === "function" ? _f : Object, typeof (_g = typeof usecases_1.GetEmployeeDetailUsecase !== "undefined" && usecases_1.GetEmployeeDetailUsecase) === "function" ? _g : Object, typeof (_h = typeof usecases_1.CheckPasswordUsecase !== "undefined" && usecases_1.CheckPasswordUsecase) === "function" ? _h : Object, typeof (_j = typeof usecases_1.ChangePasswordUsecase !== "undefined" && usecases_1.ChangePasswordUsecase) === "function" ? _j : Object, typeof (_k = typeof usecases_1.ChangeNotificationSettingsUsecase !== "undefined" && usecases_1.ChangeNotificationSettingsUsecase) === "function" ? _k : Object])
], EmployeeService);


/***/ }),

/***/ "./src/application/employee/usecases/changeNotificationSettings.usecase.ts":
/*!*********************************************************************************!*\
  !*** ./src/application/employee/usecases/changeNotificationSettings.usecase.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangeNotificationSettingsUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let ChangeNotificationSettingsUsecase = class ChangeNotificationSettingsUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute(employeeId, updateDto) {
        const employee = await this.employeeService.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        employee.isPushNotificationEnabled = updateDto.isPushNotificationEnabled;
        await this.employeeService.update(employee.employeeId, employee);
        return this.employeeService.findByEmployeeId(employeeId);
    }
};
exports.ChangeNotificationSettingsUsecase = ChangeNotificationSettingsUsecase;
exports.ChangeNotificationSettingsUsecase = ChangeNotificationSettingsUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], ChangeNotificationSettingsUsecase);


/***/ }),

/***/ "./src/application/employee/usecases/changePassword.usecase.ts":
/*!*********************************************************************!*\
  !*** ./src/application/employee/usecases/changePassword.usecase.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangePasswordUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");
const axios_1 = __webpack_require__(/*! axios */ "axios");
let ChangePasswordUsecase = class ChangePasswordUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute(employeeId, password) {
        const employee = await this.employeeService.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        try {
            const ssoApiUrl = process.env.SSO_API_URL;
            const response = await axios_1.default.post(`${ssoApiUrl}/api/auth/change-password`, {
                newPassword: password,
            }, {
                headers: {
                    Authorization: `Bearer ${employee.accessToken}`,
                },
            });
            const data = response.data;
            console.log(data);
            employee.password = await bcrypt.hash(password, 10);
            await this.employeeService.update(employee.employeeId, employee);
        }
        catch (error) {
            console.log(error);
            throw new common_1.UnauthorizedException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.SSO_LOGIN_FAILED);
        }
    }
};
exports.ChangePasswordUsecase = ChangePasswordUsecase;
exports.ChangePasswordUsecase = ChangePasswordUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], ChangePasswordUsecase);


/***/ }),

/***/ "./src/application/employee/usecases/changeRole.usecase.ts":
/*!*****************************************************************!*\
  !*** ./src/application/employee/usecases/changeRole.usecase.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangeRoleUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let ChangeRoleUsecase = class ChangeRoleUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute(changeRoleDto) {
        const employee = await this.employeeService.findByEmployeeId(changeRoleDto.employeeId);
        if (!employee) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        employee.roles = changeRoleDto.isResourceAdmin
            ? [...employee.roles, role_type_enum_1.Role.RESOURCE_ADMIN]
            : employee.roles.filter((role) => role !== role_type_enum_1.Role.RESOURCE_ADMIN);
        await this.employeeService.update(employee.employeeId, employee);
    }
};
exports.ChangeRoleUsecase = ChangeRoleUsecase;
exports.ChangeRoleUsecase = ChangeRoleUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], ChangeRoleUsecase);


/***/ }),

/***/ "./src/application/employee/usecases/checkPassword.usecase.ts":
/*!********************************************************************!*\
  !*** ./src/application/employee/usecases/checkPassword.usecase.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckPasswordUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const axios_1 = __webpack_require__(/*! axios */ "axios");
let CheckPasswordUsecase = class CheckPasswordUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute(employeeId, password) {
        const employee = await this.employeeService.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        try {
            const ssoApiUrl = process.env.SSO_API_URL;
            const response = await axios_1.default.post(`${ssoApiUrl}/api/auth/check-password`, {
                currentPassword: password,
            }, {
                headers: {
                    Authorization: `Bearer ${employee.accessToken}`,
                },
            });
            const data = response.data;
            return data.isValid;
        }
        catch (error) {
            console.log(error);
            throw new common_1.UnauthorizedException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.SSO_LOGIN_FAILED);
        }
    }
};
exports.CheckPasswordUsecase = CheckPasswordUsecase;
exports.CheckPasswordUsecase = CheckPasswordUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], CheckPasswordUsecase);


/***/ }),

/***/ "./src/application/employee/usecases/getEmployeeDetail.usecase.ts":
/*!************************************************************************!*\
  !*** ./src/application/employee/usecases/getEmployeeDetail.usecase.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetEmployeeDetailUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let GetEmployeeDetailUsecase = class GetEmployeeDetailUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute(employeeId) {
        const employee = await this.employeeService.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        return {
            employeeId: employee.employeeId,
            email: employee.email,
            mobile: employee.mobile,
            name: employee.name,
            department: employee.department,
            position: employee.position,
            roles: employee.roles,
            isPushNotificationEnabled: employee.isPushNotificationEnabled,
        };
    }
};
exports.GetEmployeeDetailUsecase = GetEmployeeDetailUsecase;
exports.GetEmployeeDetailUsecase = GetEmployeeDetailUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], GetEmployeeDetailUsecase);


/***/ }),

/***/ "./src/application/employee/usecases/getEmployeeInfo.usecase.ts":
/*!**********************************************************************!*\
  !*** ./src/application/employee/usecases/getEmployeeInfo.usecase.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetEmployeeInfoUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const mms_employee_response_dto_1 = __webpack_require__(/*! @resource/application/employee/dtos/mms-employee-response.dto */ "./src/application/employee/dtos/mms-employee-response.dto.ts");
const axios_1 = __webpack_require__(/*! axios */ "axios");
let GetEmployeeInfoUsecase = class GetEmployeeInfoUsecase {
    constructor() { }
    async execute(employeeNumber) {
        let url = `${process.env.METADATA_MANAGER_URL}/api/employees?detailed=true`;
        if (employeeNumber) {
            url += `&employeeNumber=${employeeNumber}`;
        }
        const result = await axios_1.default.get(url);
        if (employeeNumber) {
            return [new mms_employee_response_dto_1.MMSEmployeeResponseDto(result.data)];
        }
        return result.data.map((employee) => new mms_employee_response_dto_1.MMSEmployeeResponseDto(employee));
    }
};
exports.GetEmployeeInfoUsecase = GetEmployeeInfoUsecase;
exports.GetEmployeeInfoUsecase = GetEmployeeInfoUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [])
], GetEmployeeInfoUsecase);


/***/ }),

/***/ "./src/application/employee/usecases/getEmployeeList.usecase.ts":
/*!**********************************************************************!*\
  !*** ./src/application/employee/usecases/getEmployeeList.usecase.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetEmployeeListUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
let GetEmployeeListUsecase = class GetEmployeeListUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute() {
        const resourceManagers = await this.employeeService.findAll({
            where: {
                department: (0, typeorm_1.Not)((0, typeorm_1.In)(['퇴사', '관리자'])),
            },
            select: {
                employeeId: true,
                name: true,
                employeeNumber: true,
                department: true,
                position: true,
            },
        });
        const departments = new Map();
        resourceManagers.forEach((resourceManager) => {
            if (!departments.has(resourceManager.department)) {
                departments.set(resourceManager.department, []);
            }
            departments.get(resourceManager.department)?.push(resourceManager);
        });
        return Array.from(departments.entries()).map(([department, employees]) => ({
            department,
            employees,
        }));
    }
};
exports.GetEmployeeListUsecase = GetEmployeeListUsecase;
exports.GetEmployeeListUsecase = GetEmployeeListUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], GetEmployeeListUsecase);


/***/ }),

/***/ "./src/application/employee/usecases/getManagerCandidates.usecase.ts":
/*!***************************************************************************!*\
  !*** ./src/application/employee/usecases/getManagerCandidates.usecase.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetManagerCandidatesUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
let GetManagerCandidatesUsecase = class GetManagerCandidatesUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute() {
        const resourceManagers = await this.employeeService.findAll({
            where: {
                department: (0, typeorm_1.Not)((0, typeorm_1.In)(['퇴사', '관리자'])),
            },
            select: {
                employeeId: true,
                name: true,
                employeeNumber: true,
                department: true,
                position: true,
                roles: true,
            },
        });
        const departments = new Map();
        resourceManagers.forEach((resourceManager) => {
            if (!departments.has(resourceManager.department)) {
                departments.set(resourceManager.department, []);
            }
            const data = {
                ...resourceManager,
                isResourceAdmin: resourceManager.roles.includes(role_type_enum_1.Role.RESOURCE_ADMIN),
            };
            departments.get(resourceManager.department)?.push(data);
        });
        return Array.from(departments.entries()).map(([department, employees]) => ({
            department,
            employees,
        }));
    }
};
exports.GetManagerCandidatesUsecase = GetManagerCandidatesUsecase;
exports.GetManagerCandidatesUsecase = GetManagerCandidatesUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], GetManagerCandidatesUsecase);


/***/ }),

/***/ "./src/application/employee/usecases/getResourceManagers.usecase.ts":
/*!**************************************************************************!*\
  !*** ./src/application/employee/usecases/getResourceManagers.usecase.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetResourceManagersUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
let GetResourceManagersUsecase = class GetResourceManagersUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute() {
        const resourceManagers = await this.employeeService.findAll({
            where: {
                roles: (0, typeorm_1.Raw)(() => `'${role_type_enum_1.Role.RESOURCE_ADMIN}' = ANY("roles")`),
                department: (0, typeorm_1.Not)((0, typeorm_1.In)(['퇴사', '관리자'])),
            },
            select: {
                employeeId: true,
                name: true,
                employeeNumber: true,
                department: true,
                position: true,
            },
        });
        const departments = new Map();
        resourceManagers.forEach((resourceManager) => {
            if (!departments.has(resourceManager.department)) {
                departments.set(resourceManager.department, []);
            }
            departments.get(resourceManager.department)?.push(resourceManager);
        });
        return Array.from(departments.entries()).map(([department, employees]) => ({
            department,
            employees,
        }));
    }
};
exports.GetResourceManagersUsecase = GetResourceManagersUsecase;
exports.GetResourceManagersUsecase = GetResourceManagersUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], GetResourceManagersUsecase);


/***/ }),

/***/ "./src/application/employee/usecases/index.ts":
/*!****************************************************!*\
  !*** ./src/application/employee/usecases/index.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./getEmployeeInfo.usecase */ "./src/application/employee/usecases/getEmployeeInfo.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./getEmployeeList.usecase */ "./src/application/employee/usecases/getEmployeeList.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./getResourceManagers.usecase */ "./src/application/employee/usecases/getResourceManagers.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./syncEmployee.usecase */ "./src/application/employee/usecases/syncEmployee.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./getManagerCandidates.usecase */ "./src/application/employee/usecases/getManagerCandidates.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./changeRole.usecase */ "./src/application/employee/usecases/changeRole.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./getEmployeeDetail.usecase */ "./src/application/employee/usecases/getEmployeeDetail.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./checkPassword.usecase */ "./src/application/employee/usecases/checkPassword.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./changePassword.usecase */ "./src/application/employee/usecases/changePassword.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./changeNotificationSettings.usecase */ "./src/application/employee/usecases/changeNotificationSettings.usecase.ts"), exports);


/***/ }),

/***/ "./src/application/employee/usecases/syncEmployee.usecase.ts":
/*!*******************************************************************!*\
  !*** ./src/application/employee/usecases/syncEmployee.usecase.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SyncEmployeeUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @resource/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
let SyncEmployeeUsecase = class SyncEmployeeUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute(employees) {
        for (const employee of employees) {
            const existingEmployee = await this.employeeService.findOne({
                where: {
                    employeeNumber: employee.employee_number,
                },
            });
            if (employee.status === '퇴사') {
                if (existingEmployee) {
                    await this.employeeService.update(existingEmployee.employeeId, {
                        department: employee.status,
                        position: employee.status,
                    });
                }
                continue;
            }
            try {
                if (existingEmployee) {
                    existingEmployee.name = employee.name;
                    existingEmployee.employeeNumber = employee.employee_number;
                    existingEmployee.department = employee.department;
                    existingEmployee.position = employee.rank;
                    existingEmployee.mobile = employee.phone_number;
                    await this.employeeService.save(existingEmployee);
                }
                else {
                    console.log('create employee', employee);
                    const employeeData = {
                        employeeNumber: employee.employee_number,
                        name: employee.name,
                        email: employee.email,
                        department: employee.department,
                        position: employee.rank,
                        mobile: employee.phone_number,
                    };
                    const newEmployee = await this.employeeService.create(employeeData);
                    await this.employeeService.save(newEmployee);
                }
            }
            catch (error) {
                console.log(error);
            }
        }
    }
};
exports.SyncEmployeeUsecase = SyncEmployeeUsecase;
exports.SyncEmployeeUsecase = SyncEmployeeUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], SyncEmployeeUsecase);


/***/ }),

/***/ "./src/application/file/controllers/cron.file.controller.ts":
/*!******************************************************************!*\
  !*** ./src/application/file/controllers/cron.file.controller.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CronFileController = void 0;
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const file_service_1 = __webpack_require__(/*! ../file.service */ "./src/application/file/file.service.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
let CronFileController = class CronFileController {
    constructor(fileService) {
        this.fileService = fileService;
    }
    async deleteTemporaryFile() {
        return this.fileService.deleteTemporaryFile();
    }
};
exports.CronFileController = CronFileController;
__decorate([
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, common_1.Get)('cron-job/delete-temporary-file'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], CronFileController.prototype, "deleteTemporaryFile", null);
exports.CronFileController = CronFileController = __decorate([
    (0, swagger_1.ApiTags)('0. 파일 - 공통 '),
    (0, public_decorator_1.Public)(),
    (0, common_1.Controller)('v1/files'),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof file_service_1.FileService !== "undefined" && file_service_1.FileService) === "function" ? _a : Object])
], CronFileController);


/***/ }),

/***/ "./src/application/file/controllers/file.controller.ts":
/*!*************************************************************!*\
  !*** ./src/application/file/controllers/file.controller.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const platform_express_1 = __webpack_require__(/*! @nestjs/platform-express */ "@nestjs/platform-express");
const file_service_1 = __webpack_require__(/*! @resource/application/file/file.service */ "./src/application/file/file.service.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const file_response_dto_1 = __webpack_require__(/*! @resource/application/file/dtos/file-response.dto */ "./src/application/file/dtos/file-response.dto.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const mime_type_enum_1 = __webpack_require__(/*! @libs/enums/mime-type.enum */ "./libs/enums/mime-type.enum.ts");
const create_filedata_dto_1 = __webpack_require__(/*! ../dtos/create-filedata.dto */ "./src/application/file/dtos/create-filedata.dto.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
let FileController = class FileController {
    constructor(fileService) {
        this.fileService = fileService;
    }
    async uploadFile(file) {
        return this.fileService.uploadFile(file);
    }
    async uploadMultipleFiles(files) {
        return this.fileService.uploadMultipleFiles(files);
    }
    async deleteMultipleFiles(fileIds) {
        await this.fileService.deleteMultipleFiles(fileIds);
    }
    async getPresignedUrl(mime) {
        return this.fileService.getPresignedUrl(mime);
    }
    async createFileData(createFileDataDto) {
        return this.fileService.createFileData(createFileDataDto);
    }
    async deleteFile(fileId) {
        await this.fileService.deleteFile(fileId);
    }
};
exports.FileController = FileController;
__decorate([
    (0, common_1.Post)('upload'),
    (0, swagger_1.ApiConsumes)('multipart/form-data'),
    (0, swagger_1.ApiBody)({
        schema: {
            type: 'object',
            properties: {
                file: {
                    type: 'string',
                    format: 'binary',
                },
            },
        },
    }),
    (0, swagger_1.ApiOperation)({ summary: '파일 업로드' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '파일 업로드 성공', type: file_response_dto_1.FileResponseDto }),
    (0, common_1.UseInterceptors)((0, platform_express_1.FileInterceptor)('file')),
    __param(0, (0, common_1.UploadedFile)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof Express !== "undefined" && (_b = Express.Multer) !== void 0 && _b.File) === "function" ? _c : Object]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "uploadFile", null);
__decorate([
    (0, common_1.Post)('upload/multiple'),
    (0, swagger_1.ApiConsumes)('multipart/form-data'),
    (0, swagger_1.ApiBody)({
        schema: {
            type: 'object',
            properties: {
                files: {
                    type: 'array',
                    items: {
                        type: 'string',
                        format: 'binary',
                    },
                },
            },
        },
    }),
    (0, swagger_1.ApiOperation)({ summary: '여러 파일 업로드' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '여러 파일 업로드 성공', type: [file_response_dto_1.FileResponseDto] }),
    (0, common_1.UseInterceptors)((0, platform_express_1.FilesInterceptor)('files', 10)),
    __param(0, (0, common_1.UploadedFiles)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Array]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "uploadMultipleFiles", null);
__decorate([
    (0, common_1.Delete)('multiple'),
    (0, swagger_1.ApiOperation)({ summary: '여러 파일 삭제' }),
    (0, swagger_1.ApiBody)({
        schema: {
            type: 'object',
            properties: {
                fileIds: {
                    type: 'array',
                    items: {
                        type: 'string',
                    },
                },
            },
        },
    }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '여러 파일 삭제 성공' }),
    __param(0, (0, common_1.Body)('fileIds')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Array]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "deleteMultipleFiles", null);
__decorate([
    (0, common_1.Get)('presigned-url'),
    (0, swagger_1.ApiOperation)({ summary: 'Presigned URL 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: 'Presigned URL 생성 성공' }),
    (0, swagger_1.ApiQuery)({ name: 'mime', enum: mime_type_enum_1.MimeType, example: mime_type_enum_1.MimeType.IMAGE_PNG, required: true }),
    __param(0, (0, common_1.Query)('mime')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof mime_type_enum_1.MimeType !== "undefined" && mime_type_enum_1.MimeType) === "function" ? _d : Object]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "getPresignedUrl", null);
__decorate([
    (0, common_1.Post)('data'),
    (0, swagger_1.ApiOperation)({ summary: '파일 데이터 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '파일 데이터 생성 성공' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof create_filedata_dto_1.CreateFileDataDto !== "undefined" && create_filedata_dto_1.CreateFileDataDto) === "function" ? _e : Object]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "createFileData", null);
__decorate([
    (0, common_1.Delete)(':fileId'),
    (0, swagger_1.ApiOperation)({ summary: '파일 삭제' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '파일 삭제 성공' }),
    __param(0, (0, common_1.Param)('fileId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "deleteFile", null);
exports.FileController = FileController = __decorate([
    (0, swagger_1.ApiTags)('0. 파일 - 공통 '),
    (0, common_1.Controller)('v1/files'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof file_service_1.FileService !== "undefined" && file_service_1.FileService) === "function" ? _a : Object])
], FileController);


/***/ }),

/***/ "./src/application/file/dtos/create-filedata.dto.ts":
/*!**********************************************************!*\
  !*** ./src/application/file/dtos/create-filedata.dto.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateFileDataDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class CreateFileDataDto {
}
exports.CreateFileDataDto = CreateFileDataDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '파일 경로' }),
    __metadata("design:type", String)
], CreateFileDataDto.prototype, "filePath", void 0);


/***/ }),

/***/ "./src/application/file/dtos/file-response.dto.ts":
/*!********************************************************!*\
  !*** ./src/application/file/dtos/file-response.dto.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FileResponseDto {
}
exports.FileResponseDto = FileResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: '123e4567-e89b-12d3-a456-426614174000' }),
    __metadata("design:type", String)
], FileResponseDto.prototype, "fileId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'image.jpg' }),
    __metadata("design:type", String)
], FileResponseDto.prototype, "fileName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'uploads/20250226123456-image.jpg' }),
    __metadata("design:type", String)
], FileResponseDto.prototype, "filePath", void 0);


/***/ }),

/***/ "./src/application/file/file.module.ts":
/*!*********************************************!*\
  !*** ./src/application/file/file.module.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const file_module_1 = __webpack_require__(/*! @src/domain/file/file.module */ "./src/domain/file/file.module.ts");
const upload_file_usecase_1 = __webpack_require__(/*! ./usecases/upload-file.usecase */ "./src/application/file/usecases/upload-file.usecase.ts");
const delete_file_usecase_1 = __webpack_require__(/*! ./usecases/delete-file.usecase */ "./src/application/file/usecases/delete-file.usecase.ts");
const s3_service_1 = __webpack_require__(/*! ./infrastructure/s3.service */ "./src/application/file/infrastructure/s3.service.ts");
const file_controller_1 = __webpack_require__(/*! ./controllers/file.controller */ "./src/application/file/controllers/file.controller.ts");
const file_service_1 = __webpack_require__(/*! ./file.service */ "./src/application/file/file.service.ts");
const env_config_1 = __webpack_require__(/*! @libs/configs/env.config */ "./libs/configs/env.config.ts");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const file_entity_1 = __webpack_require__(/*! @libs/entities/file.entity */ "./libs/entities/file.entity.ts");
const cron_file_controller_1 = __webpack_require__(/*! ./controllers/cron.file.controller */ "./src/application/file/controllers/cron.file.controller.ts");
const find_temporary_file_usecase_1 = __webpack_require__(/*! ./usecases/find-temporary-file.usecase */ "./src/application/file/usecases/find-temporary-file.usecase.ts");
const create_file_data_usecase_1 = __webpack_require__(/*! ./usecases/create-file-data.usecase */ "./src/application/file/usecases/create-file-data.usecase.ts");
const get_presigned_url_usecase_1 = __webpack_require__(/*! ./usecases/get-presigned-url.usecase */ "./src/application/file/usecases/get-presigned-url.usecase.ts");
let FileModule = class FileModule {
};
exports.FileModule = FileModule;
exports.FileModule = FileModule = __decorate([
    (0, common_1.Module)({
        imports: [file_module_1.DomainFileModule, typeorm_1.TypeOrmModule.forFeature([file_entity_1.File]), config_1.ConfigModule.forFeature(env_config_1.APP_CONFIG)],
        controllers: [file_controller_1.FileController, cron_file_controller_1.CronFileController],
        providers: [
            file_service_1.FileService,
            upload_file_usecase_1.UploadFileUsecase,
            delete_file_usecase_1.DeleteFileUsecase,
            s3_service_1.S3Service,
            find_temporary_file_usecase_1.FindTemporaryFileUsecase,
            create_file_data_usecase_1.CreateFileDataUsecase,
            get_presigned_url_usecase_1.GetPresignedUrlUsecase,
        ],
        exports: [file_service_1.FileService],
    })
], FileModule);


/***/ }),

/***/ "./src/application/file/file.service.ts":
/*!**********************************************!*\
  !*** ./src/application/file/file.service.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const upload_file_usecase_1 = __webpack_require__(/*! ./usecases/upload-file.usecase */ "./src/application/file/usecases/upload-file.usecase.ts");
const delete_file_usecase_1 = __webpack_require__(/*! ./usecases/delete-file.usecase */ "./src/application/file/usecases/delete-file.usecase.ts");
const find_temporary_file_usecase_1 = __webpack_require__(/*! ./usecases/find-temporary-file.usecase */ "./src/application/file/usecases/find-temporary-file.usecase.ts");
const get_presigned_url_usecase_1 = __webpack_require__(/*! ./usecases/get-presigned-url.usecase */ "./src/application/file/usecases/get-presigned-url.usecase.ts");
const create_file_data_usecase_1 = __webpack_require__(/*! ./usecases/create-file-data.usecase */ "./src/application/file/usecases/create-file-data.usecase.ts");
let FileService = class FileService {
    constructor(uploadFileUsecase, deleteFileUsecase, findTemporaryFileUsecase, getPresignedUrlUsecase, createFileDataUsecase) {
        this.uploadFileUsecase = uploadFileUsecase;
        this.deleteFileUsecase = deleteFileUsecase;
        this.findTemporaryFileUsecase = findTemporaryFileUsecase;
        this.getPresignedUrlUsecase = getPresignedUrlUsecase;
        this.createFileDataUsecase = createFileDataUsecase;
    }
    async deleteTemporaryFile() {
        const files = await this.findTemporaryFileUsecase.execute();
        const deletePromises = files.map((file) => this.deleteFileUsecase.execute(file.fileId));
        await Promise.all(deletePromises);
    }
    async uploadFile(file) {
        return await this.uploadFileUsecase.execute(file);
    }
    async uploadMultipleFiles(files) {
        const uploadPromises = files.map((file) => this.uploadFileUsecase.execute(file));
        return await Promise.all(uploadPromises);
    }
    async deleteFile(fileId) {
        await this.deleteFileUsecase.execute(fileId);
    }
    async deleteMultipleFiles(fileIds) {
        const deletePromises = fileIds.map((fileId) => this.deleteFileUsecase.execute(fileId));
        await Promise.all(deletePromises);
    }
    async getPresignedUrl(mime) {
        if (!mime) {
            throw new common_1.BadRequestException('Mime type is required');
        }
        return this.getPresignedUrlUsecase.execute(mime);
    }
    async createFileData(createFileDataDto) {
        return this.createFileDataUsecase.execute(createFileDataDto);
    }
};
exports.FileService = FileService;
exports.FileService = FileService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof upload_file_usecase_1.UploadFileUsecase !== "undefined" && upload_file_usecase_1.UploadFileUsecase) === "function" ? _a : Object, typeof (_b = typeof delete_file_usecase_1.DeleteFileUsecase !== "undefined" && delete_file_usecase_1.DeleteFileUsecase) === "function" ? _b : Object, typeof (_c = typeof find_temporary_file_usecase_1.FindTemporaryFileUsecase !== "undefined" && find_temporary_file_usecase_1.FindTemporaryFileUsecase) === "function" ? _c : Object, typeof (_d = typeof get_presigned_url_usecase_1.GetPresignedUrlUsecase !== "undefined" && get_presigned_url_usecase_1.GetPresignedUrlUsecase) === "function" ? _d : Object, typeof (_e = typeof create_file_data_usecase_1.CreateFileDataUsecase !== "undefined" && create_file_data_usecase_1.CreateFileDataUsecase) === "function" ? _e : Object])
], FileService);


/***/ }),

/***/ "./src/application/file/infrastructure/s3.service.ts":
/*!***********************************************************!*\
  !*** ./src/application/file/infrastructure/s3.service.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.S3Service = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const client_s3_1 = __webpack_require__(/*! @aws-sdk/client-s3 */ "@aws-sdk/client-s3");
const s3_request_presigner_1 = __webpack_require__(/*! @aws-sdk/s3-request-presigner */ "@aws-sdk/s3-request-presigner");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const mime_type_enum_1 = __webpack_require__(/*! @libs/enums/mime-type.enum */ "./libs/enums/mime-type.enum.ts");
let S3Service = class S3Service {
    constructor(configService) {
        this.configService = configService;
        this.bucketName = this.configService.get('S3_BUCKET_NAME');
        this.s3Client = new client_s3_1.S3Client({
            region: this.configService.get('S3_REGION'),
            endpoint: this.configService.get('S3_ENDPOINT'),
            credentials: {
                accessKeyId: this.configService.get('S3_ACCESS_KEY'),
                secretAccessKey: this.configService.get('S3_SECRET_KEY'),
            },
            forcePathStyle: true,
        });
    }
    async uploadFile(file) {
        const fileExtension = file.originalname.split('.').pop();
        const fileName = `${date_util_1.DateUtil.now().format('YYYYMMDDHHmmssSSS')}.${fileExtension}`;
        try {
            await this.s3Client.send(new client_s3_1.PutObjectCommand({
                Bucket: this.bucketName,
                Key: fileName,
                Body: file.buffer,
                ContentType: file.mimetype,
            }));
            const newFile = {
                fileName: fileName,
                filePath: this.getFileUrl(fileName),
            };
            return newFile;
        }
        catch (error) {
            throw new Error(`Failed to upload file to S3: ${error.message}`);
        }
    }
    async deleteFile(file) {
        try {
            await this.s3Client.send(new client_s3_1.DeleteObjectCommand({
                Bucket: this.bucketName,
                Key: file.fileName,
            }));
        }
        catch (error) {
            throw new Error(`Failed to delete file from S3: ${error.message}`);
        }
    }
    getFileUrl(fileKey) {
        return `${this.configService.get('S3_ENDPOINT').replace('s3', 'object/public')}/${this.bucketName}/${fileKey}`;
    }
    async generatePresignedUrl(mime) {
        const extMap = {
            [mime_type_enum_1.MimeType.IMAGE_JPEG]: 'jpg',
            [mime_type_enum_1.MimeType.IMAGE_PNG]: 'png',
            [mime_type_enum_1.MimeType.IMAGE_WEBP]: 'webp',
        };
        const fileExtension = extMap[mime] || 'bin';
        const fileKey = `${date_util_1.DateUtil.now().format('YYYYMMDDHHmmssSSS')}.${fileExtension}`;
        const command = new client_s3_1.PutObjectCommand({
            Bucket: this.bucketName,
            Key: fileKey,
            ContentType: mime,
        });
        const url = await (0, s3_request_presigner_1.getSignedUrl)(this.s3Client, command, { expiresIn: 60 * 2 });
        return url;
    }
    async checkFileExists(fileKey) {
        try {
            const command = new client_s3_1.HeadObjectCommand({
                Bucket: this.bucketName,
                Key: fileKey,
            });
            const result = await this.s3Client.send(command);
            console.log(result);
            return result.ContentLength !== undefined && result.ContentLength > 0;
        }
        catch (error) {
            console.error(error);
            return false;
        }
    }
};
exports.S3Service = S3Service;
exports.S3Service = S3Service = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _a : Object])
], S3Service);


/***/ }),

/***/ "./src/application/file/usecases/create-file-data.usecase.ts":
/*!*******************************************************************!*\
  !*** ./src/application/file/usecases/create-file-data.usecase.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateFileDataUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const s3_service_1 = __webpack_require__(/*! ../infrastructure/s3.service */ "./src/application/file/infrastructure/s3.service.ts");
let CreateFileDataUsecase = class CreateFileDataUsecase {
    constructor(fileService, s3Service) {
        this.fileService = fileService;
        this.s3Service = s3Service;
        this.retryCount = 3;
    }
    async execute(createFileDataDto) {
        const fileName = createFileDataDto.filePath.split('/').pop();
        const fileExists = await this.s3Service.checkFileExists(fileName);
        if (!fileExists) {
            throw new common_1.BadRequestException('File not found in S3');
        }
        const file = await this.fileService.create({
            fileName,
            filePath: this.s3Service.getFileUrl(fileName),
        });
        return await this.fileService.save(file);
    }
};
exports.CreateFileDataUsecase = CreateFileDataUsecase;
exports.CreateFileDataUsecase = CreateFileDataUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _a : Object, typeof (_b = typeof s3_service_1.S3Service !== "undefined" && s3_service_1.S3Service) === "function" ? _b : Object])
], CreateFileDataUsecase);


/***/ }),

/***/ "./src/application/file/usecases/delete-file.usecase.ts":
/*!**************************************************************!*\
  !*** ./src/application/file/usecases/delete-file.usecase.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DeleteFileUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const s3_service_1 = __webpack_require__(/*! ../infrastructure/s3.service */ "./src/application/file/infrastructure/s3.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let DeleteFileUsecase = class DeleteFileUsecase {
    constructor(s3Service, fileService) {
        this.s3Service = s3Service;
        this.fileService = fileService;
    }
    async execute(fileId) {
        let file;
        if (fileId) {
            file = await this.fileService.findFileById(fileId);
            if (!file)
                throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.FILE.NOT_FOUND);
        }
        else {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.FILE.ID_OR_PATH_REQUIRED);
        }
        await this.s3Service.deleteFile(file);
        await this.fileService.delete(file.fileId);
    }
};
exports.DeleteFileUsecase = DeleteFileUsecase;
exports.DeleteFileUsecase = DeleteFileUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof s3_service_1.S3Service !== "undefined" && s3_service_1.S3Service) === "function" ? _a : Object, typeof (_b = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _b : Object])
], DeleteFileUsecase);


/***/ }),

/***/ "./src/application/file/usecases/find-temporary-file.usecase.ts":
/*!**********************************************************************!*\
  !*** ./src/application/file/usecases/find-temporary-file.usecase.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindTemporaryFileUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let FindTemporaryFileUsecase = class FindTemporaryFileUsecase {
    constructor(fileService) {
        this.fileService = fileService;
    }
    async execute() {
        return await this.fileService.findAll({
            where: { isTemporary: true, createdAt: (0, typeorm_1.LessThan)(date_util_1.DateUtil.now().addDays(-1).toDate()) },
        });
    }
};
exports.FindTemporaryFileUsecase = FindTemporaryFileUsecase;
exports.FindTemporaryFileUsecase = FindTemporaryFileUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _a : Object])
], FindTemporaryFileUsecase);


/***/ }),

/***/ "./src/application/file/usecases/get-presigned-url.usecase.ts":
/*!********************************************************************!*\
  !*** ./src/application/file/usecases/get-presigned-url.usecase.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetPresignedUrlUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const s3_service_1 = __webpack_require__(/*! ../infrastructure/s3.service */ "./src/application/file/infrastructure/s3.service.ts");
let GetPresignedUrlUsecase = class GetPresignedUrlUsecase {
    constructor(s3Service) {
        this.s3Service = s3Service;
    }
    async execute(mime) {
        return this.s3Service.generatePresignedUrl(mime);
    }
};
exports.GetPresignedUrlUsecase = GetPresignedUrlUsecase;
exports.GetPresignedUrlUsecase = GetPresignedUrlUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof s3_service_1.S3Service !== "undefined" && s3_service_1.S3Service) === "function" ? _a : Object])
], GetPresignedUrlUsecase);


/***/ }),

/***/ "./src/application/file/usecases/upload-file.usecase.ts":
/*!**************************************************************!*\
  !*** ./src/application/file/usecases/upload-file.usecase.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UploadFileUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const s3_service_1 = __webpack_require__(/*! ../infrastructure/s3.service */ "./src/application/file/infrastructure/s3.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
let UploadFileUsecase = class UploadFileUsecase {
    constructor(s3Service, fileService) {
        this.s3Service = s3Service;
        this.fileService = fileService;
    }
    async execute(file) {
        const newFile = await this.s3Service.uploadFile(file);
        const savedFile = await this.fileService.save(newFile);
        return savedFile;
    }
};
exports.UploadFileUsecase = UploadFileUsecase;
exports.UploadFileUsecase = UploadFileUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof s3_service_1.S3Service !== "undefined" && s3_service_1.S3Service) === "function" ? _a : Object, typeof (_b = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _b : Object])
], UploadFileUsecase);


/***/ }),

/***/ "./src/application/notification/controllers/admin.notification.controller.ts":
/*!***********************************************************************************!*\
  !*** ./src/application/notification/controllers/admin.notification.controller.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminNotificationController = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const create_notification_dto_1 = __webpack_require__(/*! ../dtos/create-notification.dto */ "./src/application/notification/dtos/create-notification.dto.ts");
const notification_service_1 = __webpack_require__(/*! ../services/notification.service */ "./src/application/notification/services/notification.service.ts");
let AdminNotificationController = class AdminNotificationController {
    constructor(notificationService) {
        this.notificationService = notificationService;
    }
    async send(sendNotificationDto) {
        await this.notificationService.sendRequestNotification(sendNotificationDto.notificationType, sendNotificationDto.notificationData, sendNotificationDto.notificationTarget);
    }
};
exports.AdminNotificationController = AdminNotificationController;
__decorate([
    (0, common_1.Post)('send'),
    (0, swagger_1.ApiOperation)({ summary: '웹 푸시 알림 전송' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '웹 푸시 알림 전송 성공',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof create_notification_dto_1.SendNotificationDto !== "undefined" && create_notification_dto_1.SendNotificationDto) === "function" ? _b : Object]),
    __metadata("design:returntype", Promise)
], AdminNotificationController.prototype, "send", null);
exports.AdminNotificationController = AdminNotificationController = __decorate([
    (0, swagger_1.ApiTags)('5. 알림 - 관리자'),
    (0, common_1.Controller)('v1/admin/notifications'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_service_1.NotificationService !== "undefined" && notification_service_1.NotificationService) === "function" ? _a : Object])
], AdminNotificationController);


/***/ }),

/***/ "./src/application/notification/controllers/notification.controller.ts":
/*!*****************************************************************************!*\
  !*** ./src/application/notification/controllers/notification.controller.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationController = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const pagination_query_dto_1 = __webpack_require__(/*! @libs/dtos/pagination-query.dto */ "./libs/dtos/pagination-query.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const push_subscription_dto_1 = __webpack_require__(/*! ../dtos/push-subscription.dto */ "./src/application/notification/dtos/push-subscription.dto.ts");
const response_notification_dto_1 = __webpack_require__(/*! ../dtos/response-notification.dto */ "./src/application/notification/dtos/response-notification.dto.ts");
const create_notification_dto_1 = __webpack_require__(/*! ../dtos/create-notification.dto */ "./src/application/notification/dtos/create-notification.dto.ts");
const send_notification_dto_1 = __webpack_require__(/*! ../dtos/send-notification.dto */ "./src/application/notification/dtos/send-notification.dto.ts");
const notification_service_1 = __webpack_require__(/*! ../services/notification.service */ "./src/application/notification/services/notification.service.ts");
let NotificationController = class NotificationController {
    constructor(notificationService) {
        this.notificationService = notificationService;
    }
    async subscribe(user, subscription) {
        await this.notificationService.subscribe(user, subscription);
    }
    async sendSuccess(body) {
        await this.notificationService.sendDirectNotification(body.subscription, body.payload);
    }
    async send(sendNotificationDto) {
        await this.notificationService.sendReminderNotification(sendNotificationDto.notificationType, sendNotificationDto.notificationData, sendNotificationDto.notificationTarget);
    }
    async findAllByEmployeeId(employeeId, query) {
        return await this.notificationService.findMyNotifications(employeeId, query);
    }
    async markAsRead(user, notificationId) {
        await this.notificationService.markAsRead(user.employeeId, notificationId);
    }
    async findSubscription(token, employeeId) {
        return await this.notificationService.findSubscription(token, employeeId);
    }
};
exports.NotificationController = NotificationController;
__decorate([
    (0, common_1.Post)('subscribe'),
    (0, swagger_1.ApiOperation)({ summary: '웹 푸시 구독' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '웹 푸시 구독 성공',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object, typeof (_c = typeof push_subscription_dto_1.PushSubscriptionDto !== "undefined" && push_subscription_dto_1.PushSubscriptionDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], NotificationController.prototype, "subscribe", null);
__decorate([
    (0, common_1.Post)('subscribe/success'),
    (0, swagger_1.ApiOperation)({ summary: '웹 푸시 구독 성공' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '웹 푸시 구독 성공',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof send_notification_dto_1.PushNotificationDto !== "undefined" && send_notification_dto_1.PushNotificationDto) === "function" ? _e : Object]),
    __metadata("design:returntype", Promise)
], NotificationController.prototype, "sendSuccess", null);
__decorate([
    (0, common_1.Post)('send'),
    (0, swagger_1.ApiOperation)({ summary: '웹 푸시 알림 전송' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '웹 푸시 알림 전송 성공',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof create_notification_dto_1.SendNotificationDto !== "undefined" && create_notification_dto_1.SendNotificationDto) === "function" ? _f : Object]),
    __metadata("design:returntype", Promise)
], NotificationController.prototype, "send", null);
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '알람 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '알람 목록 조회 성공',
        type: [response_notification_dto_1.ResponseNotificationDto],
        isPaginated: true,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'page',
        type: Number,
        required: false,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'limit',
        type: Number,
        required: false,
    }),
    __param(0, (0, user_decorator_1.User)('employeeId')),
    __param(1, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_g = typeof pagination_query_dto_1.PaginationQueryDto !== "undefined" && pagination_query_dto_1.PaginationQueryDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], NotificationController.prototype, "findAllByEmployeeId", null);
__decorate([
    (0, common_1.Patch)(':notificationId/read'),
    (0, swagger_1.ApiOperation)({ summary: '알람 읽음 처리' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('notificationId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _j : Object, String]),
    __metadata("design:returntype", Promise)
], NotificationController.prototype, "markAsRead", null);
__decorate([
    (0, common_1.Get)('subscription'),
    (0, swagger_1.ApiOperation)({ summary: '구독 정보 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '구독 정보 조회 성공',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'token',
        type: String,
        required: false,
        description: '구독 토큰',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'employeeId',
        type: String,
        required: false,
        description: '직원 ID',
    }),
    __param(0, (0, common_1.Query)('token')),
    __param(1, (0, common_1.Query)('employeeId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", Promise)
], NotificationController.prototype, "findSubscription", null);
exports.NotificationController = NotificationController = __decorate([
    (0, swagger_1.ApiTags)('5. 알림 '),
    (0, common_1.Controller)('v1/notifications'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_service_1.NotificationService !== "undefined" && notification_service_1.NotificationService) === "function" ? _a : Object])
], NotificationController);


/***/ }),

/***/ "./src/application/notification/dtos/create-notification.dto.ts":
/*!**********************************************************************!*\
  !*** ./src/application/notification/dtos/create-notification.dto.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SendNotificationDto = exports.CreateEmployeeNotificationDto = exports.CreateNotificationDto = exports.CreateNotificationDataDto = void 0;
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class CreateNotificationDataDto {
}
exports.CreateNotificationDataDto = CreateNotificationDataDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '예약 ID, 예약 알림 시 필수' }),
    __metadata("design:type", String)
], CreateNotificationDataDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '예약 제목, 예약 알림 시 필수' }),
    __metadata("design:type", String)
], CreateNotificationDataDto.prototype, "reservationTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '예약 날짜, 예약 알림 시 필수' }),
    __metadata("design:type", String)
], CreateNotificationDataDto.prototype, "reservationDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '예약 시작 전 분 수, 예약 시간 알림 시 필수' }),
    __metadata("design:type", Number)
], CreateNotificationDataDto.prototype, "beforeMinutes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID, 자원 알림 시 필수' }),
    __metadata("design:type", String)
], CreateNotificationDataDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: true, description: '자원 이름' }),
    __metadata("design:type", String)
], CreateNotificationDataDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType, required: true, description: '자원 타입' }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], CreateNotificationDataDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '소모품 이름, 소모품 알림 시 필수' }),
    __metadata("design:type", String)
], CreateNotificationDataDto.prototype, "consumableName", void 0);
class CreateNotificationDto {
}
exports.CreateNotificationDto = CreateNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "body", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", CreateNotificationDataDto)
], CreateNotificationDto.prototype, "notificationData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], CreateNotificationDto.prototype, "isSent", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: notification_type_enum_1.NotificationType }),
    __metadata("design:type", typeof (_b = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _b : Object)
], CreateNotificationDto.prototype, "notificationType", void 0);
class CreateEmployeeNotificationDto {
}
exports.CreateEmployeeNotificationDto = CreateEmployeeNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateEmployeeNotificationDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateEmployeeNotificationDto.prototype, "notificationId", void 0);
class SendNotificationDto {
}
exports.SendNotificationDto = SendNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ enum: notification_type_enum_1.NotificationType }),
    __metadata("design:type", typeof (_c = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _c : Object)
], SendNotificationDto.prototype, "notificationType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", CreateNotificationDataDto)
], SendNotificationDto.prototype, "notificationData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: ['1256124-ef14-4124-9124-124124124124'],
        description: '알림 수신자 목록 (employeeId)',
    }),
    __metadata("design:type", Array)
], SendNotificationDto.prototype, "notificationTarget", void 0);


/***/ }),

/***/ "./src/application/notification/dtos/push-subscription.dto.ts":
/*!********************************************************************!*\
  !*** ./src/application/notification/dtos/push-subscription.dto.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PushSubscriptionDto = exports.WebPushDto = exports.FCMDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FCMDto {
}
exports.FCMDto = FCMDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], FCMDto.prototype, "token", void 0);
class WebPushDto {
}
exports.WebPushDto = WebPushDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], WebPushDto.prototype, "endpoint", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'object',
        properties: {
            auth: { type: 'string' },
            p256dh: { type: 'string' },
        },
    }),
    __metadata("design:type", Object)
], WebPushDto.prototype, "keys", void 0);
class PushSubscriptionDto {
}
exports.PushSubscriptionDto = PushSubscriptionDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: FCMDto, required: false }),
    __metadata("design:type", FCMDto)
], PushSubscriptionDto.prototype, "fcm", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: WebPushDto, required: false }),
    __metadata("design:type", WebPushDto)
], PushSubscriptionDto.prototype, "webPush", void 0);


/***/ }),

/***/ "./src/application/notification/dtos/response-notification.dto.ts":
/*!************************************************************************!*\
  !*** ./src/application/notification/dtos/response-notification.dto.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PushNotificationSendResult = exports.ResponseNotificationDto = exports.NotificationDataDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class NotificationDataDto {
}
exports.NotificationDataDto = NotificationDataDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType, required: false }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], NotificationDataDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "reservationTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "reservationDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], NotificationDataDto.prototype, "beforeMinutes", void 0);
class ResponseNotificationDto {
}
exports.ResponseNotificationDto = ResponseNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "notificationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "body", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: NotificationDataDto }),
    __metadata("design:type", NotificationDataDto)
], ResponseNotificationDto.prototype, "notificationData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: notification_type_enum_1.NotificationType }),
    __metadata("design:type", typeof (_b = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _b : Object)
], ResponseNotificationDto.prototype, "notificationType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ResponseNotificationDto.prototype, "isRead", void 0);
class PushNotificationSendResult {
}
exports.PushNotificationSendResult = PushNotificationSendResult;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], PushNotificationSendResult.prototype, "success", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Object)
], PushNotificationSendResult.prototype, "message", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], PushNotificationSendResult.prototype, "error", void 0);


/***/ }),

/***/ "./src/application/notification/dtos/send-notification.dto.ts":
/*!********************************************************************!*\
  !*** ./src/application/notification/dtos/send-notification.dto.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PushNotificationDto = exports.PushNotificationPayload = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const push_subscription_dto_1 = __webpack_require__(/*! ./push-subscription.dto */ "./src/application/notification/dtos/push-subscription.dto.ts");
const notification_entity_1 = __webpack_require__(/*! @libs/entities/notification.entity */ "./libs/entities/notification.entity.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
class PushNotificationPayload {
}
exports.PushNotificationPayload = PushNotificationPayload;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], PushNotificationPayload.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], PushNotificationPayload.prototype, "body", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_a = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _a : Object)
], PushNotificationPayload.prototype, "notificationType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_b = typeof notification_entity_1.NotificationData !== "undefined" && notification_entity_1.NotificationData) === "function" ? _b : Object)
], PushNotificationPayload.prototype, "notificationData", void 0);
class PushNotificationDto {
}
exports.PushNotificationDto = PushNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: PushNotificationPayload }),
    __metadata("design:type", PushNotificationPayload)
], PushNotificationDto.prototype, "payload", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: push_subscription_dto_1.PushSubscriptionDto }),
    __metadata("design:type", typeof (_c = typeof push_subscription_dto_1.PushSubscriptionDto !== "undefined" && push_subscription_dto_1.PushSubscriptionDto) === "function" ? _c : Object)
], PushNotificationDto.prototype, "subscription", void 0);


/***/ }),

/***/ "./src/application/notification/infrastructure/fcm-push.adapter.ts":
/*!*************************************************************************!*\
  !*** ./src/application/notification/infrastructure/fcm-push.adapter.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FCMAdapter = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const app_1 = __webpack_require__(/*! firebase-admin/app */ "firebase-admin/app");
const messaging_1 = __webpack_require__(/*! firebase-admin/messaging */ "firebase-admin/messaging");
let FCMAdapter = class FCMAdapter {
    constructor(configService) {
        this.configService = configService;
        this.isProduction = process.env.NODE_ENV === 'production';
        try {
            (0, app_1.initializeApp)({
                credential: (0, app_1.cert)({
                    clientEmail: this.configService.get('firebase.clientEmail'),
                    privateKey: this.configService.get('firebase.privateKey').replace(/\\n/g, '\n'),
                    projectId: this.configService.get('firebase.projectId'),
                }),
            });
            console.log('Firebase Admin initialized successfully');
        }
        catch (error) {
            console.error('Firebase initialization error:', error);
            throw error;
        }
        process.on('unhandledRejection', (reason, promise) => {
            console.error('🧨 Unhandled Rejection:', reason);
        });
    }
    async sendNotification(subscription, payload) {
        try {
            if (!subscription || !subscription.fcm || !subscription.fcm.token) {
                throw new common_1.BadRequestException('FCM token is missing');
            }
            const message = {
                token: subscription.fcm.token,
                notification: {
                    title: payload.title,
                    body: payload.body,
                },
                data: {
                    title: payload.title,
                    body: payload.body,
                },
            };
            const response = await (0, messaging_1.getMessaging)()
                .send(message)
                .then((response) => {
                console.log('FCM send successful. Message ID:', response);
                return { success: true, message: response, error: null };
            })
                .catch((error) => {
                console.error('FCM send error:', {
                    code: error.code,
                    message: error.message,
                    details: error.details,
                    stack: error.stack,
                });
                return { success: false, message: 'failed', error: error.message };
            });
            return response;
        }
        catch (error) {
            console.error('FCM send error:', {
                code: error.code,
                message: error.message,
                details: error.details,
                stack: error.stack,
            });
            return { success: false, message: 'failed', error: error.message };
        }
    }
    async sendBulkNotification(subscriptions, payload) {
        try {
            const tokens = subscriptions.map((subscription) => subscription.fcm.token);
            console.log('알림 전송 - tokens', tokens);
            console.log('알림 전송 - payload', payload);
            const response = await (0, messaging_1.getMessaging)()
                .sendEachForMulticast({
                tokens: tokens,
                data: {
                    title: this.isProduction ? payload.title : '[개발]' + payload.title,
                    body: payload.body,
                    notificationData: JSON.stringify(payload.notificationData),
                    notificationType: payload.notificationType,
                },
                android: {
                    priority: 'high',
                },
            })
                .then((response) => {
                console.log('FCM send successful.', response);
                return response;
            });
            return response;
        }
        catch (error) {
            console.error('FCM send error:', {
                code: error.code,
                message: error.message,
                details: error.details,
                stack: error.stack,
            });
            return { responses: [], successCount: -1, failureCount: -1 };
        }
    }
    async sendTestNotification(subscription, payload) {
        try {
            const message = {
                token: subscription.fcm.token,
                ...payload,
            };
            const response = await (0, messaging_1.getMessaging)()
                .send(message)
                .then((response) => {
                console.log('FCM send successful. Message ID:', response);
                return { success: true, message: response, error: null };
            })
                .catch((error) => {
                console.error('FCM send error:', {
                    code: error.code,
                    message: error.message,
                    details: error.details,
                    stack: error.stack,
                });
                return { success: false, message: 'failed', error: error.message };
            });
            return response;
        }
        catch (error) {
            console.error('FCM send error:', {
                code: error.code,
                message: error.message,
                details: error.details,
                stack: error.stack,
            });
            return { success: false, message: 'failed', error: error.message };
        }
    }
};
exports.FCMAdapter = FCMAdapter;
exports.FCMAdapter = FCMAdapter = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _a : Object])
], FCMAdapter);


/***/ }),

/***/ "./src/application/notification/notification.module.ts":
/*!*************************************************************!*\
  !*** ./src/application/notification/notification.module.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const notification_module_1 = __webpack_require__(/*! @src/domain/notification/notification.module */ "./src/domain/notification/notification.module.ts");
const employee_notification_module_1 = __webpack_require__(/*! @src/domain/employee-notification/employee-notification.module */ "./src/domain/employee-notification/employee-notification.module.ts");
const notification_service_1 = __webpack_require__(/*! @src/application/notification/services/notification.service */ "./src/application/notification/services/notification.service.ts");
const notification_controller_1 = __webpack_require__(/*! @src/application/notification/controllers/notification.controller */ "./src/application/notification/controllers/notification.controller.ts");
const fcm_push_adapter_1 = __webpack_require__(/*! @src/application/notification/infrastructure/fcm-push.adapter */ "./src/application/notification/infrastructure/fcm-push.adapter.ts");
const employee_module_1 = __webpack_require__(/*! @src/domain/employee/employee.module */ "./src/domain/employee/employee.module.ts");
const usecases_1 = __webpack_require__(/*! ./usecases */ "./src/application/notification/usecases/index.ts");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const env_config_1 = __webpack_require__(/*! @libs/configs/env.config */ "./libs/configs/env.config.ts");
const cron_notification_service_1 = __webpack_require__(/*! ./services/cron-notification.service */ "./src/application/notification/services/cron-notification.service.ts");
const reservation_module_1 = __webpack_require__(/*! @src/domain/reservation/reservation.module */ "./src/domain/reservation/reservation.module.ts");
const admin_notification_controller_1 = __webpack_require__(/*! ./controllers/admin.notification.controller */ "./src/application/notification/controllers/admin.notification.controller.ts");
let NotificationModule = class NotificationModule {
};
exports.NotificationModule = NotificationModule;
exports.NotificationModule = NotificationModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([entities_1.Employee, entities_1.Notification, entities_1.EmployeeNotification, entities_1.Reservation]),
            config_1.ConfigModule.forFeature(env_config_1.FIREBASE_CONFIG),
            schedule_1.ScheduleModule.forRoot(),
            employee_module_1.DomainEmployeeModule,
            employee_notification_module_1.DomainEmployeeNotificationModule,
            notification_module_1.DomainNotificationModule,
            reservation_module_1.DomainReservationModule,
        ],
        providers: [
            notification_service_1.NotificationService,
            cron_notification_service_1.CronNotificationService,
            fcm_push_adapter_1.FCMAdapter,
            usecases_1.SubscribeUsecase,
            usecases_1.SendMultiNotificationUsecase,
            usecases_1.GetMyNotificationUsecase,
            usecases_1.MarkAsReadUsecase,
            usecases_1.SaveNotificationUsecase,
            usecases_1.CreateNotificationUsecase,
            usecases_1.CreateScheduleJobUsecase,
            usecases_1.GetSubscriptionsUsecase,
            usecases_1.DeleteScheduleJobUsecase,
            usecases_1.GetSubscriptionInfoUsecase,
            usecases_1.CronSendUpcomingNotificationUsecase,
            usecases_1.CreateReminderNotificationUsecase,
        ],
        controllers: [notification_controller_1.NotificationController, admin_notification_controller_1.AdminNotificationController],
        exports: [notification_service_1.NotificationService],
    })
], NotificationModule);


/***/ }),

/***/ "./src/application/notification/services/cron-notification.service.ts":
/*!****************************************************************************!*\
  !*** ./src/application/notification/services/cron-notification.service.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CronNotificationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const cronSendUpcomingNotification_usecase_1 = __webpack_require__(/*! ../usecases/cronSendUpcomingNotification.usecase */ "./src/application/notification/usecases/cronSendUpcomingNotification.usecase.ts");
let CronNotificationService = class CronNotificationService {
    constructor(cronSendUpcomingNotificationUsecase) {
        this.cronSendUpcomingNotificationUsecase = cronSendUpcomingNotificationUsecase;
    }
    async sendUpcomingNotification() {
        return this.cronSendUpcomingNotificationUsecase.execute();
    }
};
exports.CronNotificationService = CronNotificationService;
exports.CronNotificationService = CronNotificationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof cronSendUpcomingNotification_usecase_1.CronSendUpcomingNotificationUsecase !== "undefined" && cronSendUpcomingNotification_usecase_1.CronSendUpcomingNotificationUsecase) === "function" ? _a : Object])
], CronNotificationService);


/***/ }),

/***/ "./src/application/notification/services/notification.service.ts":
/*!***********************************************************************!*\
  !*** ./src/application/notification/services/notification.service.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const subscribe_usecase_1 = __webpack_require__(/*! ../usecases/subscribe.usecase */ "./src/application/notification/usecases/subscribe.usecase.ts");
const sendMultiNotification_usecase_1 = __webpack_require__(/*! ../usecases/sendMultiNotification.usecase */ "./src/application/notification/usecases/sendMultiNotification.usecase.ts");
const getMyNotification_usecase_1 = __webpack_require__(/*! ../usecases/getMyNotification.usecase */ "./src/application/notification/usecases/getMyNotification.usecase.ts");
const markAsRead_usecase_1 = __webpack_require__(/*! ../usecases/markAsRead.usecase */ "./src/application/notification/usecases/markAsRead.usecase.ts");
const createNotification_usecase_1 = __webpack_require__(/*! ../usecases/createNotification.usecase */ "./src/application/notification/usecases/createNotification.usecase.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const saveNotification_usecase_1 = __webpack_require__(/*! ../usecases/saveNotification.usecase */ "./src/application/notification/usecases/saveNotification.usecase.ts");
const createScheduleJob_usecase_1 = __webpack_require__(/*! ../usecases/createScheduleJob.usecase */ "./src/application/notification/usecases/createScheduleJob.usecase.ts");
const getSubscriptions_usecase_1 = __webpack_require__(/*! ../usecases/getSubscriptions.usecase */ "./src/application/notification/usecases/getSubscriptions.usecase.ts");
const deleteScheduleJob_usecase_1 = __webpack_require__(/*! ../usecases/deleteScheduleJob.usecase */ "./src/application/notification/usecases/deleteScheduleJob.usecase.ts");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
const getSubscriptionInfo_usecase_1 = __webpack_require__(/*! ../usecases/getSubscriptionInfo.usecase */ "./src/application/notification/usecases/getSubscriptionInfo.usecase.ts");
const createReminderNotification_usecase_1 = __webpack_require__(/*! ../usecases/createReminderNotification.usecase */ "./src/application/notification/usecases/createReminderNotification.usecase.ts");
let NotificationService = class NotificationService {
    constructor(subscribeUsecase, sendMultiNotificationUsecase, getMyNotificationUsecase, markAsReadUsecase, createNotificationUsecase, saveNotificationUsecase, createScheduleJobUsecase, getSubscriptionsUsecase, deleteScheduleJobUsecase, notificationService, getSubscriptionInfoUsecase, createReminderNotificationUsecase) {
        this.subscribeUsecase = subscribeUsecase;
        this.sendMultiNotificationUsecase = sendMultiNotificationUsecase;
        this.getMyNotificationUsecase = getMyNotificationUsecase;
        this.markAsReadUsecase = markAsReadUsecase;
        this.createNotificationUsecase = createNotificationUsecase;
        this.saveNotificationUsecase = saveNotificationUsecase;
        this.createScheduleJobUsecase = createScheduleJobUsecase;
        this.getSubscriptionsUsecase = getSubscriptionsUsecase;
        this.deleteScheduleJobUsecase = deleteScheduleJobUsecase;
        this.notificationService = notificationService;
        this.getSubscriptionInfoUsecase = getSubscriptionInfoUsecase;
        this.createReminderNotificationUsecase = createReminderNotificationUsecase;
    }
    async onModuleInit() {
    }
    async subscribe(user, subscription) {
        await this.subscribeUsecase.execute(user.employeeId, subscription);
    }
    async sendDirectNotification(subscription, payload) {
        await this.sendMultiNotificationUsecase.execute([subscription], payload);
    }
    async findMyNotifications(employeeId, query) {
        return await this.getMyNotificationUsecase.execute(employeeId, query);
    }
    async markAsRead(employeeId, notificationId) {
        return await this.markAsReadUsecase.execute(employeeId, notificationId);
    }
    async findSubscription(token, employeeId) {
        if (!token && !employeeId) {
            return null;
        }
        if (employeeId) {
            const subscriptions = await this.getSubscriptionInfoUsecase.executeByEmployeeId(employeeId);
            return subscriptions;
        }
        const subscriptions = await this.getSubscriptionInfoUsecase.executeByToken(token);
        return subscriptions;
    }
    async createNotification(notificationType, createNotificationDatatDto, notiTarget, repositoryOptions) {
        notiTarget = Array.from(new Set(notiTarget));
        const notificationDto = await this.createNotificationUsecase.execute(notificationType, createNotificationDatatDto);
        const notification = await this.saveNotificationUsecase.execute(notificationDto, notiTarget, repositoryOptions);
        const totalSubscriptions = [];
        for (const employeeId of notiTarget) {
            const subscriptions = await this.getSubscriptionsUsecase.execute(employeeId);
            totalSubscriptions.push(...subscriptions);
        }
        switch (notificationType) {
            case notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING:
                break;
            default:
                await this.sendMultiNotificationUsecase.execute(totalSubscriptions, {
                    title: notification.title,
                    body: notification.body,
                    notificationType: notification.notificationType,
                    notificationData: notification.notificationData,
                });
                break;
        }
    }
    async sendReminderNotification(notificationType, createNotificationDatatDto, notiTarget) {
        const createNotificationDto = await this.createReminderNotificationUsecase.execute(createNotificationDatatDto);
        if (!createNotificationDto) {
            return;
        }
        const notification = await this.saveNotificationUsecase.execute(createNotificationDto, notiTarget);
        const totalSubscriptions = [];
        for (const employeeId of notiTarget) {
            const subscriptions = await this.getSubscriptionsUsecase.execute(employeeId);
            totalSubscriptions.push(...subscriptions);
        }
        await this.sendMultiNotificationUsecase.execute(totalSubscriptions, {
            title: notification.title,
            body: notification.body,
            notificationType: notification.notificationType,
            notificationData: notification.notificationData,
        });
    }
    async sendRequestNotification(notificationType, createNotificationDatatDto, notiTarget) {
        const createNotificationDto = await this.createNotificationUsecase.execute(notificationType, createNotificationDatatDto);
        if (!createNotificationDto) {
            return;
        }
        const notification = await this.saveNotificationUsecase.execute(createNotificationDto, notiTarget);
        const totalSubscriptions = [];
        for (const employeeId of notiTarget) {
            const subscriptions = await this.getSubscriptionsUsecase.execute(employeeId);
            totalSubscriptions.push(...subscriptions);
        }
        await this.sendMultiNotificationUsecase.execute(totalSubscriptions, {
            title: notification.title,
            body: notification.body,
            notificationType: notification.notificationType,
            notificationData: notification.notificationData,
        });
    }
    async deleteScheduleJob(reservationId) {
        await this.deleteScheduleJobUsecase.execute(reservationId);
    }
};
exports.NotificationService = NotificationService;
exports.NotificationService = NotificationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof subscribe_usecase_1.SubscribeUsecase !== "undefined" && subscribe_usecase_1.SubscribeUsecase) === "function" ? _a : Object, typeof (_b = typeof sendMultiNotification_usecase_1.SendMultiNotificationUsecase !== "undefined" && sendMultiNotification_usecase_1.SendMultiNotificationUsecase) === "function" ? _b : Object, typeof (_c = typeof getMyNotification_usecase_1.GetMyNotificationUsecase !== "undefined" && getMyNotification_usecase_1.GetMyNotificationUsecase) === "function" ? _c : Object, typeof (_d = typeof markAsRead_usecase_1.MarkAsReadUsecase !== "undefined" && markAsRead_usecase_1.MarkAsReadUsecase) === "function" ? _d : Object, typeof (_e = typeof createNotification_usecase_1.CreateNotificationUsecase !== "undefined" && createNotification_usecase_1.CreateNotificationUsecase) === "function" ? _e : Object, typeof (_f = typeof saveNotification_usecase_1.SaveNotificationUsecase !== "undefined" && saveNotification_usecase_1.SaveNotificationUsecase) === "function" ? _f : Object, typeof (_g = typeof createScheduleJob_usecase_1.CreateScheduleJobUsecase !== "undefined" && createScheduleJob_usecase_1.CreateScheduleJobUsecase) === "function" ? _g : Object, typeof (_h = typeof getSubscriptions_usecase_1.GetSubscriptionsUsecase !== "undefined" && getSubscriptions_usecase_1.GetSubscriptionsUsecase) === "function" ? _h : Object, typeof (_j = typeof deleteScheduleJob_usecase_1.DeleteScheduleJobUsecase !== "undefined" && deleteScheduleJob_usecase_1.DeleteScheduleJobUsecase) === "function" ? _j : Object, typeof (_k = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _k : Object, typeof (_l = typeof getSubscriptionInfo_usecase_1.GetSubscriptionInfoUsecase !== "undefined" && getSubscriptionInfo_usecase_1.GetSubscriptionInfoUsecase) === "function" ? _l : Object, typeof (_m = typeof createReminderNotification_usecase_1.CreateReminderNotificationUsecase !== "undefined" && createReminderNotification_usecase_1.CreateReminderNotificationUsecase) === "function" ? _m : Object])
], NotificationService);


/***/ }),

/***/ "./src/application/notification/usecases/createNotification.usecase.ts":
/*!*****************************************************************************!*\
  !*** ./src/application/notification/usecases/createNotification.usecase.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateNotificationUsecase = void 0;
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
let CreateNotificationUsecase = class CreateNotificationUsecase {
    constructor() { }
    async execute(notificationType, createNotificationDatatDto) {
        const createNotificationDto = {
            title: '',
            body: '',
            notificationType: notificationType,
            notificationData: createNotificationDatatDto,
            createdAt: date_util_1.DateUtil.now().format('YYYY-MM-DD HH:mm'),
            isSent: true,
        };
        switch (notificationType) {
            case notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING:
                createNotificationDto.title = `예약 시간이 ${createNotificationDatatDto.beforeMinutes}분 남았습니다.`;
                createNotificationDto.body = `${createNotificationDatatDto.resourceName}`;
                createNotificationDto.createdAt = date_util_1.DateUtil.parse(createNotificationDatatDto.reservationDate)
                    .addMinutes(-createNotificationDatatDto.beforeMinutes)
                    .format('YYYY-MM-DD HH:mm');
                createNotificationDto.isSent = false;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_STATUS_PENDING:
                createNotificationDto.title = `[숙소 확정 대기중] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED:
                createNotificationDto.title = `[예약 확정] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_STATUS_CANCELLED:
                createNotificationDto.title = `[예약 취소] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_STATUS_REJECTED:
                createNotificationDto.title = `[예약 취소 (관리자)] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_TIME_CHANGED:
                createNotificationDto.title = `[예약 시간 변경] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_PARTICIPANT_CHANGED:
                createNotificationDto.title = `[참가자 변경] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESOURCE_CONSUMABLE_REPLACING:
                createNotificationDto.title = `[교체 주기 알림] ${createNotificationDatatDto.consumableName}`;
                createNotificationDto.body = `${createNotificationDatatDto.resourceName}`;
                break;
            case notification_type_enum_1.NotificationType.RESOURCE_CONSUMABLE_DELAYED_REPLACING:
                createNotificationDto.title = `[교체 지연 알림] ${createNotificationDatatDto.consumableName}`;
                createNotificationDto.body = `${createNotificationDatatDto.resourceName}`;
                break;
            case notification_type_enum_1.NotificationType.RESOURCE_VEHICLE_RETURNED:
                createNotificationDto.title = `[차량 반납] 차량이 반납되었습니다.`;
                createNotificationDto.body = `${createNotificationDatatDto.resourceName}`;
                break;
            case notification_type_enum_1.NotificationType.RESOURCE_VEHICLE_DELAYED_RETURNED:
                createNotificationDto.title = `[차량 반납 지연 알림] ${createNotificationDatatDto.resourceName}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESOURCE_MAINTENANCE_COMPLETED:
                createNotificationDto.title = `[정비 완료] ${createNotificationDatatDto.consumableName}`;
                createNotificationDto.body = `${createNotificationDatatDto.resourceName}`;
                break;
        }
        return createNotificationDto;
    }
};
exports.CreateNotificationUsecase = CreateNotificationUsecase;
exports.CreateNotificationUsecase = CreateNotificationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [])
], CreateNotificationUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/createReminderNotification.usecase.ts":
/*!*************************************************************************************!*\
  !*** ./src/application/notification/usecases/createReminderNotification.usecase.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateReminderNotificationUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
let CreateReminderNotificationUsecase = class CreateReminderNotificationUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute(createNotificationDatatDto) {
        const now = date_util_1.DateUtil.now().toDate();
        const reservation = await this.reservationService.findOne({
            where: {
                reservationId: createNotificationDatatDto.reservationId,
            },
        });
        const diffInMilliseconds = reservation.startDate.getTime() - now.getTime();
        const diffInMinutes = Math.floor(diffInMilliseconds / (1000 * 60));
        const days = Math.floor(diffInMinutes / (24 * 60));
        const hours = Math.floor((diffInMinutes % (24 * 60)) / 60);
        const minutes = diffInMinutes % 60;
        const parts = [];
        if (diffInMilliseconds > 0) {
            switch (createNotificationDatatDto.resourceType) {
                case resource_type_enum_1.ResourceType.MEETING_ROOM:
                    parts.push('회의 시작까지');
                    break;
                case resource_type_enum_1.ResourceType.VEHICLE:
                    parts.push('차량 이용 시작까지');
                    break;
                case resource_type_enum_1.ResourceType.ACCOMMODATION:
                    parts.push('입실 까지');
                    break;
                case resource_type_enum_1.ResourceType.EQUIPMENT:
                    parts.push('장비 이용 시작까지');
                    break;
            }
            if (days > 0) {
                parts.push(`${days}일`);
            }
            if (hours > 0) {
                parts.push(`${hours}시간`);
            }
            if (minutes > 0 || parts.length === 0) {
                parts.push(`${minutes}분`);
            }
            parts.push('남았습니다.');
        }
        else {
            switch (createNotificationDatatDto.resourceType) {
                case resource_type_enum_1.ResourceType.MEETING_ROOM:
                    parts.push('회의 참여 알림');
                    break;
                case resource_type_enum_1.ResourceType.VEHICLE:
                    parts.push('차량 탑승 알림');
                    break;
                case resource_type_enum_1.ResourceType.ACCOMMODATION:
                    parts.push('입실 알림');
                    break;
                case resource_type_enum_1.ResourceType.EQUIPMENT:
                    parts.push('장비 이용 알림');
                    break;
            }
        }
        const timeDifferencePhrase = parts.join(' ');
        return {
            title: `[${createNotificationDatatDto.reservationTitle}]\n${timeDifferencePhrase}`,
            body: createNotificationDatatDto.reservationDate,
            notificationType: notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING,
            notificationData: createNotificationDatatDto,
            createdAt: date_util_1.DateUtil.now().format('YYYY-MM-DD HH:mm'),
            isSent: true,
        };
    }
};
exports.CreateReminderNotificationUsecase = CreateReminderNotificationUsecase;
exports.CreateReminderNotificationUsecase = CreateReminderNotificationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], CreateReminderNotificationUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/createScheduleJob.usecase.ts":
/*!****************************************************************************!*\
  !*** ./src/application/notification/usecases/createScheduleJob.usecase.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateScheduleJobUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
const dist_1 = __webpack_require__(/*! cron/dist */ "cron/dist");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
const fcm_push_adapter_1 = __webpack_require__(/*! ../infrastructure/fcm-push.adapter */ "./src/application/notification/infrastructure/fcm-push.adapter.ts");
let CreateScheduleJobUsecase = class CreateScheduleJobUsecase {
    constructor(schedulerRegistry, notificationService, FCMAdapter) {
        this.schedulerRegistry = schedulerRegistry;
        this.notificationService = notificationService;
        this.FCMAdapter = FCMAdapter;
    }
    async execute(notification, subscriptions) {
        const jobName = `upcoming-${notification.notificationId}`;
        const notificationDate = new Date(notification.createdAt);
        if (notificationDate.getTime() <= Date.now()) {
            console.log(`Notification time ${notificationDate} is in the past, skipping cron job creation`);
            return;
        }
        const job = new dist_1.CronJob(notificationDate, async () => {
            try {
                await this.FCMAdapter.sendBulkNotification(subscriptions, {
                    title: notification.title,
                    body: notification.body,
                    notificationType: notification.notificationType,
                    notificationData: notification.notificationData,
                });
            }
            catch (error) {
                console.error(`Failed to send notification: ${error}`);
            }
            finally {
                await this.notificationService.update(notification.notificationId, { isSent: true });
            }
        });
        this.schedulerRegistry.addCronJob(jobName, job);
        console.log(Array.from(this.schedulerRegistry.getCronJobs().keys()));
        job.start();
    }
};
exports.CreateScheduleJobUsecase = CreateScheduleJobUsecase;
exports.CreateScheduleJobUsecase = CreateScheduleJobUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_1.SchedulerRegistry !== "undefined" && schedule_1.SchedulerRegistry) === "function" ? _a : Object, typeof (_b = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _b : Object, typeof (_c = typeof fcm_push_adapter_1.FCMAdapter !== "undefined" && fcm_push_adapter_1.FCMAdapter) === "function" ? _c : Object])
], CreateScheduleJobUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/cronSendUpcomingNotification.usecase.ts":
/*!***************************************************************************************!*\
  !*** ./src/application/notification/usecases/cronSendUpcomingNotification.usecase.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CronSendUpcomingNotificationUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
const fcm_push_adapter_1 = __webpack_require__(/*! ../infrastructure/fcm-push.adapter */ "./src/application/notification/infrastructure/fcm-push.adapter.ts");
const getSubscriptions_usecase_1 = __webpack_require__(/*! ./getSubscriptions.usecase */ "./src/application/notification/usecases/getSubscriptions.usecase.ts");
let CronSendUpcomingNotificationUsecase = class CronSendUpcomingNotificationUsecase {
    constructor(notificationService, FCMAdapter, getSubscriptionsUsecase) {
        this.notificationService = notificationService;
        this.FCMAdapter = FCMAdapter;
        this.getSubscriptionsUsecase = getSubscriptionsUsecase;
    }
    async execute() {
        const now = date_util_1.DateUtil.now().format('YYYY-MM-DD HH:mm');
        const notifications = await this.notificationService.findAll({
            where: {
                isSent: false,
                createdAt: (0, typeorm_1.LessThanOrEqual)(now),
            },
            relations: ['employees'],
        });
        for (const notification of notifications) {
            const notiTarget = notification.employees.map((employee) => employee.employeeId);
            const totalSubscriptions = [];
            for (const employeeId of notiTarget) {
                const subscriptions = await this.getSubscriptionsUsecase.execute(employeeId);
                totalSubscriptions.push(...subscriptions);
            }
            if (totalSubscriptions.length === 0) {
                continue;
            }
            try {
                await this.FCMAdapter.sendBulkNotification(totalSubscriptions, {
                    title: notification.title,
                    body: notification.body,
                    notificationType: notification.notificationType,
                    notificationData: notification.notificationData,
                });
            }
            catch (error) {
                console.error(`Failed to send notification: ${error}`);
            }
            finally {
                await this.notificationService.update(notification.notificationId, { isSent: true });
            }
        }
    }
};
exports.CronSendUpcomingNotificationUsecase = CronSendUpcomingNotificationUsecase;
exports.CronSendUpcomingNotificationUsecase = CronSendUpcomingNotificationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _a : Object, typeof (_b = typeof fcm_push_adapter_1.FCMAdapter !== "undefined" && fcm_push_adapter_1.FCMAdapter) === "function" ? _b : Object, typeof (_c = typeof getSubscriptions_usecase_1.GetSubscriptionsUsecase !== "undefined" && getSubscriptions_usecase_1.GetSubscriptionsUsecase) === "function" ? _c : Object])
], CronSendUpcomingNotificationUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/deleteScheduleJob.usecase.ts":
/*!****************************************************************************!*\
  !*** ./src/application/notification/usecases/deleteScheduleJob.usecase.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DeleteScheduleJobUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_notification_service_1 = __webpack_require__(/*! @src/domain/employee-notification/employee-notification.service */ "./src/domain/employee-notification/employee-notification.service.ts");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
let DeleteScheduleJobUsecase = class DeleteScheduleJobUsecase {
    constructor(schedulerRegistry, notificationService, employeeNotificationService) {
        this.schedulerRegistry = schedulerRegistry;
        this.notificationService = notificationService;
        this.employeeNotificationService = employeeNotificationService;
    }
    async execute(reservationId) {
        const notifications = await this.notificationService.findAll({
            where: {
                notificationType: notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING,
                notificationData: (0, typeorm_1.Raw)((alias) => `${alias} -> 'reservation' ->> 'reservationId' = '${reservationId}'`),
                isSent: false,
            },
        });
        for (const notification of notifications) {
            await this.employeeNotificationService.deleteByNotificationId(notification.notificationId);
            await this.notificationService.delete(notification.notificationId);
        }
    }
};
exports.DeleteScheduleJobUsecase = DeleteScheduleJobUsecase;
exports.DeleteScheduleJobUsecase = DeleteScheduleJobUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_1.SchedulerRegistry !== "undefined" && schedule_1.SchedulerRegistry) === "function" ? _a : Object, typeof (_b = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _b : Object, typeof (_c = typeof employee_notification_service_1.DomainEmployeeNotificationService !== "undefined" && employee_notification_service_1.DomainEmployeeNotificationService) === "function" ? _c : Object])
], DeleteScheduleJobUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/getMyNotification.usecase.ts":
/*!****************************************************************************!*\
  !*** ./src/application/notification/usecases/getMyNotification.usecase.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetMyNotificationUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
let GetMyNotificationUsecase = class GetMyNotificationUsecase {
    constructor(notificationService) {
        this.notificationService = notificationService;
    }
    async execute(employeeId, query) {
        const options = {
            where: {
                employees: { employeeId },
                isSent: true,
            },
        };
        const total = await this.notificationService.count({
            where: options.where,
        });
        if (query) {
            options.skip = query.getOffset();
            options.take = query.limit;
        }
        const notifications = await this.notificationService.findAll({
            ...options,
            relations: ['employees'],
            order: {
                createdAt: 'DESC',
            },
        });
        return {
            items: notifications.map((notification) => {
                return {
                    notificationId: notification.notificationId,
                    title: notification.title,
                    body: notification.body,
                    notificationData: notification.notificationData,
                    notificationType: notification.notificationType,
                    createdAt: notification.createdAt,
                    isRead: notification.employees.find((employee) => employee.employeeId === employeeId).isRead,
                };
            }),
            meta: {
                total,
                page: query.page,
                limit: query.limit,
                hasNext: query.page * query.limit < total,
            },
        };
    }
};
exports.GetMyNotificationUsecase = GetMyNotificationUsecase;
exports.GetMyNotificationUsecase = GetMyNotificationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _a : Object])
], GetMyNotificationUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/getSubscriptionInfo.usecase.ts":
/*!******************************************************************************!*\
  !*** ./src/application/notification/usecases/getSubscriptionInfo.usecase.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetSubscriptionInfoUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let GetSubscriptionInfoUsecase = class GetSubscriptionInfoUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async executeByToken(token) {
        const employee = await this.employeeService.findOne({
            where: {
                subscriptions: (0, typeorm_1.Raw)((alias) => `
                EXISTS (
                  SELECT 1 FROM jsonb_array_elements(${alias}) AS elem
                  WHERE elem -> 'fcm' ->> 'token' = '${token}'
                )
              `),
            },
        });
        return {
            employeeId: employee.employeeId,
            employeeName: employee.name,
            subscriptions: employee.subscriptions,
        };
    }
    async executeByEmployeeId(employeeId) {
        const employee = await this.employeeService.findOne({
            where: { employeeId },
        });
        return {
            employeeId: employee.employeeId,
            employeeName: employee.name,
            subscriptions: employee.subscriptions,
        };
    }
};
exports.GetSubscriptionInfoUsecase = GetSubscriptionInfoUsecase;
exports.GetSubscriptionInfoUsecase = GetSubscriptionInfoUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], GetSubscriptionInfoUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/getSubscriptions.usecase.ts":
/*!***************************************************************************!*\
  !*** ./src/application/notification/usecases/getSubscriptions.usecase.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetSubscriptionsUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
let GetSubscriptionsUsecase = class GetSubscriptionsUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async execute(employeeId) {
        const employee = await this.employeeService.findOne({
            where: { employeeId },
            select: { subscriptions: true, isPushNotificationEnabled: true },
        });
        if (!employee ||
            !employee.subscriptions ||
            employee.subscriptions.length === 0 ||
            !employee.isPushNotificationEnabled) {
            return [];
        }
        return employee.subscriptions;
    }
};
exports.GetSubscriptionsUsecase = GetSubscriptionsUsecase;
exports.GetSubscriptionsUsecase = GetSubscriptionsUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], GetSubscriptionsUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/index.ts":
/*!********************************************************!*\
  !*** ./src/application/notification/usecases/index.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./subscribe.usecase */ "./src/application/notification/usecases/subscribe.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./sendMultiNotification.usecase */ "./src/application/notification/usecases/sendMultiNotification.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./getMyNotification.usecase */ "./src/application/notification/usecases/getMyNotification.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./markAsRead.usecase */ "./src/application/notification/usecases/markAsRead.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./createNotification.usecase */ "./src/application/notification/usecases/createNotification.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./saveNotification.usecase */ "./src/application/notification/usecases/saveNotification.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./createScheduleJob.usecase */ "./src/application/notification/usecases/createScheduleJob.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./getSubscriptions.usecase */ "./src/application/notification/usecases/getSubscriptions.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./deleteScheduleJob.usecase */ "./src/application/notification/usecases/deleteScheduleJob.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./getSubscriptionInfo.usecase */ "./src/application/notification/usecases/getSubscriptionInfo.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./cronSendUpcomingNotification.usecase */ "./src/application/notification/usecases/cronSendUpcomingNotification.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./createReminderNotification.usecase */ "./src/application/notification/usecases/createReminderNotification.usecase.ts"), exports);


/***/ }),

/***/ "./src/application/notification/usecases/markAsRead.usecase.ts":
/*!*********************************************************************!*\
  !*** ./src/application/notification/usecases/markAsRead.usecase.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MarkAsReadUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_notification_service_1 = __webpack_require__(/*! @src/domain/employee-notification/employee-notification.service */ "./src/domain/employee-notification/employee-notification.service.ts");
let MarkAsReadUsecase = class MarkAsReadUsecase {
    constructor(employeeNotificationService) {
        this.employeeNotificationService = employeeNotificationService;
    }
    async execute(employeeId, notificationId) {
        const employeeNotification = await this.employeeNotificationService.findOne({
            where: {
                employeeId,
                notificationId,
            },
        });
        if (!employeeNotification) {
            throw new common_1.BadRequestException('There is no data');
        }
        await this.employeeNotificationService.update(employeeNotification.employeeNotificationId, {
            isRead: true,
        });
    }
};
exports.MarkAsReadUsecase = MarkAsReadUsecase;
exports.MarkAsReadUsecase = MarkAsReadUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_notification_service_1.DomainEmployeeNotificationService !== "undefined" && employee_notification_service_1.DomainEmployeeNotificationService) === "function" ? _a : Object])
], MarkAsReadUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/saveNotification.usecase.ts":
/*!***************************************************************************!*\
  !*** ./src/application/notification/usecases/saveNotification.usecase.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SaveNotificationUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_notification_service_1 = __webpack_require__(/*! @src/domain/employee-notification/employee-notification.service */ "./src/domain/employee-notification/employee-notification.service.ts");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
let SaveNotificationUsecase = class SaveNotificationUsecase {
    constructor(notificationService, employeeNotificationService) {
        this.notificationService = notificationService;
        this.employeeNotificationService = employeeNotificationService;
    }
    async execute(createNotificationDto, notiTarget, repositoryOptions) {
        const notification = await this.notificationService.save(createNotificationDto, repositoryOptions);
        for (const employeeId of notiTarget) {
            await this.employeeNotificationService.save({
                employeeId: employeeId,
                notificationId: notification.notificationId,
            }, repositoryOptions);
        }
        return notification;
    }
};
exports.SaveNotificationUsecase = SaveNotificationUsecase;
exports.SaveNotificationUsecase = SaveNotificationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _a : Object, typeof (_b = typeof employee_notification_service_1.DomainEmployeeNotificationService !== "undefined" && employee_notification_service_1.DomainEmployeeNotificationService) === "function" ? _b : Object])
], SaveNotificationUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/sendMultiNotification.usecase.ts":
/*!********************************************************************************!*\
  !*** ./src/application/notification/usecases/sendMultiNotification.usecase.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SendMultiNotificationUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const fcm_push_adapter_1 = __webpack_require__(/*! @src/application/notification/infrastructure/fcm-push.adapter */ "./src/application/notification/infrastructure/fcm-push.adapter.ts");
let SendMultiNotificationUsecase = class SendMultiNotificationUsecase {
    constructor(FCMAdapter) {
        this.FCMAdapter = FCMAdapter;
    }
    async execute(subscriptions, payload) {
        return await this.FCMAdapter.sendBulkNotification(subscriptions, payload);
    }
};
exports.SendMultiNotificationUsecase = SendMultiNotificationUsecase;
exports.SendMultiNotificationUsecase = SendMultiNotificationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof fcm_push_adapter_1.FCMAdapter !== "undefined" && fcm_push_adapter_1.FCMAdapter) === "function" ? _a : Object])
], SendMultiNotificationUsecase);


/***/ }),

/***/ "./src/application/notification/usecases/subscribe.usecase.ts":
/*!********************************************************************!*\
  !*** ./src/application/notification/usecases/subscribe.usecase.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SubscribeUsecase = void 0;
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
let SubscribeUsecase = class SubscribeUsecase {
    constructor(employeeService) {
        this.employeeService = employeeService;
        this.isProduction = process.env.NODE_ENV === 'production';
    }
    async execute(employeeId, subscription) {
        try {
            const employee = await this.employeeService.findByEmployeeId(employeeId);
            if (!employee) {
                throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.EMPLOYEE.NOT_FOUND);
            }
            if (!this.isProduction &&
                employee.subscriptions &&
                Array.isArray(employee.subscriptions) &&
                employee.subscriptions.length > 0) {
                if (employee.subscriptions.length < 2) {
                    employee.subscriptions.push(subscription);
                }
                else {
                    return false;
                }
            }
            else {
                employee.subscriptions = [subscription];
            }
            await this.employeeService.update(employee.employeeId, employee);
            return true;
        }
        catch (error) {
            console.log(error);
            return false;
        }
    }
};
exports.SubscribeUsecase = SubscribeUsecase;
exports.SubscribeUsecase = SubscribeUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], SubscribeUsecase);


/***/ }),

/***/ "./src/application/reservation/core/controllers/admin.reservation.controller.ts":
/*!**************************************************************************************!*\
  !*** ./src/application/reservation/core/controllers/admin.reservation.controller.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminReservationController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const dtos_index_1 = __webpack_require__(/*! @resource/dtos.index */ "./src/dtos.index.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const pagination_query_dto_1 = __webpack_require__(/*! @libs/dtos/pagination-query.dto */ "./libs/dtos/pagination-query.dto.ts");
const admin_reservation_service_1 = __webpack_require__(/*! ../services/admin-reservation.service */ "./src/application/reservation/core/services/admin-reservation.service.ts");
const update_reservation_dto_1 = __webpack_require__(/*! ../dtos/update-reservation.dto */ "./src/application/reservation/core/dtos/update-reservation.dto.ts");
let AdminReservationController = class AdminReservationController {
    constructor(adminReservationService) {
        this.adminReservationService = adminReservationService;
    }
    async findReservationList(startDate, endDate, resourceType, resourceId, status) {
        return this.adminReservationService.findReservationList(startDate, endDate, resourceType, resourceId, status);
    }
    async findCheckReservationList(query) {
        return this.adminReservationService.findCheckReservationList(query);
    }
    async findCalendar(user, startDate, endDate, resourceType) {
        const query = { startDate, endDate, resourceType };
        console.log(query);
        return this.adminReservationService.findCalendar(user, query);
    }
    async findOne(user, reservationId) {
        return this.adminReservationService.findOne(user, reservationId);
    }
    async updateStatus(reservationId, updateDto) {
        return this.adminReservationService.updateStatus(reservationId, updateDto);
    }
    async returnVehicle(user, reservationId, returnDto) {
        return this.adminReservationService.returnVehicle(user, reservationId, returnDto);
    }
};
exports.AdminReservationController = AdminReservationController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({
        summary: '예약 리스트 조회 #관리자/예약관리',
    }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 리스트 조회 성공',
        type: [reservation_response_dto_1.ReservationWithRelationsResponseDto],
    }),
    (0, swagger_1.ApiQuery)({
        name: 'startDate',
        type: String,
        required: false,
        example: date_util_1.DateUtil.now().addDays(-20).format('YYYY-MM-DD'),
    }),
    (0, swagger_1.ApiQuery)({
        name: 'endDate',
        type: String,
        required: false,
        example: date_util_1.DateUtil.now().addDays(30).format('YYYY-MM-DD'),
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({ name: 'resourceId', type: String, required: false, example: '78117aaf-a203-43a3-bb38-51ec91ca935a' }),
    (0, swagger_1.ApiQuery)({
        name: 'status',
        enum: reservation_type_enum_1.ReservationStatus,
        description: `Available values : ${Object.values(reservation_type_enum_1.ReservationStatus).join(', ')}`,
        isArray: true,
        required: false,
        example: [reservation_type_enum_1.ReservationStatus.CONFIRMED],
    }),
    __param(0, (0, common_1.Query)('startDate')),
    __param(1, (0, common_1.Query)('endDate')),
    __param(2, (0, common_1.Query)('resourceType')),
    __param(3, (0, common_1.Query)('resourceId')),
    __param(4, (0, common_1.Query)('status', new common_1.ParseArrayPipe({ optional: true, separator: ',' }))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, typeof (_b = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _b : Object, String, Array]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], AdminReservationController.prototype, "findReservationList", null);
__decorate([
    (0, common_1.Get)('check'),
    (0, swagger_1.ApiOperation)({ summary: '확인이 필요한 예약들' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '확인이 필요한 예약들 조회 성공',
        type: [reservation_response_dto_1.ReservationWithRelationsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof pagination_query_dto_1.PaginationQueryDto !== "undefined" && pagination_query_dto_1.PaginationQueryDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], AdminReservationController.prototype, "findCheckReservationList", null);
__decorate([
    (0, common_1.Get)('calendar'),
    (0, swagger_1.ApiOperation)({ summary: '캘린더 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '캘린더 조회 성공',
        type: dtos_index_1.CalendarResponseDto,
    }),
    (0, swagger_1.ApiQuery)({ name: 'startDate', example: '2025-01-01' }),
    (0, swagger_1.ApiQuery)({ name: 'endDate', example: '2025-12-31' }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('startDate')),
    __param(2, (0, common_1.Query)('endDate')),
    __param(3, (0, common_1.Query)('resourceType')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _f : Object, String, String, typeof (_g = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], AdminReservationController.prototype, "findCalendar", null);
__decorate([
    (0, common_1.Get)(':reservationId'),
    (0, swagger_1.ApiOperation)({ summary: '예약 상세 조회 #사용자/예약상세페이지' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 상세 조회 성공',
        type: reservation_response_dto_1.ReservationWithRelationsResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _j : Object, String]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], AdminReservationController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':reservationId/status'),
    (0, swagger_1.ApiOperation)({ summary: '예약 상태 수정 #관리자/예약관리/예약상세' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 상태 수정 성공',
        type: dtos_index_1.ReservationResponseDto,
    }),
    __param(0, (0, common_1.Param)('reservationId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_l = typeof dtos_index_1.UpdateReservationStatusDto !== "undefined" && dtos_index_1.UpdateReservationStatusDto) === "function" ? _l : Object]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], AdminReservationController.prototype, "updateStatus", null);
__decorate([
    (0, common_1.Patch)(':reservationId/return-vehicle'),
    (0, swagger_1.ApiOperation)({ summary: '차량 반납 #사용자/자원예약/차량반납' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '차량 반납 성공',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_o = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _o : Object, String, typeof (_p = typeof update_reservation_dto_1.ReturnVehicleDto !== "undefined" && update_reservation_dto_1.ReturnVehicleDto) === "function" ? _p : Object]),
    __metadata("design:returntype", typeof (_q = typeof Promise !== "undefined" && Promise) === "function" ? _q : Object)
], AdminReservationController.prototype, "returnVehicle", null);
exports.AdminReservationController = AdminReservationController = __decorate([
    (0, swagger_1.ApiTags)('2. 예약 - 관리자 '),
    (0, common_1.Controller)('v1/admin/reservations'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof admin_reservation_service_1.AdminReservationService !== "undefined" && admin_reservation_service_1.AdminReservationService) === "function" ? _a : Object])
], AdminReservationController);


/***/ }),

/***/ "./src/application/reservation/core/controllers/reservation.controller.ts":
/*!********************************************************************************!*\
  !*** ./src/application/reservation/core/controllers/reservation.controller.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserReservationController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const create_reservation_dto_1 = __webpack_require__(/*! ../dtos/create-reservation.dto */ "./src/application/reservation/core/dtos/create-reservation.dto.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const pagination_query_dto_1 = __webpack_require__(/*! @libs/dtos/pagination-query.dto */ "./libs/dtos/pagination-query.dto.ts");
const update_reservation_dto_1 = __webpack_require__(/*! ../dtos/update-reservation.dto */ "./src/application/reservation/core/dtos/update-reservation.dto.ts");
const reservation_service_1 = __webpack_require__(/*! ../services/reservation.service */ "./src/application/reservation/core/services/reservation.service.ts");
const reservation_response_dto_2 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
let UserReservationController = class UserReservationController {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async create(user, createDto) {
        return this.reservationService.create(user, createDto);
    }
    async findMyReservationList(user, resourceType, startDate, endDate, query) {
        const { page, limit } = query;
        return this.reservationService.findMyReservationList(user.employeeId, page, limit, resourceType, startDate, endDate);
    }
    async findResourceReservationList(user, resourceId, query, month, isMine) {
        const { page, limit } = query;
        return this.reservationService.findResourceReservationList(user.employeeId, resourceId, page, limit, month, isMine);
    }
    async findMyUsingReservationList(user) {
        return this.reservationService.findMyUsingReservationList(user.employeeId);
    }
    async findMyUpcomingReservationList(user, resourceType, query) {
        return this.reservationService.findMyUpcomingReservationList(user.employeeId, query, resourceType);
    }
    async findMyUpcomingSchedules(user, resourceType, query) {
        return this.reservationService.findMyAllSchedules(user.employeeId, query, resourceType);
    }
    async findCalendar(user, startDate, endDate, resourceType, isMine, isMySchedules) {
        const query = { startDate, endDate, resourceType, isMine, isMySchedules };
        return this.reservationService.findCalendar(user, query);
    }
    async findOne(user, reservationId) {
        return this.reservationService.findReservationDetail(user, reservationId);
    }
    async updateReservation(user, reservationId, updateDto) {
        await this.reservationService.checkReservationAccess(reservationId, user.employeeId);
        return this.reservationService.updateReservation(reservationId, updateDto);
    }
    async updateStatusCancel(user, reservationId) {
        await this.reservationService.checkReservationAccess(reservationId, user.employeeId);
        return this.reservationService.updateStatusCancel(reservationId);
    }
    async returnVehicle(user, reservationId, returnDto) {
        return this.reservationService.returnVehicle(user, reservationId, returnDto);
    }
};
exports.UserReservationController = UserReservationController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '예약 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 생성 성공',
        type: reservation_response_dto_1.CreateReservationResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object, typeof (_c = typeof create_reservation_dto_1.CreateReservationDto !== "undefined" && create_reservation_dto_1.CreateReservationDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], UserReservationController.prototype, "create", null);
__decorate([
    (0, common_1.Get)('me'),
    (0, swagger_1.ApiOperation)({ summary: '내 예약 리스트 조회, 자원 타입별 ' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '내 예약 리스트 조회',
        type: [reservation_response_dto_1.GroupedReservationResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({ name: 'startDate', required: false, example: '2025-01 / 2025-01-01' }),
    (0, swagger_1.ApiQuery)({ name: 'endDate', required: false, example: '2025-12 / 2025-12-31' }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('resourceType')),
    __param(2, (0, common_1.Query)('startDate')),
    __param(3, (0, common_1.Query)('endDate')),
    __param(4, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _e : Object, typeof (_f = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _f : Object, String, String, typeof (_g = typeof pagination_query_dto_1.PaginationQueryDto !== "undefined" && pagination_query_dto_1.PaginationQueryDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], UserReservationController.prototype, "findMyReservationList", null);
__decorate([
    (0, common_1.Get)('resource/:resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원별 예약 리스트 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '자원별 예약 리스트 조회',
        type: reservation_response_dto_1.GroupedReservationWithResourceResponseDto,
    }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    (0, swagger_1.ApiQuery)({ name: 'month', type: String, example: '2025-04' }),
    (0, swagger_1.ApiQuery)({ name: 'isMine', type: Boolean, required: false, example: true }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('resourceId')),
    __param(2, (0, common_1.Query)()),
    __param(3, (0, common_1.Query)('month')),
    __param(4, (0, common_1.Query)('isMine')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _j : Object, String, typeof (_k = typeof pagination_query_dto_1.PaginationQueryDto !== "undefined" && pagination_query_dto_1.PaginationQueryDto) === "function" ? _k : Object, String, Boolean]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], UserReservationController.prototype, "findResourceReservationList", null);
__decorate([
    (0, common_1.Get)('my-using'),
    (0, swagger_1.ApiOperation)({ summary: '내 이용중인 예약 리스트 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '내 이용중인 예약 리스트 조회',
        type: [reservation_response_dto_1.ReservationWithRelationsResponseDto],
    }),
    __param(0, (0, user_decorator_1.User)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_m = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _m : Object]),
    __metadata("design:returntype", typeof (_o = typeof Promise !== "undefined" && Promise) === "function" ? _o : Object)
], UserReservationController.prototype, "findMyUsingReservationList", null);
__decorate([
    (0, common_1.Get)('my-upcoming'),
    (0, swagger_1.ApiOperation)({ summary: '내 예약 리스트 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '내 예약 리스트 조회',
        type: [reservation_response_dto_1.GroupedReservationResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('resourceType')),
    __param(2, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_p = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _p : Object, typeof (_q = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _q : Object, typeof (_r = typeof pagination_query_dto_1.PaginationQueryDto !== "undefined" && pagination_query_dto_1.PaginationQueryDto) === "function" ? _r : Object]),
    __metadata("design:returntype", typeof (_s = typeof Promise !== "undefined" && Promise) === "function" ? _s : Object)
], UserReservationController.prototype, "findMyUpcomingReservationList", null);
__decorate([
    (0, common_1.Get)('my-upcoming-schedules'),
    (0, swagger_1.ApiOperation)({ summary: '내 일정 리스트 조회 (예약자/참석자 모두 포함)' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '내 일정 리스트 조회 (예약자/참석자 모두 포함)',
        type: [reservation_response_dto_1.GroupedReservationResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('resourceType')),
    __param(2, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_t = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _t : Object, typeof (_u = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _u : Object, typeof (_v = typeof pagination_query_dto_1.PaginationQueryDto !== "undefined" && pagination_query_dto_1.PaginationQueryDto) === "function" ? _v : Object]),
    __metadata("design:returntype", typeof (_w = typeof Promise !== "undefined" && Promise) === "function" ? _w : Object)
], UserReservationController.prototype, "findMyUpcomingSchedules", null);
__decorate([
    (0, common_1.Get)('calendar'),
    (0, swagger_1.ApiOperation)({ summary: '캘린더 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '캘린더 조회 성공',
        type: reservation_response_dto_1.CalendarResponseDto,
    }),
    (0, swagger_1.ApiQuery)({ name: 'startDate', example: '2025-01-01' }),
    (0, swagger_1.ApiQuery)({ name: 'endDate', example: '2025-12-31' }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({ name: 'isMine', type: Boolean, required: false, example: true }),
    (0, swagger_1.ApiQuery)({ name: 'isMySchedules', type: Boolean, required: false, example: true }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('startDate')),
    __param(2, (0, common_1.Query)('endDate')),
    __param(3, (0, common_1.Query)('resourceType')),
    __param(4, (0, common_1.Query)('isMine')),
    __param(5, (0, common_1.Query)('isMySchedules')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_x = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _x : Object, String, String, typeof (_y = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _y : Object, Boolean, Boolean]),
    __metadata("design:returntype", typeof (_z = typeof Promise !== "undefined" && Promise) === "function" ? _z : Object)
], UserReservationController.prototype, "findCalendar", null);
__decorate([
    (0, common_1.Get)(':reservationId'),
    (0, swagger_1.ApiOperation)({ summary: '예약 상세 조회 #사용자/예약상세페이지' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 상세 조회 성공',
        type: reservation_response_dto_1.ReservationWithRelationsResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_0 = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _0 : Object, String]),
    __metadata("design:returntype", typeof (_1 = typeof Promise !== "undefined" && Promise) === "function" ? _1 : Object)
], UserReservationController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':reservationId'),
    (0, swagger_1.ApiOperation)({ summary: '예약 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 수정 성공',
        type: reservation_response_dto_2.ReservationResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_2 = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _2 : Object, String, typeof (_3 = typeof update_reservation_dto_1.UpdateReservationDto !== "undefined" && update_reservation_dto_1.UpdateReservationDto) === "function" ? _3 : Object]),
    __metadata("design:returntype", typeof (_4 = typeof Promise !== "undefined" && Promise) === "function" ? _4 : Object)
], UserReservationController.prototype, "updateReservation", null);
__decorate([
    (0, common_1.Patch)(':reservationId/status/cancel'),
    (0, swagger_1.ApiOperation)({ summary: '예약 취소 #사용자/예약상세페이지' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 상태 수정 성공',
        type: reservation_response_dto_2.ReservationResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_5 = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _5 : Object, String]),
    __metadata("design:returntype", typeof (_6 = typeof Promise !== "undefined" && Promise) === "function" ? _6 : Object)
], UserReservationController.prototype, "updateStatusCancel", null);
__decorate([
    (0, common_1.Patch)(':reservationId/return-vehicle'),
    (0, swagger_1.ApiOperation)({ summary: '차량 반납 #사용자/자원예약/차량반납' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '차량 반납 성공',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_7 = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _7 : Object, String, typeof (_8 = typeof update_reservation_dto_1.ReturnVehicleDto !== "undefined" && update_reservation_dto_1.ReturnVehicleDto) === "function" ? _8 : Object]),
    __metadata("design:returntype", typeof (_9 = typeof Promise !== "undefined" && Promise) === "function" ? _9 : Object)
], UserReservationController.prototype, "returnVehicle", null);
exports.UserReservationController = UserReservationController = __decorate([
    (0, swagger_1.ApiTags)('2. 예약 '),
    (0, common_1.Controller)('v1/reservations'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.ReservationService !== "undefined" && reservation_service_1.ReservationService) === "function" ? _a : Object])
], UserReservationController);


/***/ }),

/***/ "./src/application/reservation/core/core.module.ts":
/*!*********************************************************!*\
  !*** ./src/application/reservation/core/core.module.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationCoreModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const reservation_controller_1 = __webpack_require__(/*! @src/application/reservation/core/controllers/reservation.controller */ "./src/application/reservation/core/controllers/reservation.controller.ts");
const admin_reservation_controller_1 = __webpack_require__(/*! @src/application/reservation/core/controllers/admin.reservation.controller */ "./src/application/reservation/core/controllers/admin.reservation.controller.ts");
const reservation_module_1 = __webpack_require__(/*! @src/domain/reservation/reservation.module */ "./src/domain/reservation/reservation.module.ts");
const reservation_participant_module_1 = __webpack_require__(/*! @src/domain/reservation-participant/reservation-participant.module */ "./src/domain/reservation-participant/reservation-participant.module.ts");
const reservation_vehicle_module_1 = __webpack_require__(/*! @src/domain/reservation-vehicle/reservation-vehicle.module */ "./src/domain/reservation-vehicle/reservation-vehicle.module.ts");
const employee_module_1 = __webpack_require__(/*! @src/domain/employee/employee.module */ "./src/domain/employee/employee.module.ts");
const resource_module_1 = __webpack_require__(/*! @src/domain/resource/resource.module */ "./src/domain/resource/resource.module.ts");
const vehicle_info_module_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.module */ "./src/domain/vehicle-info/vehicle-info.module.ts");
const notification_module_1 = __webpack_require__(/*! @src/application/notification/notification.module */ "./src/application/notification/notification.module.ts");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
const Usecases = __webpack_require__(/*! ./usecases */ "./src/application/reservation/core/usecases/index.ts");
const admin_reservation_service_1 = __webpack_require__(/*! ./services/admin-reservation.service */ "./src/application/reservation/core/services/admin-reservation.service.ts");
const reservation_service_1 = __webpack_require__(/*! ./services/reservation.service */ "./src/application/reservation/core/services/reservation.service.ts");
const cron_reservation_service_1 = __webpack_require__(/*! ./services/cron-reservation.service */ "./src/application/reservation/core/services/cron-reservation.service.ts");
const notification_module_2 = __webpack_require__(/*! @src/domain/notification/notification.module */ "./src/domain/notification/notification.module.ts");
const employee_notification_module_1 = __webpack_require__(/*! @src/domain/employee-notification/employee-notification.module */ "./src/domain/employee-notification/employee-notification.module.ts");
const file_module_1 = __webpack_require__(/*! @src/domain/file/file.module */ "./src/domain/file/file.module.ts");
let ReservationCoreModule = class ReservationCoreModule {
};
exports.ReservationCoreModule = ReservationCoreModule;
exports.ReservationCoreModule = ReservationCoreModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([
                entities_1.Reservation,
                entities_1.ReservationParticipant,
                entities_1.ReservationVehicle,
                entities_1.Employee,
                entities_1.Resource,
                entities_1.VehicleInfo,
                entities_1.Notification,
            ]),
            reservation_module_1.DomainReservationModule,
            reservation_participant_module_1.DomainReservationParticipantModule,
            reservation_vehicle_module_1.DomainReservationVehicleModule,
            employee_module_1.DomainEmployeeModule,
            resource_module_1.DomainResourceModule,
            vehicle_info_module_1.DomainVehicleInfoModule,
            notification_module_1.NotificationModule,
            employee_notification_module_1.DomainEmployeeNotificationModule,
            notification_module_2.DomainNotificationModule,
            file_module_1.DomainFileModule,
            schedule_1.ScheduleModule.forRoot(),
        ],
        controllers: [admin_reservation_controller_1.AdminReservationController, reservation_controller_1.UserReservationController],
        providers: [
            admin_reservation_service_1.AdminReservationService,
            reservation_service_1.ReservationService,
            cron_reservation_service_1.CronReservationService,
            ...Object.values(Usecases),
        ],
        exports: [
            admin_reservation_service_1.AdminReservationService,
            reservation_service_1.ReservationService,
            cron_reservation_service_1.CronReservationService,
            ...Object.values(Usecases),
        ],
    })
], ReservationCoreModule);


/***/ }),

/***/ "./src/application/reservation/core/dtos/create-reservation.dto.ts":
/*!*************************************************************************!*\
  !*** ./src/application/reservation/core/dtos/create-reservation.dto.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateReservationDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
class CreateReservationDto {
}
exports.CreateReservationDto = CreateReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 ID') }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('자원 타입', Object.values(resource_type_enum_1.ResourceType)) }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], CreateReservationDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 시작 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('시작 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 종료 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('종료 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('종일 여부') }),
    __metadata("design:type", Boolean)
], CreateReservationDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('시작 전 알림 여부') }),
    __metadata("design:type", Boolean)
], CreateReservationDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, enum: reservation_type_enum_1.ReservationStatus }),
    __metadata("design:type", typeof (_b = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _b : Object)
], CreateReservationDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number], example: [10, 20] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('알림 시간') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], CreateReservationDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('참가자 ID') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('참가자 ID', '문자열') }),
    __metadata("design:type", Array)
], CreateReservationDto.prototype, "participantIds", void 0);


/***/ }),

/***/ "./src/application/reservation/core/dtos/reservaion-query.dto.ts":
/*!***********************************************************************!*\
  !*** ./src/application/reservation/core/dtos/reservaion-query.dto.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_validator_2 = __webpack_require__(/*! class-validator */ "class-validator");
const class_validator_3 = __webpack_require__(/*! class-validator */ "class-validator");
class ReservationQueryDto {
}
exports.ReservationQueryDto = ReservationQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_3.IsString)(),
    __metadata("design:type", String)
], ReservationQueryDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_3.IsString)(),
    __metadata("design:type", String)
], ReservationQueryDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType, required: false }),
    (0, class_validator_2.IsEnum)(resource_type_enum_1.ResourceType),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], ReservationQueryDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: Boolean }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], ReservationQueryDto.prototype, "isMine", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: Boolean }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], ReservationQueryDto.prototype, "isMySchedules", void 0);


/***/ }),

/***/ "./src/application/reservation/core/dtos/reservation-response.dto.ts":
/*!***************************************************************************!*\
  !*** ./src/application/reservation/core/dtos/reservation-response.dto.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CalendarResponseDto = exports.GroupedReservationWithResourceResponseDto = exports.GroupedReservationResponseDto = exports.CreateReservationResponseDto = exports.ReservationWithRelationsResponseDto = exports.ReservationWithResourceResponseDto = exports.ReservationVehicleResponseDto = exports.ReservationParticipantResponseDto = exports.ReservationResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_type_enum_2 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const dtos_index_1 = __webpack_require__(/*! @resource/dtos.index */ "./src/dtos.index.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
class ReservationResponseDto {
    constructor(reservation) {
        this.reservationId = reservation?.reservationId;
        this.resourceId = reservation?.resourceId;
        this.title = reservation?.title;
        this.description = reservation?.description;
        this.rejectReason = reservation?.rejectReason;
        this.startDate = date_util_1.DateUtil.format(reservation?.startDate);
        this.endDate = date_util_1.DateUtil.format(reservation?.endDate);
        this.status = reservation?.status;
        this.isAllDay = reservation?.isAllDay;
        this.notifyBeforeStart = reservation?.notifyBeforeStart;
        this.notifyMinutesBeforeStart = reservation?.notifyMinutesBeforeStart;
    }
}
exports.ReservationResponseDto = ReservationResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "rejectReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: reservation_type_enum_1.ReservationStatus, required: false }),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _a : Object)
], ReservationResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationResponseDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationResponseDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number] }),
    __metadata("design:type", Array)
], ReservationResponseDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationResponseDto.prototype, "isMine", void 0);
class ReservationParticipantResponseDto {
}
exports.ReservationParticipantResponseDto = ReservationParticipantResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationParticipantResponseDto.prototype, "participantId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationParticipantResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationParticipantResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => dtos_index_1.EmployeeResponseDto, required: false }),
    __metadata("design:type", typeof (_b = typeof dtos_index_1.EmployeeResponseDto !== "undefined" && dtos_index_1.EmployeeResponseDto) === "function" ? _b : Object)
], ReservationParticipantResponseDto.prototype, "employee", void 0);
class ReservationVehicleResponseDto {
}
exports.ReservationVehicleResponseDto = ReservationVehicleResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationVehicleResponseDto.prototype, "reservationVehicleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationVehicleResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "startOdometer", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "endOdometer", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "startFuelLevel", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "endFuelLevel", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ReservationVehicleResponseDto.prototype, "isReturned", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ReservationVehicleResponseDto.prototype, "returnedAt", void 0);
class ReservationWithResourceResponseDto extends ReservationResponseDto {
    constructor(reservation) {
        super(reservation);
        this.resource = reservation?.resource;
    }
}
exports.ReservationWithResourceResponseDto = ReservationWithResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => dtos_index_1.ResourceResponseDto, required: false }),
    __metadata("design:type", typeof (_d = typeof dtos_index_1.ResourceResponseDto !== "undefined" && dtos_index_1.ResourceResponseDto) === "function" ? _d : Object)
], ReservationWithResourceResponseDto.prototype, "resource", void 0);
class ReservationWithRelationsResponseDto extends ReservationResponseDto {
    constructor(reservation) {
        super(reservation);
        this.resource = reservation?.resource;
        this.reservers = reservation?.participants?.filter((participant) => participant.type === reservation_type_enum_2.ParticipantsType.RESERVER);
        this.participants = reservation?.participants?.filter((participant) => participant.type === reservation_type_enum_2.ParticipantsType.PARTICIPANT);
        this.reservationVehicles = reservation?.reservationVehicles;
    }
}
exports.ReservationWithRelationsResponseDto = ReservationWithRelationsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => dtos_index_1.ResourceResponseDto, required: false }),
    __metadata("design:type", typeof (_e = typeof dtos_index_1.ResourceResponseDto !== "undefined" && dtos_index_1.ResourceResponseDto) === "function" ? _e : Object)
], ReservationWithRelationsResponseDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ReservationParticipantResponseDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "reservers", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ReservationParticipantResponseDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "participants", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ReservationVehicleResponseDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "reservationVehicles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [dtos_index_1.ResponseNotificationDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "notifications", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "isMine", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "returnable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "isDelayed", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "modifiable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "hasUnreadNotification", void 0);
class CreateReservationResponseDto {
}
exports.CreateReservationResponseDto = CreateReservationResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: '123e4567-e89b-12d3-a456-426614174000' }),
    __metadata("design:type", String)
], CreateReservationResponseDto.prototype, "reservationId", void 0);
class GroupedReservationResponseDto {
}
exports.GroupedReservationResponseDto = GroupedReservationResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '날짜 (YYYY-MM-DD 형식)' }),
    __metadata("design:type", String)
], GroupedReservationResponseDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '해당 날짜의 예약 목록',
        type: [ReservationWithRelationsResponseDto],
    }),
    __metadata("design:type", Array)
], GroupedReservationResponseDto.prototype, "reservations", void 0);
class GroupedReservationWithResourceResponseDto {
}
exports.GroupedReservationWithResourceResponseDto = GroupedReservationWithResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 정보',
        type: () => dtos_index_1.ResourceResponseDto,
    }),
    __metadata("design:type", typeof (_f = typeof dtos_index_1.ResourceResponseDto !== "undefined" && dtos_index_1.ResourceResponseDto) === "function" ? _f : Object)
], GroupedReservationWithResourceResponseDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약 목록',
        required: false,
        type: [GroupedReservationResponseDto],
    }),
    __metadata("design:type", Array)
], GroupedReservationWithResourceResponseDto.prototype, "groupedReservations", void 0);
class CalendarResponseDto {
}
exports.CalendarResponseDto = CalendarResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약 캘린더',
        type: [ReservationWithRelationsResponseDto],
    }),
    __metadata("design:type", Array)
], CalendarResponseDto.prototype, "reservations", void 0);


/***/ }),

/***/ "./src/application/reservation/core/dtos/return-vehicle-response.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/application/reservation/core/dtos/return-vehicle-response.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReturnVehicleDetailResponseDto = exports.ReturnVehicleResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class Location {
}
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], Location.prototype, "address", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], Location.prototype, "detailAddress", void 0);
class ReturnVehicleResponseDto {
}
exports.ReturnVehicleResponseDto = ReturnVehicleResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReturnVehicleResponseDto.prototype, "reservationVehicleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ReturnVehicleResponseDto.prototype, "returnedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => Location }),
    __metadata("design:type", Location)
], ReturnVehicleResponseDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReturnVehicleResponseDto.prototype, "returnedBy", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReturnVehicleResponseDto.prototype, "endOdometer", void 0);
class ReturnVehicleDetailResponseDto extends ReturnVehicleResponseDto {
}
exports.ReturnVehicleDetailResponseDto = ReturnVehicleDetailResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReturnVehicleDetailResponseDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReturnVehicleDetailResponseDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReturnVehicleDetailResponseDto.prototype, "indoorImages", void 0);


/***/ }),

/***/ "./src/application/reservation/core/dtos/update-reservation.dto.ts":
/*!*************************************************************************!*\
  !*** ./src/application/reservation/core/dtos/update-reservation.dto.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReturnVehicleDto = exports.UpdateReservationDto = exports.UpdateReservationCcReceipientDto = exports.UpdateReservationParticipantsDto = exports.UpdateReservationStatusDto = exports.UpdateReservationTimeDto = exports.UpdateReservationTitleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const resource_entity_1 = __webpack_require__(/*! @libs/entities/resource.entity */ "./libs/entities/resource.entity.ts");
class UpdateReservationTitleDto {
}
exports.UpdateReservationTitleDto = UpdateReservationTitleDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], UpdateReservationTitleDto.prototype, "title", void 0);
class UpdateReservationTimeDto {
    constructor(reservation) {
        this.startDate = date_util_1.DateUtil.format(reservation?.startDate);
        this.endDate = date_util_1.DateUtil.format(reservation?.endDate);
        this.isAllDay = reservation?.isAllDay;
    }
    getPropertiesAndTypes() {
        return Object.getOwnPropertyNames(this).map((property) => ({
            property,
            type: Reflect.getMetadata('design:type', this, property),
        }));
    }
}
exports.UpdateReservationTimeDto = UpdateReservationTimeDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 시작 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('시작 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], UpdateReservationTimeDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 종료 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('종료 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], UpdateReservationTimeDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('종일 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateReservationTimeDto.prototype, "isAllDay", void 0);
class UpdateReservationStatusDto {
}
exports.UpdateReservationStatusDto = UpdateReservationStatusDto;
__decorate([
    (0, swagger_1.ApiProperty)({ enum: reservation_type_enum_1.ReservationStatus }),
    (0, class_validator_1.IsEnum)(reservation_type_enum_1.ReservationStatus, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('예약 상태', Object.values(reservation_type_enum_1.ReservationStatus)),
    }),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _a : Object)
], UpdateReservationStatusDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('거절 사유') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('거절 사유', 0, 100) }),
    __metadata("design:type", String)
], UpdateReservationStatusDto.prototype, "rejectReason", void 0);
class UpdateReservationParticipantsDto {
}
exports.UpdateReservationParticipantsDto = UpdateReservationParticipantsDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('참가자 ID') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('참가자 ID', '문자열') }),
    __metadata("design:type", Array)
], UpdateReservationParticipantsDto.prototype, "participantIds", void 0);
class UpdateReservationCcReceipientDto {
}
exports.UpdateReservationCcReceipientDto = UpdateReservationCcReceipientDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('수신참조자 ID') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('수신참조자 ID', '문자열') }),
    __metadata("design:type", Array)
], UpdateReservationCcReceipientDto.prototype, "ccReceipientIds", void 0);
class UpdateReservationDto {
}
exports.UpdateReservationDto = UpdateReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 ID') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 시작 시간 (YYYY-MM-DD HH:mm:ss 형식)',
        required: false,
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('시작 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 종료 시간 (YYYY-MM-DD HH:mm:ss 형식)',
        required: false,
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('종료 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false, required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('종일 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateReservationDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false, required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('시작 전 알림 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateReservationDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number], example: [10, 20] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('알림 시간') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateReservationDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String], required: false }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('참가자 ID') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('참가자 ID', '문자열') }),
    __metadata("design:type", Array)
], UpdateReservationDto.prototype, "participantIds", void 0);
class ReturnVehicleDto {
}
exports.ReturnVehicleDto = ReturnVehicleDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_b = typeof resource_entity_1.ResourceLocation !== "undefined" && resource_entity_1.ResourceLocation) === "function" ? _b : Object)
], ReturnVehicleDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ minimum: 0, maximum: 999999999 }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('남은 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    __metadata("design:type", Number)
], ReturnVehicleDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ minimum: 0, maximum: 999999999 }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('총 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    __metadata("design:type", Number)
], ReturnVehicleDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주차 위치 이미지') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('주차 위치 이미지', '문자열') }),
    __metadata("design:type", Array)
], ReturnVehicleDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주행거리계 이미지') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('주행거리계 이미지', '문자열') }),
    __metadata("design:type", Array)
], ReturnVehicleDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('차량 실내 이미지') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('차량 실내 이미지', '문자열') }),
    __metadata("design:type", Array)
], ReturnVehicleDto.prototype, "indoorImages", void 0);


/***/ }),

/***/ "./src/application/reservation/core/services/admin-reservation.service.ts":
/*!********************************************************************************!*\
  !*** ./src/application/reservation/core/services/admin-reservation.service.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminReservationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const find_reservation_list_usecase_1 = __webpack_require__(/*! ../usecases/find-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-reservation-list.usecase.ts");
const find_check_reservation_list_usecase_1 = __webpack_require__(/*! ../usecases/find-check-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-check-reservation-list.usecase.ts");
const find_reservation_detail_usecase_1 = __webpack_require__(/*! ../usecases/find-reservation-detail.usecase */ "./src/application/reservation/core/usecases/find-reservation-detail.usecase.ts");
const update_reservation_status_usecase_1 = __webpack_require__(/*! ../usecases/update-reservation-status.usecase */ "./src/application/reservation/core/usecases/update-reservation-status.usecase.ts");
const return_vehicle_usecase_1 = __webpack_require__(/*! ../usecases/return-vehicle.usecase */ "./src/application/reservation/core/usecases/return-vehicle.usecase.ts");
const find_dealyed_vehicle_notifications_usecase_1 = __webpack_require__(/*! ../usecases/find-dealyed-vehicle-notifications.usecase */ "./src/application/reservation/core/usecases/find-dealyed-vehicle-notifications.usecase.ts");
const find_calendar_usecase_1 = __webpack_require__(/*! ../usecases/find-calendar.usecase */ "./src/application/reservation/core/usecases/find-calendar.usecase.ts");
const reservation_vehicle_service_1 = __webpack_require__(/*! @src/domain/reservation-vehicle/reservation-vehicle.service */ "./src/domain/reservation-vehicle/reservation-vehicle.service.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let AdminReservationService = class AdminReservationService {
    constructor(findReservationListUsecase, findCheckReservationListUsecase, findReservationDetailUsecase, updateReservationStatusUsecase, returnVehicleUsecase, findDelayedVehicleNotificationsUsecase, findCalendarUsecase, reservationVehicleService) {
        this.findReservationListUsecase = findReservationListUsecase;
        this.findCheckReservationListUsecase = findCheckReservationListUsecase;
        this.findReservationDetailUsecase = findReservationDetailUsecase;
        this.updateReservationStatusUsecase = updateReservationStatusUsecase;
        this.returnVehicleUsecase = returnVehicleUsecase;
        this.findDelayedVehicleNotificationsUsecase = findDelayedVehicleNotificationsUsecase;
        this.findCalendarUsecase = findCalendarUsecase;
        this.reservationVehicleService = reservationVehicleService;
    }
    async findReservationList(startDate, endDate, resourceType, resourceId, status) {
        return this.findReservationListUsecase.execute(startDate, endDate, resourceType, resourceId, status);
    }
    async findCheckReservationList(query) {
        return this.findCheckReservationListUsecase.execute(query);
    }
    async findOne(user, reservationId) {
        const reservation = await this.findReservationDetailUsecase.execute(user, reservationId);
        const notifications = await this.findDelayedVehicleNotificationsUsecase.execute(reservationId);
        return { ...reservation, notifications };
    }
    async findCalendar(user, query) {
        const reservations = await this.findCalendarUsecase.execute(user, query);
        for (const reservation of reservations.reservations) {
            const type = reservation.resource.type;
            if (type === resource_type_enum_1.ResourceType.VEHICLE) {
                const reservationVehicle = await this.reservationVehicleService.findOne({
                    where: { reservationId: reservation.reservationId },
                    relations: ['vehicleInfo'],
                });
                if (reservation.endDate < date_util_1.DateUtil.now().format() && !reservationVehicle.isReturned) {
                    reservation.isDelayed = true;
                }
                else {
                    reservation.isDelayed = false;
                }
            }
        }
        return reservations;
    }
    async updateStatus(reservationId, updateDto) {
        return this.updateReservationStatusUsecase.execute(reservationId, updateDto);
    }
    async returnVehicle(user, reservationId, returnDto) {
        return this.returnVehicleUsecase.execute(user, reservationId, returnDto);
    }
};
exports.AdminReservationService = AdminReservationService;
exports.AdminReservationService = AdminReservationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof find_reservation_list_usecase_1.FindReservationListUsecase !== "undefined" && find_reservation_list_usecase_1.FindReservationListUsecase) === "function" ? _a : Object, typeof (_b = typeof find_check_reservation_list_usecase_1.FindCheckReservationListUsecase !== "undefined" && find_check_reservation_list_usecase_1.FindCheckReservationListUsecase) === "function" ? _b : Object, typeof (_c = typeof find_reservation_detail_usecase_1.FindReservationDetailUsecase !== "undefined" && find_reservation_detail_usecase_1.FindReservationDetailUsecase) === "function" ? _c : Object, typeof (_d = typeof update_reservation_status_usecase_1.UpdateReservationStatusUsecase !== "undefined" && update_reservation_status_usecase_1.UpdateReservationStatusUsecase) === "function" ? _d : Object, typeof (_e = typeof return_vehicle_usecase_1.ReturnVehicleUsecase !== "undefined" && return_vehicle_usecase_1.ReturnVehicleUsecase) === "function" ? _e : Object, typeof (_f = typeof find_dealyed_vehicle_notifications_usecase_1.FindDelayedVehicleNotificationsUsecase !== "undefined" && find_dealyed_vehicle_notifications_usecase_1.FindDelayedVehicleNotificationsUsecase) === "function" ? _f : Object, typeof (_g = typeof find_calendar_usecase_1.FindCalendarUsecase !== "undefined" && find_calendar_usecase_1.FindCalendarUsecase) === "function" ? _g : Object, typeof (_h = typeof reservation_vehicle_service_1.DomainReservationVehicleService !== "undefined" && reservation_vehicle_service_1.DomainReservationVehicleService) === "function" ? _h : Object])
], AdminReservationService);


/***/ }),

/***/ "./src/application/reservation/core/services/cron-reservation.service.ts":
/*!*******************************************************************************!*\
  !*** ./src/application/reservation/core/services/cron-reservation.service.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CronReservationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const handle_cron_usecase_1 = __webpack_require__(/*! ../usecases/handle-cron.usecase */ "./src/application/reservation/core/usecases/handle-cron.usecase.ts");
const handle_start_odometer_usecase_1 = __webpack_require__(/*! ../usecases/handle-start-odometer.usecase */ "./src/application/reservation/core/usecases/handle-start-odometer.usecase.ts");
let CronReservationService = class CronReservationService {
    constructor(handleCronUsecase, handleStartOdometerUsecase) {
        this.handleCronUsecase = handleCronUsecase;
        this.handleStartOdometerUsecase = handleStartOdometerUsecase;
    }
    async closeReservation() {
        return this.handleCronUsecase.execute();
    }
    async handleStartOdometer() {
        return this.handleStartOdometerUsecase.execute();
    }
};
exports.CronReservationService = CronReservationService;
exports.CronReservationService = CronReservationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof handle_cron_usecase_1.HandleCronUsecase !== "undefined" && handle_cron_usecase_1.HandleCronUsecase) === "function" ? _a : Object, typeof (_b = typeof handle_start_odometer_usecase_1.HandleStartOdometerUsecase !== "undefined" && handle_start_odometer_usecase_1.HandleStartOdometerUsecase) === "function" ? _b : Object])
], CronReservationService);


/***/ }),

/***/ "./src/application/reservation/core/services/reservation.service.ts":
/*!**************************************************************************!*\
  !*** ./src/application/reservation/core/services/reservation.service.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const create_reservation_usecase_1 = __webpack_require__(/*! ../usecases/create-reservation.usecase */ "./src/application/reservation/core/usecases/create-reservation.usecase.ts");
const find_my_reservation_list_usecase_1 = __webpack_require__(/*! ../usecases/find-my-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-my-reservation-list.usecase.ts");
const find_resource_reservation_list_usecase_1 = __webpack_require__(/*! ../usecases/find-resource-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-resource-reservation-list.usecase.ts");
const find_my_using_reservation_list_usecase_1 = __webpack_require__(/*! ../usecases/find-my-using-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-my-using-reservation-list.usecase.ts");
const find_my_upcoming_reservation_list_usecase_1 = __webpack_require__(/*! ../usecases/find-my-upcoming-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-my-upcoming-reservation-list.usecase.ts");
const find_my_all_schedules_usecase_1 = __webpack_require__(/*! ../usecases/find-my-all-schedules.usecase */ "./src/application/reservation/core/usecases/find-my-all-schedules.usecase.ts");
const find_reservation_detail_usecase_1 = __webpack_require__(/*! ../usecases/find-reservation-detail.usecase */ "./src/application/reservation/core/usecases/find-reservation-detail.usecase.ts");
const update_reservation_usecase_1 = __webpack_require__(/*! ../usecases/update-reservation.usecase */ "./src/application/reservation/core/usecases/update-reservation.usecase.ts");
const update_reservation_status_usecase_1 = __webpack_require__(/*! ../usecases/update-reservation-status.usecase */ "./src/application/reservation/core/usecases/update-reservation-status.usecase.ts");
const return_vehicle_usecase_1 = __webpack_require__(/*! ../usecases/return-vehicle.usecase */ "./src/application/reservation/core/usecases/return-vehicle.usecase.ts");
const check_reservation_access_usecase_1 = __webpack_require__(/*! ../usecases/check-reservation-access.usecase */ "./src/application/reservation/core/usecases/check-reservation-access.usecase.ts");
const find_calendar_usecase_1 = __webpack_require__(/*! ../usecases/find-calendar.usecase */ "./src/application/reservation/core/usecases/find-calendar.usecase.ts");
let ReservationService = class ReservationService {
    constructor(createReservationUsecase, findMyReservationListUsecase, findResourceReservationListUsecase, findMyUsingReservationListUsecase, findMyUpcomingReservationListUsecase, findMyAllSchedulesUsecase, findReservationDetailUsecase, updateReservationUsecase, updateReservationStatusUsecase, returnVehicleUsecase, checkReservationAccessUsecase, findCalendarUsecase) {
        this.createReservationUsecase = createReservationUsecase;
        this.findMyReservationListUsecase = findMyReservationListUsecase;
        this.findResourceReservationListUsecase = findResourceReservationListUsecase;
        this.findMyUsingReservationListUsecase = findMyUsingReservationListUsecase;
        this.findMyUpcomingReservationListUsecase = findMyUpcomingReservationListUsecase;
        this.findMyAllSchedulesUsecase = findMyAllSchedulesUsecase;
        this.findReservationDetailUsecase = findReservationDetailUsecase;
        this.updateReservationUsecase = updateReservationUsecase;
        this.updateReservationStatusUsecase = updateReservationStatusUsecase;
        this.returnVehicleUsecase = returnVehicleUsecase;
        this.checkReservationAccessUsecase = checkReservationAccessUsecase;
        this.findCalendarUsecase = findCalendarUsecase;
    }
    async onModuleInit() {
    }
    async create(user, createDto) {
        return this.createReservationUsecase.execute(user, createDto);
    }
    async findMyReservationList(employeeId, page, limit, resourceType, startDate, endDate) {
        return this.findMyReservationListUsecase.execute(employeeId, page, limit, resourceType, startDate, endDate);
    }
    async findResourceReservationList(employeeId, resourceId, page, limit, month, isMine) {
        return this.findResourceReservationListUsecase.execute(employeeId, resourceId, page, limit, month, isMine);
    }
    async findMyUsingReservationList(employeeId) {
        return this.findMyUsingReservationListUsecase.execute(employeeId);
    }
    async findMyUpcomingReservationList(employeeId, query, resourceType) {
        return this.findMyUpcomingReservationListUsecase.execute(employeeId, query, resourceType);
    }
    async findMyAllSchedules(employeeId, query, resourceType) {
        return this.findMyAllSchedulesUsecase.execute(employeeId, query, resourceType);
    }
    async findCalendar(user, query) {
        return this.findCalendarUsecase.execute(user, query);
    }
    async findReservationDetail(user, reservationId) {
        return this.findReservationDetailUsecase.execute(user, reservationId);
    }
    async updateReservation(reservationId, updateDto) {
        return this.updateReservationUsecase.execute(reservationId, updateDto);
    }
    async updateStatusCancel(reservationId) {
        return this.updateReservationStatusUsecase.execute(reservationId, { status: reservation_type_enum_1.ReservationStatus.CANCELLED });
    }
    async returnVehicle(user, reservationId, returnDto) {
        return this.returnVehicleUsecase.execute(user, reservationId, returnDto);
    }
    async checkReservationAccess(reservationId, employeeId) {
        await this.checkReservationAccessUsecase.execute(reservationId, employeeId);
    }
};
exports.ReservationService = ReservationService;
exports.ReservationService = ReservationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof create_reservation_usecase_1.CreateReservationUsecase !== "undefined" && create_reservation_usecase_1.CreateReservationUsecase) === "function" ? _a : Object, typeof (_b = typeof find_my_reservation_list_usecase_1.FindMyReservationListUsecase !== "undefined" && find_my_reservation_list_usecase_1.FindMyReservationListUsecase) === "function" ? _b : Object, typeof (_c = typeof find_resource_reservation_list_usecase_1.FindResourceReservationListUsecase !== "undefined" && find_resource_reservation_list_usecase_1.FindResourceReservationListUsecase) === "function" ? _c : Object, typeof (_d = typeof find_my_using_reservation_list_usecase_1.FindMyUsingReservationListUsecase !== "undefined" && find_my_using_reservation_list_usecase_1.FindMyUsingReservationListUsecase) === "function" ? _d : Object, typeof (_e = typeof find_my_upcoming_reservation_list_usecase_1.FindMyUpcomingReservationListUsecase !== "undefined" && find_my_upcoming_reservation_list_usecase_1.FindMyUpcomingReservationListUsecase) === "function" ? _e : Object, typeof (_f = typeof find_my_all_schedules_usecase_1.FindMyAllSchedulesUsecase !== "undefined" && find_my_all_schedules_usecase_1.FindMyAllSchedulesUsecase) === "function" ? _f : Object, typeof (_g = typeof find_reservation_detail_usecase_1.FindReservationDetailUsecase !== "undefined" && find_reservation_detail_usecase_1.FindReservationDetailUsecase) === "function" ? _g : Object, typeof (_h = typeof update_reservation_usecase_1.UpdateReservationUsecase !== "undefined" && update_reservation_usecase_1.UpdateReservationUsecase) === "function" ? _h : Object, typeof (_j = typeof update_reservation_status_usecase_1.UpdateReservationStatusUsecase !== "undefined" && update_reservation_status_usecase_1.UpdateReservationStatusUsecase) === "function" ? _j : Object, typeof (_k = typeof return_vehicle_usecase_1.ReturnVehicleUsecase !== "undefined" && return_vehicle_usecase_1.ReturnVehicleUsecase) === "function" ? _k : Object, typeof (_l = typeof check_reservation_access_usecase_1.CheckReservationAccessUsecase !== "undefined" && check_reservation_access_usecase_1.CheckReservationAccessUsecase) === "function" ? _l : Object, typeof (_m = typeof find_calendar_usecase_1.FindCalendarUsecase !== "undefined" && find_calendar_usecase_1.FindCalendarUsecase) === "function" ? _m : Object])
], ReservationService);


/***/ }),

/***/ "./src/application/reservation/core/usecases/check-reservation-access.usecase.ts":
/*!***************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/check-reservation-access.usecase.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckReservationAccessUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let CheckReservationAccessUsecase = class CheckReservationAccessUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute(reservationId, employeeId) {
        const reservation = await this.reservationService.findOne({
            where: { reservationId, participants: { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER } },
            relations: ['participants'],
        });
        if (!reservation) {
            throw new common_1.UnauthorizedException(error_message_1.ERROR_MESSAGE.BUSINESS.COMMON.UNAUTHORIZED);
        }
        return true;
    }
};
exports.CheckReservationAccessUsecase = CheckReservationAccessUsecase;
exports.CheckReservationAccessUsecase = CheckReservationAccessUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], CheckReservationAccessUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/create-reservation-closing-job.usecase.ts":
/*!*********************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/create-reservation-closing-job.usecase.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateReservationClosingJobUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
const cron_1 = __webpack_require__(/*! cron */ "cron");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const delete_reservation_closing_job_usecase_1 = __webpack_require__(/*! ./delete-reservation-closing-job.usecase */ "./src/application/reservation/core/usecases/delete-reservation-closing-job.usecase.ts");
let CreateReservationClosingJobUsecase = class CreateReservationClosingJobUsecase {
    constructor(schedulerRegistry, reservationService, deleteReservationClosingJob) {
        this.schedulerRegistry = schedulerRegistry;
        this.reservationService = reservationService;
        this.deleteReservationClosingJob = deleteReservationClosingJob;
    }
    async execute(reservation) {
        const jobName = `closing-${reservation.reservationId}`;
        console.log('createReservationClosingJob', jobName);
        const executeTime = date_util_1.DateUtil.date(reservation.endDate).toDate();
        if (executeTime.getTime() <= Date.now()) {
            console.log(`ExecuteTime time ${executeTime} is in the past, skipping cron job creation`);
            await this.reservationService.update(reservation.reservationId, { status: reservation_type_enum_1.ReservationStatus.CLOSED });
            return;
        }
        this.deleteReservationClosingJob.execute(reservation.reservationId);
        const job = new cron_1.CronJob(executeTime, async () => {
            await this.reservationService.update(reservation.reservationId, { status: reservation_type_enum_1.ReservationStatus.CLOSED });
        });
        this.schedulerRegistry.addCronJob(jobName, job);
        job.start();
    }
};
exports.CreateReservationClosingJobUsecase = CreateReservationClosingJobUsecase;
exports.CreateReservationClosingJobUsecase = CreateReservationClosingJobUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_1.SchedulerRegistry !== "undefined" && schedule_1.SchedulerRegistry) === "function" ? _a : Object, typeof (_b = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _b : Object, typeof (_c = typeof delete_reservation_closing_job_usecase_1.DeleteReservationClosingJobUsecase !== "undefined" && delete_reservation_closing_job_usecase_1.DeleteReservationClosingJobUsecase) === "function" ? _c : Object])
], CreateReservationClosingJobUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/create-reservation.usecase.ts":
/*!*********************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/create-reservation.usecase.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateReservationUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_participant_service_1 = __webpack_require__(/*! @src/domain/reservation-participant/reservation-participant.service */ "./src/domain/reservation-participant/reservation-participant.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const reservation_vehicle_service_1 = __webpack_require__(/*! @src/domain/reservation-vehicle/reservation-vehicle.service */ "./src/domain/reservation-vehicle/reservation-vehicle.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const notification_service_1 = __webpack_require__(/*! @src/application/notification/services/notification.service */ "./src/application/notification/services/notification.service.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const find_conflict_reservation_usecase_1 = __webpack_require__(/*! ./find-conflict-reservation.usecase */ "./src/application/reservation/core/usecases/find-conflict-reservation.usecase.ts");
const create_reservation_closing_job_usecase_1 = __webpack_require__(/*! ./create-reservation-closing-job.usecase */ "./src/application/reservation/core/usecases/create-reservation-closing-job.usecase.ts");
let CreateReservationUsecase = class CreateReservationUsecase {
    constructor(reservationService, participantService, reservationVehicleService, resourceService, employeeService, notificationService, dataSource, findConflictReservationUsecase, createReservationClosingJob) {
        this.reservationService = reservationService;
        this.participantService = participantService;
        this.reservationVehicleService = reservationVehicleService;
        this.resourceService = resourceService;
        this.employeeService = employeeService;
        this.notificationService = notificationService;
        this.dataSource = dataSource;
        this.findConflictReservationUsecase = findConflictReservationUsecase;
        this.createReservationClosingJob = createReservationClosingJob;
    }
    async execute(user, createDto) {
        const conflicts = await this.findConflictReservationUsecase.execute(createDto.resourceId, date_util_1.DateUtil.date(createDto.startDate).toDate(), date_util_1.DateUtil.date(createDto.endDate).toDate());
        if (conflicts.length > 0) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.TIME_CONFLICT);
        }
        if (createDto.startDate > createDto.endDate) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_DATE_RANGE);
        }
        const resource = await this.resourceService.findOne({
            where: { resourceId: createDto.resourceId },
            relations: ['vehicleInfo'],
        });
        if (!resource.isAvailable) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.RESOURCE_UNAVAILABLE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            createDto.status =
                createDto.resourceType === resource_type_enum_1.ResourceType.ACCOMMODATION
                    ? reservation_type_enum_1.ReservationStatus.PENDING
                    : reservation_type_enum_1.ReservationStatus.CONFIRMED;
            const reservation = await this.reservationService.create(createDto);
            reservation.startDate = date_util_1.DateUtil.date(createDto.startDate).toDate();
            reservation.endDate = date_util_1.DateUtil.date(createDto.endDate).toDate();
            const savedReservation = await this.reservationService.save(reservation, {
                queryRunner,
            });
            if (createDto.resourceType === resource_type_enum_1.ResourceType.VEHICLE) {
                const reservationVehicle = new entities_1.ReservationVehicle();
                reservationVehicle.reservationId = savedReservation.reservationId;
                reservationVehicle.vehicleInfoId = resource.vehicleInfo.vehicleInfoId;
                reservationVehicle.startOdometer = resource.vehicleInfo.totalMileage;
                reservationVehicle.isReturned = false;
                reservationVehicle.returnedAt = null;
                await this.reservationVehicleService.save(reservationVehicle, {
                    queryRunner,
                });
            }
            await Promise.all([
                this.participantService.save({
                    reservationId: savedReservation.reservationId,
                    employeeId: user.employeeId,
                    type: reservation_type_enum_1.ParticipantsType.RESERVER,
                }, { queryRunner }),
                ...createDto.participantIds.map((employeeId) => this.participantService.save({
                    reservationId: savedReservation.reservationId,
                    employeeId,
                    type: reservation_type_enum_1.ParticipantsType.PARTICIPANT,
                }, { queryRunner })),
            ]);
            await queryRunner.commitTransaction();
            if (resource.type !== resource_type_enum_1.ResourceType.VEHICLE) {
                await this.createReservationClosingJob.execute(savedReservation);
            }
            try {
                const reservationWithResource = await this.reservationService.findOne({
                    where: { reservationId: savedReservation.reservationId },
                    relations: ['resource'],
                    withDeleted: true,
                });
                if (reservationWithResource.status === reservation_type_enum_1.ReservationStatus.CONFIRMED) {
                    const notiTarget = [...createDto.participantIds, user.employeeId];
                    await this.notificationService.createNotification(notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED, {
                        reservationId: reservationWithResource.reservationId,
                        reservationTitle: reservationWithResource.title,
                        reservationDate: date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(reservationWithResource.startDate), date_util_1.DateUtil.format(reservationWithResource.endDate)),
                        resourceId: reservationWithResource.resource.resourceId,
                        resourceName: reservationWithResource.resource.name,
                        resourceType: reservationWithResource.resource.type,
                    }, notiTarget);
                    for (const beforeMinutes of reservationWithResource.notifyMinutesBeforeStart) {
                        await this.notificationService.createNotification(notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING, {
                            reservationId: reservationWithResource.reservationId,
                            reservationTitle: reservationWithResource.title,
                            resourceId: reservationWithResource.resource.resourceId,
                            resourceName: reservationWithResource.resource.name,
                            resourceType: reservationWithResource.resource.type,
                            reservationDate: date_util_1.DateUtil.format(reservationWithResource.startDate),
                            beforeMinutes: beforeMinutes,
                        }, notiTarget);
                    }
                }
                else if (reservationWithResource.status === reservation_type_enum_1.ReservationStatus.PENDING &&
                    reservationWithResource.resource.type === resource_type_enum_1.ResourceType.ACCOMMODATION) {
                    const systemAdmins = await this.employeeService.findAll({
                        where: {
                            roles: (0, typeorm_1.Raw)(() => `'${role_type_enum_1.Role.SYSTEM_ADMIN}' = ANY("roles")`),
                        },
                    });
                    await this.notificationService.createNotification(notification_type_enum_1.NotificationType.RESERVATION_STATUS_PENDING, {
                        reservationId: reservationWithResource.reservationId,
                        reservationTitle: reservationWithResource.title,
                        reservationDate: date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(reservationWithResource.startDate), date_util_1.DateUtil.format(reservationWithResource.endDate)),
                        resourceId: reservationWithResource.resource.resourceId,
                        resourceName: reservationWithResource.resource.name,
                        resourceType: reservationWithResource.resource.type,
                    }, systemAdmins.map((user) => user.employeeId));
                }
            }
            catch (error) {
                console.log(error);
                console.log('Notification creation failed');
            }
            return {
                reservationId: savedReservation.reservationId,
            };
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.CreateReservationUsecase = CreateReservationUsecase;
exports.CreateReservationUsecase = CreateReservationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object, typeof (_b = typeof reservation_participant_service_1.DomainReservationParticipantService !== "undefined" && reservation_participant_service_1.DomainReservationParticipantService) === "function" ? _b : Object, typeof (_c = typeof reservation_vehicle_service_1.DomainReservationVehicleService !== "undefined" && reservation_vehicle_service_1.DomainReservationVehicleService) === "function" ? _c : Object, typeof (_d = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _d : Object, typeof (_e = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _e : Object, typeof (_f = typeof notification_service_1.NotificationService !== "undefined" && notification_service_1.NotificationService) === "function" ? _f : Object, typeof (_g = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _g : Object, typeof (_h = typeof find_conflict_reservation_usecase_1.FindConflictReservationUsecase !== "undefined" && find_conflict_reservation_usecase_1.FindConflictReservationUsecase) === "function" ? _h : Object, typeof (_j = typeof create_reservation_closing_job_usecase_1.CreateReservationClosingJobUsecase !== "undefined" && create_reservation_closing_job_usecase_1.CreateReservationClosingJobUsecase) === "function" ? _j : Object])
], CreateReservationUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/delete-reservation-closing-job.usecase.ts":
/*!*********************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/delete-reservation-closing-job.usecase.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DeleteReservationClosingJobUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
let DeleteReservationClosingJobUsecase = class DeleteReservationClosingJobUsecase {
    constructor(schedulerRegistry) {
        this.schedulerRegistry = schedulerRegistry;
    }
    execute(reservationId) {
        const jobName = `closing-${reservationId}`;
        try {
            if (this.schedulerRegistry.doesExist('cron', jobName)) {
                this.schedulerRegistry.deleteCronJob(jobName);
                console.log(`Job ${jobName} deleted successfully`);
            }
        }
        catch (error) {
            console.log(`Failed to delete job ${jobName}: ${error.message}`);
        }
    }
};
exports.DeleteReservationClosingJobUsecase = DeleteReservationClosingJobUsecase;
exports.DeleteReservationClosingJobUsecase = DeleteReservationClosingJobUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_1.SchedulerRegistry !== "undefined" && schedule_1.SchedulerRegistry) === "function" ? _a : Object])
], DeleteReservationClosingJobUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-calendar.usecase.ts":
/*!****************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-calendar.usecase.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindCalendarUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
let FindCalendarUsecase = class FindCalendarUsecase {
    constructor(reservationService, notificationService, employeeService) {
        this.reservationService = reservationService;
        this.notificationService = notificationService;
        this.employeeService = employeeService;
    }
    async execute(user, query) {
        console.time('FindCalendarUsecase');
        const { startDate, endDate, resourceType, isMine, isMySchedules } = query;
        const startDateObj = date_util_1.DateUtil.date(startDate).toDate();
        const endDateObj = date_util_1.DateUtil.date(endDate).toDate();
        const dateCondition = (0, typeorm_1.Raw)((alias) => `(${alias} BETWEEN :startDateObj AND :endDateObj OR
              "Reservation"."endDate" BETWEEN :startDateObj AND :endDateObj OR
              (${alias} <= :startDateObj AND "Reservation"."endDate" >= :endDateObj))`, { startDateObj, endDateObj });
        let participantCondition = {};
        if (!!isMine && !isMySchedules) {
            participantCondition = { participants: { employeeId: user.employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER } };
        }
        else if (!isMine && !isMySchedules) {
            participantCondition = {};
        }
        else {
            participantCondition = { participants: { employeeId: user.employeeId } };
        }
        const where = {
            startDate: dateCondition,
            status: (0, typeorm_1.In)([reservation_type_enum_1.ReservationStatus.PENDING, reservation_type_enum_1.ReservationStatus.CONFIRMED, reservation_type_enum_1.ReservationStatus.CLOSED]),
            ...(resourceType ? { resource: { type: resourceType } } : {}),
            ...participantCondition,
        };
        console.time('parallel-queries');
        console.time('employee-query');
        const employeePromise = this.employeeService.findAll({
            select: {
                employeeId: true,
                name: true,
            },
        });
        console.time('reservation-query');
        const reservationPromise = this.reservationService.findAll({
            where: where,
            relations: ['resource', 'participants'],
            order: {
                startDate: 'ASC',
            },
            select: {
                reservationId: true,
                startDate: true,
                endDate: true,
                title: true,
                status: true,
                resource: {
                    resourceId: true,
                    name: true,
                    type: true,
                },
                participants: {
                    employeeId: true,
                    type: true,
                },
            },
            withDeleted: true,
        });
        console.time('notification-query');
        const notificationPromise = this.notificationService.findAll({
            where: {
                employees: {
                    employeeId: user.employeeId,
                    isRead: false,
                },
            },
            relations: ['employees'],
            select: {
                notificationId: true,
                notificationData: true,
            },
        });
        const [reservations, notis, employees] = await Promise.all([
            reservationPromise,
            notificationPromise,
            employeePromise,
        ]);
        console.timeEnd('employee-query');
        console.timeEnd('reservation-query');
        console.timeEnd('notification-query');
        console.timeEnd('parallel-queries');
        console.time('employee-map');
        const employeeMap = new Map();
        employees.forEach((employee) => {
            employeeMap.set(employee.employeeId, employee);
        });
        console.timeEnd('employee-map');
        console.time('map');
        const map = new Map();
        notis.forEach((noti) => {
            if (!map.has(noti.notificationData.reservationId)) {
                map.set(noti.notificationData.reservationId, true);
            }
        });
        console.timeEnd('map');
        console.time('map2');
        const formatter = new Intl.DateTimeFormat('ko-KR', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            timeZone: 'Asia/Seoul',
            hour12: false,
        });
        const formatDate = (date) => {
            if (!date)
                return undefined;
            const dateObj = typeof date === 'string' ? new Date(date) : date;
            const parts = formatter.formatToParts(dateObj);
            const partsObj = {};
            for (const part of parts) {
                partsObj[part.type] = part.value;
            }
            return `${partsObj.year}-${partsObj.month}-${partsObj.day} ${partsObj.hour}:${partsObj.minute}:${partsObj.second}`;
        };
        const reservationsWithNotifications = reservations.map((reservation) => {
            const participants = reservation.participants || [];
            const reservers = [];
            const participantsOnly = [];
            for (const participant of participants) {
                if (participant.type === reservation_type_enum_1.ParticipantsType.RESERVER) {
                    reservers.push({
                        employeeId: participant.employeeId,
                        type: participant.type,
                        employee: employeeMap.get(participant.employeeId),
                    });
                }
                else if (participant.type === reservation_type_enum_1.ParticipantsType.PARTICIPANT) {
                    participantsOnly.push({
                        employeeId: participant.employeeId,
                        type: participant.type,
                        employee: employeeMap.get(participant.employeeId),
                    });
                }
            }
            return {
                reservationId: reservation.reservationId,
                title: reservation.title,
                startDate: formatDate(reservation.startDate),
                endDate: formatDate(reservation.endDate),
                status: reservation.status,
                resource: reservation.resource,
                reservers,
                participants: participantsOnly,
                hasUnreadNotification: map.has(reservation.reservationId),
            };
        });
        console.timeEnd('map2');
        console.timeEnd('FindCalendarUsecase');
        return {
            reservations: reservationsWithNotifications,
        };
    }
};
exports.FindCalendarUsecase = FindCalendarUsecase;
exports.FindCalendarUsecase = FindCalendarUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object, typeof (_b = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _b : Object, typeof (_c = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _c : Object])
], FindCalendarUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-check-reservation-list.usecase.ts":
/*!******************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-check-reservation-list.usecase.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindCheckReservationListUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
let FindCheckReservationListUsecase = class FindCheckReservationListUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute(query) {
        const { page, limit } = query;
        const where = [
            {
                status: reservation_type_enum_1.ReservationStatus.PENDING,
                resource: {
                    type: resource_type_enum_1.ResourceType.ACCOMMODATION,
                },
            },
        ];
        const options = {
            where,
            relations: ['resource', 'reservationVehicles', 'participants', 'participants.employee'],
            withDeleted: true,
        };
        const reservations = await this.reservationService.findAll(options);
        const reservationResponseDtos = reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation));
        return {
            items: reservationResponseDtos,
            meta: {
                total: reservations.length,
                page: 1,
                limit: reservations.length,
                hasNext: false,
            },
        };
    }
};
exports.FindCheckReservationListUsecase = FindCheckReservationListUsecase;
exports.FindCheckReservationListUsecase = FindCheckReservationListUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], FindCheckReservationListUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-conflict-reservation.usecase.ts":
/*!****************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-conflict-reservation.usecase.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindConflictReservationUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
let FindConflictReservationUsecase = class FindConflictReservationUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute(resourceId, startDate, endDate, reservationId) {
        return await this.reservationService.findAll({
            where: {
                resourceId,
                ...(reservationId && { reservationId: (0, typeorm_1.Not)(reservationId) }),
                startDate: (0, typeorm_1.LessThan)(endDate),
                endDate: (0, typeorm_1.MoreThan)(startDate),
                status: (0, typeorm_1.In)([reservation_type_enum_1.ReservationStatus.PENDING, reservation_type_enum_1.ReservationStatus.CONFIRMED, reservation_type_enum_1.ReservationStatus.CLOSED]),
            },
        });
    }
};
exports.FindConflictReservationUsecase = FindConflictReservationUsecase;
exports.FindConflictReservationUsecase = FindConflictReservationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], FindConflictReservationUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-dealyed-vehicle-notifications.usecase.ts":
/*!*************************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-dealyed-vehicle-notifications.usecase.ts ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindDelayedVehicleNotificationsUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
let FindDelayedVehicleNotificationsUsecase = class FindDelayedVehicleNotificationsUsecase {
    constructor(notificationService) {
        this.notificationService = notificationService;
    }
    async execute(reservationId) {
        const notifications = await this.notificationService.findAll({
            where: {
                notificationData: (0, typeorm_1.Raw)((alias) => `${alias} -> 'reservation' ->> 'reservationId' = '${reservationId}'`),
                notificationType: notification_type_enum_1.NotificationType.RESOURCE_VEHICLE_DELAYED_RETURNED,
            },
        });
        return notifications;
    }
};
exports.FindDelayedVehicleNotificationsUsecase = FindDelayedVehicleNotificationsUsecase;
exports.FindDelayedVehicleNotificationsUsecase = FindDelayedVehicleNotificationsUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _a : Object])
], FindDelayedVehicleNotificationsUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-my-all-schedules.usecase.ts":
/*!************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-my-all-schedules.usecase.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindMyAllSchedulesUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let FindMyAllSchedulesUsecase = class FindMyAllSchedulesUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute(employeeId, query, resourceType) {
        const { page, limit } = query;
        const today = date_util_1.DateUtil.date(date_util_1.DateUtil.now().format('YYYY-MM-DD 00:00:00')).toDate();
        const where = {
            participants: { employeeId },
            status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
            endDate: (0, typeorm_1.MoreThanOrEqual)(today),
        };
        if (resourceType) {
            where.resource = {
                type: resourceType,
            };
        }
        const options = {
            where,
            relations: ['resource', 'participants', 'participants.employee'],
        };
        const reservations = await this.reservationService.findAll(options);
        const count = reservations.length;
        const reservationWithParticipants = await this.reservationService.findAll({
            where: {
                reservationId: (0, typeorm_1.In)(reservations.map((r) => r.reservationId)),
            },
            relations: ['resource', 'participants', 'participants.employee'],
            order: {
                startDate: 'ASC',
            },
            skip: (page - 1) * limit,
            take: limit,
            withDeleted: true,
        });
        const groupedReservations = reservationWithParticipants.reduce((acc, reservation) => {
            const date = date_util_1.DateUtil.format(reservation.startDate, 'YYYY-MM-DD');
            if (!acc[date]) {
                acc[date] = [];
            }
            acc[date].push(reservation);
            return acc;
        }, {});
        const groupedReservationsResponse = Object.entries(groupedReservations).map(([date, reservations]) => ({
            date,
            reservations: reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation)),
        }));
        return {
            items: groupedReservationsResponse,
            meta: {
                total: count,
                page,
                limit,
                hasNext: page * limit < count,
            },
        };
    }
};
exports.FindMyAllSchedulesUsecase = FindMyAllSchedulesUsecase;
exports.FindMyAllSchedulesUsecase = FindMyAllSchedulesUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], FindMyAllSchedulesUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-my-reservation-list.usecase.ts":
/*!***************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-my-reservation-list.usecase.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindMyReservationListUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let FindMyReservationListUsecase = class FindMyReservationListUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute(employeeId, page, limit, resourceType, startDate, endDate) {
        const where = { participants: { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER } };
        if (resourceType) {
            where.resource = {
                type: resourceType,
            };
        }
        if (startDate && endDate) {
            where.startDate = (0, typeorm_1.MoreThanOrEqual)(date_util_1.DateUtil.date(startDate).getFirstDayOfMonth().toDate());
            where.endDate = (0, typeorm_1.LessThanOrEqual)(date_util_1.DateUtil.date(endDate).getLastDayOfMonth().toDate());
        }
        const options = {
            where,
            order: {
                startDate: 'DESC',
            },
        };
        if (page && limit) {
            options.skip = (page - 1) * limit;
            options.take = limit;
        }
        const reservations = await this.reservationService.findAll(options);
        const reservationWithParticipants = await this.reservationService.findAll({
            where: {
                reservationId: (0, typeorm_1.In)(reservations.map((r) => r.reservationId)),
            },
            relations: ['resource', 'participants', 'participants.employee', 'reservationVehicles'],
            withDeleted: true,
        });
        const count = await this.reservationService.count({
            where: {
                reservationId: (0, typeorm_1.In)(reservations.map((r) => r.reservationId)),
            },
        });
        const groupedReservations = reservationWithParticipants.reduce((acc, reservation) => {
            const date = date_util_1.DateUtil.format(reservation.startDate, 'YYYY-MM-DD');
            if (!acc[date]) {
                acc[date] = [];
            }
            acc[date].push(reservation);
            return acc;
        }, {});
        const groupedReservationsResponse = Object.entries(groupedReservations)
            .map(([date, reservations]) => ({
            date,
            reservations: reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation)),
        }))
            .sort((a, b) => {
            const dateA = new Date(a.date);
            const dateB = new Date(b.date);
            return dateB.getTime() - dateA.getTime();
        });
        return {
            items: groupedReservationsResponse,
            meta: {
                total: count,
                page,
                limit,
                hasNext: page * limit < count,
            },
        };
    }
};
exports.FindMyReservationListUsecase = FindMyReservationListUsecase;
exports.FindMyReservationListUsecase = FindMyReservationListUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], FindMyReservationListUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-my-upcoming-reservation-list.usecase.ts":
/*!************************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-my-upcoming-reservation-list.usecase.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindMyUpcomingReservationListUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let FindMyUpcomingReservationListUsecase = class FindMyUpcomingReservationListUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute(employeeId, query, resourceType) {
        const { page, limit } = query;
        const today = date_util_1.DateUtil.date(date_util_1.DateUtil.now().format('YYYY-MM-DD 00:00:00')).toDate();
        const where = {
            participants: { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER },
            endDate: (0, typeorm_1.MoreThanOrEqual)(today),
        };
        if (resourceType) {
            where.resource = {
                type: resourceType,
            };
        }
        const options = {
            where,
            relations: ['resource', 'participants', 'participants.employee'],
        };
        const reservations = await this.reservationService.findAll(options);
        const count = reservations.length;
        const reservationWithParticipants = await this.reservationService.findAll({
            where: {
                reservationId: (0, typeorm_1.In)(reservations.map((r) => r.reservationId)),
            },
            relations: ['resource', 'participants', 'participants.employee'],
            order: {
                startDate: 'ASC',
            },
            skip: (page - 1) * limit,
            take: limit,
            withDeleted: true,
        });
        const groupedReservations = reservationWithParticipants.reduce((acc, reservation) => {
            const date = date_util_1.DateUtil.format(reservation.startDate, 'YYYY-MM-DD');
            if (!acc[date]) {
                acc[date] = [];
            }
            acc[date].push(reservation);
            return acc;
        }, {});
        const groupedReservationsResponse = Object.entries(groupedReservations).map(([date, reservations]) => ({
            date,
            reservations: reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation)),
        }));
        return {
            items: groupedReservationsResponse,
            meta: {
                total: count,
                page,
                limit,
                hasNext: page * limit < count,
            },
        };
    }
};
exports.FindMyUpcomingReservationListUsecase = FindMyUpcomingReservationListUsecase;
exports.FindMyUpcomingReservationListUsecase = FindMyUpcomingReservationListUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], FindMyUpcomingReservationListUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-my-using-reservation-list.usecase.ts":
/*!*********************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-my-using-reservation-list.usecase.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindMyUsingReservationListUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let FindMyUsingReservationListUsecase = class FindMyUsingReservationListUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute(employeeId) {
        const where = [
            {
                participants: { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER },
                resource: { type: resource_type_enum_1.ResourceType.VEHICLE },
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                startDate: (0, typeorm_1.LessThanOrEqual)(date_util_1.DateUtil.date(date_util_1.DateUtil.now().format()).toDate()),
                endDate: (0, typeorm_1.MoreThanOrEqual)(date_util_1.DateUtil.date(date_util_1.DateUtil.now().format()).toDate()),
            },
            {
                participants: { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER },
                status: reservation_type_enum_1.ReservationStatus.CLOSED,
                reservationVehicles: {
                    isReturned: false,
                },
            },
        ];
        const reservations = await this.reservationService.findAll({
            where,
            relations: ['resource', 'reservationVehicles', 'participants'],
            order: {
                startDate: 'ASC',
            },
            withDeleted: true,
        });
        reservations.sort((a, b) => {
            if (a.status === reservation_type_enum_1.ReservationStatus.CONFIRMED) {
                return -1;
            }
            return 1;
        });
        return {
            items: reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation)),
            meta: {
                total: reservations.length,
                page: 1,
                limit: reservations.length,
                hasNext: false,
            },
        };
    }
};
exports.FindMyUsingReservationListUsecase = FindMyUsingReservationListUsecase;
exports.FindMyUsingReservationListUsecase = FindMyUsingReservationListUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], FindMyUsingReservationListUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-reservation-detail.usecase.ts":
/*!**************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-reservation-detail.usecase.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindReservationDetailUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_notification_service_1 = __webpack_require__(/*! @src/domain/employee-notification/employee-notification.service */ "./src/domain/employee-notification/employee-notification.service.ts");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
let FindReservationDetailUsecase = class FindReservationDetailUsecase {
    constructor(reservationService, notificationService, employeeNotificationService) {
        this.reservationService = reservationService;
        this.notificationService = notificationService;
        this.employeeNotificationService = employeeNotificationService;
    }
    async execute(user, reservationId) {
        const reservation = await this.reservationService.findOne({
            where: { reservationId },
            relations: [
                'resource',
                'resource.vehicleInfo',
                'resource.meetingRoomInfo',
                'resource.accommodationInfo',
                'participants',
                'participants.employee',
                'reservationVehicles',
            ],
            withDeleted: true,
        });
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        const reservationResponseDto = new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation);
        reservationResponseDto.isMine = reservationResponseDto.reservers.some((reserver) => reserver.employeeId === user.employeeId);
        reservationResponseDto.returnable =
            reservationResponseDto.resource.type === resource_type_enum_1.ResourceType.VEHICLE
                ? reservationResponseDto.isMine &&
                    reservationResponseDto.reservationVehicles.some((reservationVehicle) => !reservationVehicle.isReturned) &&
                    reservationResponseDto.startDate <= date_util_1.DateUtil.now().format()
                : null;
        reservationResponseDto.modifiable =
            [reservation_type_enum_1.ReservationStatus.PENDING, reservation_type_enum_1.ReservationStatus.CONFIRMED].includes(reservation.status) &&
                reservationResponseDto.isMine &&
                reservationResponseDto.endDate > date_util_1.DateUtil.now().format();
        const notifications = await this.notificationService.findAll({
            where: {
                notificationData: (0, typeorm_1.Raw)((alias) => `${alias} -> 'reservation' ->> 'reservationId' = '${reservation.reservationId}'`),
                employees: {
                    employeeId: user.employeeId,
                    isRead: false,
                },
            },
            relations: ['employees'],
        });
        if (notifications.length > 0) {
            const employeeNotifications = notifications
                .map((notification) => notification.employees.map((employee) => employee.employeeNotificationId).flat())
                .flat();
            const updatedEmployeeNotifications = await Promise.all(employeeNotifications.map((employeeNotificationId) => this.employeeNotificationService.update(employeeNotificationId, {
                isRead: true,
            })));
        }
        return reservationResponseDto;
    }
};
exports.FindReservationDetailUsecase = FindReservationDetailUsecase;
exports.FindReservationDetailUsecase = FindReservationDetailUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object, typeof (_b = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _b : Object, typeof (_c = typeof employee_notification_service_1.DomainEmployeeNotificationService !== "undefined" && employee_notification_service_1.DomainEmployeeNotificationService) === "function" ? _c : Object])
], FindReservationDetailUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-reservation-list.usecase.ts":
/*!************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-reservation-list.usecase.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindReservationListUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
let FindReservationListUsecase = class FindReservationListUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute(startDate, endDate, resourceType, resourceId, status) {
        if (startDate && endDate && startDate > endDate) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_DATE_RANGE);
        }
        if (status && status.filter((s) => reservation_type_enum_1.ReservationStatus[s]).length === 0) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.INVALID_STATUS);
        }
        const regex = /(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/;
        let where = {};
        if (status && status.length > 0) {
            where.status = (0, typeorm_1.In)(status);
        }
        if (resourceType) {
            where.resource = {
                type: resourceType,
            };
        }
        if (resourceId) {
            where.resource = {
                resourceId,
            };
        }
        if (startDate && endDate) {
            where = {
                ...where,
                startDate: (0, typeorm_1.LessThan)(date_util_1.DateUtil.date(regex.test(endDate) ? endDate : endDate + ' 23:59:59').toDate()),
                endDate: (0, typeorm_1.MoreThan)(date_util_1.DateUtil.date(regex.test(startDate) ? startDate : startDate + ' 00:00:00').toDate()),
            };
        }
        const reservations = await this.reservationService.findAll({
            where,
            relations: ['resource', 'participants', 'participants.employee'],
            withDeleted: true,
        });
        const reservationResponseDtos = reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation));
        return reservationResponseDtos;
    }
};
exports.FindReservationListUsecase = FindReservationListUsecase;
exports.FindReservationListUsecase = FindReservationListUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], FindReservationListUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/find-resource-reservation-list.usecase.ts":
/*!*********************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/find-resource-reservation-list.usecase.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindResourceReservationListUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const dtos_index_1 = __webpack_require__(/*! @resource/dtos.index */ "./src/dtos.index.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let FindResourceReservationListUsecase = class FindResourceReservationListUsecase {
    constructor(reservationService, resourceService) {
        this.reservationService = reservationService;
        this.resourceService = resourceService;
    }
    async execute(employeeId, resourceId, page, limit, month, isMine) {
        const monthStart = `${month}-01 00:00:00`;
        const lastDay = date_util_1.DateUtil.date(month).getLastDayOfMonth().getDate();
        const monthEnd = `${month}-${lastDay} 23:59:59`;
        const monthStartDate = date_util_1.DateUtil.date(monthStart).toDate();
        const monthEndDate = date_util_1.DateUtil.date(monthEnd).toDate();
        const dateCondition = (0, typeorm_1.Raw)((alias) => `(${alias} BETWEEN :monthStartDate AND :monthEndDate OR
              "Reservation"."endDate" BETWEEN :monthStartDate AND :monthEndDate OR
              (${alias} <= :monthStartDate AND "Reservation"."endDate" >= :monthEndDate))`, { monthStartDate, monthEndDate });
        const where = {
            startDate: dateCondition,
            resourceId: resourceId,
        };
        const resource = await this.resourceService.findOne({
            where: { resourceId: resourceId },
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        if (isMine) {
            where.participants = { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER };
        }
        const options = {
            where,
        };
        if (page && limit) {
            options.skip = (page - 1) * limit;
            options.take = limit;
        }
        const reservations = await this.reservationService.findAll(options);
        const count = await this.reservationService.count({ where });
        const reservationWithParticipants = await this.reservationService.findAll({
            where: {
                reservationId: (0, typeorm_1.In)(reservations.map((r) => r.reservationId)),
            },
            relations: ['participants', 'participants.employee'],
            withDeleted: true,
        });
        const groupedReservations = reservationWithParticipants.reduce((acc, reservation) => {
            const date = date_util_1.DateUtil.format(reservation.startDate, 'YYYY-MM-DD');
            if (!acc[date]) {
                acc[date] = [];
            }
            acc[date].push(reservation);
            return acc;
        }, {});
        const groupedReservationsResponse = Object.entries(groupedReservations).map(([date, reservations]) => ({
            date,
            reservations: reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation)),
        }));
        return {
            resource: new dtos_index_1.ResourceResponseDto(resource),
            groupedReservations: groupedReservationsResponse,
        };
    }
};
exports.FindResourceReservationListUsecase = FindResourceReservationListUsecase;
exports.FindResourceReservationListUsecase = FindResourceReservationListUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object, typeof (_b = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _b : Object])
], FindResourceReservationListUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/handle-cron.usecase.ts":
/*!**************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/handle-cron.usecase.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.HandleCronUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
let HandleCronUsecase = class HandleCronUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute() {
        const now = date_util_1.DateUtil.now().format();
        const notClosedReservations = await this.reservationService.findAll({
            where: {
                status: (0, typeorm_1.In)([reservation_type_enum_1.ReservationStatus.CONFIRMED, reservation_type_enum_1.ReservationStatus.PENDING]),
                resource: {
                    type: (0, typeorm_1.Not)(resource_type_enum_1.ResourceType.VEHICLE),
                },
                endDate: (0, typeorm_1.LessThanOrEqual)(date_util_1.DateUtil.date(now).toDate()),
            },
        });
        for (const reservation of notClosedReservations) {
            await this.reservationService.update(reservation.reservationId, { status: reservation_type_enum_1.ReservationStatus.CLOSED });
        }
    }
};
exports.HandleCronUsecase = HandleCronUsecase;
exports.HandleCronUsecase = HandleCronUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], HandleCronUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/handle-start-odometer.usecase.ts":
/*!************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/handle-start-odometer.usecase.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.HandleStartOdometerUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_vehicle_service_1 = __webpack_require__(/*! @src/domain/reservation-vehicle/reservation-vehicle.service */ "./src/domain/reservation-vehicle/reservation-vehicle.service.ts");
let HandleStartOdometerUsecase = class HandleStartOdometerUsecase {
    constructor(reservationService, reservationVehicleService) {
        this.reservationService = reservationService;
        this.reservationVehicleService = reservationVehicleService;
    }
    async execute() {
        const now = date_util_1.DateUtil.now().format();
        const vehicleReservations = await this.reservationService.findAll({
            where: {
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                resource: {
                    type: resource_type_enum_1.ResourceType.VEHICLE,
                },
                startDate: (0, typeorm_1.Between)(date_util_1.DateUtil.date(now).addMinutes(-2).toDate(), date_util_1.DateUtil.date(now).addMinutes(2).toDate()),
            },
            relations: ['reservationVehicles', 'resource', 'resource.vehicleInfo'],
        });
        for (const reservation of vehicleReservations) {
            const reservationVehicle = reservation.reservationVehicles[0];
            const vehicleInfo = reservation.resource.vehicleInfo;
            await this.reservationVehicleService.update(reservationVehicle.reservationVehicleId, {
                startOdometer: vehicleInfo.totalMileage,
            });
        }
    }
};
exports.HandleStartOdometerUsecase = HandleStartOdometerUsecase;
exports.HandleStartOdometerUsecase = HandleStartOdometerUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object, typeof (_b = typeof reservation_vehicle_service_1.DomainReservationVehicleService !== "undefined" && reservation_vehicle_service_1.DomainReservationVehicleService) === "function" ? _b : Object])
], HandleStartOdometerUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/index.ts":
/*!************************************************************!*\
  !*** ./src/application/reservation/core/usecases/index.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./check-reservation-access.usecase */ "./src/application/reservation/core/usecases/check-reservation-access.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./create-reservation-closing-job.usecase */ "./src/application/reservation/core/usecases/create-reservation-closing-job.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./create-reservation.usecase */ "./src/application/reservation/core/usecases/create-reservation.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./delete-reservation-closing-job.usecase */ "./src/application/reservation/core/usecases/delete-reservation-closing-job.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-check-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-check-reservation-list.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-conflict-reservation.usecase */ "./src/application/reservation/core/usecases/find-conflict-reservation.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-my-all-schedules.usecase */ "./src/application/reservation/core/usecases/find-my-all-schedules.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-my-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-my-reservation-list.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-my-upcoming-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-my-upcoming-reservation-list.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-my-using-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-my-using-reservation-list.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-reservation-detail.usecase */ "./src/application/reservation/core/usecases/find-reservation-detail.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-reservation-list.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-resource-reservation-list.usecase */ "./src/application/reservation/core/usecases/find-resource-reservation-list.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./handle-cron.usecase */ "./src/application/reservation/core/usecases/handle-cron.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./handle-start-odometer.usecase */ "./src/application/reservation/core/usecases/handle-start-odometer.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./return-vehicle.usecase */ "./src/application/reservation/core/usecases/return-vehicle.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./update-reservation-status.usecase */ "./src/application/reservation/core/usecases/update-reservation-status.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./update-reservation.usecase */ "./src/application/reservation/core/usecases/update-reservation.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-calendar.usecase */ "./src/application/reservation/core/usecases/find-calendar.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./find-dealyed-vehicle-notifications.usecase */ "./src/application/reservation/core/usecases/find-dealyed-vehicle-notifications.usecase.ts"), exports);


/***/ }),

/***/ "./src/application/reservation/core/usecases/return-vehicle.usecase.ts":
/*!*****************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/return-vehicle.usecase.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReturnVehicleUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_vehicle_service_1 = __webpack_require__(/*! @src/domain/reservation-vehicle/reservation-vehicle.service */ "./src/domain/reservation-vehicle/reservation-vehicle.service.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const notification_service_1 = __webpack_require__(/*! @src/application/notification/services/notification.service */ "./src/application/notification/services/notification.service.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
let ReturnVehicleUsecase = class ReturnVehicleUsecase {
    constructor(reservationService, reservationVehicleService, resourceService, vehicleInfoService, notificationService, fileService, dataSource) {
        this.reservationService = reservationService;
        this.reservationVehicleService = reservationVehicleService;
        this.resourceService = resourceService;
        this.vehicleInfoService = vehicleInfoService;
        this.notificationService = notificationService;
        this.fileService = fileService;
        this.dataSource = dataSource;
    }
    async execute(user, reservationId, returnDto) {
        const reservation = await this.reservationService.findOne({
            where: { reservationId },
            relations: ['resource', 'resource.vehicleInfo', 'resource.resourceManagers'],
            withDeleted: true,
        });
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        if (reservation.resource.type !== resource_type_enum_1.ResourceType.VEHICLE) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_RESOURCE_TYPE);
        }
        if (reservation.status !== reservation_type_enum_1.ReservationStatus.CONFIRMED) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.CANNOT_RETURN_STATUS(reservation.status));
        }
        if (reservation.resource.vehicleInfo.totalMileage > returnDto.totalMileage) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_MILEAGE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const reservationVehicles = await this.reservationVehicleService.findAll({
                where: { reservationId },
                relations: ['reservation', 'vehicleInfo'],
            });
            if (!reservationVehicles || reservationVehicles.length === 0) {
                throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.VEHICLE_NOT_FOUND);
            }
            const reservationVehicle = reservationVehicles[0];
            if (reservationVehicle.isReturned) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.VEHICLE_ALREADY_RETURNED);
            }
            await this.reservationService.update(reservationId, {
                status: reservation_type_enum_1.ReservationStatus.CLOSED,
            }, { queryRunner });
            await this.reservationVehicleService.update(reservationVehicle.reservationVehicleId, {
                endOdometer: returnDto.totalMileage,
                isReturned: true,
                returnedAt: date_util_1.DateUtil.now().toDate(),
            }, { queryRunner });
            const vehicleInfoId = reservation.resource.vehicleInfo.vehicleInfoId;
            await this.resourceService.update(reservation.resource.resourceId, { location: returnDto.location }, { queryRunner });
            if (!returnDto.parkingLocationImages)
                returnDto.parkingLocationImages = [];
            if (!returnDto.odometerImages)
                returnDto.odometerImages = [];
            if (!returnDto.indoorImages)
                returnDto.indoorImages = [];
            returnDto.parkingLocationImages = returnDto.parkingLocationImages.map((image) => this.fileService.getFileUrl(image));
            returnDto.odometerImages = returnDto.odometerImages.map((image) => this.fileService.getFileUrl(image));
            returnDto.indoorImages = returnDto.indoorImages.map((image) => this.fileService.getFileUrl(image));
            const images = [...returnDto.parkingLocationImages, ...returnDto.odometerImages, ...returnDto.indoorImages];
            if (images.length > 0) {
                await this.fileService.updateTemporaryFiles(images, false, {
                    queryRunner,
                });
            }
            await this.vehicleInfoService.update(vehicleInfoId, {
                totalMileage: returnDto.totalMileage,
                leftMileage: returnDto.leftMileage,
                parkingLocationImages: returnDto.parkingLocationImages,
                odometerImages: returnDto.odometerImages,
                indoorImages: returnDto.indoorImages,
            }, { queryRunner });
            const notiTarget = [user.employeeId];
            await this.notificationService.createNotification(notification_type_enum_1.NotificationType.RESOURCE_VEHICLE_RETURNED, {
                resourceId: reservation.resource.resourceId,
                resourceName: reservation.resource.name,
                resourceType: reservation.resource.type,
            }, notiTarget);
            await queryRunner.commitTransaction();
            return true;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            console.error('Error in returnVehicle:', error);
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.ReturnVehicleUsecase = ReturnVehicleUsecase;
exports.ReturnVehicleUsecase = ReturnVehicleUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object, typeof (_b = typeof reservation_vehicle_service_1.DomainReservationVehicleService !== "undefined" && reservation_vehicle_service_1.DomainReservationVehicleService) === "function" ? _b : Object, typeof (_c = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _c : Object, typeof (_d = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _d : Object, typeof (_e = typeof notification_service_1.NotificationService !== "undefined" && notification_service_1.NotificationService) === "function" ? _e : Object, typeof (_f = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _f : Object, typeof (_g = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _g : Object])
], ReturnVehicleUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/update-reservation-status.usecase.ts":
/*!****************************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/update-reservation-status.usecase.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateReservationStatusUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const notification_service_1 = __webpack_require__(/*! @src/application/notification/services/notification.service */ "./src/application/notification/services/notification.service.ts");
const reservation_participant_service_1 = __webpack_require__(/*! @src/domain/reservation-participant/reservation-participant.service */ "./src/domain/reservation-participant/reservation-participant.service.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const create_reservation_closing_job_usecase_1 = __webpack_require__(/*! ./create-reservation-closing-job.usecase */ "./src/application/reservation/core/usecases/create-reservation-closing-job.usecase.ts");
const delete_reservation_closing_job_usecase_1 = __webpack_require__(/*! ./delete-reservation-closing-job.usecase */ "./src/application/reservation/core/usecases/delete-reservation-closing-job.usecase.ts");
let UpdateReservationStatusUsecase = class UpdateReservationStatusUsecase {
    constructor(reservationService, participantService, notificationService, createReservationClosingJob, deleteReservationClosingJob) {
        this.reservationService = reservationService;
        this.participantService = participantService;
        this.notificationService = notificationService;
        this.createReservationClosingJob = createReservationClosingJob;
        this.deleteReservationClosingJob = deleteReservationClosingJob;
    }
    async execute(reservationId, updateDto) {
        const reservation = await this.reservationService.findOne({
            where: { reservationId },
            withDeleted: true,
        });
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        if (reservation.status === reservation_type_enum_1.ReservationStatus.CLOSED) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.CANNOT_UPDATE_STATUS(reservation.status));
        }
        const updatedReservation = await this.reservationService.update(reservationId, updateDto, {
            relations: ['resource', 'resource.resourceManagers', 'participants', 'participants.employee'],
            withDeleted: true,
        });
        if (updateDto.status === reservation_type_enum_1.ReservationStatus.CANCELLED || updateDto.status === reservation_type_enum_1.ReservationStatus.REJECTED) {
            this.deleteReservationClosingJob.execute(reservationId);
        }
        if (updateDto.status === reservation_type_enum_1.ReservationStatus.CONFIRMED) {
            this.createReservationClosingJob.execute(updatedReservation);
        }
        const notiTarget = [
            ...updatedReservation.resource.resourceManagers.map((manager) => manager.employeeId),
            ...updatedReservation.participants.map((reserver) => reserver.employeeId),
        ];
        if (updatedReservation.resource.notifyReservationChange && updateDto.status !== reservation_type_enum_1.ReservationStatus.CLOSED) {
            try {
                let notificationType;
                switch (updateDto.status) {
                    case reservation_type_enum_1.ReservationStatus.CONFIRMED:
                        notificationType = notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED;
                        break;
                    case reservation_type_enum_1.ReservationStatus.CANCELLED:
                        notificationType = notification_type_enum_1.NotificationType.RESERVATION_STATUS_CANCELLED;
                        break;
                    case reservation_type_enum_1.ReservationStatus.REJECTED:
                        notificationType = notification_type_enum_1.NotificationType.RESERVATION_STATUS_REJECTED;
                        break;
                }
                await this.notificationService.createNotification(notificationType, {
                    reservationId: updatedReservation.reservationId,
                    reservationTitle: updatedReservation.title,
                    reservationDate: date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(updatedReservation.startDate), date_util_1.DateUtil.format(updatedReservation.endDate)),
                    resourceId: updatedReservation.resource.resourceId,
                    resourceName: updatedReservation.resource.name,
                    resourceType: updatedReservation.resource.type,
                }, notiTarget);
                if (updateDto.status === reservation_type_enum_1.ReservationStatus.CONFIRMED) {
                    for (const beforeMinutes of updatedReservation.notifyMinutesBeforeStart) {
                        await this.notificationService.createNotification(notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING, {
                            reservationId: updatedReservation.reservationId,
                            reservationTitle: updatedReservation.title,
                            resourceId: updatedReservation.resource.resourceId,
                            resourceName: updatedReservation.resource.name,
                            resourceType: updatedReservation.resource.type,
                            reservationDate: date_util_1.DateUtil.format(updatedReservation.startDate),
                            beforeMinutes: beforeMinutes,
                        }, notiTarget);
                    }
                }
            }
            catch (error) {
                console.log(error);
                console.log('Notification creation failed in updateStatus');
            }
        }
        return new reservation_response_dto_1.ReservationResponseDto(updatedReservation);
    }
};
exports.UpdateReservationStatusUsecase = UpdateReservationStatusUsecase;
exports.UpdateReservationStatusUsecase = UpdateReservationStatusUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object, typeof (_b = typeof reservation_participant_service_1.DomainReservationParticipantService !== "undefined" && reservation_participant_service_1.DomainReservationParticipantService) === "function" ? _b : Object, typeof (_c = typeof notification_service_1.NotificationService !== "undefined" && notification_service_1.NotificationService) === "function" ? _c : Object, typeof (_d = typeof create_reservation_closing_job_usecase_1.CreateReservationClosingJobUsecase !== "undefined" && create_reservation_closing_job_usecase_1.CreateReservationClosingJobUsecase) === "function" ? _d : Object, typeof (_e = typeof delete_reservation_closing_job_usecase_1.DeleteReservationClosingJobUsecase !== "undefined" && delete_reservation_closing_job_usecase_1.DeleteReservationClosingJobUsecase) === "function" ? _e : Object])
], UpdateReservationStatusUsecase);


/***/ }),

/***/ "./src/application/reservation/core/usecases/update-reservation.usecase.ts":
/*!*********************************************************************************!*\
  !*** ./src/application/reservation/core/usecases/update-reservation.usecase.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateReservationUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const notification_service_1 = __webpack_require__(/*! @src/application/notification/services/notification.service */ "./src/application/notification/services/notification.service.ts");
const reservation_participant_service_1 = __webpack_require__(/*! @src/domain/reservation-participant/reservation-participant.service */ "./src/domain/reservation-participant/reservation-participant.service.ts");
const find_conflict_reservation_usecase_1 = __webpack_require__(/*! ./find-conflict-reservation.usecase */ "./src/application/reservation/core/usecases/find-conflict-reservation.usecase.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const create_reservation_closing_job_usecase_1 = __webpack_require__(/*! ./create-reservation-closing-job.usecase */ "./src/application/reservation/core/usecases/create-reservation-closing-job.usecase.ts");
const delete_reservation_closing_job_usecase_1 = __webpack_require__(/*! ./delete-reservation-closing-job.usecase */ "./src/application/reservation/core/usecases/delete-reservation-closing-job.usecase.ts");
let UpdateReservationUsecase = class UpdateReservationUsecase {
    constructor(reservationService, participantService, notificationService, findConflictReservationUsecase, createReservationClosingJob, deleteReservationClosingJob) {
        this.reservationService = reservationService;
        this.participantService = participantService;
        this.notificationService = notificationService;
        this.findConflictReservationUsecase = findConflictReservationUsecase;
        this.createReservationClosingJob = createReservationClosingJob;
        this.deleteReservationClosingJob = deleteReservationClosingJob;
    }
    async execute(reservationId, updateDto) {
        const reservation = await this.reservationService.findOne({
            where: { reservationId, status: (0, typeorm_1.In)([reservation_type_enum_1.ReservationStatus.PENDING, reservation_type_enum_1.ReservationStatus.CONFIRMED]) },
            relations: ['resource', 'participants'],
            withDeleted: true,
        });
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        if (reservation.status === reservation_type_enum_1.ReservationStatus.CLOSED) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.CANNOT_UPDATE_STATUS(reservation.status));
        }
        let hasUpdateTime = false;
        let hasUpdateParticipants = false;
        if (updateDto.participantIds) {
            hasUpdateParticipants =
                updateDto.participantIds.length !==
                    reservation.participants.filter((p) => p.type === reservation_type_enum_1.ParticipantsType.PARTICIPANT).length ||
                    updateDto.participantIds.some((id) => !reservation.participants.some((p) => p.employeeId === id));
        }
        if (updateDto.resourceId && updateDto.startDate && updateDto.endDate) {
            hasUpdateTime = true;
            const conflicts = await this.findConflictReservationUsecase.execute(updateDto.resourceId, date_util_1.DateUtil.date(updateDto.startDate).toDate(), date_util_1.DateUtil.date(updateDto.endDate).toDate(), reservationId);
            if (conflicts.length > 0) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.TIME_CONFLICT);
            }
            if (reservation.status === reservation_type_enum_1.ReservationStatus.CONFIRMED &&
                reservation.resource.type === resource_type_enum_1.ResourceType.ACCOMMODATION) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.CANNOT_UPDATE_ACCOMMODATION_TIME);
            }
        }
        const participantIds = updateDto.participantIds;
        delete updateDto.participantIds;
        let updatedReservation = await this.reservationService.findOne({
            where: { reservationId },
            relations: ['participants', 'resource'],
            withDeleted: true,
        });
        const hasUpdateTings = updateDto.title || updateDto.isAllDay || updateDto.notifyBeforeStart || updateDto.notifyMinutesBeforeStart;
        if (hasUpdateTings) {
            updatedReservation = await this.reservationService.update(reservationId, {
                title: updateDto?.title || undefined,
                isAllDay: updateDto?.isAllDay || undefined,
                notifyBeforeStart: updateDto?.notifyBeforeStart || undefined,
                notifyMinutesBeforeStart: updateDto?.notifyMinutesBeforeStart || undefined,
            }, {
                where: { reservationId },
                relations: ['participants', 'resource'],
                withDeleted: true,
            });
        }
        if (hasUpdateParticipants) {
            const participants = reservation.participants.filter((p) => p.type === reservation_type_enum_1.ParticipantsType.PARTICIPANT);
            const newParticipants = participantIds.filter((id) => !participants.some((p) => p.employeeId === id));
            const deletedParticipants = participants.filter((p) => !participantIds.includes(p.employeeId));
            await Promise.all(deletedParticipants.map((participant) => this.participantService.delete(participant.participantId)));
            await Promise.all(newParticipants.map((employeeId) => this.participantService.save({
                reservationId,
                employeeId,
                type: reservation_type_enum_1.ParticipantsType.PARTICIPANT,
            })));
            if (updatedReservation.resource.notifyParticipantChange) {
                try {
                    const notiTarget = [...newParticipants, ...participants.map((p) => p.employeeId)];
                    await this.notificationService.createNotification(notification_type_enum_1.NotificationType.RESERVATION_PARTICIPANT_CHANGED, {
                        reservationId: updatedReservation.reservationId,
                        reservationTitle: updatedReservation.title,
                        reservationDate: date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(updatedReservation.startDate), date_util_1.DateUtil.format(updatedReservation.endDate)),
                        resourceId: updatedReservation.resource.resourceId,
                        resourceName: updatedReservation.resource.name,
                        resourceType: updatedReservation.resource.type,
                    }, notiTarget);
                }
                catch (error) {
                    console.log(error);
                    console.log('Notification creation failed in updateParticipants');
                }
            }
        }
        if (hasUpdateTime) {
            updatedReservation = await this.reservationService.update(reservationId, {
                startDate: updateDto.startDate ? date_util_1.DateUtil.date(updateDto.startDate).toDate() : undefined,
                endDate: updateDto.endDate ? date_util_1.DateUtil.date(updateDto.endDate).toDate() : undefined,
            }, {
                where: { reservationId },
                relations: ['participants', 'resource'],
                withDeleted: true,
            });
            if (updatedReservation.resource.notifyReservationChange) {
                try {
                    await this.notificationService.deleteScheduleJob(updatedReservation.reservationId);
                    const notiTarget = updatedReservation.participants.map((participant) => participant.employeeId);
                    await this.notificationService.createNotification(notification_type_enum_1.NotificationType.RESERVATION_TIME_CHANGED, {
                        reservationId: updatedReservation.reservationId,
                        reservationTitle: updatedReservation.title,
                        reservationDate: date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(updatedReservation.startDate), date_util_1.DateUtil.format(updatedReservation.endDate)),
                        resourceId: updatedReservation.resource.resourceId,
                        resourceName: updatedReservation.resource.name,
                        resourceType: updatedReservation.resource.type,
                    }, notiTarget);
                    for (const beforeMinutes of updatedReservation.notifyMinutesBeforeStart) {
                        await this.notificationService.createNotification(notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING, {
                            reservationId: updatedReservation.reservationId,
                            reservationTitle: updatedReservation.title,
                            resourceId: updatedReservation.resource.resourceId,
                            resourceName: updatedReservation.resource.name,
                            resourceType: updatedReservation.resource.type,
                            reservationDate: date_util_1.DateUtil.format(updatedReservation.startDate),
                            beforeMinutes: beforeMinutes,
                        }, notiTarget);
                    }
                }
                catch (error) {
                    console.log(error);
                    console.log('Notification creation failed in updateTime');
                }
            }
        }
        return new reservation_response_dto_1.ReservationResponseDto(updatedReservation);
    }
};
exports.UpdateReservationUsecase = UpdateReservationUsecase;
exports.UpdateReservationUsecase = UpdateReservationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object, typeof (_b = typeof reservation_participant_service_1.DomainReservationParticipantService !== "undefined" && reservation_participant_service_1.DomainReservationParticipantService) === "function" ? _b : Object, typeof (_c = typeof notification_service_1.NotificationService !== "undefined" && notification_service_1.NotificationService) === "function" ? _c : Object, typeof (_d = typeof find_conflict_reservation_usecase_1.FindConflictReservationUsecase !== "undefined" && find_conflict_reservation_usecase_1.FindConflictReservationUsecase) === "function" ? _d : Object, typeof (_e = typeof create_reservation_closing_job_usecase_1.CreateReservationClosingJobUsecase !== "undefined" && create_reservation_closing_job_usecase_1.CreateReservationClosingJobUsecase) === "function" ? _e : Object, typeof (_f = typeof delete_reservation_closing_job_usecase_1.DeleteReservationClosingJobUsecase !== "undefined" && delete_reservation_closing_job_usecase_1.DeleteReservationClosingJobUsecase) === "function" ? _f : Object])
], UpdateReservationUsecase);


/***/ }),

/***/ "./src/application/reservation/snapshot/dtos/reservation-snapshot.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/application/reservation/snapshot/dtos/reservation-snapshot.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationSnapshotResponseDto = exports.SelectedResourceResponseDto = exports.TimeRangeResponseDto = exports.TimeInfoResponseDto = exports.DateRangeResponseDto = exports.UpdateReservationSnapshotDto = exports.CreateReservationSnapshotDto = exports.ReminderTimeDto = exports.SelectedResourceDto = exports.TimeRangeDto = exports.TimeInfoDto = exports.DateRangeDto = exports.DroppableGroupDataDto = exports.DroppableGroupItemDto = exports.AttendeeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class AttendeeDto {
}
exports.AttendeeDto = AttendeeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsUUID)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], AttendeeDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], AttendeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], AttendeeDto.prototype, "department", void 0);
class DroppableGroupItemDto {
}
exports.DroppableGroupItemDto = DroppableGroupItemDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DroppableGroupItemDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DroppableGroupItemDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], DroppableGroupItemDto.prototype, "order", void 0);
class DroppableGroupDataDto {
}
exports.DroppableGroupDataDto = DroppableGroupDataDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DroppableGroupDataDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], DroppableGroupDataDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [DroppableGroupItemDto], required: false }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], DroppableGroupDataDto.prototype, "items", void 0);
class DateRangeDto {
}
exports.DateRangeDto = DateRangeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DateRangeDto.prototype, "from", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DateRangeDto.prototype, "to", void 0);
class TimeInfoDto {
}
exports.TimeInfoDto = TimeInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], TimeInfoDto.prototype, "hour", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], TimeInfoDto.prototype, "minute", void 0);
class TimeRangeDto {
}
exports.TimeRangeDto = TimeRangeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], TimeRangeDto.prototype, "am", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], TimeRangeDto.prototype, "pm", void 0);
class SelectedResourceDto {
}
exports.SelectedResourceDto = SelectedResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], SelectedResourceDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], SelectedResourceDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], SelectedResourceDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], SelectedResourceDto.prototype, "endDate", void 0);
class ReminderTimeDto {
}
exports.ReminderTimeDto = ReminderTimeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], ReminderTimeDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], ReminderTimeDto.prototype, "time", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], ReminderTimeDto.prototype, "isSelected", void 0);
class CreateReservationSnapshotDto {
}
exports.CreateReservationSnapshotDto = CreateReservationSnapshotDto;
__decorate([
    (0, swagger_1.ApiProperty)({ enum: ['groups', 'date-time', 'resources', 'info'], required: false }),
    (0, class_validator_1.IsEnum)(['groups', 'date-time', 'resources', 'info']),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], CreateReservationSnapshotDto.prototype, "step", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], CreateReservationSnapshotDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: DroppableGroupDataDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    __metadata("design:type", DroppableGroupDataDto)
], CreateReservationSnapshotDto.prototype, "droppableGroupData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: DateRangeDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => DateRangeDto),
    __metadata("design:type", DateRangeDto)
], CreateReservationSnapshotDto.prototype, "dateRange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeInfoDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => TimeInfoDto),
    __metadata("design:type", TimeInfoDto)
], CreateReservationSnapshotDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeInfoDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => TimeInfoDto),
    __metadata("design:type", TimeInfoDto)
], CreateReservationSnapshotDto.prototype, "endTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeRangeDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => TimeRangeDto),
    __metadata("design:type", TimeRangeDto)
], CreateReservationSnapshotDto.prototype, "timeRange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    __metadata("design:type", Number)
], CreateReservationSnapshotDto.prototype, "timeUnit", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: SelectedResourceDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => SelectedResourceDto),
    __metadata("design:type", SelectedResourceDto)
], CreateReservationSnapshotDto.prototype, "selectedResource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateReservationSnapshotDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [ReminderTimeDto] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    __metadata("design:type", Array)
], CreateReservationSnapshotDto.prototype, "reminderTimes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, default: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateReservationSnapshotDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, default: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateReservationSnapshotDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    __metadata("design:type", Array)
], CreateReservationSnapshotDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [AttendeeDto] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    __metadata("design:type", Array)
], CreateReservationSnapshotDto.prototype, "attendees", void 0);
class UpdateReservationSnapshotDto extends CreateReservationSnapshotDto {
}
exports.UpdateReservationSnapshotDto = UpdateReservationSnapshotDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateReservationSnapshotDto.prototype, "snapshotId", void 0);
class DateRangeResponseDto {
}
exports.DateRangeResponseDto = DateRangeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], DateRangeResponseDto.prototype, "from", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], DateRangeResponseDto.prototype, "to", void 0);
class TimeInfoResponseDto {
}
exports.TimeInfoResponseDto = TimeInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], TimeInfoResponseDto.prototype, "hour", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], TimeInfoResponseDto.prototype, "minute", void 0);
class TimeRangeResponseDto {
}
exports.TimeRangeResponseDto = TimeRangeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], TimeRangeResponseDto.prototype, "am", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], TimeRangeResponseDto.prototype, "pm", void 0);
class SelectedResourceResponseDto {
}
exports.SelectedResourceResponseDto = SelectedResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], SelectedResourceResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], SelectedResourceResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], SelectedResourceResponseDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], SelectedResourceResponseDto.prototype, "endDate", void 0);
class ReservationSnapshotResponseDto {
}
exports.ReservationSnapshotResponseDto = ReservationSnapshotResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationSnapshotResponseDto.prototype, "snapshotId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationSnapshotResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: ['groups', 'date-time', 'resources', 'info'], required: false }),
    __metadata("design:type", String)
], ReservationSnapshotResponseDto.prototype, "step", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationSnapshotResponseDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: DroppableGroupDataDto }),
    __metadata("design:type", DroppableGroupDataDto)
], ReservationSnapshotResponseDto.prototype, "droppableGroupData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: DateRangeResponseDto }),
    __metadata("design:type", DateRangeResponseDto)
], ReservationSnapshotResponseDto.prototype, "dateRange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeInfoResponseDto }),
    __metadata("design:type", TimeInfoResponseDto)
], ReservationSnapshotResponseDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeInfoResponseDto }),
    __metadata("design:type", TimeInfoResponseDto)
], ReservationSnapshotResponseDto.prototype, "endTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeRangeResponseDto }),
    __metadata("design:type", TimeRangeResponseDto)
], ReservationSnapshotResponseDto.prototype, "timeRange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], ReservationSnapshotResponseDto.prototype, "timeUnit", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: SelectedResourceResponseDto }),
    __metadata("design:type", SelectedResourceResponseDto)
], ReservationSnapshotResponseDto.prototype, "selectedResource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationSnapshotResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [ReminderTimeDto] }),
    __metadata("design:type", Array)
], ReservationSnapshotResponseDto.prototype, "reminderTimes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationSnapshotResponseDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationSnapshotResponseDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number] }),
    __metadata("design:type", Array)
], ReservationSnapshotResponseDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [AttendeeDto] }),
    __metadata("design:type", Array)
], ReservationSnapshotResponseDto.prototype, "attendees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], ReservationSnapshotResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], ReservationSnapshotResponseDto.prototype, "updatedAt", void 0);


/***/ }),

/***/ "./src/application/resource/accommodation/dtos/accommodation-info-response.dto.ts":
/*!****************************************************************************************!*\
  !*** ./src/application/resource/accommodation/dtos/accommodation-info-response.dto.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationInfoResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class AccommodationInfoResponseDto {
}
exports.AccommodationInfoResponseDto = AccommodationInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], AccommodationInfoResponseDto.prototype, "accommodationInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], AccommodationInfoResponseDto.prototype, "resourceId", void 0);


/***/ }),

/***/ "./src/application/resource/accommodation/dtos/create-accommodation-info.dto.ts":
/*!**************************************************************************************!*\
  !*** ./src/application/resource/accommodation/dtos/create-accommodation-info.dto.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateAccommodationInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const create_resource_dto_1 = __webpack_require__(/*! ../../../../business/resource-management/dtos/resource/create-resource.dto */ "./src/business/resource-management/dtos/resource/create-resource.dto.ts");
class CreateAccommodationInfoDto {
}
exports.CreateAccommodationInfoDto = CreateAccommodationInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: create_resource_dto_1.ResourceLocationURL }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof create_resource_dto_1.ResourceLocationURL !== "undefined" && create_resource_dto_1.ResourceLocationURL) === "function" ? _a : Object)
], CreateAccommodationInfoDto.prototype, "locationURLs", void 0);


/***/ }),

/***/ "./src/application/resource/accommodation/dtos/update-accommodation-info.dto.ts":
/*!**************************************************************************************!*\
  !*** ./src/application/resource/accommodation/dtos/update-accommodation-info.dto.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateAccommodationInfoDto = void 0;
class UpdateAccommodationInfoDto {
}
exports.UpdateAccommodationInfoDto = UpdateAccommodationInfoDto;


/***/ }),

/***/ "./src/application/resource/core/controllers/admin.resource-group.controller.ts":
/*!**************************************************************************************!*\
  !*** ./src/application/resource/core/controllers/admin.resource-group.controller.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminResourceGroupController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const create_resource_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/create-resource.dto */ "./src/application/resource/core/dtos/create-resource.dto.ts");
const resource_response_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/resource-response.dto */ "./src/application/resource/core/dtos/resource-response.dto.ts");
const update_resource_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/update-resource.dto */ "./src/application/resource/core/dtos/update-resource.dto.ts");
const resource_group_service_1 = __webpack_require__(/*! @src/application/resource/core/services/resource-group.service */ "./src/application/resource/core/services/resource-group.service.ts");
let AdminResourceGroupController = class AdminResourceGroupController {
    constructor(resourceGroupService) {
        this.resourceGroupService = resourceGroupService;
    }
    async findParentResourceGroups() {
        return this.resourceGroupService.findParentResourceGroups();
    }
    async findAll(type) {
        return this.resourceGroupService.findResourceGroupsWithResourceData(type);
    }
    async create(createResourceGroupDto) {
        return this.resourceGroupService.createResourceGroup(createResourceGroupDto);
    }
    async updateOrder(updateResourceGroupOrdersDto) {
        return this.resourceGroupService.reorderResourceGroups(updateResourceGroupOrdersDto);
    }
    async update(resourceGroupId, updateResourceGroupDto) {
        return this.resourceGroupService.updateResourceGroup(resourceGroupId, updateResourceGroupDto);
    }
    async remove(resourceGroupId) {
        return this.resourceGroupService.deleteResourceGroup(resourceGroupId);
    }
};
exports.AdminResourceGroupController = AdminResourceGroupController;
__decorate([
    (0, common_1.Get)('parents'),
    (0, swagger_1.ApiOperation)({ summary: '상위그룹 목록 조회 #사용자/자원구분/모달' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '상위 자원 그룹 목록을 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], AdminResourceGroupController.prototype, "findParentResourceGroups", null);
__decorate([
    (0, common_1.Get)('resources'),
    (0, swagger_1.ApiOperation)({ summary: '상위그룹-하위그룹-자원 목록 조회 #사용자/자원선택/모달 #관리자/자원관리/자원목록' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '자원 그룹들과 각 그룹에 속한 자원 목록을 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupWithResourcesResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'type', enum: resource_type_enum_1.ResourceType, required: false }),
    __param(0, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], AdminResourceGroupController.prototype, "findAll", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 201,
        description: '자원 그룹이 생성되었습니다.',
        type: resource_response_dto_1.ResourceGroupResponseDto,
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof create_resource_dto_1.CreateResourceGroupDto !== "undefined" && create_resource_dto_1.CreateResourceGroupDto) === "function" ? _e : Object]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], AdminResourceGroupController.prototype, "create", null);
__decorate([
    (0, common_1.Patch)('order'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 순서 변경' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 그룹 순서가 성공적으로 변경되었습니다.',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof update_resource_dto_1.UpdateResourceGroupOrdersDto !== "undefined" && update_resource_dto_1.UpdateResourceGroupOrdersDto) === "function" ? _g : Object]),
    __metadata("design:returntype", Promise)
], AdminResourceGroupController.prototype, "updateOrder", null);
__decorate([
    (0, common_1.Patch)(':resourceGroupId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '자원 그룹이 수정되었습니다.',
        type: resource_response_dto_1.ResourceGroupResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceGroupId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_h = typeof update_resource_dto_1.UpdateResourceGroupDto !== "undefined" && update_resource_dto_1.UpdateResourceGroupDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], AdminResourceGroupController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':resourceGroupId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 삭제' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '자원 그룹이 삭제되었습니다.',
    }),
    __param(0, (0, common_1.Param)('resourceGroupId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], AdminResourceGroupController.prototype, "remove", null);
exports.AdminResourceGroupController = AdminResourceGroupController = __decorate([
    (0, swagger_1.ApiTags)('3. 자원 그룹 - 관리자 '),
    (0, common_1.Controller)('v1/admin/resource-groups'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_service_1.ResourceGroupService !== "undefined" && resource_group_service_1.ResourceGroupService) === "function" ? _a : Object])
], AdminResourceGroupController);


/***/ }),

/***/ "./src/application/resource/core/controllers/admin.resource.controller.ts":
/*!********************************************************************************!*\
  !*** ./src/application/resource/core/controllers/admin.resource.controller.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminResourceController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const resource_response_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/resource-response.dto */ "./src/application/resource/core/dtos/resource-response.dto.ts");
const create_resource_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/create-resource.dto */ "./src/application/resource/core/dtos/create-resource.dto.ts");
const update_resource_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/update-resource.dto */ "./src/application/resource/core/dtos/update-resource.dto.ts");
const resource_service_1 = __webpack_require__(/*! @src/application/resource/core/services/resource.service */ "./src/application/resource/core/services/resource.service.ts");
let AdminResourceController = class AdminResourceController {
    constructor(resourceService) {
        this.resourceService = resourceService;
    }
    async createWithInfos(createResourceInfo) {
        return this.resourceService.createResourceWithInfos(createResourceInfo);
    }
    async findAll(type) {
        return this.resourceService.findResources(type);
    }
    async findOne(resourceId) {
        return this.resourceService.findResourceDetailForAdmin(resourceId);
    }
    async findResourcesByResourceGroupId(resourceGroupId) {
        return this.resourceService.findResourcesByResourceGroupId(resourceGroupId);
    }
    async reorder(updateResourceOrdersDto) {
        return this.resourceService.reorderResources(updateResourceOrdersDto);
    }
    async update(resourceId, updateResourceInfoDto) {
        return this.resourceService.updateResource(resourceId, updateResourceInfoDto);
    }
    async updateAvailability(resourceId, updateResourceInfoDto) {
        return this.resourceService.updateResource(resourceId, updateResourceInfoDto);
    }
    async remove(resourceId) {
        return this.resourceService.deleteResource(resourceId);
    }
};
exports.AdminResourceController = AdminResourceController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 생성 #관리자/자원관리/생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 201,
        description: '자원이 성공적으로 생성되었습니다.',
        type: resource_response_dto_1.CreateResourceResponseDto,
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof create_resource_dto_1.CreateResourceInfoDto !== "undefined" && create_resource_dto_1.CreateResourceInfoDto) === "function" ? _b : Object]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], AdminResourceController.prototype, "createWithInfos", null);
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 목록 조회 #관리자/자원관리/자원리스트' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 목록을 성공적으로 조회했습니다.',
        type: [resource_response_dto_1.ResourceResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'type', enum: resource_type_enum_1.ResourceType }),
    __param(0, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], AdminResourceController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 상세 조회 #관리자/자원관리/상세' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원을 성공적으로 조회했습니다.',
        type: resource_response_dto_1.ResourceResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], AdminResourceController.prototype, "findOne", null);
__decorate([
    (0, common_1.Get)('resource-group/:resourceGroupId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 상세 조회 #관리자/자원관리/자원리스트' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 그룹을 성공적으로 조회했습니다.',
        type: [resource_response_dto_1.ResourceResponseDto],
    }),
    __param(0, (0, common_1.Param)('resourceGroupId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], AdminResourceController.prototype, "findResourcesByResourceGroupId", null);
__decorate([
    (0, common_1.Patch)('order'),
    (0, swagger_1.ApiOperation)({ summary: '자원 순서 변경' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 순서가 성공적으로 변경되었습니다.',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_h = typeof update_resource_dto_1.UpdateResourceOrdersDto !== "undefined" && update_resource_dto_1.UpdateResourceOrdersDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], AdminResourceController.prototype, "reorder", null);
__decorate([
    (0, common_1.Patch)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원이 성공적으로 수정되었습니다.',
        type: resource_response_dto_1.ResourceResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_k = typeof update_resource_dto_1.UpdateResourceInfoDto !== "undefined" && update_resource_dto_1.UpdateResourceInfoDto) === "function" ? _k : Object]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], AdminResourceController.prototype, "update", null);
__decorate([
    (0, common_1.Patch)(':resourceId/availability'),
    (0, swagger_1.ApiOperation)({ summary: '자원 예약 가능 상태 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원이 성공적으로 수정되었습니다.',
        type: resource_response_dto_1.ResourceResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_m = typeof update_resource_dto_1.UpdateResourceInfoDto !== "undefined" && update_resource_dto_1.UpdateResourceInfoDto) === "function" ? _m : Object]),
    __metadata("design:returntype", typeof (_o = typeof Promise !== "undefined" && Promise) === "function" ? _o : Object)
], AdminResourceController.prototype, "updateAvailability", null);
__decorate([
    (0, common_1.Delete)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 삭제' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원이 성공적으로 삭제되었습니다.',
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_p = typeof Promise !== "undefined" && Promise) === "function" ? _p : Object)
], AdminResourceController.prototype, "remove", null);
exports.AdminResourceController = AdminResourceController = __decorate([
    (0, swagger_1.ApiTags)('3. 자원 - 관리자 '),
    (0, common_1.Controller)('v1/admin/resources'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.ResourceService !== "undefined" && resource_service_1.ResourceService) === "function" ? _a : Object])
], AdminResourceController);


/***/ }),

/***/ "./src/application/resource/core/controllers/resource-group.controller.ts":
/*!********************************************************************************!*\
  !*** ./src/application/resource/core/controllers/resource-group.controller.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserResourceGroupController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const resource_response_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/resource-response.dto */ "./src/application/resource/core/dtos/resource-response.dto.ts");
const resource_group_service_1 = __webpack_require__(/*! @src/application/resource/core/services/resource-group.service */ "./src/application/resource/core/services/resource-group.service.ts");
let UserResourceGroupController = class UserResourceGroupController {
    constructor(resourceGroupService) {
        this.resourceGroupService = resourceGroupService;
    }
    async findParentResourceGroups() {
        return this.resourceGroupService.findParentResourceGroups();
    }
    async findAll(type) {
        return this.resourceGroupService.findResourceGroupsWithResourceData(type);
    }
};
exports.UserResourceGroupController = UserResourceGroupController;
__decorate([
    (0, common_1.Get)('parents'),
    (0, swagger_1.ApiOperation)({ summary: '상위그룹 목록 조회 #사용자/자원구분/모달' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '상위 자원 그룹 목록을 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], UserResourceGroupController.prototype, "findParentResourceGroups", null);
__decorate([
    (0, common_1.Get)('resources'),
    (0, swagger_1.ApiOperation)({ summary: '상위그룹-하위그룹-자원 목록 조회 #사용자/자원선택/모달 #관리자/자원관리/자원목록' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '자원 그룹들과 각 그룹에 속한 자원 목록을 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupWithResourcesResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'type', enum: resource_type_enum_1.ResourceType, required: false }),
    __param(0, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], UserResourceGroupController.prototype, "findAll", null);
exports.UserResourceGroupController = UserResourceGroupController = __decorate([
    (0, swagger_1.ApiTags)('3. 자원 그룹 '),
    (0, common_1.Controller)('v1/resource-groups'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_service_1.ResourceGroupService !== "undefined" && resource_group_service_1.ResourceGroupService) === "function" ? _a : Object])
], UserResourceGroupController);


/***/ }),

/***/ "./src/application/resource/core/controllers/resource.controller.ts":
/*!**************************************************************************!*\
  !*** ./src/application/resource/core/controllers/resource.controller.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserResourceController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const resource_response_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/resource-response.dto */ "./src/application/resource/core/dtos/resource-response.dto.ts");
const available_time_response_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/available-time-response.dto */ "./src/application/resource/core/dtos/available-time-response.dto.ts");
const resource_query_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/resource-query.dto */ "./src/application/resource/core/dtos/resource-query.dto.ts");
const check_availability_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/check-availability.dto */ "./src/application/resource/core/dtos/check-availability.dto.ts");
const resource_service_1 = __webpack_require__(/*! @src/application/resource/core/services/resource.service */ "./src/application/resource/core/services/resource.service.ts");
let UserResourceController = class UserResourceController {
    constructor(resourceService) {
        this.resourceService = resourceService;
    }
    async findResourcesByTypeAndDateWithReservations(user, type, startDate, endDate, isMine) {
        console.log('findResourcesByTypeAndDateWithReservations');
        return this.resourceService.findResourcesByTypeAndDateWithReservations(user, type, startDate, endDate, isMine);
    }
    async findAvailableTime(query) {
        return this.resourceService.findAvailableTime(query);
    }
    async checkAvailability(query) {
        const isAvailable = await this.resourceService.checkAvailability(query.resourceId, query.startDate, query.endDate, query.reservationId);
        return {
            isAvailable,
        };
    }
    async findOne(user, resourceId) {
        return this.resourceService.findResourceDetailForUser(user.employeeId, resourceId);
    }
};
exports.UserResourceController = UserResourceController;
__decorate([
    (0, common_1.Get)('reservations'),
    (0, swagger_1.ApiOperation)({ summary: '자원 별 예약 목록 조회 #사용자/자원예약/리스트 #사용자/세부예약내역' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 목록을 성공적으로 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupWithResourcesAndReservationsResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'type', enum: resource_type_enum_1.ResourceType }),
    (0, swagger_1.ApiQuery)({ name: 'startDate', example: '2025-01-01 or 2025-01-01 00:00:00' }),
    (0, swagger_1.ApiQuery)({ name: 'endDate', example: '2025-01-01 or 2025-01-01 00:00:00' }),
    (0, swagger_1.ApiQuery)({ name: 'isMine', type: Boolean, required: false, example: true }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('type')),
    __param(2, (0, common_1.Query)('startDate')),
    __param(3, (0, common_1.Query)('endDate')),
    __param(4, (0, common_1.Query)('isMine')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object, typeof (_c = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _c : Object, String, String, Boolean]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], UserResourceController.prototype, "findResourcesByTypeAndDateWithReservations", null);
__decorate([
    (0, common_1.Get)('availability'),
    (0, swagger_1.ApiOperation)({ summary: '예약 가능 시간 조회 #사용자/예약 생성 페이지' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 가능 시간 조회 성공',
        type: available_time_response_dto_1.ResourceAvailabilityDto,
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: true, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({
        name: 'resourceGroupId',
        type: String,
        required: true,
        example: '78117aaf-a203-43a3-bb38-51ec91ca935a',
    }),
    (0, swagger_1.ApiQuery)({ name: 'reservationId', type: String, required: false, example: '123e4567-e89b-12d3-a456-426614174000' }),
    (0, swagger_1.ApiQuery)({ name: 'startDate', type: String, required: false, example: '2025-01-01' }),
    (0, swagger_1.ApiQuery)({ name: 'endDate', type: String, required: false, example: '2025-01-01' }),
    (0, swagger_1.ApiQuery)({ name: 'startTime', type: String, required: false, example: '09:00:00' }),
    (0, swagger_1.ApiQuery)({ name: 'endTime', type: String, required: false, example: '18:00:00' }),
    (0, swagger_1.ApiQuery)({ name: 'am', type: Boolean, required: false, example: true }),
    (0, swagger_1.ApiQuery)({ name: 'pm', type: Boolean, required: false, example: true }),
    (0, swagger_1.ApiQuery)({ name: 'timeUnit', type: Number, required: false, example: 30 }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof resource_query_dto_1.ResourceQueryDto !== "undefined" && resource_query_dto_1.ResourceQueryDto) === "function" ? _e : Object]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], UserResourceController.prototype, "findAvailableTime", null);
__decorate([
    (0, common_1.Get)('check-availability'),
    (0, swagger_1.ApiOperation)({ summary: '예약 시간 가용성 확인' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 시간 가용성 확인 결과',
        type: check_availability_dto_1.CheckAvailabilityResponseDto,
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof check_availability_dto_1.CheckAvailabilityQueryDto !== "undefined" && check_availability_dto_1.CheckAvailabilityQueryDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], UserResourceController.prototype, "checkAvailability", null);
__decorate([
    (0, common_1.Get)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 상세 조회 ' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원을 성공적으로 조회했습니다.',
        type: resource_response_dto_1.ResourceResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('resourceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _j : Object, String]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], UserResourceController.prototype, "findOne", null);
exports.UserResourceController = UserResourceController = __decorate([
    (0, swagger_1.ApiTags)('3. 자원 '),
    (0, common_1.Controller)('v1/resources'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.ResourceService !== "undefined" && resource_service_1.ResourceService) === "function" ? _a : Object])
], UserResourceController);


/***/ }),

/***/ "./src/application/resource/core/core.module.ts":
/*!******************************************************!*\
  !*** ./src/application/resource/core/core.module.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceCoreModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const accommodation_info_module_1 = __webpack_require__(/*! @src/domain/accommodation-info/accommodation-info.module */ "./src/domain/accommodation-info/accommodation-info.module.ts");
const meeting_room_info_module_1 = __webpack_require__(/*! @src/domain/meeting-room-info/meeting-room-info.module */ "./src/domain/meeting-room-info/meeting-room-info.module.ts");
const resource_group_module_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.module */ "./src/domain/resource-group/resource-group.module.ts");
const resource_manager_module_1 = __webpack_require__(/*! @src/domain/resource-manager/resource-manager.module */ "./src/domain/resource-manager/resource-manager.module.ts");
const resource_module_1 = __webpack_require__(/*! @src/domain/resource/resource.module */ "./src/domain/resource/resource.module.ts");
const vehicle_info_module_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.module */ "./src/domain/vehicle-info/vehicle-info.module.ts");
const equipment_info_module_1 = __webpack_require__(/*! @src/domain/equipment-info/equipment-info.module */ "./src/domain/equipment-info/equipment-info.module.ts");
const file_module_1 = __webpack_require__(/*! @src/domain/file/file.module */ "./src/domain/file/file.module.ts");
const file_resource_module_1 = __webpack_require__(/*! @src/domain/file-resource/file-resource.module */ "./src/domain/file-resource/file-resource.module.ts");
const reservation_module_1 = __webpack_require__(/*! @src/domain/reservation/reservation.module */ "./src/domain/reservation/reservation.module.ts");
const consumable_module_1 = __webpack_require__(/*! @src/domain/consumable/consumable.module */ "./src/domain/consumable/consumable.module.ts");
const maintenance_module_1 = __webpack_require__(/*! @src/domain/maintenance/maintenance.module */ "./src/domain/maintenance/maintenance.module.ts");
const resource_group_controller_1 = __webpack_require__(/*! ./controllers/resource-group.controller */ "./src/application/resource/core/controllers/resource-group.controller.ts");
const resource_controller_1 = __webpack_require__(/*! ./controllers/resource.controller */ "./src/application/resource/core/controllers/resource.controller.ts");
const admin_resource_controller_1 = __webpack_require__(/*! ./controllers/admin.resource.controller */ "./src/application/resource/core/controllers/admin.resource.controller.ts");
const admin_resource_group_controller_1 = __webpack_require__(/*! ./controllers/admin.resource-group.controller */ "./src/application/resource/core/controllers/admin.resource-group.controller.ts");
const resource_service_1 = __webpack_require__(/*! ./services/resource.service */ "./src/application/resource/core/services/resource.service.ts");
const resource_group_service_1 = __webpack_require__(/*! ./services/resource-group.service */ "./src/application/resource/core/services/resource-group.service.ts");
const ResourceUsecase = __webpack_require__(/*! ./usecases/resource */ "./src/application/resource/core/usecases/resource/index.ts");
const ResourceGroupUsecase = __webpack_require__(/*! ./usecases/resource-group */ "./src/application/resource/core/usecases/resource-group/index.ts");
const file_vehicle_info_module_1 = __webpack_require__(/*! @src/domain/file-vehicle-info/file-vehicle-info.module */ "./src/domain/file-vehicle-info/file-vehicle-info.module.ts");
let ResourceCoreModule = class ResourceCoreModule {
};
exports.ResourceCoreModule = ResourceCoreModule;
exports.ResourceCoreModule = ResourceCoreModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([
                entities_1.Resource,
                entities_1.ResourceGroup,
                entities_1.ResourceManager,
                entities_1.VehicleInfo,
                entities_1.Consumable,
                entities_1.Maintenance,
                entities_1.MeetingRoomInfo,
                entities_1.AccommodationInfo,
                entities_1.EquipmentInfo,
                entities_1.File,
                entities_1.Reservation,
            ]),
            resource_module_1.DomainResourceModule,
            resource_group_module_1.DomainResourceGroupModule,
            resource_manager_module_1.DomainResourceManagerModule,
            vehicle_info_module_1.DomainVehicleInfoModule,
            consumable_module_1.DomainConsumableModule,
            maintenance_module_1.DomainMaintenanceModule,
            meeting_room_info_module_1.DomainMeetingRoomInfoModule,
            accommodation_info_module_1.DomainAccommodationInfoModule,
            equipment_info_module_1.DomainEquipmentInfoModule,
            file_module_1.DomainFileModule,
            file_resource_module_1.DomainFileResourceModule,
            file_vehicle_info_module_1.DomainFileVehicleInfoModule,
            reservation_module_1.DomainReservationModule,
        ],
        controllers: [
            admin_resource_controller_1.AdminResourceController,
            admin_resource_group_controller_1.AdminResourceGroupController,
            resource_group_controller_1.UserResourceGroupController,
            resource_controller_1.UserResourceController,
        ],
        providers: [
            resource_service_1.ResourceService,
            resource_group_service_1.ResourceGroupService,
            ...Object.values(ResourceUsecase),
            ...Object.values(ResourceGroupUsecase),
        ],
    })
], ResourceCoreModule);


/***/ }),

/***/ "./src/application/resource/core/dtos/available-time-response.dto.ts":
/*!***************************************************************************!*\
  !*** ./src/application/resource/core/dtos/available-time-response.dto.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceAvailabilityDto = exports.TimeSlotDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class TimeSlotDto {
}
exports.TimeSlotDto = TimeSlotDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 시간 (ISO 문자열)',
        example: '2025-01-01T09:00:00',
    }),
    __metadata("design:type", String)
], TimeSlotDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 시간 (ISO 문자열)',
        example: '2025-01-01T10:00:00',
    }),
    __metadata("design:type", String)
], TimeSlotDto.prototype, "endTime", void 0);
class ResourceAvailabilityDto {
}
exports.ResourceAvailabilityDto = ResourceAvailabilityDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 ID',
        example: '78117aaf-a203-43a3-bb38-51ec91ca935a',
    }),
    __metadata("design:type", String)
], ResourceAvailabilityDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 이름',
        example: '회의실 A',
    }),
    __metadata("design:type", String)
], ResourceAvailabilityDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        required: false,
        description: '자원 위치',
        example: '서울특별시 강남구 테헤란로 14길 6 남도빌딩 3층',
    }),
    __metadata("design:type", String)
], ResourceAvailabilityDto.prototype, "resourceLocation", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        required: false,
        description: '가용 시간 슬롯 목록',
        type: [TimeSlotDto],
    }),
    __metadata("design:type", Array)
], ResourceAvailabilityDto.prototype, "availableTimeSlots", void 0);


/***/ }),

/***/ "./src/application/resource/core/dtos/check-availability.dto.ts":
/*!**********************************************************************!*\
  !*** ./src/application/resource/core/dtos/check-availability.dto.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckAvailabilityResponseDto = exports.CheckAvailabilityQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CheckAvailabilityQueryDto {
}
exports.CheckAvailabilityQueryDto = CheckAvailabilityQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 시작 시간' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 종료 시간' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 ID', required: false }),
    (0, class_validator_1.IsUUID)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "reservationId", void 0);
class CheckAvailabilityResponseDto {
}
exports.CheckAvailabilityResponseDto = CheckAvailabilityResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 가능 여부' }),
    __metadata("design:type", Boolean)
], CheckAvailabilityResponseDto.prototype, "isAvailable", void 0);


/***/ }),

/***/ "./src/application/resource/core/dtos/create-resource.dto.ts":
/*!*******************************************************************!*\
  !*** ./src/application/resource/core/dtos/create-resource.dto.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateResourceInfoDto = exports.CreateResourceDto = exports.ResourceLocationURL = exports.ResourceLocation = exports.CreateResourceManagerDto = exports.CreateResourceGroupDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const create_vehicle_info_dto_1 = __webpack_require__(/*! @src/application/resource/vehicle/dtos/create-vehicle-info.dto */ "./src/application/resource/vehicle/dtos/create-vehicle-info.dto.ts");
const create_meeting_room_info_dto_1 = __webpack_require__(/*! @src/application/resource/meeting-room/dtos/create-meeting-room-info.dto */ "./src/application/resource/meeting-room/dtos/create-meeting-room-info.dto.ts");
const create_accommodation_info_dto_1 = __webpack_require__(/*! @src/application/resource/accommodation/dtos/create-accommodation-info.dto */ "./src/application/resource/accommodation/dtos/create-accommodation-info.dto.ts");
const create_equipment_info_dto_1 = __webpack_require__(/*! @src/application/resource/equipment/dtos/create-equipment-info.dto */ "./src/application/resource/equipment/dtos/create-equipment-info.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class CreateResourceGroupDto {
}
exports.CreateResourceGroupDto = CreateResourceGroupDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('상위 자원 그룹 ID') }),
    __metadata("design:type", String)
], CreateResourceGroupDto.prototype, "parentResourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('자원 타입', Object.values(resource_type_enum_1.ResourceType)) }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], CreateResourceGroupDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceGroupDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceGroupDto.prototype, "description", void 0);
class CreateResourceManagerDto {
}
exports.CreateResourceManagerDto = CreateResourceManagerDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID' }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('직원 ID') }),
    __metadata("design:type", String)
], CreateResourceManagerDto.prototype, "employeeId", void 0);
class ResourceLocation {
}
exports.ResourceLocation = ResourceLocation;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('주소') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('주소', 0, 100) }),
    __metadata("design:type", String)
], ResourceLocation.prototype, "address", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('상세 주소') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('상세 주소', 0, 100) }),
    __metadata("design:type", String)
], ResourceLocation.prototype, "detailAddress", void 0);
class ResourceLocationURL {
}
exports.ResourceLocationURL = ResourceLocationURL;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('Tmap URL') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], ResourceLocationURL.prototype, "tmap", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('Navermap URL') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], ResourceLocationURL.prototype, "navermap", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('Kakaomap URL') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], ResourceLocationURL.prototype, "kakaomap", void 0);
class CreateResourceDto {
}
exports.CreateResourceDto = CreateResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 그룹 ID') }),
    __metadata("design:type", String)
], CreateResourceDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('이름', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: ResourceLocation }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", ResourceLocation)
], CreateResourceDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: ResourceLocationURL }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", ResourceLocationURL)
], CreateResourceDto.prototype, "locationURLs", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], CreateResourceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('참가자 변경 알림 여부') }),
    __metadata("design:type", Boolean)
], CreateResourceDto.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('예약 변경 알림 여부') }),
    __metadata("design:type", Boolean)
], CreateResourceDto.prototype, "notifyReservationChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('자원 타입', Object.values(resource_type_enum_1.ResourceType)) }),
    __metadata("design:type", typeof (_b = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _b : Object)
], CreateResourceDto.prototype, "type", void 0);
class CreateResourceInfoDto {
}
exports.CreateResourceInfoDto = CreateResourceInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: CreateResourceDto }),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => CreateResourceDto),
    __metadata("design:type", CreateResourceDto)
], CreateResourceInfoDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        oneOf: [
            { $ref: (0, swagger_1.getSchemaPath)(create_vehicle_info_dto_1.CreateVehicleInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(create_meeting_room_info_dto_1.CreateMeetingRoomInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(create_accommodation_info_dto_1.CreateAccommodationInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(create_equipment_info_dto_1.CreateEquipmentInfoDto) },
        ],
    }),
    __metadata("design:type", Object)
], CreateResourceInfoDto.prototype, "typeInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [CreateResourceManagerDto] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('관리자') }),
    (0, class_validator_1.ValidateNested)({ each: true }),
    (0, class_transformer_1.Type)(() => CreateResourceManagerDto),
    __metadata("design:type", Array)
], CreateResourceInfoDto.prototype, "managers", void 0);


/***/ }),

/***/ "./src/application/resource/core/dtos/resource-query.dto.ts":
/*!******************************************************************!*\
  !*** ./src/application/resource/core/dtos/resource-query.dto.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const pagination_query_dto_1 = __webpack_require__(/*! @libs/dtos/pagination-query.dto */ "./libs/dtos/pagination-query.dto.ts");
class ResourceQueryDto extends pagination_query_dto_1.PaginationQueryDto {
}
exports.ResourceQueryDto = ResourceQueryDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '리소스 타입',
        enum: resource_type_enum_1.ResourceType,
        example: resource_type_enum_1.ResourceType.MEETING_ROOM,
    }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], ResourceQueryDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '리소스 그룹 ID',
        example: 'ca33f67a-a9c2-4a29-b266-3d82f9aa7fe4',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '예약 ID',
        example: '123e4567-e89b-12d3-a456-426614174000',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '시작 날짜',
        example: '2024-01-01',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '종료 날짜',
        example: '2024-01-31',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '시작 시간',
        example: '09:00:00',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '종료 시간',
        example: '18:00:00',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "endTime", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '오전 시간대 필터',
        example: true,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    __metadata("design:type", Boolean)
], ResourceQueryDto.prototype, "am", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '오후 시간대 필터',
        example: true,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    __metadata("design:type", Boolean)
], ResourceQueryDto.prototype, "pm", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '이용 시간 단위(분)',
        example: 30,
        minimum: 1,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.Min)(1),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], ResourceQueryDto.prototype, "timeUnit", void 0);


/***/ }),

/***/ "./src/application/resource/core/dtos/resource-response.dto.ts":
/*!*********************************************************************!*\
  !*** ./src/application/resource/core/dtos/resource-response.dto.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroupWithResourcesAndReservationsResponseDto = exports.ResourceGroupWithResourcesResponseDto = exports.ChildResourceGroupResponseDto = exports.ResourceWithReservationsResponseDto = exports.ResourceSelectResponseDto = exports.ResourceResponseDto = exports.ResourceGroupResponseDto = exports.ResourceManagerResponseDto = exports.CreateResourceResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const vehicle_response_dto_1 = __webpack_require__(/*! @src/application/resource/vehicle/dtos/vehicle-response.dto */ "./src/application/resource/vehicle/dtos/vehicle-response.dto.ts");
const meeting_room_info_response_dto_1 = __webpack_require__(/*! @src/application/resource/meeting-room/dtos/meeting-room-info-response.dto */ "./src/application/resource/meeting-room/dtos/meeting-room-info-response.dto.ts");
const accommodation_info_response_dto_1 = __webpack_require__(/*! @src/application/resource/accommodation/dtos/accommodation-info-response.dto */ "./src/application/resource/accommodation/dtos/accommodation-info-response.dto.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const create_resource_dto_1 = __webpack_require__(/*! ./create-resource.dto */ "./src/application/resource/core/dtos/create-resource.dto.ts");
const reservation_response_dto_1 = __webpack_require__(/*! @src/application/reservation/core/dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
const employee_response_dto_1 = __webpack_require__(/*! @src/business/employee-management/dtos/employee-response.dto */ "./src/business/employee-management/dtos/employee-response.dto.ts");
const file_response_dto_1 = __webpack_require__(/*! @src/application/file/dtos/file-response.dto */ "./src/application/file/dtos/file-response.dto.ts");
const equipment_info_response_dto_1 = __webpack_require__(/*! @src/application/resource/equipment/dtos/equipment-info-response.dto */ "./src/application/resource/equipment/dtos/equipment-info-response.dto.ts");
class CreateResourceResponseDto {
}
exports.CreateResourceResponseDto = CreateResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateResourceResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], CreateResourceResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateResourceResponseDto.prototype, "typeInfoId", void 0);
class ResourceManagerResponseDto {
}
exports.ResourceManagerResponseDto = ResourceManagerResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceManagerResponseDto.prototype, "resourceManagerId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceManagerResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceManagerResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_b = typeof employee_response_dto_1.EmployeeResponseDto !== "undefined" && employee_response_dto_1.EmployeeResponseDto) === "function" ? _b : Object)
], ResourceManagerResponseDto.prototype, "employee", void 0);
class ResourceGroupResponseDto {
}
exports.ResourceGroupResponseDto = ResourceGroupResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    __metadata("design:type", typeof (_c = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _c : Object)
], ResourceGroupResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ResourceGroupResponseDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "parentResourceGroupId", void 0);
class ResourceResponseDto {
    constructor(resource) {
        this.resourceId = resource?.resourceId;
        this.resourceGroupId = resource?.resourceGroupId;
        this.name = resource?.name;
        this.description = resource?.description;
        this.location = resource?.location;
        this.locationURLs = resource?.locationURLs;
        this.images = resource?.images;
        this.type = resource?.type;
        this.isAvailable = resource?.isAvailable;
        this.unavailableReason = resource?.unavailableReason;
        this.notifyParticipantChange = resource?.notifyParticipantChange;
        this.notifyReservationChange = resource?.notifyReservationChange;
        this.order = resource?.order;
        this.managers = resource?.resourceManagers;
        this.resourceGroup = resource?.resourceGroup;
        this.imageFiles = resource?.images ? resource['imageFiles'] : [];
        if (resource?.vehicleInfo) {
            this.typeInfo = resource.vehicleInfo;
        }
        else if (resource?.meetingRoomInfo) {
            this.typeInfo = resource.meetingRoomInfo;
        }
        else if (resource?.accommodationInfo) {
            this.typeInfo = resource.accommodationInfo;
        }
        else if (resource?.equipmentInfo) {
            this.typeInfo = resource.equipmentInfo;
        }
    }
}
exports.ResourceResponseDto = ResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: create_resource_dto_1.ResourceLocation }),
    __metadata("design:type", typeof (_d = typeof create_resource_dto_1.ResourceLocation !== "undefined" && create_resource_dto_1.ResourceLocation) === "function" ? _d : Object)
], ResourceResponseDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: create_resource_dto_1.ResourceLocationURL }),
    __metadata("design:type", typeof (_e = typeof create_resource_dto_1.ResourceLocationURL !== "undefined" && create_resource_dto_1.ResourceLocationURL) === "function" ? _e : Object)
], ResourceResponseDto.prototype, "locationURLs", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    __metadata("design:type", Array)
], ResourceResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [file_response_dto_1.FileResponseDto] }),
    __metadata("design:type", Array)
], ResourceResponseDto.prototype, "imageFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    __metadata("design:type", typeof (_f = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _f : Object)
], ResourceResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceResponseDto.prototype, "isAvailable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "unavailableReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceResponseDto.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceResponseDto.prototype, "notifyReservationChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ResourceResponseDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        required: false,
        oneOf: [
            { $ref: (0, swagger_1.getSchemaPath)(vehicle_response_dto_1.VehicleInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(meeting_room_info_response_dto_1.MeetingRoomInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(accommodation_info_response_dto_1.AccommodationInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(equipment_info_response_dto_1.EquipmentInfoResponseDto) },
        ],
    }),
    __metadata("design:type", Object)
], ResourceResponseDto.prototype, "typeInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [ResourceManagerResponseDto] }),
    __metadata("design:type", Array)
], ResourceResponseDto.prototype, "managers", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", ResourceGroupResponseDto)
], ResourceResponseDto.prototype, "resourceGroup", void 0);
class ResourceSelectResponseDto {
}
exports.ResourceSelectResponseDto = ResourceSelectResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    __metadata("design:type", Array)
], ResourceSelectResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceSelectResponseDto.prototype, "isAvailable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "unavailableReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ResourceSelectResponseDto.prototype, "order", void 0);
class ResourceWithReservationsResponseDto extends ResourceResponseDto {
    constructor(resource) {
        super(resource);
        this.reservations = resource?.reservations.map((reservation) => new reservation_response_dto_1.ReservationResponseDto(reservation));
    }
}
exports.ResourceWithReservationsResponseDto = ResourceWithReservationsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [reservation_response_dto_1.ReservationResponseDto] }),
    __metadata("design:type", Array)
], ResourceWithReservationsResponseDto.prototype, "reservations", void 0);
class ChildResourceGroupResponseDto extends ResourceGroupResponseDto {
}
exports.ChildResourceGroupResponseDto = ChildResourceGroupResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => ResourceSelectResponseDto, required: false }),
    __metadata("design:type", Array)
], ChildResourceGroupResponseDto.prototype, "resources", void 0);
class ResourceGroupWithResourcesResponseDto extends ResourceGroupResponseDto {
}
exports.ResourceGroupWithResourcesResponseDto = ResourceGroupWithResourcesResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [ChildResourceGroupResponseDto],
        required: false,
    }),
    __metadata("design:type", Array)
], ResourceGroupWithResourcesResponseDto.prototype, "children", void 0);
class ResourceGroupWithResourcesAndReservationsResponseDto extends ResourceGroupResponseDto {
}
exports.ResourceGroupWithResourcesAndReservationsResponseDto = ResourceGroupWithResourcesAndReservationsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [ResourceWithReservationsResponseDto],
        required: false,
    }),
    __metadata("design:type", Array)
], ResourceGroupWithResourcesAndReservationsResponseDto.prototype, "resources", void 0);


/***/ }),

/***/ "./src/application/resource/core/dtos/update-resource.dto.ts":
/*!*******************************************************************!*\
  !*** ./src/application/resource/core/dtos/update-resource.dto.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateResourceGroupOrdersDto = exports.NewOrderResourceGroupDto = exports.UpdateResourceOrdersDto = exports.NewOrderResourceDto = exports.UpdateResourceInfoDto = exports.UpdateResourceDto = exports.UpdateResourceGroupDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const create_resource_dto_1 = __webpack_require__(/*! ./create-resource.dto */ "./src/application/resource/core/dtos/create-resource.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class UpdateResourceGroupDto {
}
exports.UpdateResourceGroupDto = UpdateResourceGroupDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceGroupDto.prototype, "title", void 0);
class UpdateResourceDto {
}
exports.UpdateResourceDto = UpdateResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 그룹 ID') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('이름') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('이름', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: 'object' }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof create_resource_dto_1.ResourceLocation !== "undefined" && create_resource_dto_1.ResourceLocation) === "function" ? _a : Object)
], UpdateResourceDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: 'object' }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_b = typeof create_resource_dto_1.ResourceLocationURL !== "undefined" && create_resource_dto_1.ResourceLocationURL) === "function" ? _b : Object)
], UpdateResourceDto.prototype, "locationURLs", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateResourceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('사용 가능 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateResourceDto.prototype, "isAvailable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('사용 불가 사유') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('사용 불가 사유', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "unavailableReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('참가자 변경 알림 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateResourceDto.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('예약 변경 알림 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateResourceDto.prototype, "notifyReservationChange", void 0);
class UpdateResourceInfoDto {
}
exports.UpdateResourceInfoDto = UpdateResourceInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: UpdateResourceDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => UpdateResourceDto),
    __metadata("design:type", UpdateResourceDto)
], UpdateResourceInfoDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [create_resource_dto_1.CreateResourceManagerDto] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('관리자') }),
    (0, class_validator_1.ValidateNested)({ each: true }),
    (0, class_transformer_1.Type)(() => create_resource_dto_1.CreateResourceManagerDto),
    __metadata("design:type", Array)
], UpdateResourceInfoDto.prototype, "managers", void 0);
class NewOrderResourceDto {
}
exports.NewOrderResourceDto = NewOrderResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 ID') }),
    __metadata("design:type", String)
], NewOrderResourceDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsNumber)({}, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_NUMBER('순서') }),
    __metadata("design:type", Number)
], NewOrderResourceDto.prototype, "newOrder", void 0);
class UpdateResourceOrdersDto {
}
exports.UpdateResourceOrdersDto = UpdateResourceOrdersDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [NewOrderResourceDto] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('순서 목록') }),
    __metadata("design:type", Array)
], UpdateResourceOrdersDto.prototype, "orders", void 0);
class NewOrderResourceGroupDto {
}
exports.NewOrderResourceGroupDto = NewOrderResourceGroupDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 그룹 ID') }),
    __metadata("design:type", String)
], NewOrderResourceGroupDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsNumber)({}, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_NUMBER('순서') }),
    __metadata("design:type", Number)
], NewOrderResourceGroupDto.prototype, "newOrder", void 0);
class UpdateResourceGroupOrdersDto {
}
exports.UpdateResourceGroupOrdersDto = UpdateResourceGroupOrdersDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [NewOrderResourceGroupDto] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('순서 목록') }),
    __metadata("design:type", Array)
], UpdateResourceGroupOrdersDto.prototype, "orders", void 0);


/***/ }),

/***/ "./src/application/resource/core/services/resource-group.service.ts":
/*!**************************************************************************!*\
  !*** ./src/application/resource/core/services/resource-group.service.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroupService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_group_1 = __webpack_require__(/*! ../usecases/resource-group */ "./src/application/resource/core/usecases/resource-group/index.ts");
let ResourceGroupService = class ResourceGroupService {
    constructor(findParentResourceGroupsUsecase, findResourceGroupsWithResourceDataUsecase, createResourceGroupUsecase, updateResourceGroupUsecase, reorderResourceGroupsUsecase, deleteResourceGroupUsecase) {
        this.findParentResourceGroupsUsecase = findParentResourceGroupsUsecase;
        this.findResourceGroupsWithResourceDataUsecase = findResourceGroupsWithResourceDataUsecase;
        this.createResourceGroupUsecase = createResourceGroupUsecase;
        this.updateResourceGroupUsecase = updateResourceGroupUsecase;
        this.reorderResourceGroupsUsecase = reorderResourceGroupsUsecase;
        this.deleteResourceGroupUsecase = deleteResourceGroupUsecase;
    }
    async findParentResourceGroups() {
        return this.findParentResourceGroupsUsecase.execute();
    }
    async findResourceGroupsWithResourceData(type) {
        return this.findResourceGroupsWithResourceDataUsecase.execute(type);
    }
    async createResourceGroup(createResourceGroupDto) {
        return this.createResourceGroupUsecase.execute(createResourceGroupDto);
    }
    async reorderResourceGroups(updateResourceGroupOrdersDto) {
        return this.reorderResourceGroupsUsecase.execute(updateResourceGroupOrdersDto);
    }
    async updateResourceGroup(resourceGroupId, updateResourceGroupDto) {
        return this.updateResourceGroupUsecase.execute(resourceGroupId, updateResourceGroupDto);
    }
    async deleteResourceGroup(resourceGroupId) {
        return this.deleteResourceGroupUsecase.execute(resourceGroupId);
    }
    async findParentResourceGroupsForUser() {
        return this.findParentResourceGroupsUsecase.execute();
    }
    async findResourceGroupsWithResourceDataForUser(type) {
        return this.findResourceGroupsWithResourceDataUsecase.execute(type);
    }
};
exports.ResourceGroupService = ResourceGroupService;
exports.ResourceGroupService = ResourceGroupService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_1.FindParentResourceGroupsUsecase !== "undefined" && resource_group_1.FindParentResourceGroupsUsecase) === "function" ? _a : Object, typeof (_b = typeof resource_group_1.FindResourceGroupsWithResourceDataUsecase !== "undefined" && resource_group_1.FindResourceGroupsWithResourceDataUsecase) === "function" ? _b : Object, typeof (_c = typeof resource_group_1.CreateResourceGroupUsecase !== "undefined" && resource_group_1.CreateResourceGroupUsecase) === "function" ? _c : Object, typeof (_d = typeof resource_group_1.UpdateResourceGroupUsecase !== "undefined" && resource_group_1.UpdateResourceGroupUsecase) === "function" ? _d : Object, typeof (_e = typeof resource_group_1.ReorderResourceGroupsUsecase !== "undefined" && resource_group_1.ReorderResourceGroupsUsecase) === "function" ? _e : Object, typeof (_f = typeof resource_group_1.DeleteResourceGroupUsecase !== "undefined" && resource_group_1.DeleteResourceGroupUsecase) === "function" ? _f : Object])
], ResourceGroupService);


/***/ }),

/***/ "./src/application/resource/core/services/resource.service.ts":
/*!********************************************************************!*\
  !*** ./src/application/resource/core/services/resource.service.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_1 = __webpack_require__(/*! @src/application/resource/core/usecases/resource */ "./src/application/resource/core/usecases/resource/index.ts");
let ResourceService = class ResourceService {
    constructor(findResourcesUsecase, findResourcesByGroupUsecase, findResourceDetailUsecase, reorderResourcesUsecase, updateResourceUsecase, deleteResourceUsecase, findAvailableTimeUsecase, findResourcesByTypeAndDateWithReservationsUsecase, checkAvailabilityUsecase, createResourceWithInfosUsecase) {
        this.findResourcesUsecase = findResourcesUsecase;
        this.findResourcesByGroupUsecase = findResourcesByGroupUsecase;
        this.findResourceDetailUsecase = findResourceDetailUsecase;
        this.reorderResourcesUsecase = reorderResourcesUsecase;
        this.updateResourceUsecase = updateResourceUsecase;
        this.deleteResourceUsecase = deleteResourceUsecase;
        this.findAvailableTimeUsecase = findAvailableTimeUsecase;
        this.findResourcesByTypeAndDateWithReservationsUsecase = findResourcesByTypeAndDateWithReservationsUsecase;
        this.checkAvailabilityUsecase = checkAvailabilityUsecase;
        this.createResourceWithInfosUsecase = createResourceWithInfosUsecase;
    }
    async createResourceWithInfos(createResourceInfo) {
        return this.createResourceWithInfosUsecase.execute(createResourceInfo);
    }
    async findResources(type) {
        return this.findResourcesUsecase.execute(type);
    }
    async findResourcesByResourceGroupId(resourceGroupId) {
        return this.findResourcesByGroupUsecase.execute(resourceGroupId);
    }
    async findResourceDetailForAdmin(resourceId) {
        return this.findResourceDetailUsecase.executeForAdmin(resourceId);
    }
    async reorderResources(updateResourceOrdersDto) {
        return this.reorderResourcesUsecase.execute(updateResourceOrdersDto);
    }
    async updateResource(resourceId, updateResourceInfoDto) {
        return this.updateResourceUsecase.execute(resourceId, updateResourceInfoDto);
    }
    async deleteResource(resourceId) {
        return this.deleteResourceUsecase.execute(resourceId);
    }
    async findResourcesByTypeAndDateWithReservations(user, type, startDate, endDate, isMine) {
        return this.findResourcesByTypeAndDateWithReservationsUsecase.execute(user, type, startDate, endDate, isMine);
    }
    async findAvailableTime(query) {
        return this.findAvailableTimeUsecase.execute(query);
    }
    async checkAvailability(resourceId, startDate, endDate, reservationId) {
        return this.checkAvailabilityUsecase.execute(resourceId, startDate, endDate, reservationId);
    }
    async findResourceDetailForUser(employeeId, resourceId) {
        return this.findResourceDetailUsecase.executeForUser(employeeId, resourceId);
    }
};
exports.ResourceService = ResourceService;
exports.ResourceService = ResourceService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_1.FindResourcesUsecase !== "undefined" && resource_1.FindResourcesUsecase) === "function" ? _a : Object, typeof (_b = typeof resource_1.FindResourcesByGroupUsecase !== "undefined" && resource_1.FindResourcesByGroupUsecase) === "function" ? _b : Object, typeof (_c = typeof resource_1.FindResourceDetailUsecase !== "undefined" && resource_1.FindResourceDetailUsecase) === "function" ? _c : Object, typeof (_d = typeof resource_1.ReorderResourcesUsecase !== "undefined" && resource_1.ReorderResourcesUsecase) === "function" ? _d : Object, typeof (_e = typeof resource_1.UpdateResourceUsecase !== "undefined" && resource_1.UpdateResourceUsecase) === "function" ? _e : Object, typeof (_f = typeof resource_1.DeleteResourceUsecase !== "undefined" && resource_1.DeleteResourceUsecase) === "function" ? _f : Object, typeof (_g = typeof resource_1.FindAvailableTimeUsecase !== "undefined" && resource_1.FindAvailableTimeUsecase) === "function" ? _g : Object, typeof (_h = typeof resource_1.FindResourcesByTypeAndDateWithReservationsUsecase !== "undefined" && resource_1.FindResourcesByTypeAndDateWithReservationsUsecase) === "function" ? _h : Object, typeof (_j = typeof resource_1.CheckAvailabilityUsecase !== "undefined" && resource_1.CheckAvailabilityUsecase) === "function" ? _j : Object, typeof (_k = typeof resource_1.CreateResourceWithInfosUsecase !== "undefined" && resource_1.CreateResourceWithInfosUsecase) === "function" ? _k : Object])
], ResourceService);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource-group/createResourceGroup.usecase.ts":
/*!**********************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource-group/createResourceGroup.usecase.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateResourceGroupUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
let CreateResourceGroupUsecase = class CreateResourceGroupUsecase {
    constructor(resourceGroupService) {
        this.resourceGroupService = resourceGroupService;
    }
    async execute(createResourceGroupDto) {
        const resourceGroups = await this.resourceGroupService.findAll({
            where: {
                parentResourceGroupId: createResourceGroupDto.parentResourceGroupId,
            },
        });
        const resourceGroupOrder = resourceGroups.length;
        const resourceGroup = await this.resourceGroupService.save({
            ...createResourceGroupDto,
            order: resourceGroupOrder,
        });
        return resourceGroup;
    }
};
exports.CreateResourceGroupUsecase = CreateResourceGroupUsecase;
exports.CreateResourceGroupUsecase = CreateResourceGroupUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _a : Object])
], CreateResourceGroupUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource-group/deleteResourceGroup.usecase.ts":
/*!**********************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource-group/deleteResourceGroup.usecase.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DeleteResourceGroupUsecase = void 0;
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DeleteResourceGroupUsecase = class DeleteResourceGroupUsecase {
    constructor(resourceGroupService, resourceService, dataSource) {
        this.resourceGroupService = resourceGroupService;
        this.resourceService = resourceService;
        this.dataSource = dataSource;
    }
    async execute(resourceGroupId) {
        const resourceGroup = await this.resourceGroupService.findOne({
            where: {
                resourceGroupId: resourceGroupId,
            },
            relations: ['resources'],
        });
        if (!resourceGroup) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE_GROUP.NOT_FOUND);
        }
        if (resourceGroup.resources.length > 0) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.HAS_RESOURCES);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await this.resourceGroupService.delete(resourceGroupId, { queryRunner });
            const siblings = await this.resourceGroupService.findAll({
                where: {
                    resourceGroupId: (0, typeorm_1.Not)(resourceGroupId),
                    parentResourceGroupId: resourceGroup.parentResourceGroupId,
                },
                order: {
                    order: 'ASC',
                },
            });
            for (let i = 0; i < siblings.length; i++) {
                await this.resourceGroupService.update(siblings[i].resourceGroupId, { order: i }, { queryRunner });
            }
            await queryRunner.commitTransaction();
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE_GROUP.FAILED_REORDER);
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.DeleteResourceGroupUsecase = DeleteResourceGroupUsecase;
exports.DeleteResourceGroupUsecase = DeleteResourceGroupUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _a : Object, typeof (_b = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _b : Object, typeof (_c = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _c : Object])
], DeleteResourceGroupUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource-group/findParentResourceGroups.usecase.ts":
/*!***************************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource-group/findParentResourceGroups.usecase.ts ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindParentResourceGroupsUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let FindParentResourceGroupsUsecase = class FindParentResourceGroupsUsecase {
    constructor(resourceGroupService) {
        this.resourceGroupService = resourceGroupService;
    }
    async execute() {
        const resourceGroups = await this.resourceGroupService.findAll({
            where: {
                parentResourceGroupId: (0, typeorm_1.IsNull)(),
            },
            order: {
                order: 'ASC',
            },
        });
        return resourceGroups;
    }
};
exports.FindParentResourceGroupsUsecase = FindParentResourceGroupsUsecase;
exports.FindParentResourceGroupsUsecase = FindParentResourceGroupsUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _a : Object])
], FindParentResourceGroupsUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource-group/findResourceGroupsWithResourceData.usecase.ts":
/*!*************************************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource-group/findResourceGroupsWithResourceData.usecase.ts ***!
  \*************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindResourceGroupsWithResourceDataUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let FindResourceGroupsWithResourceDataUsecase = class FindResourceGroupsWithResourceDataUsecase {
    constructor(resourceService, resourceGroupService) {
        this.resourceService = resourceService;
        this.resourceGroupService = resourceGroupService;
    }
    async execute(type) {
        const resourceGroups = await this.resourceGroupService.findAll({
            where: {
                parentResourceGroupId: (0, typeorm_1.IsNull)(),
                ...(type && { type }),
            },
            relations: ['children'],
            order: {
                order: 'ASC',
            },
        });
        const resourceGroupsResponse = await Promise.all(resourceGroups.map(async (resourceGroup) => ({
            resourceGroupId: resourceGroup.resourceGroupId,
            ...resourceGroup,
            children: await Promise.all(resourceGroup.children.map(async (child) => ({
                resourceGroupId: child.resourceGroupId,
                ...child,
                resources: (await this.resourceService.findAll({
                    where: {
                        resourceGroupId: child.resourceGroupId,
                    },
                    order: {
                        order: 'ASC',
                    },
                })).map((resource) => ({
                    resourceId: resource.resourceId,
                    name: resource.name,
                    images: resource.images,
                    isAvailable: resource.isAvailable,
                    unavailableReason: resource.unavailableReason,
                    resourceGroupId: child.resourceGroupId,
                    order: resource.order,
                })),
            }))),
        })));
        return resourceGroupsResponse;
    }
};
exports.FindResourceGroupsWithResourceDataUsecase = FindResourceGroupsWithResourceDataUsecase;
exports.FindResourceGroupsWithResourceDataUsecase = FindResourceGroupsWithResourceDataUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _b : Object])
], FindResourceGroupsWithResourceDataUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource-group/index.ts":
/*!************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource-group/index.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./createResourceGroup.usecase */ "./src/application/resource/core/usecases/resource-group/createResourceGroup.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./deleteResourceGroup.usecase */ "./src/application/resource/core/usecases/resource-group/deleteResourceGroup.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./updateResourceGroup.usecase */ "./src/application/resource/core/usecases/resource-group/updateResourceGroup.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./reorderResourceGroups.usecase */ "./src/application/resource/core/usecases/resource-group/reorderResourceGroups.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findParentResourceGroups.usecase */ "./src/application/resource/core/usecases/resource-group/findParentResourceGroups.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findResourceGroupsWithResourceData.usecase */ "./src/application/resource/core/usecases/resource-group/findResourceGroupsWithResourceData.usecase.ts"), exports);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource-group/reorderResourceGroups.usecase.ts":
/*!************************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource-group/reorderResourceGroups.usecase.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReorderResourceGroupsUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let ReorderResourceGroupsUsecase = class ReorderResourceGroupsUsecase {
    constructor(resourceGroupService, dataSource) {
        this.resourceGroupService = resourceGroupService;
        this.dataSource = dataSource;
    }
    async execute(updateResourceGroupOrdersDto) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await Promise.all(updateResourceGroupOrdersDto.orders.map(async (order) => {
                await this.resourceGroupService.update(order.resourceGroupId, { order: order.newOrder }, { queryRunner });
            }));
            await queryRunner.commitTransaction();
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw err;
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.ReorderResourceGroupsUsecase = ReorderResourceGroupsUsecase;
exports.ReorderResourceGroupsUsecase = ReorderResourceGroupsUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _a : Object, typeof (_b = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _b : Object])
], ReorderResourceGroupsUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource-group/updateResourceGroup.usecase.ts":
/*!**********************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource-group/updateResourceGroup.usecase.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateResourceGroupUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
let UpdateResourceGroupUsecase = class UpdateResourceGroupUsecase {
    constructor(resourceGroupService) {
        this.resourceGroupService = resourceGroupService;
    }
    async execute(resourceGroupId, updateResourceGroupDto) {
        const resourceGroup = await this.resourceGroupService.update(resourceGroupId, updateResourceGroupDto);
        return resourceGroup;
    }
};
exports.UpdateResourceGroupUsecase = UpdateResourceGroupUsecase;
exports.UpdateResourceGroupUsecase = UpdateResourceGroupUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _a : Object])
], UpdateResourceGroupUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/checkAvailability.usecase.ts":
/*!**************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/checkAvailability.usecase.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckAvailabilityUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let CheckAvailabilityUsecase = class CheckAvailabilityUsecase {
    constructor(resourceService) {
        this.resourceService = resourceService;
    }
    async execute(resourceId, startDate, endDate, reservationId) {
        const startDateObj = date_util_1.DateUtil.date(startDate).toDate();
        const endDateObj = date_util_1.DateUtil.date(endDate).toDate();
        const resource = await this.resourceService.findOne({
            where: {
                resourceId: resourceId,
                reservations: {
                    reservationId: reservationId ? (0, typeorm_1.Not)(reservationId) : undefined,
                    status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                    startDate: (0, typeorm_1.LessThan)(endDateObj),
                    endDate: (0, typeorm_1.MoreThan)(startDateObj),
                },
            },
            relations: ['reservations'],
        });
        console.log(resource);
        return !resource;
    }
};
exports.CheckAvailabilityUsecase = CheckAvailabilityUsecase;
exports.CheckAvailabilityUsecase = CheckAvailabilityUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object])
], CheckAvailabilityUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/createResourceWithInfos.usecase.ts":
/*!********************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/createResourceWithInfos.usecase.ts ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateResourceWithInfosUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
const resource_manager_service_1 = __webpack_require__(/*! @src/domain/resource-manager/resource-manager.service */ "./src/domain/resource-manager/resource-manager.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const meeting_room_info_service_1 = __webpack_require__(/*! @src/domain/meeting-room-info/meeting-room-info.service */ "./src/domain/meeting-room-info/meeting-room-info.service.ts");
const accommodation_info_service_1 = __webpack_require__(/*! @src/domain/accommodation-info/accommodation-info.service */ "./src/domain/accommodation-info/accommodation-info.service.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const file_resource_service_1 = __webpack_require__(/*! @src/domain/file-resource/file-resource.service */ "./src/domain/file-resource/file-resource.service.ts");
const equipment_info_service_1 = __webpack_require__(/*! @src/domain/equipment-info/equipment-info.service */ "./src/domain/equipment-info/equipment-info.service.ts");
let CreateResourceWithInfosUsecase = class CreateResourceWithInfosUsecase {
    constructor(resourceService, resourceGroupService, resourceManagerService, vehicleInfoService, meetingRoomInfoService, accommodationInfoService, equipmentInfoService, fileService, fileResourceService, dataSource) {
        this.resourceService = resourceService;
        this.resourceGroupService = resourceGroupService;
        this.resourceManagerService = resourceManagerService;
        this.vehicleInfoService = vehicleInfoService;
        this.meetingRoomInfoService = meetingRoomInfoService;
        this.accommodationInfoService = accommodationInfoService;
        this.equipmentInfoService = equipmentInfoService;
        this.fileService = fileService;
        this.fileResourceService = fileResourceService;
        this.dataSource = dataSource;
    }
    async execute(createResourceInfo) {
        const { resource, typeInfo, managers } = createResourceInfo;
        if (!resource.resourceGroupId) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.GROUP_ID_REQUIRED);
        }
        if (!managers || managers.length === 0) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.MANAGERS_REQUIRED);
        }
        const group = await this.resourceGroupService.findOne({
            where: { resourceGroupId: resource.resourceGroupId },
        });
        if (!group) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE_GROUP.NOT_FOUND);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const resources = await this.resourceService.findAll({
                where: {
                    resourceGroupId: group.resourceGroupId,
                },
            });
            const resourceOrder = resources.length;
            if (!resource.images)
                resource.images = [];
            resource.images = resource.images.map((image) => this.fileService.getFileUrl(image));
            const savedResource = await this.resourceService.save({ ...resource, order: resourceOrder }, {
                queryRunner,
            });
            await this.fileService.updateTemporaryFiles(resource.images, false, { queryRunner });
            if (resource.images.length > 0) {
                const files = await this.fileService.findAllFilesByFilePath(resource.images);
                const fileIds = files.map((file) => file.fileId);
                if (fileIds.length > 0) {
                    const fileResourceConnections = fileIds.map((fileId) => ({
                        resourceId: savedResource.resourceId,
                        fileId,
                    }));
                    await this.fileResourceService.saveMultiple(fileResourceConnections, { queryRunner });
                }
            }
            switch (group.type) {
                case resource_type_enum_1.ResourceType.VEHICLE:
                    await this.vehicleInfoService.save({ ...typeInfo, resourceId: savedResource.resourceId }, { queryRunner });
                    break;
                case resource_type_enum_1.ResourceType.MEETING_ROOM:
                    await this.meetingRoomInfoService.save({ ...typeInfo, resourceId: savedResource.resourceId }, { queryRunner });
                    break;
                case resource_type_enum_1.ResourceType.ACCOMMODATION:
                    await this.accommodationInfoService.save({ ...typeInfo, resourceId: savedResource.resourceId }, { queryRunner });
                    break;
                case resource_type_enum_1.ResourceType.EQUIPMENT:
                    await this.equipmentInfoService.save({ ...typeInfo, resourceId: savedResource.resourceId }, { queryRunner });
                    break;
            }
            await Promise.all([
                ...managers.map((manager) => {
                    return this.resourceManagerService.save({
                        resourceId: savedResource.resourceId,
                        employeeId: manager.employeeId,
                    }, { queryRunner });
                }),
            ]);
            await queryRunner.commitTransaction();
            const resourceWithTypeInfo = await this.resourceService.findOne({
                where: { resourceId: savedResource.resourceId },
                relations: ['vehicleInfo', 'meetingRoomInfo', 'accommodationInfo', 'equipmentInfo'],
            });
            return {
                resourceId: resourceWithTypeInfo.resourceId,
                type: resourceWithTypeInfo.type,
                typeInfoId: resourceWithTypeInfo.vehicleInfo?.vehicleInfoId ||
                    resourceWithTypeInfo.meetingRoomInfo?.meetingRoomInfoId ||
                    resourceWithTypeInfo.accommodationInfo?.accommodationInfoId ||
                    resourceWithTypeInfo.equipmentInfo?.equipmentInfoId,
            };
        }
        catch (err) {
            console.error(err);
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_CREATE);
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.CreateResourceWithInfosUsecase = CreateResourceWithInfosUsecase;
exports.CreateResourceWithInfosUsecase = CreateResourceWithInfosUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _b : Object, typeof (_c = typeof resource_manager_service_1.DomainResourceManagerService !== "undefined" && resource_manager_service_1.DomainResourceManagerService) === "function" ? _c : Object, typeof (_d = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _d : Object, typeof (_e = typeof meeting_room_info_service_1.DomainMeetingRoomInfoService !== "undefined" && meeting_room_info_service_1.DomainMeetingRoomInfoService) === "function" ? _e : Object, typeof (_f = typeof accommodation_info_service_1.DomainAccommodationInfoService !== "undefined" && accommodation_info_service_1.DomainAccommodationInfoService) === "function" ? _f : Object, typeof (_g = typeof equipment_info_service_1.DomainEquipmentInfoService !== "undefined" && equipment_info_service_1.DomainEquipmentInfoService) === "function" ? _g : Object, typeof (_h = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _h : Object, typeof (_j = typeof file_resource_service_1.DomainFileResourceService !== "undefined" && file_resource_service_1.DomainFileResourceService) === "function" ? _j : Object, typeof (_k = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _k : Object])
], CreateResourceWithInfosUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/deleteResource.usecase.ts":
/*!***********************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/deleteResource.usecase.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DeleteResourceUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const resource_manager_service_1 = __webpack_require__(/*! @src/domain/resource-manager/resource-manager.service */ "./src/domain/resource-manager/resource-manager.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DeleteResourceUsecase = class DeleteResourceUsecase {
    constructor(resourceService, resourceManagerService, dataSource) {
        this.resourceService = resourceService;
        this.resourceManagerService = resourceManagerService;
        this.dataSource = dataSource;
    }
    async execute(resourceId) {
        const resource = await this.resourceService.findOne({
            where: {
                resourceId: resourceId,
            },
            relations: ['resourceGroup', 'resourceManagers'],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        if (resource.isAvailable) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.IS_AVAILABLE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await this.resourceService.update(resourceId, { resourceGroupId: null }, { queryRunner });
            for (const manager of resource.resourceManagers) {
                await this.resourceManagerService.delete(manager.resourceManagerId, { queryRunner });
            }
            await this.resourceService.softDelete(resourceId, { queryRunner });
            const resources = await this.resourceService.findAll({
                where: {
                    resourceId: (0, typeorm_1.Not)(resourceId),
                    resourceGroupId: resource.resourceGroupId,
                    deletedAt: (0, typeorm_1.IsNull)(),
                },
                order: {
                    order: 'ASC',
                },
            });
            for (let i = 0; i < resources.length; i++) {
                await this.resourceService.update(resources[i].resourceId, { order: i }, { queryRunner });
            }
            await queryRunner.commitTransaction();
        }
        catch (err) {
            console.error(err);
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_DELETE);
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.DeleteResourceUsecase = DeleteResourceUsecase;
exports.DeleteResourceUsecase = DeleteResourceUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof resource_manager_service_1.DomainResourceManagerService !== "undefined" && resource_manager_service_1.DomainResourceManagerService) === "function" ? _b : Object, typeof (_c = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _c : Object])
], DeleteResourceUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/findAvailableTime.usecase.ts":
/*!**************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/findAvailableTime.usecase.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindAvailableTimeUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const available_time_response_dto_1 = __webpack_require__(/*! @src/application/resource/core/dtos/available-time-response.dto */ "./src/application/resource/core/dtos/available-time-response.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
let FindAvailableTimeUsecase = class FindAvailableTimeUsecase {
    constructor(resourceService, reservationService) {
        this.resourceService = resourceService;
        this.reservationService = reservationService;
    }
    async execute(query) {
        const { resourceType, resourceGroupId, startDate, endDate, startTime, endTime, am, pm, timeUnit, reservationId, } = query;
        if (!startDate && !endDate) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.DATE_REQUIRED);
        }
        if (startDate && endDate && startDate > endDate) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.INVALID_DATE_RANGE);
        }
        const isTimeRange = startTime && endTime;
        const isTimeSelected = (am !== undefined || pm !== undefined) && timeUnit;
        if (isTimeRange && isTimeSelected) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.TIME_RANGE_CONFLICT);
        }
        const resources = await this.resourceService.findAll({
            where: {
                isAvailable: true,
                resourceGroupId: resourceGroupId,
                type: resourceType,
            },
            relations: ['resourceGroup'],
        });
        const startDateObj = (0, typeorm_1.LessThan)(endTime ? date_util_1.DateUtil.date(endDate + ' ' + endTime).toDate() : date_util_1.DateUtil.date(endDate + ' 23:59:59').toDate());
        const endDateObj = (0, typeorm_1.MoreThanOrEqual)(startTime
            ? date_util_1.DateUtil.date(startDate + ' ' + startTime).toDate()
            : date_util_1.DateUtil.date(startDate + ' 00:00:00').toDate());
        for (const resource of resources) {
            const reservations = await this.reservationService.findAll({
                where: {
                    resourceId: resource.resourceId,
                    reservationId: reservationId ? (0, typeorm_1.Not)(reservationId) : undefined,
                    status: (0, typeorm_1.In)([reservation_type_enum_1.ReservationStatus.PENDING, reservation_type_enum_1.ReservationStatus.CONFIRMED, reservation_type_enum_1.ReservationStatus.CLOSED]),
                    startDate: startDateObj,
                    endDate: endDateObj,
                },
            });
            resource.reservations = reservations;
        }
        const result = [];
        if (!resources || (resources && resources.length === 0)) {
            return result;
        }
        const isSameDay = startDate === endDate;
        const isAccommodation = resourceType === resource_type_enum_1.ResourceType.ACCOMMODATION;
        if (!isAccommodation && isSameDay && timeUnit) {
            for (const resource of resources) {
                const availabilityDto = new available_time_response_dto_1.ResourceAvailabilityDto();
                availabilityDto.resourceId = resource.resourceId;
                availabilityDto.resourceName = resource.name;
                availabilityDto.availableTimeSlots = this.calculateAvailableTimeSlots(resource, startDate, endDate, am, pm, timeUnit, isSameDay);
                result.push(availabilityDto);
            }
        }
        else if (isAccommodation || !isSameDay) {
            const combinedStartDateTime = startTime ? `${startDate} ${startTime}` : `${startDate} 00:00:00`;
            const combinedEndDateTime = endTime ? `${endDate} ${endTime}` : `${endDate} 24:00:00`;
            const startDateObj = date_util_1.DateUtil.date(combinedStartDateTime);
            const endDateObj = date_util_1.DateUtil.date(combinedEndDateTime);
            for (const resource of resources) {
                const confirmedReservations = resource.reservations.filter((reservation) => reservation.status === reservation_type_enum_1.ReservationStatus.CONFIRMED ||
                    reservation.status === reservation_type_enum_1.ReservationStatus.PENDING);
                const hasConflict = confirmedReservations.some((reservation) => {
                    const reserveStart = date_util_1.DateUtil.date(reservation.startDate);
                    const reserveEnd = date_util_1.DateUtil.date(reservation.endDate);
                    return ((this.isSameOrAfter(startDateObj, reserveStart) && this.isBefore(startDateObj, reserveEnd)) ||
                        (this.isAfter(endDateObj, reserveStart) && this.isSameOrBefore(endDateObj, reserveEnd)) ||
                        (this.isBefore(startDateObj, reserveStart) && this.isAfter(endDateObj, reserveEnd)));
                });
                if (!hasConflict) {
                    const availabilityDto = new available_time_response_dto_1.ResourceAvailabilityDto();
                    availabilityDto.resourceId = resource.resourceId;
                    availabilityDto.resourceName = resource.name;
                    if (resource.location) {
                        const location = resource.location;
                        availabilityDto.resourceLocation =
                            location.address + (location.detailAddress ? ` ${location.detailAddress}` : '');
                    }
                    result.push(availabilityDto);
                }
            }
        }
        else {
            throw new common_1.BadRequestException('시간 조회 조건이 올바르지 않습니다.');
        }
        return result;
    }
    calculateAvailableTimeSlots(resource, startDate, endDate, am, pm, timeUnit, isSameDay) {
        const availableSlots = [];
        const existingReservations = resource.reservations || [];
        const confirmedReservations = existingReservations;
        if (isSameDay) {
            const now = date_util_1.DateUtil.now();
            const dateStr = startDate;
            const currentMinute = now.toDate().getMinutes();
            const roundedHour = now.format(`${now.format('HH') < '09' ? '09' : now.format('HH')}:${now.format('HH') < '09' || currentMinute < 30 ? '00' : '30'}:00`);
            const isToday = startDate === now.format('YYYY-MM-DD');
            const isAllDay = (am && pm) || (!am && !pm);
            const isVehicle = resource.type === resource_type_enum_1.ResourceType.VEHICLE;
            let startTime;
            let endTime;
            if (isVehicle) {
                if (isToday) {
                    startTime = roundedHour;
                    endTime = '24:00:00';
                }
                else {
                    if (isAllDay) {
                        startTime = '00:00:00';
                        endTime = '24:00:00';
                    }
                    else {
                        startTime = am ? '00:00:00' : '12:00:00';
                        endTime = am ? '12:00:00' : '24:00:00';
                    }
                }
            }
            else {
                if (isToday) {
                    startTime = roundedHour;
                    endTime = '18:00:00';
                }
                else {
                    if (isAllDay) {
                        startTime = '09:00:00';
                        endTime = '18:00:00';
                    }
                    else {
                        startTime = am ? '09:00:00' : '12:00:00';
                        endTime = am ? '12:00:00' : '18:00:00';
                    }
                }
            }
            this.processTimeRange(dateStr, startTime, endTime, timeUnit, confirmedReservations, availableSlots);
        }
        else {
            let currentDate = date_util_1.DateUtil.date(startDate);
            const endDateObj = date_util_1.DateUtil.date(endDate);
            while (this.isSameOrBefore(currentDate, endDateObj)) {
                const dateStr = currentDate.format('YYYY-MM-DD');
                this.processTimeRange(dateStr, '00:00:00', '23:59:59', timeUnit, confirmedReservations, availableSlots);
                currentDate = currentDate.addDays(1);
            }
        }
        return availableSlots;
    }
    processTimeRange(dateStr, startTime, endTime, timeUnit, confirmedReservations, availableSlots) {
        const startTime_obj = date_util_1.DateUtil.date(`${dateStr} ${startTime}`);
        const endTime_obj = date_util_1.DateUtil.date(`${dateStr} ${endTime}`);
        const slotIntervalMinutes = 30;
        let slotStart = startTime_obj;
        while (this.isBefore(slotStart, endTime_obj)) {
            const slotEnd = slotStart.addMinutes(timeUnit);
            if (this.isAfter(slotEnd, endTime_obj)) {
                slotStart = slotStart.addMinutes(slotIntervalMinutes);
                continue;
            }
            const isAvailable = !confirmedReservations.some((reservation) => {
                const reservationStart = date_util_1.DateUtil.date(reservation.startDate);
                const reservationEnd = date_util_1.DateUtil.date(reservation.endDate);
                return ((this.isSameOrAfter(slotStart, reservationStart) && this.isBefore(slotStart, reservationEnd)) ||
                    (this.isAfter(slotEnd, reservationStart) && this.isSameOrBefore(slotEnd, reservationEnd)) ||
                    (this.isBefore(slotStart, reservationStart) && this.isAfter(slotEnd, reservationEnd)));
            });
            if (isAvailable) {
                availableSlots.push({
                    startTime: slotStart.format(),
                    endTime: slotEnd.format(),
                });
            }
            slotStart = slotStart.addMinutes(slotIntervalMinutes);
        }
    }
    isSameOrBefore(d1, d2) {
        return d1.toDate().getTime() <= d2.toDate().getTime();
    }
    isBefore(d1, d2) {
        return d1.toDate().getTime() < d2.toDate().getTime();
    }
    isAfter(d1, d2) {
        return d1.toDate().getTime() > d2.toDate().getTime();
    }
    isSameOrAfter(d1, d2) {
        return d1.toDate().getTime() >= d2.toDate().getTime();
    }
};
exports.FindAvailableTimeUsecase = FindAvailableTimeUsecase;
exports.FindAvailableTimeUsecase = FindAvailableTimeUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _b : Object])
], FindAvailableTimeUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/findResourceDetail.usecase.ts":
/*!***************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/findResourceDetail.usecase.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindResourceDetailUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
const maintenance_service_1 = __webpack_require__(/*! @src/domain/maintenance/maintenance.service */ "./src/domain/maintenance/maintenance.service.ts");
const resource_response_dto_1 = __webpack_require__(/*! ../../dtos/resource-response.dto */ "./src/application/resource/core/dtos/resource-response.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let FindResourceDetailUsecase = class FindResourceDetailUsecase {
    constructor(resourceService, fileService, consumableService, maintenanceService) {
        this.resourceService = resourceService;
        this.fileService = fileService;
        this.consumableService = consumableService;
        this.maintenanceService = maintenanceService;
    }
    async executeForUser(employeeId, resourceId) {
        const resource = await this.resourceService.findOne({
            where: { resourceId: resourceId },
            relations: [
                'resourceGroup',
                'vehicleInfo',
                'meetingRoomInfo',
                'accommodationInfo',
                'resourceManagers',
                'resourceManagers.employee',
            ],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        resource['imageFiles'] = await this.fileService.findAllFilesByFilePath(resource.images);
        if (resource.vehicleInfo) {
            if (resource.resourceManagers.some((manager) => manager.employeeId === employeeId)) {
                resource.vehicleInfo['consumables'] = await this.consumableService.findAll({
                    where: { vehicleInfoId: resource.vehicleInfo.vehicleInfoId },
                });
            }
            if (resource.vehicleInfo.consumables && resource.vehicleInfo.consumables.length > 0) {
                const mileage = Number(resource.vehicleInfo.totalMileage);
                for (const consumable of resource.vehicleInfo.consumables) {
                    const replaceCycle = Number(consumable.replaceCycle);
                    const latestMaintenance = await this.maintenanceService.findOne({
                        where: { consumableId: consumable.consumableId },
                        order: { date: 'DESC' },
                    });
                    if (latestMaintenance) {
                        consumable.maintenances = [latestMaintenance].map((maintenance) => {
                            return {
                                ...maintenance,
                                mileageFromLastMaintenance: mileage - Number(maintenance.mileage),
                                maintanceRequired: mileage - Number(maintenance.mileage) > replaceCycle,
                            };
                        });
                    }
                }
                resource.vehicleInfo.consumables.sort((a, b) => {
                    if (!a.maintenances?.length && !b.maintenances?.length) {
                        return a.name.localeCompare(b.name);
                    }
                    if (!a.maintenances?.length)
                        return -1;
                    if (!b.maintenances?.length)
                        return 1;
                    const aMileage = a.maintenances[0]?.['mileageFromLastMaintenance'] || 0;
                    const bMileage = b.maintenances[0]?.['mileageFromLastMaintenance'] || 0;
                    return aMileage - bMileage;
                });
            }
            resource.vehicleInfo['parkingLocationFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.parkingLocationImages);
            resource.vehicleInfo['odometerFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.odometerImages);
            resource.vehicleInfo['indoorFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.indoorImages);
        }
        return new resource_response_dto_1.ResourceResponseDto(resource);
    }
    async executeForAdmin(resourceId) {
        const resource = await this.resourceService.findOne({
            where: { resourceId: resourceId },
            relations: [
                'resourceGroup',
                'vehicleInfo',
                'vehicleInfo.consumables',
                'meetingRoomInfo',
                'accommodationInfo',
                'resourceManagers',
                'resourceManagers.employee',
            ],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        resource['imageFiles'] = await this.fileService.findAllFilesByFilePath(resource.images);
        if (resource.vehicleInfo) {
            if (resource.vehicleInfo.consumables) {
                const mileage = Number(resource.vehicleInfo.totalMileage);
                for (const consumable of resource.vehicleInfo.consumables) {
                    const initMileage = Number(consumable.initMileage);
                    const replaceCycle = Number(consumable.replaceCycle);
                    const latestMaintenance = await this.maintenanceService.findOne({
                        where: { consumableId: consumable.consumableId },
                        order: { date: 'DESC' },
                    });
                    if (latestMaintenance) {
                        consumable.maintenances = [latestMaintenance].map((maintenance) => {
                            return {
                                ...maintenance,
                                mileageFromLastMaintenance: mileage - Number(maintenance.mileage),
                                maintanceRequired: mileage - Number(maintenance.mileage) > replaceCycle,
                            };
                        });
                    }
                    else {
                        consumable['mileageFromLastMaintenance'] = mileage - initMileage;
                        consumable['maintanceRequired'] = mileage - initMileage > replaceCycle;
                    }
                }
                resource.vehicleInfo.consumables.sort((a, b) => {
                    const aRequired = !!a.maintenances?.[0]?.['maintanceRequired'] || !!a['maintanceRequired'];
                    const bRequired = !!b.maintenances?.[0]?.['maintanceRequired'] || !!b['maintanceRequired'];
                    if (aRequired !== bRequired) {
                        return aRequired ? -1 : 1;
                    }
                    const aReplaceCycle = a['replaceCycle'];
                    const bReplaceCycle = b['replaceCycle'];
                    const aMileage = ((a.maintenances?.[0]?.['mileageFromLastMaintenance'] || a['mileageFromLastMaintenance']) /
                        aReplaceCycle) *
                        100;
                    const bMileage = ((b.maintenances?.[0]?.['mileageFromLastMaintenance'] || b['mileageFromLastMaintenance']) /
                        bReplaceCycle) *
                        100;
                    if (bMileage !== aMileage) {
                        return bMileage - aMileage;
                    }
                    return bReplaceCycle - aReplaceCycle;
                });
            }
            resource.vehicleInfo['parkingLocationFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.parkingLocationImages);
            resource.vehicleInfo['odometerFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.odometerImages);
            resource.vehicleInfo['indoorFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.indoorImages);
        }
        return new resource_response_dto_1.ResourceResponseDto(resource);
    }
};
exports.FindResourceDetailUsecase = FindResourceDetailUsecase;
exports.FindResourceDetailUsecase = FindResourceDetailUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _b : Object, typeof (_c = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _c : Object, typeof (_d = typeof maintenance_service_1.DomainMaintenanceService !== "undefined" && maintenance_service_1.DomainMaintenanceService) === "function" ? _d : Object])
], FindResourceDetailUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/findResources.usecase.ts":
/*!**********************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/findResources.usecase.ts ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindResourcesUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const resource_response_dto_1 = __webpack_require__(/*! ../../dtos/resource-response.dto */ "./src/application/resource/core/dtos/resource-response.dto.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
let FindResourcesUsecase = class FindResourcesUsecase {
    constructor(resourceService) {
        this.resourceService = resourceService;
    }
    async execute(type) {
        let relations = [];
        if (type === resource_type_enum_1.ResourceType.VEHICLE) {
            relations = ['vehicleInfo', 'vehicleInfo.consumables'];
        }
        else if (type === resource_type_enum_1.ResourceType.MEETING_ROOM) {
            relations = ['meetingRoomInfo'];
        }
        else if (type === resource_type_enum_1.ResourceType.ACCOMMODATION) {
            relations = ['accommodationInfo'];
        }
        else if (type === resource_type_enum_1.ResourceType.EQUIPMENT) {
            relations = ['equipmentInfo'];
        }
        const resources = await this.resourceService.findAll({
            where: {
                type: type,
            },
            relations: relations,
        });
        return resources.map((resource) => new resource_response_dto_1.ResourceResponseDto(resource));
    }
};
exports.FindResourcesUsecase = FindResourcesUsecase;
exports.FindResourcesUsecase = FindResourcesUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object])
], FindResourcesUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/findResourcesByGroup.usecase.ts":
/*!*****************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/findResourcesByGroup.usecase.ts ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindResourcesByGroupUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_response_dto_1 = __webpack_require__(/*! ../../dtos/resource-response.dto */ "./src/application/resource/core/dtos/resource-response.dto.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
let FindResourcesByGroupUsecase = class FindResourcesByGroupUsecase {
    constructor(resourceService) {
        this.resourceService = resourceService;
    }
    async execute(resourceGroupId) {
        const resources = await this.resourceService.findAll({
            where: {
                resourceGroupId: resourceGroupId,
            },
            relations: [
                'vehicleInfo',
                'vehicleInfo.consumables',
                'meetingRoomInfo',
                'accommodationInfo',
                'equipmentInfo',
                'resourceManagers',
                'resourceManagers.employee',
            ],
        });
        return resources.map((resource) => new resource_response_dto_1.ResourceResponseDto(resource));
    }
};
exports.FindResourcesByGroupUsecase = FindResourcesByGroupUsecase;
exports.FindResourcesByGroupUsecase = FindResourcesByGroupUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object])
], FindResourcesByGroupUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/findResourcesByTypeAndDateWithReservations.usecase.ts":
/*!***************************************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/findResourcesByTypeAndDateWithReservations.usecase.ts ***!
  \***************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindResourcesByTypeAndDateWithReservationsUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
let FindResourcesByTypeAndDateWithReservationsUsecase = class FindResourcesByTypeAndDateWithReservationsUsecase {
    constructor(resourceService, resourceGroupService, reservationService) {
        this.resourceService = resourceService;
        this.resourceGroupService = resourceGroupService;
        this.reservationService = reservationService;
    }
    async execute(user, type, startDate, endDate, isMine) {
        if (!!startDate && !!endDate && startDate > endDate) {
            throw new common_1.BadRequestException('Start date must be before end date');
        }
        const regex = /(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/;
        const startDateObj = regex.test(startDate)
            ? date_util_1.DateUtil.date(startDate).toDate()
            : date_util_1.DateUtil.date(startDate + ' 00:00:00').toDate();
        const endDateObj = regex.test(endDate)
            ? date_util_1.DateUtil.date(endDate).toDate()
            : date_util_1.DateUtil.date(endDate + ' 23:59:59').toDate();
        const resourceGroups = await this.resourceGroupService.findAll({
            where: {
                type: type,
                parentResourceGroupId: (0, typeorm_1.Not)((0, typeorm_1.IsNull)()),
            },
            order: {
                order: 'ASC',
            },
        });
        const resourceGroupsWithResources = await Promise.all(resourceGroups.map(async (resourceGroup) => {
            const resources = await this.resourceService.findAll({
                where: {
                    resourceGroupId: resourceGroup.resourceGroupId,
                },
                order: {
                    order: 'ASC',
                },
            });
            const resourcesWithReservations = await Promise.all(resources.map(async (resource) => {
                const dateCondition = (0, typeorm_1.Raw)((alias) => `(${alias} BETWEEN :startDateObj AND :endDateObj OR
                              "Reservation"."endDate" BETWEEN :startDateObj AND :endDateObj OR
                              (${alias} <= :startDateObj AND "Reservation"."endDate" >= :endDateObj))`, { startDateObj, endDateObj });
                const where = {
                    startDate: dateCondition,
                    resourceId: resource.resourceId,
                    status: (0, typeorm_1.In)([
                        reservation_type_enum_1.ReservationStatus.PENDING,
                        reservation_type_enum_1.ReservationStatus.CONFIRMED,
                        reservation_type_enum_1.ReservationStatus.CLOSED,
                    ]),
                };
                const reservations = await this.reservationService.findAll({
                    where: where,
                    relations: ['participants', 'participants.employee'],
                    order: {
                        startDate: 'ASC',
                    },
                });
                const reservationResponseDtos = reservations
                    .map((reservation) => {
                    const isMine = reservation.participants.some((participant) => participant.type === reservation_type_enum_1.ParticipantsType.RESERVER &&
                        participant.employeeId === user.employeeId);
                    reservation.participants = reservation.participants.filter((participant) => participant.type === reservation_type_enum_1.ParticipantsType.RESERVER);
                    return {
                        ...reservation,
                        startDate: date_util_1.DateUtil.date(reservation.startDate).format(),
                        endDate: date_util_1.DateUtil.date(reservation.endDate).format(),
                        isMine: isMine,
                    };
                })
                    .filter((reservation) => {
                    if (isMine) {
                        return reservation.participants.some((participant) => participant.employeeId === user.employeeId);
                    }
                    return true;
                });
                return {
                    ...resource,
                    resourceId: resource.resourceId,
                    reservations: reservationResponseDtos,
                };
            }));
            return {
                ...resourceGroup,
                resources: resourcesWithReservations,
            };
        }));
        return resourceGroupsWithResources;
    }
};
exports.FindResourcesByTypeAndDateWithReservationsUsecase = FindResourcesByTypeAndDateWithReservationsUsecase;
exports.FindResourcesByTypeAndDateWithReservationsUsecase = FindResourcesByTypeAndDateWithReservationsUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _b : Object, typeof (_c = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _c : Object])
], FindResourcesByTypeAndDateWithReservationsUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/index.ts":
/*!******************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/index.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./findResources.usecase */ "./src/application/resource/core/usecases/resource/findResources.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findResourceDetail.usecase */ "./src/application/resource/core/usecases/resource/findResourceDetail.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./checkAvailability.usecase */ "./src/application/resource/core/usecases/resource/checkAvailability.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./createResourceWithInfos.usecase */ "./src/application/resource/core/usecases/resource/createResourceWithInfos.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./updateResource.usecase */ "./src/application/resource/core/usecases/resource/updateResource.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./reorderResources.usecase */ "./src/application/resource/core/usecases/resource/reorderResources.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./deleteResource.usecase */ "./src/application/resource/core/usecases/resource/deleteResource.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findResourcesByTypeAndDateWithReservations.usecase */ "./src/application/resource/core/usecases/resource/findResourcesByTypeAndDateWithReservations.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findAvailableTime.usecase */ "./src/application/resource/core/usecases/resource/findAvailableTime.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findResourcesByGroup.usecase */ "./src/application/resource/core/usecases/resource/findResourcesByGroup.usecase.ts"), exports);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/reorderResources.usecase.ts":
/*!*************************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/reorderResources.usecase.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReorderResourcesUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let ReorderResourcesUsecase = class ReorderResourcesUsecase {
    constructor(resourceService, dataSource) {
        this.resourceService = resourceService;
        this.dataSource = dataSource;
    }
    async execute(updateResourceOrdersDto) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await Promise.all(updateResourceOrdersDto.orders.map(async (order) => {
                await this.resourceService.update(order.resourceId, { order: order.newOrder }, { queryRunner });
            }));
            await queryRunner.commitTransaction();
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_REORDER);
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.ReorderResourcesUsecase = ReorderResourcesUsecase;
exports.ReorderResourcesUsecase = ReorderResourcesUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _b : Object])
], ReorderResourcesUsecase);


/***/ }),

/***/ "./src/application/resource/core/usecases/resource/updateResource.usecase.ts":
/*!***********************************************************************************!*\
  !*** ./src/application/resource/core/usecases/resource/updateResource.usecase.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateResourceUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_response_dto_1 = __webpack_require__(/*! ../../dtos/resource-response.dto */ "./src/application/resource/core/dtos/resource-response.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const resource_manager_service_1 = __webpack_require__(/*! @src/domain/resource-manager/resource-manager.service */ "./src/domain/resource-manager/resource-manager.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
let UpdateResourceUsecase = class UpdateResourceUsecase {
    constructor(resourceService, resourceManagerService, dataSource, fileService) {
        this.resourceService = resourceService;
        this.resourceManagerService = resourceManagerService;
        this.dataSource = dataSource;
        this.fileService = fileService;
    }
    async execute(resourceId, updateRequest) {
        const resource = await this.resourceService.findOne({
            where: {
                resourceId: resourceId,
            },
            relations: ['resourceGroup'],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            if (updateRequest.resource) {
                if (updateRequest.resource.images && updateRequest.resource.images.length > 0) {
                    updateRequest.resource.images = updateRequest.resource.images.map((image) => this.fileService.getFileUrl(image));
                    await this.fileService.updateTemporaryFiles(updateRequest.resource.images, false, { queryRunner });
                }
                await this.resourceService.update(resourceId, updateRequest.resource, { queryRunner });
            }
            if (updateRequest.managers) {
                const newManagerIds = updateRequest.managers.map((m) => m.employeeId);
                const currentManagers = await this.resourceManagerService.findAll({
                    where: {
                        resourceId: resourceId,
                    },
                });
                const currentManagerIds = currentManagers.map((m) => m.employeeId);
                const managersToRemove = currentManagers.filter((manager) => !newManagerIds.includes(manager.employeeId));
                await Promise.all(managersToRemove.map((manager) => this.resourceManagerService.delete(manager.resourceManagerId, { queryRunner })));
                const managersToAdd = newManagerIds.filter((employeeId) => !currentManagerIds.includes(employeeId));
                await Promise.all(managersToAdd.map((employeeId) => this.resourceManagerService.save({ resourceId, employeeId }, { queryRunner })));
            }
            await queryRunner.commitTransaction();
            return this.findResourceDetailForAdmin(resourceId);
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_UPDATE);
        }
        finally {
            await queryRunner.release();
        }
    }
    async findResourceDetailForAdmin(resourceId) {
        const resource = await this.resourceService.findOne({
            where: { resourceId: resourceId },
            relations: [
                'resourceGroup',
                'vehicleInfo',
                'vehicleInfo.consumables',
                'meetingRoomInfo',
                'accommodationInfo',
                'resourceManagers',
                'resourceManagers.employee',
            ],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        return new resource_response_dto_1.ResourceResponseDto(resource);
    }
};
exports.UpdateResourceUsecase = UpdateResourceUsecase;
exports.UpdateResourceUsecase = UpdateResourceUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof resource_manager_service_1.DomainResourceManagerService !== "undefined" && resource_manager_service_1.DomainResourceManagerService) === "function" ? _b : Object, typeof (_c = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _c : Object, typeof (_d = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _d : Object])
], UpdateResourceUsecase);


/***/ }),

/***/ "./src/application/resource/equipment/dtos/create-equipment-info.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/application/resource/equipment/dtos/create-equipment-info.dto.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateEquipmentInfoDto = void 0;
class CreateEquipmentInfoDto {
}
exports.CreateEquipmentInfoDto = CreateEquipmentInfoDto;


/***/ }),

/***/ "./src/application/resource/equipment/dtos/equipment-info-response.dto.ts":
/*!********************************************************************************!*\
  !*** ./src/application/resource/equipment/dtos/equipment-info-response.dto.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EquipmentInfoResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EquipmentInfoResponseDto {
}
exports.EquipmentInfoResponseDto = EquipmentInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EquipmentInfoResponseDto.prototype, "equipmentInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EquipmentInfoResponseDto.prototype, "resourceId", void 0);


/***/ }),

/***/ "./src/application/resource/equipment/dtos/update-equipment-info.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/application/resource/equipment/dtos/update-equipment-info.dto.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateEquipmentInfoDto = void 0;
class UpdateEquipmentInfoDto {
}
exports.UpdateEquipmentInfoDto = UpdateEquipmentInfoDto;


/***/ }),

/***/ "./src/application/resource/meeting-room/dtos/create-meeting-room-info.dto.ts":
/*!************************************************************************************!*\
  !*** ./src/application/resource/meeting-room/dtos/create-meeting-room-info.dto.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateMeetingRoomInfoDto = void 0;
class CreateMeetingRoomInfoDto {
}
exports.CreateMeetingRoomInfoDto = CreateMeetingRoomInfoDto;


/***/ }),

/***/ "./src/application/resource/meeting-room/dtos/meeting-room-info-response.dto.ts":
/*!**************************************************************************************!*\
  !*** ./src/application/resource/meeting-room/dtos/meeting-room-info-response.dto.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomInfoResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class MeetingRoomInfoResponseDto {
}
exports.MeetingRoomInfoResponseDto = MeetingRoomInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MeetingRoomInfoResponseDto.prototype, "meetingRoomInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MeetingRoomInfoResponseDto.prototype, "resourceId", void 0);


/***/ }),

/***/ "./src/application/resource/meeting-room/dtos/update-meeting-room-info.dto.ts":
/*!************************************************************************************!*\
  !*** ./src/application/resource/meeting-room/dtos/update-meeting-room-info.dto.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateMeetingRoomInfoDto = void 0;
class UpdateMeetingRoomInfoDto {
}
exports.UpdateMeetingRoomInfoDto = UpdateMeetingRoomInfoDto;


/***/ }),

/***/ "./src/application/resource/vehicle/controllers/admin.consumable.controller.ts":
/*!*************************************************************************************!*\
  !*** ./src/application/resource/vehicle/controllers/admin.consumable.controller.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminConsumableController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const create_vehicle_info_dto_1 = __webpack_require__(/*! ../dtos/create-vehicle-info.dto */ "./src/application/resource/vehicle/dtos/create-vehicle-info.dto.ts");
const update_vehicle_info_dto_1 = __webpack_require__(/*! ../dtos/update-vehicle-info.dto */ "./src/application/resource/vehicle/dtos/update-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! ../dtos/vehicle-response.dto */ "./src/application/resource/vehicle/dtos/vehicle-response.dto.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const consumable_service_1 = __webpack_require__(/*! @src/application/resource/vehicle/services/consumable.service */ "./src/application/resource/vehicle/services/consumable.service.ts");
let AdminConsumableController = class AdminConsumableController {
    constructor(consumableService) {
        this.consumableService = consumableService;
    }
    async create(user, createConsumableDto) {
        return this.consumableService.save(user, createConsumableDto);
    }
    async findAll(user, vehicleInfoId) {
        return this.consumableService.findAll(user, vehicleInfoId);
    }
    async findOne(user, consumableId) {
        return this.consumableService.findOne(user, consumableId);
    }
    async update(consumableId, user, updateConsumableDto) {
        return this.consumableService.update(user, consumableId, updateConsumableDto);
    }
    async remove(user, consumableId) {
        await this.consumableService.delete(user, consumableId);
    }
};
exports.AdminConsumableController = AdminConsumableController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '소모품 등록' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 201,
        description: '소모품이 성공적으로 등록되었습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object, typeof (_c = typeof create_vehicle_info_dto_1.CreateConsumableDto !== "undefined" && create_vehicle_info_dto_1.CreateConsumableDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], AdminConsumableController.prototype, "create", null);
__decorate([
    (0, common_1.Get)('vehicle/:vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '소모품 목록을 성공적으로 조회했습니다.',
        type: [vehicle_response_dto_1.ConsumableResponseDto],
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('vehicleInfoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _e : Object, String]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], AdminConsumableController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 상세 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '소모품을 성공적으로 조회했습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('consumableId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _g : Object, String]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], AdminConsumableController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '소모품이 성공적으로 수정되었습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, common_1.Param)('consumableId')),
    __param(1, (0, user_decorator_1.User)()),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_j = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _j : Object, typeof (_k = typeof update_vehicle_info_dto_1.UpdateConsumableDto !== "undefined" && update_vehicle_info_dto_1.UpdateConsumableDto) === "function" ? _k : Object]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], AdminConsumableController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 삭제' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '소모품이 성공적으로 삭제되었습니다.',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('consumableId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_m = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _m : Object, String]),
    __metadata("design:returntype", typeof (_o = typeof Promise !== "undefined" && Promise) === "function" ? _o : Object)
], AdminConsumableController.prototype, "remove", null);
exports.AdminConsumableController = AdminConsumableController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 소모품 - 관리자 '),
    (0, common_1.Controller)('v1/admin/consumables'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_service_1.ConsumableService !== "undefined" && consumable_service_1.ConsumableService) === "function" ? _a : Object])
], AdminConsumableController);


/***/ }),

/***/ "./src/application/resource/vehicle/controllers/admin.maintenance.controller.ts":
/*!**************************************************************************************!*\
  !*** ./src/application/resource/vehicle/controllers/admin.maintenance.controller.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminMaintenanceController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const create_vehicle_info_dto_1 = __webpack_require__(/*! ../dtos/create-vehicle-info.dto */ "./src/application/resource/vehicle/dtos/create-vehicle-info.dto.ts");
const update_vehicle_info_dto_1 = __webpack_require__(/*! ../dtos/update-vehicle-info.dto */ "./src/application/resource/vehicle/dtos/update-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! ../dtos/vehicle-response.dto */ "./src/application/resource/vehicle/dtos/vehicle-response.dto.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const pagination_query_dto_1 = __webpack_require__(/*! @libs/dtos/pagination-query.dto */ "./libs/dtos/pagination-query.dto.ts");
const maintenance_service_1 = __webpack_require__(/*! @src/application/resource/vehicle/services/maintenance.service */ "./src/application/resource/vehicle/services/maintenance.service.ts");
let AdminMaintenanceController = class AdminMaintenanceController {
    constructor(maintenanceService) {
        this.maintenanceService = maintenanceService;
    }
    async create(user, createMaintenanceDto) {
        return this.maintenanceService.save(user, createMaintenanceDto);
    }
    async findAll(user, vehicleInfoId, query) {
        const { page, limit } = query;
        return this.maintenanceService.findAllByVehicleInfoId(user, vehicleInfoId, page, limit);
    }
    async findOne(user, maintenanceId) {
        return this.maintenanceService.findOne(user, maintenanceId);
    }
    async update(maintenanceId, updateMaintenanceDto, user) {
        return this.maintenanceService.update(user, maintenanceId, updateMaintenanceDto);
    }
    async remove(user, maintenanceId) {
        return this.maintenanceService.delete(user, maintenanceId);
    }
};
exports.AdminMaintenanceController = AdminMaintenanceController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 201,
        description: '정비 이력이 생성되었습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object, typeof (_c = typeof create_vehicle_info_dto_1.CreateMaintenanceDto !== "undefined" && create_vehicle_info_dto_1.CreateMaintenanceDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], AdminMaintenanceController.prototype, "create", null);
__decorate([
    (0, common_1.Get)('vehicle/:vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '정비 이력 목록을 조회했습니다.',
        type: [vehicle_response_dto_1.MaintenanceResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('vehicleInfoId')),
    __param(2, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _e : Object, String, typeof (_f = typeof pagination_query_dto_1.PaginationQueryDto !== "undefined" && pagination_query_dto_1.PaginationQueryDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], AdminMaintenanceController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':maintenanceId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 상세 이력 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '정비 상세 이력을 조회했습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('maintenanceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_h = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _h : Object, String]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], AdminMaintenanceController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':maintenanceId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '정비 이력이 수정되었습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, common_1.Param)('maintenanceId')),
    __param(1, (0, common_1.Body)()),
    __param(2, (0, user_decorator_1.User)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_k = typeof update_vehicle_info_dto_1.UpdateMaintenanceDto !== "undefined" && update_vehicle_info_dto_1.UpdateMaintenanceDto) === "function" ? _k : Object, typeof (_l = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _l : Object]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], AdminMaintenanceController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':maintenanceId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 삭제' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '정비 이력이 삭제되었습니다.',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('maintenanceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_o = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _o : Object, String]),
    __metadata("design:returntype", typeof (_p = typeof Promise !== "undefined" && Promise) === "function" ? _p : Object)
], AdminMaintenanceController.prototype, "remove", null);
exports.AdminMaintenanceController = AdminMaintenanceController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 정비 이력 - 관리자 '),
    (0, common_1.Controller)('v1/admin/maintenances'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.MaintenanceService !== "undefined" && maintenance_service_1.MaintenanceService) === "function" ? _a : Object])
], AdminMaintenanceController);


/***/ }),

/***/ "./src/application/resource/vehicle/controllers/admin.reservation-vehicle.controller.ts":
/*!**********************************************************************************************!*\
  !*** ./src/application/resource/vehicle/controllers/admin.reservation-vehicle.controller.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminReservationVehicleController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/application/resource/vehicle/services/vehicle-info.service */ "./src/application/resource/vehicle/services/vehicle-info.service.ts");
const return_vehicle_response_dto_1 = __webpack_require__(/*! @src/application/reservation/core/dtos/return-vehicle-response.dto */ "./src/application/reservation/core/dtos/return-vehicle-response.dto.ts");
let AdminReservationVehicleController = class AdminReservationVehicleController {
    constructor(vehicleInfoService) {
        this.vehicleInfoService = vehicleInfoService;
    }
    async findReturnDetail(reservationVehicleId) {
        return this.vehicleInfoService.findReturnDetail(reservationVehicleId);
    }
};
exports.AdminReservationVehicleController = AdminReservationVehicleController;
__decorate([
    (0, common_1.Get)(':reservationVehicleId'),
    (0, swagger_1.ApiOperation)({ summary: '차량 반납 상세 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '차량 반납 상세를 성공적으로 조회했습니다.',
        type: return_vehicle_response_dto_1.ReturnVehicleDetailResponseDto,
    }),
    __param(0, (0, common_1.Param)('reservationVehicleId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], AdminReservationVehicleController.prototype, "findReturnDetail", null);
exports.AdminReservationVehicleController = AdminReservationVehicleController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 예약 정보 - 관리자 '),
    (0, common_1.Controller)('v1/admin/reservation-vehicle'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_service_1.VehicleInfoService !== "undefined" && vehicle_info_service_1.VehicleInfoService) === "function" ? _a : Object])
], AdminReservationVehicleController);


/***/ }),

/***/ "./src/application/resource/vehicle/controllers/admin.vehicle-info.controller.ts":
/*!***************************************************************************************!*\
  !*** ./src/application/resource/vehicle/controllers/admin.vehicle-info.controller.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminVehicleInfoController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const update_vehicle_info_dto_1 = __webpack_require__(/*! ../dtos/update-vehicle-info.dto */ "./src/application/resource/vehicle/dtos/update-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! ../dtos/vehicle-response.dto */ "./src/application/resource/vehicle/dtos/vehicle-response.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/application/resource/vehicle/services/vehicle-info.service */ "./src/application/resource/vehicle/services/vehicle-info.service.ts");
const return_vehicle_response_dto_1 = __webpack_require__(/*! @src/application/reservation/core/dtos/return-vehicle-response.dto */ "./src/application/reservation/core/dtos/return-vehicle-response.dto.ts");
let AdminVehicleInfoController = class AdminVehicleInfoController {
    constructor(vehicleInfoService) {
        this.vehicleInfoService = vehicleInfoService;
    }
    async findVehicleInfo(vehicleInfoId) {
        return this.vehicleInfoService.findVehicleInfo(vehicleInfoId);
    }
    async update(vehicleInfoId, updateVehicleInfoDto) {
        return this.vehicleInfoService.updateVehicleInfo(vehicleInfoId, updateVehicleInfoDto);
    }
    async findReturnList(vehicleInfoId) {
        return this.vehicleInfoService.findReturnList(vehicleInfoId);
    }
};
exports.AdminVehicleInfoController = AdminVehicleInfoController;
__decorate([
    (0, common_1.Get)(':vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '차량 정보 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '차량 정보를 성공적으로 조회했습니다.',
        type: vehicle_response_dto_1.VehicleInfoResponseDto,
    }),
    __param(0, (0, common_1.Param)('vehicleInfoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], AdminVehicleInfoController.prototype, "findVehicleInfo", null);
__decorate([
    (0, common_1.Patch)(':vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '차량 정보 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '차량 정보가 성공적으로 수정되었습니다.',
        type: vehicle_response_dto_1.VehicleInfoResponseDto,
    }),
    __param(0, (0, common_1.Param)('vehicleInfoId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_c = typeof update_vehicle_info_dto_1.UpdateVehicleInfoDto !== "undefined" && update_vehicle_info_dto_1.UpdateVehicleInfoDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], AdminVehicleInfoController.prototype, "update", null);
__decorate([
    (0, common_1.Get)(':vehicleInfoId/return-list'),
    (0, swagger_1.ApiOperation)({ summary: '차량 반납 리스트 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '차량 반납 리스트를 성공적으로 조회했습니다.',
        type: [return_vehicle_response_dto_1.ReturnVehicleResponseDto],
    }),
    __param(0, (0, common_1.Param)('vehicleInfoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], AdminVehicleInfoController.prototype, "findReturnList", null);
exports.AdminVehicleInfoController = AdminVehicleInfoController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 정보 - 관리자 '),
    (0, common_1.Controller)('v1/admin/vehicle-info'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_service_1.VehicleInfoService !== "undefined" && vehicle_info_service_1.VehicleInfoService) === "function" ? _a : Object])
], AdminVehicleInfoController);


/***/ }),

/***/ "./src/application/resource/vehicle/controllers/consumable.controller.ts":
/*!*******************************************************************************!*\
  !*** ./src/application/resource/vehicle/controllers/consumable.controller.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserConsumableController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! ../dtos/vehicle-response.dto */ "./src/application/resource/vehicle/dtos/vehicle-response.dto.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const consumable_service_1 = __webpack_require__(/*! @src/application/resource/vehicle/services/consumable.service */ "./src/application/resource/vehicle/services/consumable.service.ts");
let UserConsumableController = class UserConsumableController {
    constructor(consumableService) {
        this.consumableService = consumableService;
    }
    async findOne(user, consumableId) {
        console.log('consumableId', consumableId);
        return this.consumableService.findOne(user, consumableId);
    }
};
exports.UserConsumableController = UserConsumableController;
__decorate([
    (0, common_1.Get)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 상세 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '소모품을 성공적으로 조회했습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('consumableId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object, String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], UserConsumableController.prototype, "findOne", null);
exports.UserConsumableController = UserConsumableController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 소모품 '),
    (0, common_1.Controller)('v1/consumables'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.RESOURCE_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_service_1.ConsumableService !== "undefined" && consumable_service_1.ConsumableService) === "function" ? _a : Object])
], UserConsumableController);


/***/ }),

/***/ "./src/application/resource/vehicle/controllers/maintenance.controller.ts":
/*!********************************************************************************!*\
  !*** ./src/application/resource/vehicle/controllers/maintenance.controller.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserMaintenanceController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const create_vehicle_info_dto_1 = __webpack_require__(/*! ../dtos/create-vehicle-info.dto */ "./src/application/resource/vehicle/dtos/create-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! ../dtos/vehicle-response.dto */ "./src/application/resource/vehicle/dtos/vehicle-response.dto.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const maintenance_service_1 = __webpack_require__(/*! @src/application/resource/vehicle/services/maintenance.service */ "./src/application/resource/vehicle/services/maintenance.service.ts");
let UserMaintenanceController = class UserMaintenanceController {
    constructor(maintenanceService) {
        this.maintenanceService = maintenanceService;
    }
    async create(user, createMaintenanceDto) {
        return this.maintenanceService.save(user, createMaintenanceDto);
    }
};
exports.UserMaintenanceController = UserMaintenanceController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 201,
        description: '정비 이력이 생성되었습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object, typeof (_c = typeof create_vehicle_info_dto_1.CreateMaintenanceDto !== "undefined" && create_vehicle_info_dto_1.CreateMaintenanceDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], UserMaintenanceController.prototype, "create", null);
exports.UserMaintenanceController = UserMaintenanceController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 정비 이력 '),
    (0, common_1.Controller)('v1/maintenances'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.RESOURCE_ADMIN),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.MaintenanceService !== "undefined" && maintenance_service_1.MaintenanceService) === "function" ? _a : Object])
], UserMaintenanceController);


/***/ }),

/***/ "./src/application/resource/vehicle/dtos/create-vehicle-info.dto.ts":
/*!**************************************************************************!*\
  !*** ./src/application/resource/vehicle/dtos/create-vehicle-info.dto.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateMaintenanceDto = exports.CreateConsumableDto = exports.CreateVehicleInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class CreateVehicleInfoDto {
}
exports.CreateVehicleInfoDto = CreateVehicleInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: true }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('차량 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('차량 번호', 0, 100) }),
    __metadata("design:type", String)
], CreateVehicleInfoDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('남은 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    __metadata("design:type", Number)
], CreateVehicleInfoDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('총 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    __metadata("design:type", Number)
], CreateVehicleInfoDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험 이름', 0, 100) }),
    __metadata("design:type", String)
], CreateVehicleInfoDto.prototype, "insuranceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험사 전화 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험사 전화 번호', 0, 100) }),
    __metadata("design:type", String)
], CreateVehicleInfoDto.prototype, "insuranceNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], description: '주차위치 이미지 배열' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주차위치 이미지') }),
    __metadata("design:type", Array)
], CreateVehicleInfoDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], description: '계기판 이미지 배열' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('계기판 이미지') }),
    __metadata("design:type", Array)
], CreateVehicleInfoDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], description: '실내 이미지 배열' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('실내 이미지') }),
    __metadata("design:type", Array)
], CreateVehicleInfoDto.prototype, "indoorImages", void 0);
class CreateConsumableDto {
}
exports.CreateConsumableDto = CreateConsumableDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('소모품 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('소모품 이름', 0, 100) }),
    __metadata("design:type", String)
], CreateConsumableDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 주기' }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('소모품 교체 주기') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    __metadata("design:type", Number)
], CreateConsumableDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ default: true, description: '소모품 교체 알림 주기' }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('소모품 교체 알림 주기') }),
    __metadata("design:type", Boolean)
], CreateConsumableDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '차량 ID',
        example: 'vehicle-123',
    }),
    __metadata("design:type", String)
], CreateConsumableDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '초기 주행거리',
        example: 0,
    }),
    __metadata("design:type", Number)
], CreateConsumableDto.prototype, "initMileage", void 0);
class CreateMaintenanceDto {
}
exports.CreateMaintenanceDto = CreateMaintenanceDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('날짜', 'YYYY-MM-DD'),
    }),
    __metadata("design:type", String)
], CreateMaintenanceDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    __metadata("design:type", Number)
], CreateMaintenanceDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('비용') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    __metadata("design:type", Number)
], CreateMaintenanceDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], description: '이미지 배열' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지') }),
    __metadata("design:type", Array)
], CreateMaintenanceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '소모품 ID',
        example: 'consumable-123',
    }),
    __metadata("design:type", String)
], CreateMaintenanceDto.prototype, "consumableId", void 0);


/***/ }),

/***/ "./src/application/resource/vehicle/dtos/update-vehicle-info.dto.ts":
/*!**************************************************************************!*\
  !*** ./src/application/resource/vehicle/dtos/update-vehicle-info.dto.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateVehicleInfoDto = exports.UpdateConsumableDto = exports.UpdateMaintenanceDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class UpdateMaintenanceDto {
}
exports.UpdateMaintenanceDto = UpdateMaintenanceDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('날짜', 'YYYY-MM-DD'),
    }),
    __metadata("design:type", String)
], UpdateMaintenanceDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], UpdateMaintenanceDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('비용') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    __metadata("design:type", Number)
], UpdateMaintenanceDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지') }),
    __metadata("design:type", Array)
], UpdateMaintenanceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '소모품 ID',
        example: 'consumable-123',
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateMaintenanceDto.prototype, "consumableId", void 0);
class UpdateConsumableDto {
}
exports.UpdateConsumableDto = UpdateConsumableDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('소모품 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('소모품 이름', 0, 100) }),
    __metadata("design:type", String)
], UpdateConsumableDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 주기' }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('소모품 교체 주기') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    __metadata("design:type", Number)
], UpdateConsumableDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ default: true, description: '소모품 교체 알림 주기' }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('소모품 교체 알림 주기') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateConsumableDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '차량 ID',
        example: 'vehicle-123',
    }),
    __metadata("design:type", String)
], UpdateConsumableDto.prototype, "vehicleInfoId", void 0);
class UpdateVehicleInfoDto {
}
exports.UpdateVehicleInfoDto = UpdateVehicleInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('차량 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('차량 번호', 0, 100) }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateVehicleInfoDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험 이름', 0, 100) }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateVehicleInfoDto.prototype, "insuranceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험 번호', 0, 100) }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateVehicleInfoDto.prototype, "insuranceNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('총 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], UpdateVehicleInfoDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('남은 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], UpdateVehicleInfoDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주차 위치 이미지') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateVehicleInfoDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주행거리계 이미지') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateVehicleInfoDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('실내 이미지') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateVehicleInfoDto.prototype, "indoorImages", void 0);


/***/ }),

/***/ "./src/application/resource/vehicle/dtos/vehicle-response.dto.ts":
/*!***********************************************************************!*\
  !*** ./src/application/resource/vehicle/dtos/vehicle-response.dto.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfoResponseDto = exports.ConsumableResponseDto = exports.MaintenanceResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const file_response_dto_1 = __webpack_require__(/*! @resource/application/file/dtos/file-response.dto */ "./src/application/file/dtos/file-response.dto.ts");
class MaintenanceResponseDto {
}
exports.MaintenanceResponseDto = MaintenanceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "maintenanceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], MaintenanceResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "mileageFromLastMaintenance", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], MaintenanceResponseDto.prototype, "maintanceRequired", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "previousMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], MaintenanceResponseDto.prototype, "isLatest", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "previousDate", void 0);
class ConsumableResponseDto {
}
exports.ConsumableResponseDto = ConsumableResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ConsumableResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ConsumableResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    __metadata("design:type", String)
], ConsumableResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 주기' }),
    __metadata("design:type", Number)
], ConsumableResponseDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 알림 주기' }),
    __metadata("design:type", Boolean)
], ConsumableResponseDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [MaintenanceResponseDto], required: false }),
    __metadata("design:type", Array)
], ConsumableResponseDto.prototype, "maintenances", void 0);
class VehicleInfoResponseDto {
}
exports.VehicleInfoResponseDto = VehicleInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "insuranceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "insuranceNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], VehicleInfoResponseDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], VehicleInfoResponseDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "indoorImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [file_response_dto_1.FileResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "parkingLocationFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [file_response_dto_1.FileResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "odometerFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [file_response_dto_1.FileResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "indoorFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ConsumableResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "consumables", void 0);


/***/ }),

/***/ "./src/application/resource/vehicle/services/consumable.service.ts":
/*!*************************************************************************!*\
  !*** ./src/application/resource/vehicle/services/consumable.service.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const saveConsumable_usecase_1 = __webpack_require__(/*! ../usecases/consumable/saveConsumable.usecase */ "./src/application/resource/vehicle/usecases/consumable/saveConsumable.usecase.ts");
const updateConsumable_usecase_1 = __webpack_require__(/*! ../usecases/consumable/updateConsumable.usecase */ "./src/application/resource/vehicle/usecases/consumable/updateConsumable.usecase.ts");
const deleteConsumable_usecase_1 = __webpack_require__(/*! ../usecases/consumable/deleteConsumable.usecase */ "./src/application/resource/vehicle/usecases/consumable/deleteConsumable.usecase.ts");
const findAllConsumables_usecase_1 = __webpack_require__(/*! ../usecases/consumable/findAllConsumables.usecase */ "./src/application/resource/vehicle/usecases/consumable/findAllConsumables.usecase.ts");
const findOneConsumable_usecase_1 = __webpack_require__(/*! ../usecases/consumable/findOneConsumable.usecase */ "./src/application/resource/vehicle/usecases/consumable/findOneConsumable.usecase.ts");
let ConsumableService = class ConsumableService {
    constructor(saveConsumableUsecase, updateConsumableUsecase, deleteConsumableUsecase, findAllConsumablesUsecase, findOneConsumableUsecase) {
        this.saveConsumableUsecase = saveConsumableUsecase;
        this.updateConsumableUsecase = updateConsumableUsecase;
        this.deleteConsumableUsecase = deleteConsumableUsecase;
        this.findAllConsumablesUsecase = findAllConsumablesUsecase;
        this.findOneConsumableUsecase = findOneConsumableUsecase;
    }
    async save(user, createConsumableDto) {
        return this.saveConsumableUsecase.execute(user, createConsumableDto);
    }
    async findAll(user, vehicleInfoId) {
        return this.findAllConsumablesUsecase.execute(user, vehicleInfoId);
    }
    async findOne(user, consumableId) {
        return this.findOneConsumableUsecase.execute(user, consumableId);
    }
    async update(user, consumableId, updateConsumableDto) {
        return this.updateConsumableUsecase.execute(user, consumableId, updateConsumableDto);
    }
    async delete(user, consumableId) {
        return this.deleteConsumableUsecase.execute(user, consumableId);
    }
};
exports.ConsumableService = ConsumableService;
exports.ConsumableService = ConsumableService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof saveConsumable_usecase_1.SaveConsumableUsecase !== "undefined" && saveConsumable_usecase_1.SaveConsumableUsecase) === "function" ? _a : Object, typeof (_b = typeof updateConsumable_usecase_1.UpdateConsumableUsecase !== "undefined" && updateConsumable_usecase_1.UpdateConsumableUsecase) === "function" ? _b : Object, typeof (_c = typeof deleteConsumable_usecase_1.DeleteConsumableUsecase !== "undefined" && deleteConsumable_usecase_1.DeleteConsumableUsecase) === "function" ? _c : Object, typeof (_d = typeof findAllConsumables_usecase_1.FindAllConsumablesUsecase !== "undefined" && findAllConsumables_usecase_1.FindAllConsumablesUsecase) === "function" ? _d : Object, typeof (_e = typeof findOneConsumable_usecase_1.FindOneConsumableUsecase !== "undefined" && findOneConsumable_usecase_1.FindOneConsumableUsecase) === "function" ? _e : Object])
], ConsumableService);


/***/ }),

/***/ "./src/application/resource/vehicle/services/maintenance.service.ts":
/*!**************************************************************************!*\
  !*** ./src/application/resource/vehicle/services/maintenance.service.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MaintenanceService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const saveMaintenance_usecase_1 = __webpack_require__(/*! ../usecases/maintenance/saveMaintenance.usecase */ "./src/application/resource/vehicle/usecases/maintenance/saveMaintenance.usecase.ts");
const updateMaintenance_usecase_1 = __webpack_require__(/*! ../usecases/maintenance/updateMaintenance.usecase */ "./src/application/resource/vehicle/usecases/maintenance/updateMaintenance.usecase.ts");
const deleteMaintenance_usecase_1 = __webpack_require__(/*! ../usecases/maintenance/deleteMaintenance.usecase */ "./src/application/resource/vehicle/usecases/maintenance/deleteMaintenance.usecase.ts");
const findAllMaintenancesByVehicleInfoId_usecase_1 = __webpack_require__(/*! ../usecases/maintenance/findAllMaintenancesByVehicleInfoId.usecase */ "./src/application/resource/vehicle/usecases/maintenance/findAllMaintenancesByVehicleInfoId.usecase.ts");
const findOneMaintenance_usecase_1 = __webpack_require__(/*! ../usecases/maintenance/findOneMaintenance.usecase */ "./src/application/resource/vehicle/usecases/maintenance/findOneMaintenance.usecase.ts");
let MaintenanceService = class MaintenanceService {
    constructor(saveMaintenanceUsecase, updateMaintenanceUsecase, deleteMaintenanceUsecase, findAllMaintenancesByVehicleInfoIdUsecase, findOneMaintenanceUsecase) {
        this.saveMaintenanceUsecase = saveMaintenanceUsecase;
        this.updateMaintenanceUsecase = updateMaintenanceUsecase;
        this.deleteMaintenanceUsecase = deleteMaintenanceUsecase;
        this.findAllMaintenancesByVehicleInfoIdUsecase = findAllMaintenancesByVehicleInfoIdUsecase;
        this.findOneMaintenanceUsecase = findOneMaintenanceUsecase;
    }
    async save(user, createMaintenanceDto) {
        return this.saveMaintenanceUsecase.execute(user, createMaintenanceDto);
    }
    async findAllByVehicleInfoId(user, vehicleInfoId, page, limit) {
        return this.findAllMaintenancesByVehicleInfoIdUsecase.execute(user, vehicleInfoId, page, limit);
    }
    async findOne(user, maintenanceId) {
        return this.findOneMaintenanceUsecase.execute(user, maintenanceId);
    }
    async update(user, maintenanceId, updateMaintenanceDto) {
        return this.updateMaintenanceUsecase.execute(user, maintenanceId, updateMaintenanceDto);
    }
    async delete(user, maintenanceId) {
        return this.deleteMaintenanceUsecase.execute(user, maintenanceId);
    }
};
exports.MaintenanceService = MaintenanceService;
exports.MaintenanceService = MaintenanceService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof saveMaintenance_usecase_1.SaveMaintenanceUsecase !== "undefined" && saveMaintenance_usecase_1.SaveMaintenanceUsecase) === "function" ? _a : Object, typeof (_b = typeof updateMaintenance_usecase_1.UpdateMaintenanceUsecase !== "undefined" && updateMaintenance_usecase_1.UpdateMaintenanceUsecase) === "function" ? _b : Object, typeof (_c = typeof deleteMaintenance_usecase_1.DeleteMaintenanceUsecase !== "undefined" && deleteMaintenance_usecase_1.DeleteMaintenanceUsecase) === "function" ? _c : Object, typeof (_d = typeof findAllMaintenancesByVehicleInfoId_usecase_1.FindAllMaintenancesByVehicleInfoIdUsecase !== "undefined" && findAllMaintenancesByVehicleInfoId_usecase_1.FindAllMaintenancesByVehicleInfoIdUsecase) === "function" ? _d : Object, typeof (_e = typeof findOneMaintenance_usecase_1.FindOneMaintenanceUsecase !== "undefined" && findOneMaintenance_usecase_1.FindOneMaintenanceUsecase) === "function" ? _e : Object])
], MaintenanceService);


/***/ }),

/***/ "./src/application/resource/vehicle/services/vehicle-info.service.ts":
/*!***************************************************************************!*\
  !*** ./src/application/resource/vehicle/services/vehicle-info.service.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfoService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const findVehicleInfo_usecase_1 = __webpack_require__(/*! ../usecases/vehicle-info/findVehicleInfo.usecase */ "./src/application/resource/vehicle/usecases/vehicle-info/findVehicleInfo.usecase.ts");
const updateVehicleInfo_usecase_1 = __webpack_require__(/*! ../usecases/vehicle-info/updateVehicleInfo.usecase */ "./src/application/resource/vehicle/usecases/vehicle-info/updateVehicleInfo.usecase.ts");
const vehicle_info_context_service_1 = __webpack_require__(/*! @src/context/resource/services/vehicle-info.context.service */ "./src/context/resource/services/vehicle-info.context.service.ts");
const file_context_service_1 = __webpack_require__(/*! @src/context/file/services/file.context.service */ "./src/context/file/services/file.context.service.ts");
let VehicleInfoService = class VehicleInfoService {
    constructor(findVehicleInfoUsecase, updateVehicleInfoUsecase, vehicleInfoContextService, fileContextService) {
        this.findVehicleInfoUsecase = findVehicleInfoUsecase;
        this.updateVehicleInfoUsecase = updateVehicleInfoUsecase;
        this.vehicleInfoContextService = vehicleInfoContextService;
        this.fileContextService = fileContextService;
    }
    async findVehicleInfo(vehicleInfoId) {
        return this.findVehicleInfoUsecase.execute(vehicleInfoId);
    }
    async updateVehicleInfo(vehicleInfoId, updateVehicleInfoDto) {
        return this.updateVehicleInfoUsecase.execute(vehicleInfoId, updateVehicleInfoDto);
    }
    async findReturnList(vehicleInfoId) {
        const returnList = await this.vehicleInfoContextService.반납_리스트를_조회한다(vehicleInfoId);
        return returnList.map((returnVehicle) => {
            return {
                reservationVehicleId: returnVehicle.reservationVehicleId,
                returnedAt: returnVehicle.returnedAt,
                returnedBy: returnVehicle.returnedBy,
                endOdometer: returnVehicle.endOdometer,
                location: returnVehicle.location,
            };
        });
    }
    async findReturnDetail(reservationVehicleId) {
        const returnDetail = await this.vehicleInfoContextService.반납_상세정보를_조회한다(reservationVehicleId);
        const reservationVehicleFile = await this.fileContextService.차량예약_파일을_조회한다(reservationVehicleId);
        return {
            reservationVehicleId: returnDetail.reservationVehicleId,
            returnedAt: returnDetail.returnedAt,
            returnedBy: returnDetail.returnedBy,
            endOdometer: returnDetail.endOdometer,
            location: returnDetail.location,
            parkingLocationImages: reservationVehicleFile.parkingLocationImages.map((image) => image.filePath),
            odometerImages: reservationVehicleFile.odometerImages.map((image) => image.filePath),
            indoorImages: reservationVehicleFile.indoorImages.map((image) => image.filePath),
        };
    }
};
exports.VehicleInfoService = VehicleInfoService;
exports.VehicleInfoService = VehicleInfoService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof findVehicleInfo_usecase_1.FindVehicleInfoUsecase !== "undefined" && findVehicleInfo_usecase_1.FindVehicleInfoUsecase) === "function" ? _a : Object, typeof (_b = typeof updateVehicleInfo_usecase_1.UpdateVehicleInfoUsecase !== "undefined" && updateVehicleInfo_usecase_1.UpdateVehicleInfoUsecase) === "function" ? _b : Object, typeof (_c = typeof vehicle_info_context_service_1.VehicleInfoContextService !== "undefined" && vehicle_info_context_service_1.VehicleInfoContextService) === "function" ? _c : Object, typeof (_d = typeof file_context_service_1.FileContextService !== "undefined" && file_context_service_1.FileContextService) === "function" ? _d : Object])
], VehicleInfoService);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/consumable/deleteConsumable.usecase.ts":
/*!******************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/consumable/deleteConsumable.usecase.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DeleteConsumableUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
let DeleteConsumableUsecase = class DeleteConsumableUsecase {
    constructor(consumableService) {
        this.consumableService = consumableService;
    }
    async execute(user, consumableId) {
        return await this.consumableService.delete(consumableId);
    }
};
exports.DeleteConsumableUsecase = DeleteConsumableUsecase;
exports.DeleteConsumableUsecase = DeleteConsumableUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _a : Object])
], DeleteConsumableUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/consumable/findAllConsumables.usecase.ts":
/*!********************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/consumable/findAllConsumables.usecase.ts ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindAllConsumablesUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
let FindAllConsumablesUsecase = class FindAllConsumablesUsecase {
    constructor(consumableService) {
        this.consumableService = consumableService;
    }
    async execute(user, vehicleInfoId) {
        const consumables = await this.consumableService.findAll({
            where: {
                vehicleInfoId: vehicleInfoId,
            },
        });
        return consumables.map((consumable) => ({
            consumableId: consumable.consumableId,
            vehicleInfoId: consumable.vehicleInfoId,
            name: consumable.name,
            replaceCycle: consumable.replaceCycle,
            notifyReplacementCycle: consumable.notifyReplacementCycle,
        }));
    }
};
exports.FindAllConsumablesUsecase = FindAllConsumablesUsecase;
exports.FindAllConsumablesUsecase = FindAllConsumablesUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _a : Object])
], FindAllConsumablesUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/consumable/findOneConsumable.usecase.ts":
/*!*******************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/consumable/findOneConsumable.usecase.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindOneConsumableUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
let FindOneConsumableUsecase = class FindOneConsumableUsecase {
    constructor(consumableService) {
        this.consumableService = consumableService;
    }
    async execute(user, consumableId) {
        const consumable = await this.consumableService.findOne({
            where: {
                consumableId: consumableId,
            },
            relations: ['maintenances'],
        });
        return {
            consumableId: consumable.consumableId,
            vehicleInfoId: consumable.vehicleInfoId,
            name: consumable.name,
            replaceCycle: consumable.replaceCycle,
            notifyReplacementCycle: consumable.notifyReplacementCycle,
            maintenances: consumable.maintenances.map((maintenance) => ({
                maintenanceId: maintenance.maintenanceId,
                consumableId: maintenance.consumableId,
                date: maintenance.date,
                mileage: maintenance.mileage,
                cost: maintenance.cost,
                images: maintenance.images,
            })),
        };
    }
};
exports.FindOneConsumableUsecase = FindOneConsumableUsecase;
exports.FindOneConsumableUsecase = FindOneConsumableUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _a : Object])
], FindOneConsumableUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/consumable/index.ts":
/*!***********************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/consumable/index.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./saveConsumable.usecase */ "./src/application/resource/vehicle/usecases/consumable/saveConsumable.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./updateConsumable.usecase */ "./src/application/resource/vehicle/usecases/consumable/updateConsumable.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./deleteConsumable.usecase */ "./src/application/resource/vehicle/usecases/consumable/deleteConsumable.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findAllConsumables.usecase */ "./src/application/resource/vehicle/usecases/consumable/findAllConsumables.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findOneConsumable.usecase */ "./src/application/resource/vehicle/usecases/consumable/findOneConsumable.usecase.ts"), exports);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/consumable/saveConsumable.usecase.ts":
/*!****************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/consumable/saveConsumable.usecase.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SaveConsumableUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
let SaveConsumableUsecase = class SaveConsumableUsecase {
    constructor(consumableService, vehicleInfoService) {
        this.consumableService = consumableService;
        this.vehicleInfoService = vehicleInfoService;
    }
    async execute(user, createConsumableDto) {
        const vehicleInfo = await this.vehicleInfoService.findOne({
            where: {
                vehicleInfoId: createConsumableDto.vehicleInfoId,
            },
            relations: ['consumables'],
        });
        if (!vehicleInfo)
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.NOT_FOUND);
        createConsumableDto.initMileage = vehicleInfo.totalMileage;
        if (vehicleInfo.consumables.length > 0) {
            const hasSameName = vehicleInfo.consumables.some((consumable) => consumable.name === createConsumableDto.name);
            if (hasSameName)
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.ALREADY_EXISTS);
        }
        return this.consumableService.save(createConsumableDto);
    }
};
exports.SaveConsumableUsecase = SaveConsumableUsecase;
exports.SaveConsumableUsecase = SaveConsumableUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _a : Object, typeof (_b = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _b : Object])
], SaveConsumableUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/consumable/updateConsumable.usecase.ts":
/*!******************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/consumable/updateConsumable.usecase.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateConsumableUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
let UpdateConsumableUsecase = class UpdateConsumableUsecase {
    constructor(consumableService, vehicleInfoService) {
        this.consumableService = consumableService;
        this.vehicleInfoService = vehicleInfoService;
    }
    async execute(user, consumableId, updateConsumableDto) {
        const vehicleInfo = await this.vehicleInfoService.findOne({
            where: {
                vehicleInfoId: updateConsumableDto.vehicleInfoId,
            },
            relations: ['consumables'],
        });
        if (!vehicleInfo)
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.NOT_FOUND);
        if (vehicleInfo.consumables.length > 0) {
            const hasSameName = vehicleInfo.consumables.some((consumable) => consumable.name === updateConsumableDto.name && consumable.consumableId !== consumableId);
            if (hasSameName)
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.ALREADY_EXISTS);
        }
        return this.consumableService.update(consumableId, updateConsumableDto);
    }
};
exports.UpdateConsumableUsecase = UpdateConsumableUsecase;
exports.UpdateConsumableUsecase = UpdateConsumableUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _a : Object, typeof (_b = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _b : Object])
], UpdateConsumableUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/maintenance/deleteMaintenance.usecase.ts":
/*!********************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/maintenance/deleteMaintenance.usecase.ts ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DeleteMaintenanceUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const maintenance_service_1 = __webpack_require__(/*! @resource/domain/maintenance/maintenance.service */ "./src/domain/maintenance/maintenance.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DeleteMaintenanceUsecase = class DeleteMaintenanceUsecase {
    constructor(maintenanceService, fileService, dataSource) {
        this.maintenanceService = maintenanceService;
        this.fileService = fileService;
        this.dataSource = dataSource;
    }
    async execute(user, maintenanceId) {
        const maintenance = await this.maintenanceService.findOne({
            where: { maintenanceId },
        });
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await this.maintenanceService.delete(maintenanceId, { queryRunner });
            await this.fileService.deleteFilesByFilePath(maintenance.images, { queryRunner });
            await queryRunner.commitTransaction();
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException('Failed to delete maintenance');
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.DeleteMaintenanceUsecase = DeleteMaintenanceUsecase;
exports.DeleteMaintenanceUsecase = DeleteMaintenanceUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.DomainMaintenanceService !== "undefined" && maintenance_service_1.DomainMaintenanceService) === "function" ? _a : Object, typeof (_b = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _b : Object, typeof (_c = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _c : Object])
], DeleteMaintenanceUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/maintenance/findAllMaintenances.usecase.ts":
/*!**********************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/maintenance/findAllMaintenances.usecase.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindAllMaintenancesUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const maintenance_service_1 = __webpack_require__(/*! @src/domain/maintenance/maintenance.service */ "./src/domain/maintenance/maintenance.service.ts");
let FindAllMaintenancesUsecase = class FindAllMaintenancesUsecase {
    constructor(maintenanceService) {
        this.maintenanceService = maintenanceService;
    }
    async execute(user, consumableId) {
        return this.maintenanceService.findAll({
            where: { consumableId },
        });
    }
};
exports.FindAllMaintenancesUsecase = FindAllMaintenancesUsecase;
exports.FindAllMaintenancesUsecase = FindAllMaintenancesUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.DomainMaintenanceService !== "undefined" && maintenance_service_1.DomainMaintenanceService) === "function" ? _a : Object])
], FindAllMaintenancesUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/maintenance/findAllMaintenancesByVehicleInfoId.usecase.ts":
/*!*************************************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/maintenance/findAllMaintenancesByVehicleInfoId.usecase.ts ***!
  \*************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindAllMaintenancesByVehicleInfoIdUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const maintenance_service_1 = __webpack_require__(/*! @src/domain/maintenance/maintenance.service */ "./src/domain/maintenance/maintenance.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
let FindAllMaintenancesByVehicleInfoIdUsecase = class FindAllMaintenancesByVehicleInfoIdUsecase {
    constructor(maintenanceService, vehicleInfoService) {
        this.maintenanceService = maintenanceService;
        this.vehicleInfoService = vehicleInfoService;
    }
    async execute(user, vehicleInfoId, page, limit) {
        const vehicleInfo = await this.vehicleInfoService.findOne({
            where: { vehicleInfoId },
            relations: ['resource', 'consumables', 'consumables.maintenances'],
            withDeleted: true,
        });
        const options = {
            where: {
                maintenanceId: (0, typeorm_1.In)(vehicleInfo.consumables.flatMap((consumable) => consumable.maintenances.map((maintenance) => maintenance.maintenanceId))),
            },
            withDeleted: true,
        };
        const count = await this.maintenanceService.count(options);
        if (page && limit) {
            options.skip = (page - 1) * limit;
            options.take = limit;
        }
        options.relations = ['consumable'];
        options.order = { createdAt: 'DESC' };
        const maintenances = await this.maintenanceService.findAll(options);
        return {
            items: maintenances.map((maintenance, index, array) => ({
                maintenanceId: maintenance.maintenanceId,
                consumableId: maintenance.consumableId,
                date: maintenance.date,
                mileage: maintenance.mileage,
                cost: maintenance.cost,
                images: maintenance.images,
                consumableName: maintenance.consumable.name,
                resourceName: vehicleInfo.resource.name,
                previousMileage: index !== array.length - 1 ? array[index + 1].mileage : 0,
                isLatest: index === 0,
            })),
            meta: {
                total: count,
                page,
                limit,
                hasNext: page * limit < count,
            },
        };
    }
};
exports.FindAllMaintenancesByVehicleInfoIdUsecase = FindAllMaintenancesByVehicleInfoIdUsecase;
exports.FindAllMaintenancesByVehicleInfoIdUsecase = FindAllMaintenancesByVehicleInfoIdUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.DomainMaintenanceService !== "undefined" && maintenance_service_1.DomainMaintenanceService) === "function" ? _a : Object, typeof (_b = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _b : Object])
], FindAllMaintenancesByVehicleInfoIdUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/maintenance/findOneMaintenance.usecase.ts":
/*!*********************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/maintenance/findOneMaintenance.usecase.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindOneMaintenanceUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const maintenance_service_1 = __webpack_require__(/*! @src/domain/maintenance/maintenance.service */ "./src/domain/maintenance/maintenance.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let FindOneMaintenanceUsecase = class FindOneMaintenanceUsecase {
    constructor(maintenanceService) {
        this.maintenanceService = maintenanceService;
    }
    async execute(user, maintenanceId) {
        const maintenance = await this.maintenanceService.findOne({
            where: { maintenanceId },
            relations: ['consumable', 'consumable.vehicleInfo', 'consumable.vehicleInfo.resource'],
            withDeleted: true,
        });
        const previousMaintenance = await this.maintenanceService.findOne({
            where: { consumableId: maintenance.consumableId, createdAt: (0, typeorm_1.LessThan)(maintenance.createdAt) },
            order: { createdAt: 'DESC' },
        });
        maintenance.createdAt.setTime(maintenance.createdAt.getTime() + 1);
        const nextMaintenance = await this.maintenanceService.findOne({
            where: { consumableId: maintenance.consumableId, createdAt: (0, typeorm_1.MoreThan)(maintenance.createdAt) },
            order: { createdAt: 'ASC' },
        });
        return {
            maintenanceId: maintenance.maintenanceId,
            consumableId: maintenance.consumableId,
            date: maintenance.date,
            mileage: maintenance.mileage,
            cost: maintenance.cost,
            images: maintenance.images,
            consumableName: maintenance.consumable.name,
            resourceName: maintenance.consumable.vehicleInfo.resource.name,
            previousMileage: previousMaintenance ? previousMaintenance.mileage : 0,
            previousDate: previousMaintenance ? previousMaintenance.date : null,
            isLatest: !nextMaintenance,
        };
    }
};
exports.FindOneMaintenanceUsecase = FindOneMaintenanceUsecase;
exports.FindOneMaintenanceUsecase = FindOneMaintenanceUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.DomainMaintenanceService !== "undefined" && maintenance_service_1.DomainMaintenanceService) === "function" ? _a : Object])
], FindOneMaintenanceUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/maintenance/index.ts":
/*!************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/maintenance/index.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./saveMaintenance.usecase */ "./src/application/resource/vehicle/usecases/maintenance/saveMaintenance.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./updateMaintenance.usecase */ "./src/application/resource/vehicle/usecases/maintenance/updateMaintenance.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./deleteMaintenance.usecase */ "./src/application/resource/vehicle/usecases/maintenance/deleteMaintenance.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findAllMaintenances.usecase */ "./src/application/resource/vehicle/usecases/maintenance/findAllMaintenances.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findOneMaintenance.usecase */ "./src/application/resource/vehicle/usecases/maintenance/findOneMaintenance.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findAllMaintenancesByVehicleInfoId.usecase */ "./src/application/resource/vehicle/usecases/maintenance/findAllMaintenancesByVehicleInfoId.usecase.ts"), exports);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/maintenance/saveMaintenance.usecase.ts":
/*!******************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/maintenance/saveMaintenance.usecase.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SaveMaintenanceUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const maintenance_service_1 = __webpack_require__(/*! @src/domain/maintenance/maintenance.service */ "./src/domain/maintenance/maintenance.service.ts");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const notification_service_1 = __webpack_require__(/*! @src/application/notification/services/notification.service */ "./src/application/notification/services/notification.service.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
let SaveMaintenanceUsecase = class SaveMaintenanceUsecase {
    constructor(maintenanceService, consumableService, vehicleInfoService, employeeService, notificationService, dataSource, fileService) {
        this.maintenanceService = maintenanceService;
        this.consumableService = consumableService;
        this.vehicleInfoService = vehicleInfoService;
        this.employeeService = employeeService;
        this.notificationService = notificationService;
        this.dataSource = dataSource;
        this.fileService = fileService;
    }
    async execute(user, createMaintenanceDto) {
        const existingMaintenance = await this.maintenanceService.findOne({
            where: {
                consumableId: createMaintenanceDto.consumableId,
                date: (0, typeorm_1.MoreThanOrEqual)(createMaintenanceDto.date),
            },
        });
        if (existingMaintenance) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.INVALID_DATE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            if (!createMaintenanceDto.images)
                createMaintenanceDto.images = [];
            createMaintenanceDto.images = createMaintenanceDto.images.map((image) => this.fileService.getFileUrl(image));
            const maintenance = await this.maintenanceService.save(createMaintenanceDto, { queryRunner });
            await this.fileService.updateTemporaryFiles(createMaintenanceDto.images, false, { queryRunner });
            if (createMaintenanceDto.mileage) {
                const consumable = await this.consumableService.findOne({
                    where: { consumableId: maintenance.consumableId },
                    relations: ['vehicleInfo'],
                });
                if (consumable.vehicleInfo.totalMileage < createMaintenanceDto.mileage) {
                    await this.vehicleInfoService.update(consumable.vehicleInfo.vehicleInfoId, {
                        totalMileage: createMaintenanceDto.mileage,
                    }, { queryRunner });
                }
            }
            await queryRunner.commitTransaction();
            const systemAdmins = await this.employeeService.findAll({
                where: {
                    roles: (0, typeorm_1.Raw)(() => `'${role_type_enum_1.Role.SYSTEM_ADMIN}' = ANY("roles")`),
                },
            });
            const consumable = await this.consumableService.findOne({
                where: { consumableId: maintenance.consumableId },
                relations: ['vehicleInfo', 'vehicleInfo.resource'],
                withDeleted: true,
            });
            await this.notificationService.createNotification(notification_type_enum_1.NotificationType.RESOURCE_MAINTENANCE_COMPLETED, {
                resourceId: consumable.vehicleInfo.resource.resourceId,
                resourceType: consumable.vehicleInfo.resource.type,
                consumableName: consumable.name,
                resourceName: consumable.vehicleInfo.resource.name,
            }, systemAdmins.map((admin) => admin.employeeId));
            return maintenance;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.SaveMaintenanceUsecase = SaveMaintenanceUsecase;
exports.SaveMaintenanceUsecase = SaveMaintenanceUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.DomainMaintenanceService !== "undefined" && maintenance_service_1.DomainMaintenanceService) === "function" ? _a : Object, typeof (_b = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _b : Object, typeof (_c = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _c : Object, typeof (_d = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _d : Object, typeof (_e = typeof notification_service_1.NotificationService !== "undefined" && notification_service_1.NotificationService) === "function" ? _e : Object, typeof (_f = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _f : Object, typeof (_g = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _g : Object])
], SaveMaintenanceUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/maintenance/updateMaintenance.usecase.ts":
/*!********************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/maintenance/updateMaintenance.usecase.ts ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateMaintenanceUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const maintenance_service_1 = __webpack_require__(/*! @src/domain/maintenance/maintenance.service */ "./src/domain/maintenance/maintenance.service.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
let UpdateMaintenanceUsecase = class UpdateMaintenanceUsecase {
    constructor(maintenanceService, vehicleInfoService, dataSource, fileService) {
        this.maintenanceService = maintenanceService;
        this.vehicleInfoService = vehicleInfoService;
        this.dataSource = dataSource;
        this.fileService = fileService;
    }
    async execute(user, maintenanceId, updateMaintenanceDto) {
        if (updateMaintenanceDto.date) {
            const existingMaintenance = await this.maintenanceService.findOne({
                where: {
                    maintenanceId: (0, typeorm_1.Not)(maintenanceId),
                    consumableId: updateMaintenanceDto.consumableId,
                    date: (0, typeorm_1.MoreThan)(updateMaintenanceDto.date),
                },
            });
            if (existingMaintenance) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.INVALID_DATE);
            }
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            if (!updateMaintenanceDto.images)
                updateMaintenanceDto.images = [];
            updateMaintenanceDto.images = updateMaintenanceDto.images.map((image) => this.fileService.getFileUrl(image));
            const maintenance = await this.maintenanceService.update(maintenanceId, updateMaintenanceDto);
            await this.fileService.updateTemporaryFiles(updateMaintenanceDto.images, false, { queryRunner });
            if (updateMaintenanceDto.mileage) {
                const savedMaintenance = await this.maintenanceService.findOne({
                    where: { maintenanceId: maintenance.maintenanceId },
                    relations: ['consumable', 'consumable.vehicleInfo'],
                    order: { createdAt: 'DESC' },
                    withDeleted: true,
                });
                if (savedMaintenance.consumable.vehicleInfo.totalMileage < updateMaintenanceDto.mileage) {
                    await this.vehicleInfoService.update(savedMaintenance.consumable.vehicleInfo.vehicleInfoId, {
                        totalMileage: updateMaintenanceDto.mileage,
                    }, { queryRunner });
                }
            }
            await queryRunner.commitTransaction();
            return await this.maintenanceService.findOne({
                where: {
                    maintenanceId: maintenanceId,
                },
            });
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.UpdateMaintenanceUsecase = UpdateMaintenanceUsecase;
exports.UpdateMaintenanceUsecase = UpdateMaintenanceUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.DomainMaintenanceService !== "undefined" && maintenance_service_1.DomainMaintenanceService) === "function" ? _a : Object, typeof (_b = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _b : Object, typeof (_c = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _c : Object, typeof (_d = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _d : Object])
], UpdateMaintenanceUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/vehicle-info/findVehicleInfo.usecase.ts":
/*!*******************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/vehicle-info/findVehicleInfo.usecase.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FindVehicleInfoUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const common_2 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
let FindVehicleInfoUsecase = class FindVehicleInfoUsecase {
    constructor(vehicleInfoService) {
        this.vehicleInfoService = vehicleInfoService;
    }
    async execute(vehicleInfoId) {
        const vehicleInfo = await this.vehicleInfoService.findOne({
            where: { vehicleInfoId },
        });
        if (!vehicleInfo) {
            throw new common_2.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.NOT_FOUND);
        }
        return {
            vehicleInfoId: vehicleInfo.vehicleInfoId,
            resourceId: vehicleInfo.resourceId,
            totalMileage: Number(vehicleInfo.totalMileage),
            leftMileage: Number(vehicleInfo.leftMileage),
            insuranceName: vehicleInfo.insuranceName,
            insuranceNumber: vehicleInfo.insuranceNumber,
            parkingLocationImages: vehicleInfo.parkingLocationImages,
            odometerImages: vehicleInfo.odometerImages,
            indoorImages: vehicleInfo.indoorImages,
        };
    }
};
exports.FindVehicleInfoUsecase = FindVehicleInfoUsecase;
exports.FindVehicleInfoUsecase = FindVehicleInfoUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _a : Object])
], FindVehicleInfoUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/vehicle-info/index.ts":
/*!*************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/vehicle-info/index.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./updateVehicleInfo.usecase */ "./src/application/resource/vehicle/usecases/vehicle-info/updateVehicleInfo.usecase.ts"), exports);
__exportStar(__webpack_require__(/*! ./findVehicleInfo.usecase */ "./src/application/resource/vehicle/usecases/vehicle-info/findVehicleInfo.usecase.ts"), exports);


/***/ }),

/***/ "./src/application/resource/vehicle/usecases/vehicle-info/updateVehicleInfo.usecase.ts":
/*!*********************************************************************************************!*\
  !*** ./src/application/resource/vehicle/usecases/vehicle-info/updateVehicleInfo.usecase.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateVehicleInfoUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let UpdateVehicleInfoUsecase = class UpdateVehicleInfoUsecase {
    constructor(vehicleInfoService, consumableService, fileService, dataSource) {
        this.vehicleInfoService = vehicleInfoService;
        this.consumableService = consumableService;
        this.fileService = fileService;
        this.dataSource = dataSource;
    }
    async execute(vehicleInfoId, updateVehicleInfoDto) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            if (!updateVehicleInfoDto.parkingLocationImages)
                updateVehicleInfoDto.parkingLocationImages = [];
            if (!updateVehicleInfoDto.odometerImages)
                updateVehicleInfoDto.odometerImages = [];
            if (!updateVehicleInfoDto.indoorImages)
                updateVehicleInfoDto.indoorImages = [];
            updateVehicleInfoDto.parkingLocationImages = updateVehicleInfoDto.parkingLocationImages.map((image) => this.fileService.getFileUrl(image));
            updateVehicleInfoDto.odometerImages = updateVehicleInfoDto.odometerImages.map((image) => this.fileService.getFileUrl(image));
            updateVehicleInfoDto.indoorImages = updateVehicleInfoDto.indoorImages.map((image) => this.fileService.getFileUrl(image));
            const vehicleInfo = await this.vehicleInfoService.update(vehicleInfoId, updateVehicleInfoDto, {
                queryRunner,
            });
            const images = [
                ...updateVehicleInfoDto.parkingLocationImages,
                ...updateVehicleInfoDto.odometerImages,
                ...updateVehicleInfoDto.indoorImages,
            ];
            if (images.length > 0) {
                await this.fileService.updateTemporaryFiles(images, false, {
                    queryRunner,
                });
            }
            const hasConsumables = await this.consumableService.count({
                where: {
                    vehicleInfoId: vehicleInfoId,
                },
            });
            if (hasConsumables === 0) {
                const sourceConsumables = await queryRunner.manager
                    .createQueryBuilder(entities_1.Consumable, 'consumable')
                    .select('DISTINCT ON (consumable.name) consumable.name, consumable.notifyReplacementCycle, consumable.replaceCycle')
                    .where('consumable.vehicleInfoId != :vehicleInfoId', { vehicleInfoId })
                    .orderBy('consumable.name', 'ASC')
                    .getRawMany();
                const newConsumables = sourceConsumables.map((consumable) => {
                    const newConsumable = new entities_1.Consumable();
                    newConsumable.vehicleInfoId = vehicleInfoId;
                    newConsumable.name = consumable.name;
                    newConsumable.notifyReplacementCycle = consumable.notifyReplacementCycle;
                    newConsumable.replaceCycle = consumable.replaceCycle;
                    newConsumable.initMileage = updateVehicleInfoDto.totalMileage || 0;
                    return newConsumable;
                });
                await this.consumableService.bulkCreate(newConsumables, {
                    queryRunner,
                });
            }
            await queryRunner.commitTransaction();
            return {
                vehicleInfoId: vehicleInfo.vehicleInfoId,
                resourceId: vehicleInfo.resourceId,
                totalMileage: Number(vehicleInfo.totalMileage),
                leftMileage: Number(vehicleInfo.leftMileage),
                insuranceName: vehicleInfo.insuranceName,
                insuranceNumber: vehicleInfo.insuranceNumber,
                parkingLocationImages: vehicleInfo.parkingLocationImages,
                odometerImages: vehicleInfo.odometerImages,
                indoorImages: vehicleInfo.indoorImages,
            };
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.UpdateVehicleInfoUsecase = UpdateVehicleInfoUsecase;
exports.UpdateVehicleInfoUsecase = UpdateVehicleInfoUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _a : Object, typeof (_b = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _b : Object, typeof (_c = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _c : Object, typeof (_d = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _d : Object])
], UpdateVehicleInfoUsecase);


/***/ }),

/***/ "./src/application/resource/vehicle/vehicle.module.ts":
/*!************************************************************!*\
  !*** ./src/application/resource/vehicle/vehicle.module.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleResourceModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const admin_vehicle_info_controller_1 = __webpack_require__(/*! ./controllers/admin.vehicle-info.controller */ "./src/application/resource/vehicle/controllers/admin.vehicle-info.controller.ts");
const admin_consumable_controller_1 = __webpack_require__(/*! ./controllers/admin.consumable.controller */ "./src/application/resource/vehicle/controllers/admin.consumable.controller.ts");
const admin_maintenance_controller_1 = __webpack_require__(/*! ./controllers/admin.maintenance.controller */ "./src/application/resource/vehicle/controllers/admin.maintenance.controller.ts");
const consumable_controller_1 = __webpack_require__(/*! ./controllers/consumable.controller */ "./src/application/resource/vehicle/controllers/consumable.controller.ts");
const maintenance_controller_1 = __webpack_require__(/*! ./controllers/maintenance.controller */ "./src/application/resource/vehicle/controllers/maintenance.controller.ts");
const consumable_module_1 = __webpack_require__(/*! @src/domain/consumable/consumable.module */ "./src/domain/consumable/consumable.module.ts");
const maintenance_module_1 = __webpack_require__(/*! @src/domain/maintenance/maintenance.module */ "./src/domain/maintenance/maintenance.module.ts");
const vehicle_info_module_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.module */ "./src/domain/vehicle-info/vehicle-info.module.ts");
const employee_module_1 = __webpack_require__(/*! @src/domain/employee/employee.module */ "./src/domain/employee/employee.module.ts");
const notification_module_1 = __webpack_require__(/*! @src/application/notification/notification.module */ "./src/application/notification/notification.module.ts");
const vehicle_info_service_1 = __webpack_require__(/*! ./services/vehicle-info.service */ "./src/application/resource/vehicle/services/vehicle-info.service.ts");
const consumable_service_1 = __webpack_require__(/*! ./services/consumable.service */ "./src/application/resource/vehicle/services/consumable.service.ts");
const maintenance_service_1 = __webpack_require__(/*! ./services/maintenance.service */ "./src/application/resource/vehicle/services/maintenance.service.ts");
const vehicle_info_1 = __webpack_require__(/*! ./usecases/vehicle-info */ "./src/application/resource/vehicle/usecases/vehicle-info/index.ts");
const consumable_1 = __webpack_require__(/*! ./usecases/consumable */ "./src/application/resource/vehicle/usecases/consumable/index.ts");
const maintenance_1 = __webpack_require__(/*! ./usecases/maintenance */ "./src/application/resource/vehicle/usecases/maintenance/index.ts");
const file_module_1 = __webpack_require__(/*! @src/domain/file/file.module */ "./src/domain/file/file.module.ts");
const resource_context_module_1 = __webpack_require__(/*! @src/context/resource/resource.context.module */ "./src/context/resource/resource.context.module.ts");
const file_context_module_1 = __webpack_require__(/*! @src/context/file/file.context.module */ "./src/context/file/file.context.module.ts");
const admin_reservation_vehicle_controller_1 = __webpack_require__(/*! ./controllers/admin.reservation-vehicle.controller */ "./src/application/resource/vehicle/controllers/admin.reservation-vehicle.controller.ts");
let VehicleResourceModule = class VehicleResourceModule {
};
exports.VehicleResourceModule = VehicleResourceModule;
exports.VehicleResourceModule = VehicleResourceModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([entities_1.VehicleInfo, entities_1.Consumable, entities_1.Maintenance, entities_1.Employee, entities_1.Notification, entities_1.File]),
            vehicle_info_module_1.DomainVehicleInfoModule,
            consumable_module_1.DomainConsumableModule,
            maintenance_module_1.DomainMaintenanceModule,
            employee_module_1.DomainEmployeeModule,
            notification_module_1.NotificationModule,
            file_module_1.DomainFileModule,
            resource_context_module_1.ResourceContextModule,
            file_context_module_1.FileContextModule,
        ],
        controllers: [
            admin_vehicle_info_controller_1.AdminVehicleInfoController,
            admin_consumable_controller_1.AdminConsumableController,
            admin_maintenance_controller_1.AdminMaintenanceController,
            consumable_controller_1.UserConsumableController,
            maintenance_controller_1.UserMaintenanceController,
            admin_reservation_vehicle_controller_1.AdminReservationVehicleController,
        ],
        providers: [
            vehicle_info_service_1.VehicleInfoService,
            consumable_service_1.ConsumableService,
            maintenance_service_1.MaintenanceService,
            vehicle_info_1.FindVehicleInfoUsecase,
            vehicle_info_1.UpdateVehicleInfoUsecase,
            consumable_1.SaveConsumableUsecase,
            consumable_1.UpdateConsumableUsecase,
            consumable_1.DeleteConsumableUsecase,
            consumable_1.FindAllConsumablesUsecase,
            consumable_1.FindOneConsumableUsecase,
            maintenance_1.SaveMaintenanceUsecase,
            maintenance_1.UpdateMaintenanceUsecase,
            maintenance_1.DeleteMaintenanceUsecase,
            maintenance_1.FindAllMaintenancesUsecase,
            maintenance_1.FindOneMaintenanceUsecase,
            maintenance_1.FindAllMaintenancesByVehicleInfoIdUsecase,
        ],
        exports: [vehicle_info_service_1.VehicleInfoService, consumable_service_1.ConsumableService, maintenance_service_1.MaintenanceService],
    })
], VehicleResourceModule);


/***/ }),

/***/ "./src/application/statistics/dtos/base.dto.ts":
/*!*****************************************************!*\
  !*** ./src/application/statistics/dtos/base.dto.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StatisticsResponseDto = exports.YearMonthFilterDto = exports.DateRangeFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class DateRangeFilterDto {
}
exports.DateRangeFilterDto = DateRangeFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '시작 날짜' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], DateRangeFilterDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '종료 날짜' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], DateRangeFilterDto.prototype, "endDate", void 0);
class YearMonthFilterDto {
}
exports.YearMonthFilterDto = YearMonthFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '연도' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], YearMonthFilterDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '월' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], YearMonthFilterDto.prototype, "month", void 0);
class StatisticsResponseDto {
}
exports.StatisticsResponseDto = StatisticsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 예약 통계', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "employeeReservationStats", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 사용 통계', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "resourceUsageStats", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 정비 이력', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "vehicleMaintenanceHistory", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 정비 통계', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "consumableMaintenanceStats", void 0);


/***/ }),

/***/ "./src/application/statistics/dtos/consumable-maintenance-stats.dto.ts":
/*!*****************************************************************************!*\
  !*** ./src/application/statistics/dtos/consumable-maintenance-stats.dto.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStatsResponseDto = exports.ConsumableMaintenanceStatsFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const base_dto_1 = __webpack_require__(/*! ./base.dto */ "./src/application/statistics/dtos/base.dto.ts");
class ConsumableMaintenanceStatsFilterDto extends base_dto_1.YearMonthFilterDto {
}
exports.ConsumableMaintenanceStatsFilterDto = ConsumableMaintenanceStatsFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsFilterDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '차량 정보 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsFilterDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '소모품 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsFilterDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '최소 정비 횟수' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsFilterDto.prototype, "minMaintenanceCount", void 0);
class ConsumableMaintenanceStatsResponseDto {
}
exports.ConsumableMaintenanceStatsResponseDto = ConsumableMaintenanceStatsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 이름' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 유형' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 정보 ID' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 번호' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 ID' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기 알림 여부' }),
    __metadata("design:type", Boolean)
], ConsumableMaintenanceStatsResponseDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 횟수' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "maintenanceCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '첫 정비 날짜' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ConsumableMaintenanceStatsResponseDto.prototype, "firstMaintenanceDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '마지막 정비 날짜' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ConsumableMaintenanceStatsResponseDto.prototype, "lastMaintenanceDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 비용' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "totalCost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '평균 비용' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "averageCost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '최소 주행 거리' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "minMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '최대 주행 거리' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "maxMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '평균 주행 거리' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "averageMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 간 평균 일수' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "averageDaysBetweenMaintenances", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '현재 연도' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "currentYear", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '현재 월' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "currentMonth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '최근 3개월 정비 횟수' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "recentMaintenanceCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '통계 계산 시점' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ConsumableMaintenanceStatsResponseDto.prototype, "computedAt", void 0);


/***/ }),

/***/ "./src/application/statistics/dtos/employee-reservation-stats.dto.ts":
/*!***************************************************************************!*\
  !*** ./src/application/statistics/dtos/employee-reservation-stats.dto.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeReservationStatsResponseDto = exports.EmployeeReservationStatsFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const base_dto_1 = __webpack_require__(/*! ./base.dto */ "./src/application/statistics/dtos/base.dto.ts");
class EmployeeReservationStatsFilterDto extends base_dto_1.YearMonthFilterDto {
}
exports.EmployeeReservationStatsFilterDto = EmployeeReservationStatsFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '직원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], EmployeeReservationStatsFilterDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '직원 이름' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], EmployeeReservationStatsFilterDto.prototype, "employeeName", void 0);
class EmployeeReservationStatsResponseDto {
}
exports.EmployeeReservationStatsResponseDto = EmployeeReservationStatsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연도' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '월' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "month", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연월 (YYYY-MM)' }),
    __metadata("design:type", String)
], EmployeeReservationStatsResponseDto.prototype, "yearMonth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID' }),
    __metadata("design:type", String)
], EmployeeReservationStatsResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 이름' }),
    __metadata("design:type", String)
], EmployeeReservationStatsResponseDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "reservationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 이용 시간 (시간)' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "totalHours", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약당 평균 이용 시간 (시간)' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "avgHoursPerReservation", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "vehicleCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '회의실 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "meetingRoomCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '숙소 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "accommodationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '취소 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "cancellationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '통계 계산 시점' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeReservationStatsResponseDto.prototype, "computedAt", void 0);


/***/ }),

/***/ "./src/application/statistics/dtos/index.ts":
/*!**************************************************!*\
  !*** ./src/application/statistics/dtos/index.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStatsResponseDto = exports.ConsumableMaintenanceStatsFilterDto = exports.VehicleMaintenanceHistoryResponseDto = exports.VehicleMaintenanceHistoryFilterDto = exports.ResourceUsageStatsResponseDto = exports.ResourceUsageStatsFilterDto = exports.EmployeeReservationStatsResponseDto = exports.EmployeeReservationStatsFilterDto = void 0;
var employee_reservation_stats_dto_1 = __webpack_require__(/*! ./employee-reservation-stats.dto */ "./src/application/statistics/dtos/employee-reservation-stats.dto.ts");
Object.defineProperty(exports, "EmployeeReservationStatsFilterDto", ({ enumerable: true, get: function () { return employee_reservation_stats_dto_1.EmployeeReservationStatsFilterDto; } }));
Object.defineProperty(exports, "EmployeeReservationStatsResponseDto", ({ enumerable: true, get: function () { return employee_reservation_stats_dto_1.EmployeeReservationStatsResponseDto; } }));
var resource_usage_stats_dto_1 = __webpack_require__(/*! ./resource-usage-stats.dto */ "./src/application/statistics/dtos/resource-usage-stats.dto.ts");
Object.defineProperty(exports, "ResourceUsageStatsFilterDto", ({ enumerable: true, get: function () { return resource_usage_stats_dto_1.ResourceUsageStatsFilterDto; } }));
Object.defineProperty(exports, "ResourceUsageStatsResponseDto", ({ enumerable: true, get: function () { return resource_usage_stats_dto_1.ResourceUsageStatsResponseDto; } }));
var vehicle_maintenance_history_dto_1 = __webpack_require__(/*! ./vehicle-maintenance-history.dto */ "./src/application/statistics/dtos/vehicle-maintenance-history.dto.ts");
Object.defineProperty(exports, "VehicleMaintenanceHistoryFilterDto", ({ enumerable: true, get: function () { return vehicle_maintenance_history_dto_1.VehicleMaintenanceHistoryFilterDto; } }));
Object.defineProperty(exports, "VehicleMaintenanceHistoryResponseDto", ({ enumerable: true, get: function () { return vehicle_maintenance_history_dto_1.VehicleMaintenanceHistoryResponseDto; } }));
var consumable_maintenance_stats_dto_1 = __webpack_require__(/*! ./consumable-maintenance-stats.dto */ "./src/application/statistics/dtos/consumable-maintenance-stats.dto.ts");
Object.defineProperty(exports, "ConsumableMaintenanceStatsFilterDto", ({ enumerable: true, get: function () { return consumable_maintenance_stats_dto_1.ConsumableMaintenanceStatsFilterDto; } }));
Object.defineProperty(exports, "ConsumableMaintenanceStatsResponseDto", ({ enumerable: true, get: function () { return consumable_maintenance_stats_dto_1.ConsumableMaintenanceStatsResponseDto; } }));
__exportStar(__webpack_require__(/*! ./base.dto */ "./src/application/statistics/dtos/base.dto.ts"), exports);


/***/ }),

/***/ "./src/application/statistics/dtos/resource-usage-stats.dto.ts":
/*!*********************************************************************!*\
  !*** ./src/application/statistics/dtos/resource-usage-stats.dto.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceUsageStatsResponseDto = exports.ResourceUsageStatsFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const base_dto_1 = __webpack_require__(/*! ./base.dto */ "./src/application/statistics/dtos/base.dto.ts");
class ResourceUsageStatsFilterDto extends base_dto_1.YearMonthFilterDto {
}
exports.ResourceUsageStatsFilterDto = ResourceUsageStatsFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceUsageStatsFilterDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '직원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceUsageStatsFilterDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 유형' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceUsageStatsFilterDto.prototype, "resourceType", void 0);
class ResourceUsageStatsResponseDto {
}
exports.ResourceUsageStatsResponseDto = ResourceUsageStatsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 이름' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 유형' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 이름' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연도' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '월' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "month", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연월 (YYYY-MM)' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "yearMonth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 횟수' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "reservationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 이용 시간 (시간)' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "totalHours", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 횟수 순위' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "countRank", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이용 시간 순위' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "hoursRank", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '통계 계산 시점' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ResourceUsageStatsResponseDto.prototype, "computedAt", void 0);


/***/ }),

/***/ "./src/application/statistics/dtos/vehicle-maintenance-history.dto.ts":
/*!****************************************************************************!*\
  !*** ./src/application/statistics/dtos/vehicle-maintenance-history.dto.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleMaintenanceHistoryResponseDto = exports.VehicleMaintenanceHistoryFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const base_dto_1 = __webpack_require__(/*! ./base.dto */ "./src/application/statistics/dtos/base.dto.ts");
class VehicleMaintenanceHistoryFilterDto extends base_dto_1.DateRangeFilterDto {
}
exports.VehicleMaintenanceHistoryFilterDto = VehicleMaintenanceHistoryFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '차량 정보 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '소모품 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '담당자 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "responsibleEmployeeId", void 0);
class VehicleMaintenanceHistoryResponseDto {
}
exports.VehicleMaintenanceHistoryResponseDto = VehicleMaintenanceHistoryResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 이름' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 정보 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 번호' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기 알림 여부' }),
    __metadata("design:type", Boolean)
], VehicleMaintenanceHistoryResponseDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "maintenanceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 날짜' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "maintenanceDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '주행 거리' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '비용' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 담당자 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "maintananceBy", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 이미지' }),
    __metadata("design:type", Array)
], VehicleMaintenanceHistoryResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '생성 시간' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], VehicleMaintenanceHistoryResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '업데이트 시간' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], VehicleMaintenanceHistoryResponseDto.prototype, "updatedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '담당 직원 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "responsibleEmployeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '담당 직원 이름' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "responsibleEmployeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '부서' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직급' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연도' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '월' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "month", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '날짜 문자열' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "dateStr", void 0);


/***/ }),

/***/ "./src/application/statistics/statistics.controller.ts":
/*!*************************************************************!*\
  !*** ./src/application/statistics/statistics.controller.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StatisticsController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const statistics_service_1 = __webpack_require__(/*! ./statistics.service */ "./src/application/statistics/statistics.service.ts");
const dtos_1 = __webpack_require__(/*! ./dtos */ "./src/application/statistics/dtos/index.ts");
let StatisticsController = class StatisticsController {
    constructor(statisticsService) {
        this.statisticsService = statisticsService;
    }
    async getVersion() {
        return {
            version: '1.0.0',
            date: date_util_1.DateUtil.now().format(),
        };
    }
    async getResourceUsageStats(filter) {
        const stats = await this.statisticsService.getResourceUsageStats(filter);
        return stats;
    }
    async getVehicleMaintenanceHistory(filter) {
        const history = await this.statisticsService.getVehicleMaintenanceHistory(filter);
        return history;
    }
    async getConsumableMaintenanceStats(filter) {
        const stats = await this.statisticsService.getConsumableMaintenanceStats(filter);
        return stats;
    }
    async getEmployeeReservationStats(filter) {
        const stats = await this.statisticsService.getEmployeeReservationStats(filter);
        return stats;
    }
    async getAllStatistics() {
        const [employeeReservationStats, resourceUsageStats, vehicleMaintenanceHistory, consumableMaintenanceStats] = await Promise.all([
            this.statisticsService.getEmployeeReservationStats({}),
            this.statisticsService.getResourceUsageStats({}),
            this.statisticsService.getVehicleMaintenanceHistory({}),
            this.statisticsService.getConsumableMaintenanceStats({}),
        ]);
        return {
            employeeReservationStats: employeeReservationStats,
            resourceUsageStats: resourceUsageStats,
            vehicleMaintenanceHistory: vehicleMaintenanceHistory,
            consumableMaintenanceStats: consumableMaintenanceStats,
        };
    }
};
exports.StatisticsController = StatisticsController;
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('version'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], StatisticsController.prototype, "getVersion", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('resource-usage-stats'),
    (0, swagger_1.ApiOkResponse)({
        description: '자원 사용 통계 조회 성공',
        type: [dtos_1.ResourceUsageStatsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof dtos_1.ResourceUsageStatsFilterDto !== "undefined" && dtos_1.ResourceUsageStatsFilterDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], StatisticsController.prototype, "getResourceUsageStats", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('vehicle-maintenance-history'),
    (0, swagger_1.ApiOkResponse)({
        description: '차량 정비 이력 조회 성공',
        type: [dtos_1.VehicleMaintenanceHistoryResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof dtos_1.VehicleMaintenanceHistoryFilterDto !== "undefined" && dtos_1.VehicleMaintenanceHistoryFilterDto) === "function" ? _e : Object]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], StatisticsController.prototype, "getVehicleMaintenanceHistory", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('consumable-maintenance-stats'),
    (0, swagger_1.ApiOkResponse)({
        description: '소모품 정비 통계 조회 성공',
        type: [dtos_1.ConsumableMaintenanceStatsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof dtos_1.ConsumableMaintenanceStatsFilterDto !== "undefined" && dtos_1.ConsumableMaintenanceStatsFilterDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], StatisticsController.prototype, "getConsumableMaintenanceStats", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('employee-reservation-stats'),
    (0, swagger_1.ApiOkResponse)({
        description: '직원 예약 통계 조회 성공',
        type: [dtos_1.EmployeeReservationStatsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof dtos_1.EmployeeReservationStatsFilterDto !== "undefined" && dtos_1.EmployeeReservationStatsFilterDto) === "function" ? _j : Object]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], StatisticsController.prototype, "getEmployeeReservationStats", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('statistics'),
    (0, swagger_1.ApiOkResponse)({
        description: '모든 통계 데이터 조회 성공',
        type: dtos_1.StatisticsResponseDto,
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], StatisticsController.prototype, "getAllStatistics", null);
exports.StatisticsController = StatisticsController = __decorate([
    (0, swagger_1.ApiTags)(`6. 통계 - 관리자 페이지`),
    (0, common_1.Controller)('v1/statistics'),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof statistics_service_1.StatisticsService !== "undefined" && statistics_service_1.StatisticsService) === "function" ? _a : Object])
], StatisticsController);


/***/ }),

/***/ "./src/application/statistics/statistics.module.ts":
/*!*********************************************************!*\
  !*** ./src/application/statistics/statistics.module.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StatisticsModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const statistics_controller_1 = __webpack_require__(/*! ./statistics.controller */ "./src/application/statistics/statistics.controller.ts");
const statistics_service_1 = __webpack_require__(/*! ./statistics.service */ "./src/application/statistics/statistics.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let StatisticsModule = class StatisticsModule {
};
exports.StatisticsModule = StatisticsModule;
exports.StatisticsModule = StatisticsModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([
                entities_1.EmployeeReservationStats,
                entities_1.ResourceUsageStats,
                entities_1.VehicleMaintenanceHistory,
                entities_1.ConsumableMaintenanceStats,
            ]),
        ],
        controllers: [statistics_controller_1.StatisticsController],
        providers: [statistics_service_1.StatisticsService],
    })
], StatisticsModule);


/***/ }),

/***/ "./src/application/statistics/statistics.service.ts":
/*!**********************************************************!*\
  !*** ./src/application/statistics/statistics.service.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StatisticsService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const typeorm_2 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
let StatisticsService = class StatisticsService {
    constructor(resourceUsageStatsRepository, vehicleMaintenanceHistoryRepository, consumableMaintenanceStatsRepository, employeeReservationStatsRepository) {
        this.resourceUsageStatsRepository = resourceUsageStatsRepository;
        this.vehicleMaintenanceHistoryRepository = vehicleMaintenanceHistoryRepository;
        this.consumableMaintenanceStatsRepository = consumableMaintenanceStatsRepository;
        this.employeeReservationStatsRepository = employeeReservationStatsRepository;
    }
    async getResourceUsageStats(filter) {
        const where = {};
        if (filter?.year) {
            where.year = filter.year;
        }
        if (filter?.month) {
            where.month = filter.month;
        }
        if (filter?.resourceId) {
            where.resourceId = filter.resourceId;
        }
        if (filter?.employeeId) {
            where.employeeId = filter.employeeId;
        }
        if (filter?.resourceType) {
            where.resourceType = filter.resourceType;
        }
        return this.resourceUsageStatsRepository.find({ where });
    }
    async getVehicleMaintenanceHistory(filter) {
        const where = {};
        if (filter?.startDate && filter?.endDate) {
            where.maintenanceDate = (0, typeorm_1.Between)(filter.startDate, filter.endDate);
        }
        else if (filter?.startDate) {
            where.maintenanceDate = (0, typeorm_1.Between)(filter.startDate, new Date().toISOString());
        }
        if (filter?.resourceId) {
            where.resourceId = filter.resourceId;
        }
        if (filter?.vehicleInfoId) {
            where.vehicleInfoId = filter.vehicleInfoId;
        }
        if (filter?.consumableId) {
            where.consumableId = filter.consumableId;
        }
        if (filter?.responsibleEmployeeId) {
            where.responsibleEmployeeId = filter.responsibleEmployeeId;
        }
        return this.vehicleMaintenanceHistoryRepository.find({ where });
    }
    async getConsumableMaintenanceStats(filter) {
        const where = {};
        if (filter?.year) {
            where.currentYear = filter.year;
        }
        if (filter?.month) {
            where.currentMonth = filter.month;
        }
        if (filter?.resourceId) {
            where.resourceId = filter.resourceId;
        }
        if (filter?.vehicleInfoId) {
            where.vehicleInfoId = filter.vehicleInfoId;
        }
        if (filter?.consumableId) {
            where.consumableId = filter.consumableId;
        }
        if (filter?.minMaintenanceCount) {
            where.maintenanceCount = (0, typeorm_1.MoreThanOrEqual)(filter.minMaintenanceCount);
        }
        return this.consumableMaintenanceStatsRepository.find({ where });
    }
    async getEmployeeReservationStats(filter) {
        const where = {};
        if (filter?.year) {
            where.year = filter.year;
        }
        if (filter?.month) {
            where.month = filter.month;
        }
        if (filter?.employeeId) {
            where.employeeId = filter.employeeId;
        }
        if (filter?.employeeName) {
            where.employeeName = (0, typeorm_1.Like)(`%${filter.employeeName}%`);
        }
        return this.employeeReservationStatsRepository.find({ where });
    }
};
exports.StatisticsService = StatisticsService;
exports.StatisticsService = StatisticsService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_2.InjectRepository)(entities_1.ResourceUsageStats)),
    __param(1, (0, typeorm_2.InjectRepository)(entities_1.VehicleMaintenanceHistory)),
    __param(2, (0, typeorm_2.InjectRepository)(entities_1.ConsumableMaintenanceStats)),
    __param(3, (0, typeorm_2.InjectRepository)(entities_1.EmployeeReservationStats)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _a : Object, typeof (_b = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _b : Object, typeof (_c = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _c : Object, typeof (_d = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _d : Object])
], StatisticsService);


/***/ }),

/***/ "./src/application/task/controllers/admin.task.controller.ts":
/*!*******************************************************************!*\
  !*** ./src/application/task/controllers/admin.task.controller.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminTaskController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const task_response_dto_1 = __webpack_require__(/*! ../dtos/task-response.dto */ "./src/application/task/dtos/task-response.dto.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const admin_task_service_1 = __webpack_require__(/*! ../services/admin.task.service */ "./src/application/task/services/admin.task.service.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
let AdminTaskController = class AdminTaskController {
    constructor(adminTaskService) {
        this.adminTaskService = adminTaskService;
    }
    async getTasks(type) {
        return this.adminTaskService.getTasks(type);
    }
};
exports.AdminTaskController = AdminTaskController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '태스크 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '태스크 목록 조회 성공',
        type: [task_response_dto_1.TaskResponseDto],
    }),
    (0, swagger_1.ApiQuery)({
        name: 'type',
        type: String,
        required: false,
        description: '태스크 타입',
        enum: ['차량반납지연', '소모품교체'],
    }),
    __param(0, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], AdminTaskController.prototype, "getTasks", null);
exports.AdminTaskController = AdminTaskController = __decorate([
    (0, swagger_1.ApiTags)('3. 태스크 관리 - 관리자'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    (0, common_1.Controller)('v1/admin/tasks'),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof admin_task_service_1.AdminTaskService !== "undefined" && admin_task_service_1.AdminTaskService) === "function" ? _a : Object])
], AdminTaskController);


/***/ }),

/***/ "./src/application/task/controllers/task.controller.ts":
/*!*************************************************************!*\
  !*** ./src/application/task/controllers/task.controller.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TaskController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const task_service_1 = __webpack_require__(/*! ../services/task.service */ "./src/application/task/services/task.service.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
let TaskController = class TaskController {
    constructor(taskService) {
        this.taskService = taskService;
    }
    async getTasks(user) {
        return this.taskService.getTasks(user);
    }
};
exports.TaskController = TaskController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '태스크 목록 조회' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: '태스크 목록 조회 성공',
        schema: {
            type: 'object',
            properties: {
                totalCount: { type: 'number' },
                items: {
                    type: 'array',
                    items: {
                        type: 'object',
                        properties: {
                            type: { type: 'string' },
                            title: { type: 'string' },
                            reservationId: { type: 'string', nullable: true },
                            resourceId: { type: 'string', nullable: true },
                            resourceName: { type: 'string', nullable: true },
                            startDate: { type: 'string', nullable: true },
                            endDate: { type: 'string', nullable: true },
                        },
                    },
                },
            },
        },
    }),
    __param(0, (0, user_decorator_1.User)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object]),
    __metadata("design:returntype", Promise)
], TaskController.prototype, "getTasks", null);
exports.TaskController = TaskController = __decorate([
    (0, swagger_1.ApiTags)('3. 태스크 관리 '),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, common_1.Controller)('v1/tasks'),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof task_service_1.TaskService !== "undefined" && task_service_1.TaskService) === "function" ? _a : Object])
], TaskController);


/***/ }),

/***/ "./src/application/task/dtos/task-response.dto.ts":
/*!********************************************************!*\
  !*** ./src/application/task/dtos/task-response.dto.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TaskResponseDto = exports.ManagerResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class ManagerResponseDto {
}
exports.ManagerResponseDto = ManagerResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
    }),
    __metadata("design:type", String)
], ManagerResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ManagerResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ManagerResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ManagerResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ManagerResponseDto.prototype, "position", void 0);
class TaskResponseDto {
}
exports.TaskResponseDto = TaskResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '태스크 타입',
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '태스크 제목',
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '예약 ID',
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '자원 ID',
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '자원 이름',
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '시작 날짜',
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '종료 날짜',
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: ManagerResponseDto,
        description: '관리자',
    }),
    __metadata("design:type", ManagerResponseDto)
], TaskResponseDto.prototype, "manager", void 0);


/***/ }),

/***/ "./src/application/task/services/admin.task.service.ts":
/*!*************************************************************!*\
  !*** ./src/application/task/services/admin.task.service.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminTaskService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const getDelayedReturnVehicles_usecase_1 = __webpack_require__(/*! ../usecases/getDelayedReturnVehicles.usecase */ "./src/application/task/usecases/getDelayedReturnVehicles.usecase.ts");
const getNeedRaplaceConsumables_usecase_1 = __webpack_require__(/*! ../usecases/getNeedRaplaceConsumables.usecase */ "./src/application/task/usecases/getNeedRaplaceConsumables.usecase.ts");
let AdminTaskService = class AdminTaskService {
    constructor(getDelayedReturnVehicleUsecase, getNeedRaplaceConsumablesUsecase) {
        this.getDelayedReturnVehicleUsecase = getDelayedReturnVehicleUsecase;
        this.getNeedRaplaceConsumablesUsecase = getNeedRaplaceConsumablesUsecase;
    }
    async getTasks(type) {
        if (type === '차량반납지연') {
            return this.getDelayedReturnVehicleUsecase.execute();
        }
        else if (type === '소모품교체') {
            return this.getNeedRaplaceConsumablesUsecase.execute();
        }
        else {
            return [];
        }
    }
};
exports.AdminTaskService = AdminTaskService;
exports.AdminTaskService = AdminTaskService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof getDelayedReturnVehicles_usecase_1.GetDelayedReturnVehicleUsecase !== "undefined" && getDelayedReturnVehicles_usecase_1.GetDelayedReturnVehicleUsecase) === "function" ? _a : Object, typeof (_b = typeof getNeedRaplaceConsumables_usecase_1.GetNeedRaplaceConsumablesUsecase !== "undefined" && getNeedRaplaceConsumables_usecase_1.GetNeedRaplaceConsumablesUsecase) === "function" ? _b : Object])
], AdminTaskService);


/***/ }),

/***/ "./src/application/task/services/task.service.ts":
/*!*******************************************************!*\
  !*** ./src/application/task/services/task.service.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TaskService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const getTaskList_usecase_1 = __webpack_require__(/*! ../usecases/getTaskList.usecase */ "./src/application/task/usecases/getTaskList.usecase.ts");
const getTaskStatus_usecase_1 = __webpack_require__(/*! ../usecases/getTaskStatus.usecase */ "./src/application/task/usecases/getTaskStatus.usecase.ts");
let TaskService = class TaskService {
    constructor(getTaskListUsecase, getTaskStatusUsecase) {
        this.getTaskListUsecase = getTaskListUsecase;
        this.getTaskStatusUsecase = getTaskStatusUsecase;
    }
    async getTasks(user) {
        return this.getTaskListUsecase.execute(user);
    }
    async getTaskStatus(user) {
        return this.getTaskStatusUsecase.execute(user);
    }
};
exports.TaskService = TaskService;
exports.TaskService = TaskService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof getTaskList_usecase_1.GetTaskListUsecase !== "undefined" && getTaskList_usecase_1.GetTaskListUsecase) === "function" ? _a : Object, typeof (_b = typeof getTaskStatus_usecase_1.GetTaskStatusUsecase !== "undefined" && getTaskStatus_usecase_1.GetTaskStatusUsecase) === "function" ? _b : Object])
], TaskService);


/***/ }),

/***/ "./src/application/task/task.module.ts":
/*!*********************************************!*\
  !*** ./src/application/task/task.module.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TaskModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const task_controller_1 = __webpack_require__(/*! ./controllers/task.controller */ "./src/application/task/controllers/task.controller.ts");
const task_service_1 = __webpack_require__(/*! ./services/task.service */ "./src/application/task/services/task.service.ts");
const getTaskList_usecase_1 = __webpack_require__(/*! ./usecases/getTaskList.usecase */ "./src/application/task/usecases/getTaskList.usecase.ts");
const getTaskStatus_usecase_1 = __webpack_require__(/*! ./usecases/getTaskStatus.usecase */ "./src/application/task/usecases/getTaskStatus.usecase.ts");
const resource_module_1 = __webpack_require__(/*! @src/domain/resource/resource.module */ "./src/domain/resource/resource.module.ts");
const reservation_module_1 = __webpack_require__(/*! @src/domain/reservation/reservation.module */ "./src/domain/reservation/reservation.module.ts");
const getDelayedReturnVehicles_usecase_1 = __webpack_require__(/*! ./usecases/getDelayedReturnVehicles.usecase */ "./src/application/task/usecases/getDelayedReturnVehicles.usecase.ts");
const getNeedRaplaceConsumables_usecase_1 = __webpack_require__(/*! ./usecases/getNeedRaplaceConsumables.usecase */ "./src/application/task/usecases/getNeedRaplaceConsumables.usecase.ts");
const admin_task_controller_1 = __webpack_require__(/*! ./controllers/admin.task.controller */ "./src/application/task/controllers/admin.task.controller.ts");
const admin_task_service_1 = __webpack_require__(/*! ./services/admin.task.service */ "./src/application/task/services/admin.task.service.ts");
const notification_module_1 = __webpack_require__(/*! @src/domain/notification/notification.module */ "./src/domain/notification/notification.module.ts");
let TaskModule = class TaskModule {
};
exports.TaskModule = TaskModule;
exports.TaskModule = TaskModule = __decorate([
    (0, common_1.Module)({
        imports: [resource_module_1.DomainResourceModule, reservation_module_1.DomainReservationModule, notification_module_1.DomainNotificationModule],
        controllers: [task_controller_1.TaskController, admin_task_controller_1.AdminTaskController],
        providers: [
            task_service_1.TaskService,
            admin_task_service_1.AdminTaskService,
            getTaskList_usecase_1.GetTaskListUsecase,
            getTaskStatus_usecase_1.GetTaskStatusUsecase,
            getDelayedReturnVehicles_usecase_1.GetDelayedReturnVehicleUsecase,
            getNeedRaplaceConsumables_usecase_1.GetNeedRaplaceConsumablesUsecase,
        ],
        exports: [task_service_1.TaskService],
    })
], TaskModule);


/***/ }),

/***/ "./src/application/task/usecases/getDelayedReturnVehicles.usecase.ts":
/*!***************************************************************************!*\
  !*** ./src/application/task/usecases/getDelayedReturnVehicles.usecase.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetDelayedReturnVehicleUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
let GetDelayedReturnVehicleUsecase = class GetDelayedReturnVehicleUsecase {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async execute() {
        const delayedReturnVehicles = await this.reservationService.findAll({
            where: {
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                endDate: (0, typeorm_1.LessThan)(date_util_1.DateUtil.now().toDate()),
                reservationVehicles: {
                    isReturned: false,
                },
            },
            relations: ['participants', 'participants.employee', 'resource', 'reservationVehicles'],
        });
        return delayedReturnVehicles.map((reservation) => {
            const manager = reservation.participants.find((participant) => participant.type === reservation_type_enum_1.ParticipantsType.RESERVER);
            return {
                type: '차량반납지연',
                title: `${reservation.resource.name} 반납 지연 중`,
                reservationId: reservation.reservationId,
                resourceId: reservation.resource.resourceId,
                resourceName: reservation.resource.name,
                startDate: reservation.startDate,
                endDate: reservation.endDate,
                manager: {
                    employeeId: manager.employee.employeeId,
                    name: manager.employee.name,
                    employeeNumber: manager.employee.employeeNumber,
                    department: manager.employee.department,
                    position: manager.employee.position,
                },
            };
        });
    }
};
exports.GetDelayedReturnVehicleUsecase = GetDelayedReturnVehicleUsecase;
exports.GetDelayedReturnVehicleUsecase = GetDelayedReturnVehicleUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], GetDelayedReturnVehicleUsecase);


/***/ }),

/***/ "./src/application/task/usecases/getNeedRaplaceConsumables.usecase.ts":
/*!****************************************************************************!*\
  !*** ./src/application/task/usecases/getNeedRaplaceConsumables.usecase.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetNeedRaplaceConsumablesUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
let GetNeedRaplaceConsumablesUsecase = class GetNeedRaplaceConsumablesUsecase {
    constructor(resourceService, reservationService, notificationService) {
        this.resourceService = resourceService;
        this.reservationService = reservationService;
        this.notificationService = notificationService;
    }
    async execute() {
        const resources = await this.resourceService.findAll({
            relations: [
                'resourceManagers',
                'resourceManagers.employee',
                'vehicleInfo',
                'vehicleInfo.consumables',
                'vehicleInfo.consumables.maintenances',
            ],
        });
        const needReplaceConsumable = [];
        for (const resource of resources) {
            for (const consumable of resource.vehicleInfo?.consumables || []) {
                const latestMaintenance = consumable.maintenances[consumable.maintenances.length - 1] || null;
                if (latestMaintenance) {
                    const maintanceRequired = resource.vehicleInfo.totalMileage - Number(latestMaintenance.mileage) > consumable.replaceCycle;
                    if (maintanceRequired) {
                        const notifications = await this.notificationService.findAll({
                            where: {
                                notificationType: notification_type_enum_1.NotificationType.RESOURCE_CONSUMABLE_DELAYED_REPLACING,
                                notificationData: (0, typeorm_1.Raw)((alias) => `${alias} -> 'resource' ->> 'resourceId' = '${resource.resourceId}' AND ${alias} -> 'resource' -> 'vehicleInfo' -> 'consumable'  ->> 'consumableName' = '${consumable.name}'`),
                                createdAt: (0, typeorm_1.MoreThan)(date_util_1.DateUtil.date(latestMaintenance.date).format('YYYY-MM-DD HH:mm')),
                            },
                        });
                        needReplaceConsumable.push({
                            type: '소모품교체',
                            title: `${consumable.name} 교체 필요`,
                            reservationId: null,
                            resourceId: resource.resourceId,
                            resourceName: resource.name,
                            startDate: null,
                            endDate: null,
                            manager: {
                                employeeId: resource.resourceManagers[0].employee.employeeId,
                                name: resource.resourceManagers[0].employee.name,
                                employeeNumber: resource.resourceManagers[0].employee.employeeNumber,
                                department: resource.resourceManagers[0].employee.department,
                                position: resource.resourceManagers[0].employee.position,
                            },
                            notifications: notifications,
                        });
                    }
                }
            }
        }
        return needReplaceConsumable;
    }
};
exports.GetNeedRaplaceConsumablesUsecase = GetNeedRaplaceConsumablesUsecase;
exports.GetNeedRaplaceConsumablesUsecase = GetNeedRaplaceConsumablesUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _b : Object, typeof (_c = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _c : Object])
], GetNeedRaplaceConsumablesUsecase);


/***/ }),

/***/ "./src/application/task/usecases/getTaskList.usecase.ts":
/*!**************************************************************!*\
  !*** ./src/application/task/usecases/getTaskList.usecase.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetTaskListUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
let GetTaskListUsecase = class GetTaskListUsecase {
    constructor(resourceService, reservationService) {
        this.resourceService = resourceService;
        this.reservationService = reservationService;
    }
    async execute(user) {
        const delayedReturnReservations = await this.reservationService.findAll({
            where: {
                participants: {
                    employeeId: user.employeeId,
                    type: reservation_type_enum_1.ParticipantsType.RESERVER,
                },
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                endDate: (0, typeorm_1.LessThan)(date_util_1.DateUtil.now().toDate()),
                reservationVehicles: {
                    isReturned: false,
                },
            },
            relations: ['participants', 'resource', 'reservationVehicles'],
        });
        const isResourceAdmin = user.roles.includes(role_type_enum_1.Role.RESOURCE_ADMIN);
        const isSystemAdmin = user.roles.includes(role_type_enum_1.Role.SYSTEM_ADMIN);
        const needReplaceConsumable = [];
        if (isResourceAdmin || isSystemAdmin) {
            const resources = await this.resourceService.findAll({
                where: {
                    ...(isSystemAdmin ? {} : { resourceManagers: { employeeId: user.employeeId } }),
                },
                relations: [
                    'resourceManagers',
                    'vehicleInfo',
                    'vehicleInfo.consumables',
                    'vehicleInfo.consumables.maintenances',
                ],
                order: {
                    vehicleInfo: {
                        consumables: {
                            maintenances: {
                                date: 'DESC',
                            },
                        },
                    },
                },
            });
            for (const resource of resources) {
                for (const consumable of resource.vehicleInfo?.consumables || []) {
                    const latestMaintenance = consumable.maintenances[0] || null;
                    if (latestMaintenance) {
                        const maintanceRequired = resource.vehicleInfo.totalMileage - Number(latestMaintenance.mileage) >
                            consumable.replaceCycle;
                        if (maintanceRequired) {
                            needReplaceConsumable.push({
                                type: '소모품교체',
                                title: `${consumable.name} 교체 필요`,
                                reservationId: null,
                                resourceId: resource.resourceId,
                                resourceName: resource.name,
                                startDate: null,
                                endDate: null,
                            });
                        }
                    }
                }
            }
        }
        const items = [
            ...delayedReturnReservations.map((reservation) => {
                return {
                    type: '반납지연',
                    title: `${reservation.resource.name} 반납 지연 중`,
                    reservationId: reservation.reservationId,
                    resourceId: reservation.resource.resourceId,
                    resourceName: reservation.resource.name,
                    startDate: reservation.startDate,
                    endDate: reservation.endDate,
                };
            }),
            ...needReplaceConsumable,
        ];
        return {
            totalCount: items.length,
            items,
        };
    }
};
exports.GetTaskListUsecase = GetTaskListUsecase;
exports.GetTaskListUsecase = GetTaskListUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _b : Object])
], GetTaskListUsecase);


/***/ }),

/***/ "./src/application/task/usecases/getTaskStatus.usecase.ts":
/*!****************************************************************!*\
  !*** ./src/application/task/usecases/getTaskStatus.usecase.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GetTaskStatusUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
let GetTaskStatusUsecase = class GetTaskStatusUsecase {
    constructor(resourceService, reservationService) {
        this.resourceService = resourceService;
        this.reservationService = reservationService;
    }
    async execute(user) {
        const delayedReturnReservations = await this.reservationService.findAll({
            where: {
                participants: {
                    employeeId: user.employeeId,
                    type: reservation_type_enum_1.ParticipantsType.RESERVER,
                },
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                endDate: (0, typeorm_1.LessThan)(date_util_1.DateUtil.now().toDate()),
                reservationVehicles: {
                    isReturned: false,
                },
            },
            relations: ['participants', 'reservationVehicles'],
        });
        const isResourceAdmin = user.roles.includes(role_type_enum_1.Role.RESOURCE_ADMIN);
        const isSystemAdmin = user.roles.includes(role_type_enum_1.Role.SYSTEM_ADMIN);
        const needReplaceConsumable = [];
        if (isResourceAdmin || isSystemAdmin) {
            const resources = await this.resourceService.findAll({
                where: {
                    ...(isSystemAdmin ? {} : { resourceManagers: { employeeId: user.employeeId } }),
                },
                relations: [
                    'resourceManagers',
                    'vehicleInfo',
                    'vehicleInfo.consumables',
                    'vehicleInfo.consumables.maintenances',
                ],
            });
            for (const resource of resources) {
                for (const consumable of resource.vehicleInfo?.consumables || []) {
                    const latestMaintenance = consumable.maintenances[consumable.maintenances.length - 1] || null;
                    if (latestMaintenance) {
                        const maintanceRequired = resource.vehicleInfo.totalMileage - Number(latestMaintenance.mileage) >
                            consumable.replaceCycle;
                        if (maintanceRequired) {
                            needReplaceConsumable.push({
                                type: '소모품교체',
                                title: `${consumable.name} 교체 필요`,
                                reservationId: null,
                                resourceId: resource.resourceId,
                                resourceName: resource.name,
                                startDate: null,
                                endDate: null,
                            });
                        }
                    }
                }
            }
        }
        if (delayedReturnReservations.length > 0 && needReplaceConsumable.length > 0) {
            return {
                title: '반납/교체 지연 발생',
            };
        }
        else if (delayedReturnReservations.length > 0) {
            return {
                title: '반납 지연 발생',
            };
        }
        else if (needReplaceConsumable.length > 0) {
            return {
                title: '소모품 교체 필요',
            };
        }
        else {
            return {
                title: '태스크 없음',
            };
        }
    }
};
exports.GetTaskStatusUsecase = GetTaskStatusUsecase;
exports.GetTaskStatusUsecase = GetTaskStatusUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _b : Object])
], GetTaskStatusUsecase);


/***/ }),

/***/ "./src/business.dto.index.ts":
/*!***********************************!*\
  !*** ./src/business.dto.index.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationListResponseDto = exports.ReservationVehicleFileResponseDto = exports.FileResponseDto = exports.CreateFileDataDto = exports.PushNotificationPayload = exports.PushNotificationDto = exports.PushSubscriptionDto = exports.NotificationTypeConsumableRequirementsDto = exports.NotificationTypeVehicleInfoRequirementsDto = exports.NotificationTypeProjectRequirementsDto = exports.NotificationTypeResourceRequirementsDto = exports.NotificationTypeReservationRequirementsDto = exports.NotificationTypeScheduleRequirementsDto = exports.NotificationTypeRequirementsDto = exports.NotificationTypeResponseDto = exports.PushNotificationSendResult = exports.NotificationDataDto = exports.ResponseNotificationDto = exports.SendNotificationDto = exports.CreateEmployeeNotificationDto = exports.CreateNotificationDataDto = exports.CreateNotificationDto = exports.ResourceAvailabilityDto = exports.PaginationMetaDto = exports.PaginationData = exports.PaginationQueryDto = void 0;
var pagination_query_dto_1 = __webpack_require__(/*! ../libs/dtos/pagination-query.dto */ "./libs/dtos/pagination-query.dto.ts");
Object.defineProperty(exports, "PaginationQueryDto", ({ enumerable: true, get: function () { return pagination_query_dto_1.PaginationQueryDto; } }));
var pagination_response_dto_1 = __webpack_require__(/*! ../libs/dtos/pagination-response.dto */ "./libs/dtos/pagination-response.dto.ts");
Object.defineProperty(exports, "PaginationData", ({ enumerable: true, get: function () { return pagination_response_dto_1.PaginationData; } }));
Object.defineProperty(exports, "PaginationMetaDto", ({ enumerable: true, get: function () { return pagination_response_dto_1.PaginationMetaDto; } }));
__exportStar(__webpack_require__(/*! ./business/reservation-management/dtos/create-reservation.dto */ "./src/business/reservation-management/dtos/create-reservation.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/reservation-management/dtos/reservaion-query.dto */ "./src/business/reservation-management/dtos/reservaion-query.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/reservation-management/dtos/reservation-response.dto */ "./src/business/reservation-management/dtos/reservation-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/reservation-management/dtos/return-vehicle-response.dto */ "./src/business/reservation-management/dtos/return-vehicle-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/reservation-management/dtos/update-reservation.dto */ "./src/business/reservation-management/dtos/update-reservation.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-create-request.dto */ "./src/business/schedule-management/dtos/schedule-create-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-update-request.dto */ "./src/business/schedule-management/dtos/schedule-update-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-cancel-request.dto */ "./src/business/schedule-management/dtos/schedule-cancel-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-complete-request.dto */ "./src/business/schedule-management/dtos/schedule-complete-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-extend-request.dto */ "./src/business/schedule-management/dtos/schedule-extend-request.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-create-response.dto */ "./src/business/schedule-management/dtos/schedule-create-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-update-response.dto */ "./src/business/schedule-management/dtos/schedule-update-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-detail-response.dto */ "./src/business/schedule-management/dtos/schedule-detail-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-cancel-response.dto */ "./src/business/schedule-management/dtos/schedule-cancel-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-complete-response.dto */ "./src/business/schedule-management/dtos/schedule-complete-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-extend-response.dto */ "./src/business/schedule-management/dtos/schedule-extend-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/resource-schedule-response.dto */ "./src/business/schedule-management/dtos/resource-schedule-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-calendar-response.dto */ "./src/business/schedule-management/dtos/schedule-calendar-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/my-schedule-response.dto */ "./src/business/schedule-management/dtos/my-schedule-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/my-schedule-statistics-response.dto */ "./src/business/schedule-management/dtos/my-schedule-statistics-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-detail-query.dto */ "./src/business/schedule-management/dtos/schedule-detail-query.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/schedule-calendar-query.dto */ "./src/business/schedule-management/dtos/schedule-calendar-query.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/resource-schedule-query.dto */ "./src/business/schedule-management/dtos/resource-schedule-query.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/my-schedule-query.dto */ "./src/business/schedule-management/dtos/my-schedule-query.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/schedule-management/dtos/my-schedule-statistics-query.dto */ "./src/business/schedule-management/dtos/my-schedule-statistics-query.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/employee-management/dtos/create-employee.dto */ "./src/business/employee-management/dtos/create-employee.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/employee-management/dtos/update-employee.dto */ "./src/business/employee-management/dtos/update-employee.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/employee-management/dtos/employee-response.dto */ "./src/business/employee-management/dtos/employee-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/employee-management/dtos/user-response.dto */ "./src/business/employee-management/dtos/user-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/employee-management/dtos/employees-by-department-response.dto */ "./src/business/employee-management/dtos/employees-by-department-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/employee-management/dtos/mms-employee-response.dto */ "./src/business/employee-management/dtos/mms-employee-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/employee-management/dtos/change-password.dto */ "./src/business/employee-management/dtos/change-password.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/employee-management/dtos/check-password.dto */ "./src/business/employee-management/dtos/check-password.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/employee-management/dtos/change-role.dto */ "./src/business/employee-management/dtos/change-role.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/employee-management/dtos/notification-settings.dto */ "./src/business/employee-management/dtos/notification-settings.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/task-management/dtos/task-response.dto */ "./src/business/task-management/dtos/task-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/accommodation/accommodation-info-response.dto */ "./src/business/resource-management/dtos/accommodation/accommodation-info-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/accommodation/create-accommodation-info.dto */ "./src/business/resource-management/dtos/accommodation/create-accommodation-info.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/accommodation/update-accommodation-info.dto */ "./src/business/resource-management/dtos/accommodation/update-accommodation-info.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/equipment/create-equipment-info.dto */ "./src/business/resource-management/dtos/equipment/create-equipment-info.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/equipment/equipment-info-response.dto */ "./src/business/resource-management/dtos/equipment/equipment-info-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/equipment/update-equipment-info.dto */ "./src/business/resource-management/dtos/equipment/update-equipment-info.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/meeting-room/create-meeting-room-info.dto */ "./src/business/resource-management/dtos/meeting-room/create-meeting-room-info.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/meeting-room/meeting-room-info-response.dto */ "./src/business/resource-management/dtos/meeting-room/meeting-room-info-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/meeting-room/update-meeting-room-info.dto */ "./src/business/resource-management/dtos/meeting-room/update-meeting-room-info.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/resource/check-availability.dto */ "./src/business/resource-management/dtos/resource/check-availability.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/resource/create-resource.dto */ "./src/business/resource-management/dtos/resource/create-resource.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/resource/resource-query.dto */ "./src/business/resource-management/dtos/resource/resource-query.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/resource/resource-response.dto */ "./src/business/resource-management/dtos/resource/resource-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/resource/time-slot.dto */ "./src/business/resource-management/dtos/resource/time-slot.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/resource/update-resource.dto */ "./src/business/resource-management/dtos/resource/update-resource.dto.ts"), exports);
var available_time_response_dto_1 = __webpack_require__(/*! ./business/resource-management/dtos/resource/available-time-response.dto */ "./src/business/resource-management/dtos/resource/available-time-response.dto.ts");
Object.defineProperty(exports, "ResourceAvailabilityDto", ({ enumerable: true, get: function () { return available_time_response_dto_1.ResourceAvailabilityDto; } }));
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/vehicle/create-vehicle-info.dto */ "./src/business/resource-management/dtos/vehicle/create-vehicle-info.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/vehicle/update-vehicle-info.dto */ "./src/business/resource-management/dtos/vehicle/update-vehicle-info.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./business/resource-management/dtos/vehicle/vehicle-response.dto */ "./src/business/resource-management/dtos/vehicle/vehicle-response.dto.ts"), exports);
var create_notification_dto_1 = __webpack_require__(/*! ./context/notification/dtos/create-notification.dto */ "./src/context/notification/dtos/create-notification.dto.ts");
Object.defineProperty(exports, "CreateNotificationDto", ({ enumerable: true, get: function () { return create_notification_dto_1.CreateNotificationDto; } }));
Object.defineProperty(exports, "CreateNotificationDataDto", ({ enumerable: true, get: function () { return create_notification_dto_1.CreateNotificationDataDto; } }));
Object.defineProperty(exports, "CreateEmployeeNotificationDto", ({ enumerable: true, get: function () { return create_notification_dto_1.CreateEmployeeNotificationDto; } }));
Object.defineProperty(exports, "SendNotificationDto", ({ enumerable: true, get: function () { return create_notification_dto_1.SendNotificationDto; } }));
var response_notification_dto_1 = __webpack_require__(/*! ./context/notification/dtos/response-notification.dto */ "./src/context/notification/dtos/response-notification.dto.ts");
Object.defineProperty(exports, "ResponseNotificationDto", ({ enumerable: true, get: function () { return response_notification_dto_1.ResponseNotificationDto; } }));
Object.defineProperty(exports, "NotificationDataDto", ({ enumerable: true, get: function () { return response_notification_dto_1.NotificationDataDto; } }));
Object.defineProperty(exports, "PushNotificationSendResult", ({ enumerable: true, get: function () { return response_notification_dto_1.PushNotificationSendResult; } }));
var notification_type_response_dto_1 = __webpack_require__(/*! ./context/notification/dtos/notification-type-response.dto */ "./src/context/notification/dtos/notification-type-response.dto.ts");
Object.defineProperty(exports, "NotificationTypeResponseDto", ({ enumerable: true, get: function () { return notification_type_response_dto_1.NotificationTypeResponseDto; } }));
Object.defineProperty(exports, "NotificationTypeRequirementsDto", ({ enumerable: true, get: function () { return notification_type_response_dto_1.NotificationTypeRequirementsDto; } }));
Object.defineProperty(exports, "NotificationTypeScheduleRequirementsDto", ({ enumerable: true, get: function () { return notification_type_response_dto_1.NotificationTypeScheduleRequirementsDto; } }));
Object.defineProperty(exports, "NotificationTypeReservationRequirementsDto", ({ enumerable: true, get: function () { return notification_type_response_dto_1.NotificationTypeReservationRequirementsDto; } }));
Object.defineProperty(exports, "NotificationTypeResourceRequirementsDto", ({ enumerable: true, get: function () { return notification_type_response_dto_1.NotificationTypeResourceRequirementsDto; } }));
Object.defineProperty(exports, "NotificationTypeProjectRequirementsDto", ({ enumerable: true, get: function () { return notification_type_response_dto_1.NotificationTypeProjectRequirementsDto; } }));
Object.defineProperty(exports, "NotificationTypeVehicleInfoRequirementsDto", ({ enumerable: true, get: function () { return notification_type_response_dto_1.NotificationTypeVehicleInfoRequirementsDto; } }));
Object.defineProperty(exports, "NotificationTypeConsumableRequirementsDto", ({ enumerable: true, get: function () { return notification_type_response_dto_1.NotificationTypeConsumableRequirementsDto; } }));
var push_subscription_dto_1 = __webpack_require__(/*! ./context/notification/dtos/push-subscription.dto */ "./src/context/notification/dtos/push-subscription.dto.ts");
Object.defineProperty(exports, "PushSubscriptionDto", ({ enumerable: true, get: function () { return push_subscription_dto_1.PushSubscriptionDto; } }));
var send_notification_dto_1 = __webpack_require__(/*! ./context/notification/dtos/send-notification.dto */ "./src/context/notification/dtos/send-notification.dto.ts");
Object.defineProperty(exports, "PushNotificationDto", ({ enumerable: true, get: function () { return send_notification_dto_1.PushNotificationDto; } }));
Object.defineProperty(exports, "PushNotificationPayload", ({ enumerable: true, get: function () { return send_notification_dto_1.PushNotificationPayload; } }));
var create_filedata_dto_1 = __webpack_require__(/*! ./context/file/dtos/create-filedata.dto */ "./src/context/file/dtos/create-filedata.dto.ts");
Object.defineProperty(exports, "CreateFileDataDto", ({ enumerable: true, get: function () { return create_filedata_dto_1.CreateFileDataDto; } }));
var file_response_dto_1 = __webpack_require__(/*! ./context/file/dtos/file-response.dto */ "./src/context/file/dtos/file-response.dto.ts");
Object.defineProperty(exports, "FileResponseDto", ({ enumerable: true, get: function () { return file_response_dto_1.FileResponseDto; } }));
var reservation_vehicle_file_response_dto_1 = __webpack_require__(/*! ./context/file/dtos/reservation-vehicle-file-response.dto */ "./src/context/file/dtos/reservation-vehicle-file-response.dto.ts");
Object.defineProperty(exports, "ReservationVehicleFileResponseDto", ({ enumerable: true, get: function () { return reservation_vehicle_file_response_dto_1.ReservationVehicleFileResponseDto; } }));
__exportStar(__webpack_require__(/*! ./context/file/dtos/index */ "./src/context/file/dtos/index.ts"), exports);
var notification_list_response_dto_1 = __webpack_require__(/*! ./business/notification-management/dtos/notification-list-response.dto */ "./src/business/notification-management/dtos/notification-list-response.dto.ts");
Object.defineProperty(exports, "NotificationListResponseDto", ({ enumerable: true, get: function () { return notification_list_response_dto_1.NotificationListResponseDto; } }));


/***/ }),

/***/ "./src/business/employee-management/controllers/employee.controller.ts":
/*!*****************************************************************************!*\
  !*** ./src/business/employee-management/controllers/employee.controller.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const employees_by_department_response_dto_1 = __webpack_require__(/*! ../dtos/employees-by-department-response.dto */ "./src/business/employee-management/dtos/employees-by-department-response.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const employee_management_service_1 = __webpack_require__(/*! ../employee-management.service */ "./src/business/employee-management/employee-management.service.ts");
let EmployeeController = class EmployeeController {
    constructor(employeeManagementService) {
        this.employeeManagementService = employeeManagementService;
    }
    async findAllEmplyeesByDepartment() {
        return this.employeeManagementService.findEmployeeList();
    }
};
exports.EmployeeController = EmployeeController;
__decorate([
    (0, common_1.Get)('department'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, swagger_1.ApiOperation)({ summary: '부서별 직원 목록 조회 #사용자/참석자설정/모달' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '부서별 직원 목록을 성공적으로 조회했습니다.',
        type: [employees_by_department_response_dto_1.EmplyeesByDepartmentResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], EmployeeController.prototype, "findAllEmplyeesByDepartment", null);
exports.EmployeeController = EmployeeController = __decorate([
    (0, swagger_1.ApiTags)('v2 직원'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('v2/employees'),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_management_service_1.EmployeeManagementService !== "undefined" && employee_management_service_1.EmployeeManagementService) === "function" ? _a : Object])
], EmployeeController);


/***/ }),

/***/ "./src/business/employee-management/controllers/resource-manager.controller.ts":
/*!*************************************************************************************!*\
  !*** ./src/business/employee-management/controllers/resource-manager.controller.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceManagerController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const employee_management_service_1 = __webpack_require__(/*! ../employee-management.service */ "./src/business/employee-management/employee-management.service.ts");
const employees_by_department_response_dto_1 = __webpack_require__(/*! ../dtos/employees-by-department-response.dto */ "./src/business/employee-management/dtos/employees-by-department-response.dto.ts");
let ResourceManagerController = class ResourceManagerController {
    constructor(employeeManagementService) {
        this.employeeManagementService = employeeManagementService;
    }
    async findAllResourceManagers() {
        return this.employeeManagementService.findResourceManagers();
    }
};
exports.ResourceManagerController = ResourceManagerController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 관리자 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 관리자 목록 조회 성공',
        type: [employees_by_department_response_dto_1.EmplyeesByDepartmentResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], ResourceManagerController.prototype, "findAllResourceManagers", null);
exports.ResourceManagerController = ResourceManagerController = __decorate([
    (0, swagger_1.ApiTags)('v2 자원 관리자'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('v2/resource-managers'),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_management_service_1.EmployeeManagementService !== "undefined" && employee_management_service_1.EmployeeManagementService) === "function" ? _a : Object])
], ResourceManagerController);


/***/ }),

/***/ "./src/business/employee-management/controllers/user.controller.ts":
/*!*************************************************************************!*\
  !*** ./src/business/employee-management/controllers/user.controller.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const user_response_dto_1 = __webpack_require__(/*! ../dtos/user-response.dto */ "./src/business/employee-management/dtos/user-response.dto.ts");
const check_password_dto_1 = __webpack_require__(/*! ../dtos/check-password.dto */ "./src/business/employee-management/dtos/check-password.dto.ts");
const change_password_dto_1 = __webpack_require__(/*! ../dtos/change-password.dto */ "./src/business/employee-management/dtos/change-password.dto.ts");
const notification_settings_dto_1 = __webpack_require__(/*! ../dtos/notification-settings.dto */ "./src/business/employee-management/dtos/notification-settings.dto.ts");
const employee_management_service_1 = __webpack_require__(/*! ../employee-management.service */ "./src/business/employee-management/employee-management.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const change_role_dto_1 = __webpack_require__(/*! ../dtos/change-role.dto */ "./src/business/employee-management/dtos/change-role.dto.ts");
let UserController = class UserController {
    constructor(employeeManagementService) {
        this.employeeManagementService = employeeManagementService;
    }
    findUser() {
        return this.employeeManagementService.findManagerCandidates();
    }
    changeRole(changeRoleDto) {
        return this.employeeManagementService.changeRole(changeRoleDto);
    }
    findMe(user) {
        return this.employeeManagementService.findEmployeeDetail(user.employeeId);
    }
    checkPassword(user, checkPasswordDto) {
        return this.employeeManagementService.checkPassword(user.employeeId, checkPasswordDto.password);
    }
    changePassword(user, changePasswordDto) {
        return this.employeeManagementService.changePassword(user.employeeId, changePasswordDto.newPassword);
    }
    async changeNotificationSettings(user, updateDto) {
        return this.employeeManagementService.changeNotificationSettings(user.employeeId, updateDto);
    }
};
exports.UserController = UserController;
__decorate([
    (0, common_1.Get)(''),
    (0, swagger_1.ApiOperation)({ summary: '직원 목록 조회 - 자원담당자로 설정하기 위한 직원 목록' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '직원 목록 조회 성공', type: [user_response_dto_1.UserResponseDto] }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], UserController.prototype, "findUser", null);
__decorate([
    (0, common_1.Patch)('change/role'),
    (0, swagger_1.ApiOperation)({ summary: '자원 담당자 설정 - 자원별 담당자 설정 또는 토글 방식' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '자원 담당자 설정 성공' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof change_role_dto_1.ChangeRoleDto !== "undefined" && change_role_dto_1.ChangeRoleDto) === "function" ? _b : Object]),
    __metadata("design:returntype", void 0)
], UserController.prototype, "changeRole", null);
__decorate([
    (0, common_1.Get)('me'),
    (0, swagger_1.ApiOperation)({ summary: '내 상세 정보 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '내 상세 정보 조회 성공', type: user_response_dto_1.UserResponseDto }),
    __param(0, (0, user_decorator_1.User)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _c : Object]),
    __metadata("design:returntype", void 0)
], UserController.prototype, "findMe", null);
__decorate([
    (0, common_1.Post)('check-password'),
    (0, swagger_1.ApiOperation)({ summary: '비밀번호 확인' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '비밀번호 확인 성공' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _d : Object, typeof (_e = typeof check_password_dto_1.CheckPasswordDto !== "undefined" && check_password_dto_1.CheckPasswordDto) === "function" ? _e : Object]),
    __metadata("design:returntype", void 0)
], UserController.prototype, "checkPassword", null);
__decorate([
    (0, common_1.Post)('change-password'),
    (0, swagger_1.ApiOperation)({ summary: '비밀번호 변경' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '비밀번호 변경 성공' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _f : Object, typeof (_g = typeof change_password_dto_1.ChangePasswordDto !== "undefined" && change_password_dto_1.ChangePasswordDto) === "function" ? _g : Object]),
    __metadata("design:returntype", void 0)
], UserController.prototype, "changePassword", null);
__decorate([
    (0, common_1.Patch)('me/notification-settings'),
    (0, swagger_1.ApiOperation)({ summary: '알림 설정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '알림 설정 성공',
        type: user_response_dto_1.UserResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_h = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _h : Object, typeof (_j = typeof notification_settings_dto_1.UpdateNotificationSettingsDto !== "undefined" && notification_settings_dto_1.UpdateNotificationSettingsDto) === "function" ? _j : Object]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], UserController.prototype, "changeNotificationSettings", null);
exports.UserController = UserController = __decorate([
    (0, swagger_1.ApiTags)('v2 유저'),
    (0, common_1.Controller)('v2/users'),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_management_service_1.EmployeeManagementService !== "undefined" && employee_management_service_1.EmployeeManagementService) === "function" ? _a : Object])
], UserController);


/***/ }),

/***/ "./src/business/employee-management/dtos/change-password.dto.ts":
/*!**********************************************************************!*\
  !*** ./src/business/employee-management/dtos/change-password.dto.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangePasswordDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ChangePasswordDto {
}
exports.ChangePasswordDto = ChangePasswordDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'newPassword123',
        description: '새로운 비밀번호',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], ChangePasswordDto.prototype, "newPassword", void 0);


/***/ }),

/***/ "./src/business/employee-management/dtos/change-role.dto.ts":
/*!******************************************************************!*\
  !*** ./src/business/employee-management/dtos/change-role.dto.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangeRoleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ChangeRoleDto {
}
exports.ChangeRoleDto = ChangeRoleDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'employeeId',
        description: '직원 아이디',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], ChangeRoleDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: true,
        description: '자원 담당자 여부',
    }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", Boolean)
], ChangeRoleDto.prototype, "isResourceAdmin", void 0);


/***/ }),

/***/ "./src/business/employee-management/dtos/check-password.dto.ts":
/*!*********************************************************************!*\
  !*** ./src/business/employee-management/dtos/check-password.dto.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckPasswordDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CheckPasswordDto {
}
exports.CheckPasswordDto = CheckPasswordDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'currentPassword123',
        description: '현재 비밀번호',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], CheckPasswordDto.prototype, "password", void 0);


/***/ }),

/***/ "./src/business/employee-management/dtos/create-employee.dto.ts":
/*!**********************************************************************!*\
  !*** ./src/business/employee-management/dtos/create-employee.dto.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateEmployeeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreateEmployeeDto {
}
exports.CreateEmployeeDto = CreateEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "position", void 0);


/***/ }),

/***/ "./src/business/employee-management/dtos/employee-response.dto.ts":
/*!************************************************************************!*\
  !*** ./src/business/employee-management/dtos/employee-response.dto.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EmployeeResponseDto {
}
exports.EmployeeResponseDto = EmployeeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "position", void 0);


/***/ }),

/***/ "./src/business/employee-management/dtos/employees-by-department-response.dto.ts":
/*!***************************************************************************************!*\
  !*** ./src/business/employee-management/dtos/employees-by-department-response.dto.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmplyeesByDepartmentResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EmplyeesByDepartmentResponseDto {
}
exports.EmplyeesByDepartmentResponseDto = EmplyeesByDepartmentResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmplyeesByDepartmentResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], EmplyeesByDepartmentResponseDto.prototype, "employees", void 0);


/***/ }),

/***/ "./src/business/employee-management/dtos/mms-employee-response.dto.ts":
/*!****************************************************************************!*\
  !*** ./src/business/employee-management/dtos/mms-employee-response.dto.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MMSWebhookRequestDto = exports.MMSEmployeeResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class MMSEmployeeResponseDto {
    constructor(employee) {
        this.id = employee.id;
        this.employee_number = employee.employee_number;
        this.name = employee.name;
        this.email = employee.email;
        this.phone_number = employee.phone_number;
        this.date_of_birth = employee.date_of_birth;
        this.gender = employee.gender;
        this.hire_date = employee.hire_date;
        this.status = employee.status;
        this.department = employee.department?.department_code;
        this.position = employee.position?.position_title;
        this.rank = employee.rank?.rank_name;
    }
}
exports.MMSEmployeeResponseDto = MMSEmployeeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID', example: '67d116b591e5366c327915d2' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '사번', example: '24020' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "employee_number", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이름', example: '구석현' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이메일', example: 'koo.sukhyun@lumir.space' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '전화번호', example: '010-1234-5678' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "phone_number", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '생년월일', example: '1980-07-04T00:00:00.000Z' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], MMSEmployeeResponseDto.prototype, "date_of_birth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '성별', example: 'MALE' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '입사일', example: '2024-05-21T00:00:00.000Z' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], MMSEmployeeResponseDto.prototype, "hire_date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '재직 상태', example: '재직중' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '부서', example: '대표이사' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직위', example: '대표이사' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직급', example: '대표이사' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "rank", void 0);
class MMSWebhookRequestDto {
}
exports.MMSWebhookRequestDto = MMSWebhookRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이벤트 타입', example: 'employee.updated' }),
    __metadata("design:type", String)
], MMSWebhookRequestDto.prototype, "event_type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '엔티티 타입', example: 'employee' }),
    __metadata("design:type", String)
], MMSWebhookRequestDto.prototype, "entity_type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '타임스탬프', example: '2025-04-29T02:11:51.794Z' }),
    __metadata("design:type", String)
], MMSWebhookRequestDto.prototype, "timestamp", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '페이로드' }),
    __metadata("design:type", MMSEmployeeResponseDto)
], MMSWebhookRequestDto.prototype, "payload", void 0);


/***/ }),

/***/ "./src/business/employee-management/dtos/notification-settings.dto.ts":
/*!****************************************************************************!*\
  !*** ./src/business/employee-management/dtos/notification-settings.dto.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateNotificationSettingsDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class UpdateNotificationSettingsDto {
}
exports.UpdateNotificationSettingsDto = UpdateNotificationSettingsDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '웹푸시 알림 설정 여부',
        default: true,
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateNotificationSettingsDto.prototype, "isPushNotificationEnabled", void 0);


/***/ }),

/***/ "./src/business/employee-management/dtos/update-employee.dto.ts":
/*!**********************************************************************!*\
  !*** ./src/business/employee-management/dtos/update-employee.dto.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateEmployeeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class UpdateEmployeeDto {
}
exports.UpdateEmployeeDto = UpdateEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "position", void 0);


/***/ }),

/***/ "./src/business/employee-management/dtos/user-response.dto.ts":
/*!********************************************************************!*\
  !*** ./src/business/employee-management/dtos/user-response.dto.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class UserResponseDto {
}
exports.UserResponseDto = UserResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '550e8400-e29b-41d4-a716-446655440000',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'test@lumir.space',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '01012345678',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "mobile", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '홍길동',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'Web 파트',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '연구원',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: ['USER', 'RESOURCE_ADMIN', 'SYSTEM_ADMIN'],
    }),
    __metadata("design:type", Array)
], UserResponseDto.prototype, "roles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: true,
    }),
    __metadata("design:type", Boolean)
], UserResponseDto.prototype, "isPushNotificationEnabled", void 0);


/***/ }),

/***/ "./src/business/employee-management/employee-management.module.ts":
/*!************************************************************************!*\
  !*** ./src/business/employee-management/employee-management.module.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeManagementModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_manager_controller_1 = __webpack_require__(/*! ./controllers/resource-manager.controller */ "./src/business/employee-management/controllers/resource-manager.controller.ts");
const employee_controller_1 = __webpack_require__(/*! ./controllers/employee.controller */ "./src/business/employee-management/controllers/employee.controller.ts");
const user_controller_1 = __webpack_require__(/*! ./controllers/user.controller */ "./src/business/employee-management/controllers/user.controller.ts");
const employee_management_service_1 = __webpack_require__(/*! ./employee-management.service */ "./src/business/employee-management/employee-management.service.ts");
const employee_context_module_1 = __webpack_require__(/*! @src/context/employee/employee.context.module */ "./src/context/employee/employee.context.module.ts");
let EmployeeManagementModule = class EmployeeManagementModule {
};
exports.EmployeeManagementModule = EmployeeManagementModule;
exports.EmployeeManagementModule = EmployeeManagementModule = __decorate([
    (0, common_1.Module)({
        imports: [employee_context_module_1.EmployeeContextModule],
        controllers: [resource_manager_controller_1.ResourceManagerController, employee_controller_1.EmployeeController, user_controller_1.UserController],
        providers: [employee_management_service_1.EmployeeManagementService],
        exports: [employee_management_service_1.EmployeeManagementService],
    })
], EmployeeManagementModule);


/***/ }),

/***/ "./src/business/employee-management/employee-management.service.ts":
/*!*************************************************************************!*\
  !*** ./src/business/employee-management/employee-management.service.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeManagementService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_context_service_1 = __webpack_require__(/*! @src/context/employee/employee.context.service */ "./src/context/employee/employee.context.service.ts");
let EmployeeManagementService = class EmployeeManagementService {
    constructor(employeeContextService) {
        this.employeeContextService = employeeContextService;
    }
    async findResourceManagers() {
        return this.employeeContextService.자원관리자_목록을_조회한다();
    }
    async findManagerCandidates() {
        return this.employeeContextService.관리자_후보_목록을_조회한다();
    }
    async changeRole(changeRoleDto) {
        await this.employeeContextService.직원_역할을_변경한다(changeRoleDto);
        return { success: true };
    }
    async findEmployeeList() {
        return this.employeeContextService.직원_목록을_조회한다();
    }
    async findEmployeeDetail(employeeId) {
        return this.employeeContextService.직원_상세정보를_조회한다(employeeId);
    }
    async checkPassword(employeeId, password) {
        const isValid = await this.employeeContextService.비밀번호를_확인한다(employeeId, password);
        return { isValid };
    }
    async changePassword(employeeId, newPassword) {
        await this.employeeContextService.비밀번호를_변경한다(employeeId, newPassword);
        return { success: true };
    }
    async changeNotificationSettings(employeeId, updateDto) {
        return this.employeeContextService.알림설정을_변경한다(employeeId, updateDto);
    }
};
exports.EmployeeManagementService = EmployeeManagementService;
exports.EmployeeManagementService = EmployeeManagementService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_context_service_1.EmployeeContextService !== "undefined" && employee_context_service_1.EmployeeContextService) === "function" ? _a : Object])
], EmployeeManagementService);


/***/ }),

/***/ "./src/business/notification-management/controllers/cron.notification.controller.ts":
/*!******************************************************************************************!*\
  !*** ./src/business/notification-management/controllers/cron.notification.controller.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CronNotificationController = void 0;
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const notification_management_service_1 = __webpack_require__(/*! ../notification-management.service */ "./src/business/notification-management/notification-management.service.ts");
let CronNotificationController = class CronNotificationController {
    constructor(notificationManagementService) {
        this.notificationManagementService = notificationManagementService;
    }
    async sendUpcomingNotification() {
        return this.notificationManagementService.다가오는_일정의_알림을_전송한다();
    }
};
exports.CronNotificationController = CronNotificationController;
__decorate([
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, common_1.Get)('cron-job/send-upcoming-notification'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], CronNotificationController.prototype, "sendUpcomingNotification", null);
exports.CronNotificationController = CronNotificationController = __decorate([
    (0, swagger_1.ApiTags)('v2 알림 '),
    (0, common_1.Controller)('v1/notifications'),
    (0, public_decorator_1.Public)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_management_service_1.NotificationManagementService !== "undefined" && notification_management_service_1.NotificationManagementService) === "function" ? _a : Object])
], CronNotificationController);


/***/ }),

/***/ "./src/business/notification-management/controllers/notification.controller.ts":
/*!*************************************************************************************!*\
  !*** ./src/business/notification-management/controllers/notification.controller.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationController = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const business_dto_index_1 = __webpack_require__(/*! @src/business.dto.index */ "./src/business.dto.index.ts");
const notification_management_service_1 = __webpack_require__(/*! ../notification-management.service */ "./src/business/notification-management/notification-management.service.ts");
let NotificationController = class NotificationController {
    constructor(notificationManagementService) {
        this.notificationManagementService = notificationManagementService;
    }
    async subscribe(user, subscription) {
        await this.notificationManagementService.웹푸시를_구독한다(user.employeeId, subscription);
    }
    async sendSuccess(body) {
        await this.notificationManagementService.푸시_알림을_직접_전송한다([body.subscription.fcm.token], body.payload);
    }
    async send(sendNotificationDto) {
        await this.notificationManagementService.알림을_전송한다(sendNotificationDto.notificationType, sendNotificationDto.notificationData, sendNotificationDto.notificationTarget);
    }
    async getNotificationTypes() {
        return await this.notificationManagementService.알림_타입_목록을_조회한다();
    }
    async findAllByEmployeeId(employeeId, query, resourceType) {
        return await this.notificationManagementService.내_알림_목록을_조회한다(employeeId, query, resourceType);
    }
    async markAsRead(user, notificationId) {
        await this.notificationManagementService.알림을_읽음_처리한다(user.employeeId, notificationId);
    }
    async markAllAsRead(employeeId) {
        await this.notificationManagementService.모든_알림을_읽음_처리한다(employeeId);
    }
};
exports.NotificationController = NotificationController;
__decorate([
    (0, common_1.Post)('subscribe'),
    (0, swagger_1.ApiOperation)({ summary: '웹 푸시 구독' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '웹 푸시 구독 성공',
        type: business_dto_index_1.ResponseNotificationDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object, typeof (_c = typeof business_dto_index_1.PushSubscriptionDto !== "undefined" && business_dto_index_1.PushSubscriptionDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], NotificationController.prototype, "subscribe", null);
__decorate([
    (0, common_1.Post)('subscribe/success'),
    (0, swagger_1.ApiOperation)({ summary: '웹 푸시 구독 성공' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '웹 푸시 구독 성공',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof business_dto_index_1.PushNotificationDto !== "undefined" && business_dto_index_1.PushNotificationDto) === "function" ? _e : Object]),
    __metadata("design:returntype", Promise)
], NotificationController.prototype, "sendSuccess", null);
__decorate([
    (0, common_1.Post)('send'),
    (0, swagger_1.ApiOperation)({ summary: '알림 전송' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '알림 전송 성공',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof business_dto_index_1.SendNotificationDto !== "undefined" && business_dto_index_1.SendNotificationDto) === "function" ? _f : Object]),
    __metadata("design:returntype", Promise)
], NotificationController.prototype, "send", null);
__decorate([
    (0, common_1.Get)('types'),
    (0, swagger_1.ApiOperation)({ summary: '알림 타입 목록 조회' }),
    (0, swagger_1.ApiOkResponse)({
        description: '알림 타입 목록 조회 성공',
        type: [business_dto_index_1.NotificationTypeResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], NotificationController.prototype, "getNotificationTypes", null);
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '알람 목록 조회' }),
    (0, swagger_1.ApiOkResponse)({
        description: '알람 목록 조회 성공',
        type: business_dto_index_1.NotificationListResponseDto,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'page',
        type: Number,
        required: false,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'limit',
        type: Number,
        required: false,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'resourceType',
        enum: resource_type_enum_1.ResourceType,
        required: false,
        description: '자원 타입별 필터링 (차량, 회의실, 숙박시설, 장비)',
    }),
    __param(0, (0, user_decorator_1.User)('employeeId')),
    __param(1, (0, common_1.Query)()),
    __param(2, (0, common_1.Query)('resourceType')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_h = typeof business_dto_index_1.PaginationQueryDto !== "undefined" && business_dto_index_1.PaginationQueryDto) === "function" ? _h : Object, typeof (_j = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _j : Object]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], NotificationController.prototype, "findAllByEmployeeId", null);
__decorate([
    (0, common_1.Patch)(':notificationId/read'),
    (0, swagger_1.ApiOperation)({ summary: '알람 읽음 처리' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '알람 읽음 처리 성공',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('notificationId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_l = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _l : Object, String]),
    __metadata("design:returntype", Promise)
], NotificationController.prototype, "markAsRead", null);
__decorate([
    (0, common_1.Patch)('mark-all-read'),
    (0, swagger_1.ApiOperation)({ summary: '모든 알람 읽음 처리' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '모든 알람 읽음 처리 성공',
    }),
    __param(0, (0, user_decorator_1.User)('employeeId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], NotificationController.prototype, "markAllAsRead", null);
exports.NotificationController = NotificationController = __decorate([
    (0, swagger_1.ApiTags)('v2 알림 '),
    (0, common_1.Controller)('v2/notifications'),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_management_service_1.NotificationManagementService !== "undefined" && notification_management_service_1.NotificationManagementService) === "function" ? _a : Object])
], NotificationController);


/***/ }),

/***/ "./src/business/notification-management/dtos/notification-list-response.dto.ts":
/*!*************************************************************************************!*\
  !*** ./src/business/notification-management/dtos/notification-list-response.dto.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationListResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const business_dto_index_1 = __webpack_require__(/*! @src/business.dto.index */ "./src/business.dto.index.ts");
class NotificationListResponseDto {
}
exports.NotificationListResponseDto = NotificationListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '알림 목록',
        type: 'array',
        items: {
            type: 'object',
            properties: {
                notificationId: {
                    type: 'string',
                    description: '알림 ID',
                    example: 'notification-uuid-123',
                },
                title: {
                    type: 'string',
                    description: '알림 제목',
                    example: '[예약 확정] 회의실 A 예약',
                },
                body: {
                    type: 'string',
                    description: '알림 내용',
                    example: '2024-01-15 09:00 ~ 10:00',
                },
                notificationType: {
                    type: 'string',
                    description: '알림 타입',
                    example: 'RESERVATION_STATUS_CONFIRMED',
                },
                notificationData: {
                    type: 'object',
                    description: '알림 관련 상세 데이터',
                },
                createdAt: {
                    type: 'string',
                    description: '생성 시간',
                    example: '2024-01-01T00:00:00.000Z',
                },
                isRead: {
                    type: 'boolean',
                    description: '읽음 여부',
                    example: false,
                },
            },
        },
    }),
    (0, class_validator_1.ValidateNested)({ each: true }),
    (0, class_transformer_1.Type)(() => business_dto_index_1.ResponseNotificationDto),
    __metadata("design:type", Array)
], NotificationListResponseDto.prototype, "items", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '페이지네이션 메타데이터',
        type: business_dto_index_1.PaginationMetaDto,
        example: {
            total: 50,
            page: 1,
            limit: 20,
            hasNext: true,
        },
    }),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => business_dto_index_1.PaginationMetaDto),
    __metadata("design:type", typeof (_a = typeof business_dto_index_1.PaginationMetaDto !== "undefined" && business_dto_index_1.PaginationMetaDto) === "function" ? _a : Object)
], NotificationListResponseDto.prototype, "meta", void 0);


/***/ }),

/***/ "./src/business/notification-management/notification-management.module.ts":
/*!********************************************************************************!*\
  !*** ./src/business/notification-management/notification-management.module.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationManagementModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const notification_context_module_1 = __webpack_require__(/*! @src/context/notification/notification.context.module */ "./src/context/notification/notification.context.module.ts");
const schedule_context_module_1 = __webpack_require__(/*! @src/context/schedule/schedule.context.module */ "./src/context/schedule/schedule.context.module.ts");
const notification_management_service_1 = __webpack_require__(/*! ./notification-management.service */ "./src/business/notification-management/notification-management.service.ts");
const notification_controller_1 = __webpack_require__(/*! ./controllers/notification.controller */ "./src/business/notification-management/controllers/notification.controller.ts");
const cron_notification_controller_1 = __webpack_require__(/*! ./controllers/cron.notification.controller */ "./src/business/notification-management/controllers/cron.notification.controller.ts");
let NotificationManagementModule = class NotificationManagementModule {
};
exports.NotificationManagementModule = NotificationManagementModule;
exports.NotificationManagementModule = NotificationManagementModule = __decorate([
    (0, common_1.Module)({
        imports: [
            notification_context_module_1.NotificationContextModule,
            schedule_context_module_1.ScheduleContextModule,
        ],
        controllers: [notification_controller_1.NotificationController, cron_notification_controller_1.CronNotificationController],
        providers: [notification_management_service_1.NotificationManagementService],
        exports: [notification_management_service_1.NotificationManagementService],
    })
], NotificationManagementModule);


/***/ }),

/***/ "./src/business/notification-management/notification-management.service.ts":
/*!*********************************************************************************!*\
  !*** ./src/business/notification-management/notification-management.service.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationManagementService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const notification_context_service_1 = __webpack_require__(/*! @src/context/notification/services/notification.context.service */ "./src/context/notification/services/notification.context.service.ts");
const cron_notification_context_service_1 = __webpack_require__(/*! @src/context/notification/services/cron-notification.context.service */ "./src/context/notification/services/cron-notification.context.service.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const schedule_query_context_service_1 = __webpack_require__(/*! @src/context/schedule/services/schedule-query.context.service */ "./src/context/schedule/services/schedule-query.context.service.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let NotificationManagementService = class NotificationManagementService {
    constructor(notificationContextService, cronNotificationContextService, scheduleContextService) {
        this.notificationContextService = notificationContextService;
        this.cronNotificationContextService = cronNotificationContextService;
        this.scheduleContextService = scheduleContextService;
    }
    async onModuleInit() {
    }
    async 웹푸시를_구독한다(employeeId, subscription) {
        await this.notificationContextService.PUSH_알림을_구독한다(employeeId, subscription);
    }
    async 알림을_전송한다(notificationType, notificationData, notificationTarget) {
        await this.notificationContextService.알림_전송_프로세스를_진행한다(notificationType, notificationData, notificationTarget);
    }
    async 리마인더_알림을_전송한다(notificationData, notificationTarget) {
        await this.notificationContextService.알림_전송_프로세스를_진행한다(notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING, notificationData, notificationTarget);
    }
    async 푸시_알림을_직접_전송한다(tokens, payload) {
        await this.notificationContextService.알림을_전송한다(tokens, payload);
    }
    async 내_알림_목록을_조회한다(employeeId, query, resourceType) {
        return await this.notificationContextService.내_알림_목록을_조회한다(employeeId, query, resourceType);
    }
    async 알림을_읽음_처리한다(employeeId, notificationId) {
        await this.notificationContextService.알림을_읽음_처리한다(employeeId, notificationId);
    }
    async 모든_알림을_읽음_처리한다(employeeId) {
        await this.notificationContextService.모든_알림을_읽음_처리한다(employeeId);
    }
    async 알림_타입_목록을_조회한다() {
        return await this.notificationContextService.알림_타입_목록을_조회한다();
    }
    async 다가오는_일정의_알림을_전송한다() {
        const upcomingSchedules = await this.scheduleContextService.다가오는_일정을_조회한다();
        if (upcomingSchedules.length === 0) {
            return;
        }
        const scheduledInfos = await this.scheduleContextService.복수_일정과_관계정보들을_조회한다(upcomingSchedules.map((schedule) => schedule.scheduleId), {
            withReservation: true,
            withResource: true,
            withParticipants: true,
        });
        for (const scheduledInfo of scheduledInfos) {
            const { schedule, reservation, resource, participants } = scheduledInfo;
            const notificationData = {
                schedule: {
                    scheduleId: schedule.scheduleId,
                    scheduleTitle: schedule.title,
                    beforeMinutes: schedule.notifyMinutesBeforeStart[0],
                    startDate: date_util_1.DateUtil.format(schedule.startDate, 'YYYY-MM-DD HH:mm'),
                    endDate: date_util_1.DateUtil.format(schedule.endDate, 'YYYY-MM-DD HH:mm'),
                },
                reservation: {
                    reservationId: reservation?.reservationId,
                    reservationTitle: reservation?.title,
                    reservationDate: date_util_1.DateUtil.format(reservation?.startDate, 'YYYY-MM-DD HH:mm'),
                    status: reservation?.status,
                },
                resource: {
                    resourceId: resource?.resourceId,
                    resourceName: resource?.name,
                    resourceType: resource?.type,
                },
            };
            const notificationTarget = participants.map((participant) => participant.employee.employeeId);
            await this.notificationContextService.알림_전송_프로세스를_진행한다(notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING, notificationData, notificationTarget);
        }
    }
};
exports.NotificationManagementService = NotificationManagementService;
exports.NotificationManagementService = NotificationManagementService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_context_service_1.NotificationContextService !== "undefined" && notification_context_service_1.NotificationContextService) === "function" ? _a : Object, typeof (_b = typeof cron_notification_context_service_1.CronNotificationContextService !== "undefined" && cron_notification_context_service_1.CronNotificationContextService) === "function" ? _b : Object, typeof (_c = typeof schedule_query_context_service_1.ScheduleQueryContextService !== "undefined" && schedule_query_context_service_1.ScheduleQueryContextService) === "function" ? _c : Object])
], NotificationManagementService);


/***/ }),

/***/ "./src/business/reservation-management/controllers/cron.reservation.controller.ts":
/*!****************************************************************************************!*\
  !*** ./src/business/reservation-management/controllers/cron.reservation.controller.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CronReservationController = void 0;
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const cron_reservation_service_1 = __webpack_require__(/*! ../services/cron-reservation.service */ "./src/business/reservation-management/services/cron-reservation.service.ts");
let CronReservationController = class CronReservationController {
    constructor(cronReservationService) {
        this.cronReservationService = cronReservationService;
    }
    async closeReservation() {
        return this.cronReservationService.closeReservation();
    }
    async handleStartOdometer() {
        return this.cronReservationService.handleStartOdometer();
    }
};
exports.CronReservationController = CronReservationController;
__decorate([
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, common_1.Get)('cron-job/close'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], CronReservationController.prototype, "closeReservation", null);
__decorate([
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, common_1.Get)('cron-job/start-odometer'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], CronReservationController.prototype, "handleStartOdometer", null);
exports.CronReservationController = CronReservationController = __decorate([
    (0, swagger_1.ApiTags)('v2 예약 '),
    (0, public_decorator_1.Public)(),
    (0, common_1.Controller)('v1/reservations'),
    __metadata("design:paramtypes", [typeof (_a = typeof cron_reservation_service_1.CronReservationService !== "undefined" && cron_reservation_service_1.CronReservationService) === "function" ? _a : Object])
], CronReservationController);


/***/ }),

/***/ "./src/business/reservation-management/controllers/reservation.controller.ts":
/*!***********************************************************************************!*\
  !*** ./src/business/reservation-management/controllers/reservation.controller.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./src/business/reservation-management/dtos/reservation-response.dto.ts");
const pagination_query_dto_1 = __webpack_require__(/*! @libs/dtos/pagination-query.dto */ "./libs/dtos/pagination-query.dto.ts");
const update_reservation_dto_1 = __webpack_require__(/*! ../dtos/update-reservation.dto */ "./src/business/reservation-management/dtos/update-reservation.dto.ts");
const reservation_service_1 = __webpack_require__(/*! ../services/reservation.service */ "./src/business/reservation-management/services/reservation.service.ts");
const update_reservation_dto_2 = __webpack_require__(/*! ../dtos/update-reservation.dto */ "./src/business/reservation-management/dtos/update-reservation.dto.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let ReservationController = class ReservationController {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async findReservationList(startDate, endDate, resourceType, resourceId, status) {
        return this.reservationService.findReservationList(startDate, endDate, resourceType, resourceId, status);
    }
    async findCheckReservationList(query) {
        return this.reservationService.findCheckReservationList(query);
    }
    async findOne(user, reservationId) {
        return this.reservationService.findOne(user, reservationId);
    }
    async updateStatus(reservationId, updateDto) {
        return this.reservationService.updateStatus(reservationId, updateDto);
    }
    async returnVehicle(user, reservationId, returnDto) {
        return this.reservationService.returnVehicle(user, reservationId, returnDto);
    }
};
exports.ReservationController = ReservationController;
__decorate([
    (0, common_1.Get)(''),
    (0, swagger_1.ApiOperation)({
        summary: '예약 리스트 조회 #관리자/예약관리',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '예약 리스트 조회 성공',
        type: [reservation_response_dto_1.ReservationWithRelationsResponseDto],
    }),
    (0, swagger_1.ApiQuery)({
        name: 'startDate',
        type: String,
        required: false,
        example: date_util_1.DateUtil.now().addDays(-20).format('YYYY-MM-DD'),
    }),
    (0, swagger_1.ApiQuery)({
        name: 'endDate',
        type: String,
        required: false,
        example: date_util_1.DateUtil.now().addDays(30).format('YYYY-MM-DD'),
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({ name: 'resourceId', type: String, required: false, example: '78117aaf-a203-43a3-bb38-51ec91ca935a' }),
    (0, swagger_1.ApiQuery)({
        name: 'status',
        enum: reservation_type_enum_1.ReservationStatus,
        description: `Available values : ${Object.values(reservation_type_enum_1.ReservationStatus).join(', ')}`,
        isArray: true,
        required: false,
        example: [reservation_type_enum_1.ReservationStatus.CONFIRMED],
    }),
    __param(0, (0, common_1.Query)('startDate')),
    __param(1, (0, common_1.Query)('endDate')),
    __param(2, (0, common_1.Query)('resourceType')),
    __param(3, (0, common_1.Query)('resourceId')),
    __param(4, (0, common_1.Query)('status', new common_1.ParseArrayPipe({ optional: true, separator: ',' }))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, typeof (_b = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _b : Object, String, Array]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], ReservationController.prototype, "findReservationList", null);
__decorate([
    (0, common_1.Get)('check'),
    (0, swagger_1.ApiOperation)({ summary: '확인이 필요한 예약들' }),
    (0, swagger_1.ApiOkResponse)({
        description: '확인이 필요한 예약들 조회 성공',
        type: [reservation_response_dto_1.ReservationWithRelationsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof pagination_query_dto_1.PaginationQueryDto !== "undefined" && pagination_query_dto_1.PaginationQueryDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], ReservationController.prototype, "findCheckReservationList", null);
__decorate([
    (0, common_1.Get)(':reservationId'),
    (0, swagger_1.ApiOperation)({ summary: '예약 상세 조회 #사용자/예약상세페이지' }),
    (0, swagger_1.ApiOkResponse)({
        description: '예약 상세 조회 성공',
        type: reservation_response_dto_1.ReservationWithRelationsResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _f : Object, String]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], ReservationController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':reservationId/status'),
    (0, swagger_1.ApiOperation)({ summary: '예약 상태 수정 #관리자/예약관리/예약상세' }),
    (0, swagger_1.ApiOkResponse)({
        description: '예약 상태 수정 성공',
        type: reservation_response_dto_1.ReservationResponseDto,
    }),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    __param(0, (0, common_1.Param)('reservationId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_h = typeof update_reservation_dto_2.UpdateReservationStatusDto !== "undefined" && update_reservation_dto_2.UpdateReservationStatusDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], ReservationController.prototype, "updateStatus", null);
__decorate([
    (0, common_1.Patch)(':reservationId/return-vehicle'),
    (0, swagger_1.ApiOperation)({ summary: '차량 반납 #사용자/자원예약/차량반납' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '차량 반납 성공',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_k = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _k : Object, String, typeof (_l = typeof update_reservation_dto_1.ReturnVehicleDto !== "undefined" && update_reservation_dto_1.ReturnVehicleDto) === "function" ? _l : Object]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], ReservationController.prototype, "returnVehicle", null);
exports.ReservationController = ReservationController = __decorate([
    (0, swagger_1.ApiTags)('v2 예약 '),
    (0, common_1.Controller)('v2/reservations'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.ReservationService !== "undefined" && reservation_service_1.ReservationService) === "function" ? _a : Object])
], ReservationController);


/***/ }),

/***/ "./src/business/reservation-management/dtos/create-reservation.dto.ts":
/*!****************************************************************************!*\
  !*** ./src/business/reservation-management/dtos/create-reservation.dto.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateReservationDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
class CreateReservationDto {
}
exports.CreateReservationDto = CreateReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 ID') }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('자원 타입', Object.values(resource_type_enum_1.ResourceType)) }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], CreateReservationDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 시작 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('시작 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 종료 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('종료 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('종일 여부') }),
    __metadata("design:type", Boolean)
], CreateReservationDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('시작 전 알림 여부') }),
    __metadata("design:type", Boolean)
], CreateReservationDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, enum: reservation_type_enum_1.ReservationStatus }),
    __metadata("design:type", typeof (_b = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _b : Object)
], CreateReservationDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number], example: [10, 20] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('알림 시간') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], CreateReservationDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('참가자 ID') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('참가자 ID', '문자열') }),
    __metadata("design:type", Array)
], CreateReservationDto.prototype, "participantIds", void 0);


/***/ }),

/***/ "./src/business/reservation-management/dtos/reservaion-query.dto.ts":
/*!**************************************************************************!*\
  !*** ./src/business/reservation-management/dtos/reservaion-query.dto.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_validator_2 = __webpack_require__(/*! class-validator */ "class-validator");
const class_validator_3 = __webpack_require__(/*! class-validator */ "class-validator");
class ReservationQueryDto {
}
exports.ReservationQueryDto = ReservationQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_3.IsString)(),
    __metadata("design:type", String)
], ReservationQueryDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_3.IsString)(),
    __metadata("design:type", String)
], ReservationQueryDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType, required: false }),
    (0, class_validator_2.IsEnum)(resource_type_enum_1.ResourceType),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], ReservationQueryDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: Boolean }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], ReservationQueryDto.prototype, "isMine", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: Boolean }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], ReservationQueryDto.prototype, "isMySchedules", void 0);


/***/ }),

/***/ "./src/business/reservation-management/dtos/reservation-response.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/business/reservation-management/dtos/reservation-response.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CalendarResponseDto = exports.GroupedReservationWithResourceResponseDto = exports.GroupedReservationResponseDto = exports.CreateReservationResponseDto = exports.ReservationWithRelationsResponseDto = exports.ReservationWithResourceResponseDto = exports.ReservationVehicleResponseDto = exports.ReservationParticipantResponseDto = exports.ReservationResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_type_enum_2 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const business_dto_index_1 = __webpack_require__(/*! @resource/business.dto.index */ "./src/business.dto.index.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
class ReservationResponseDto {
    constructor(reservation) {
        this.reservationId = reservation?.reservationId;
        this.resourceId = reservation?.resourceId;
        this.title = reservation?.title;
        this.description = reservation?.description;
        this.rejectReason = reservation?.rejectReason;
        this.startDate = date_util_1.DateUtil.format(reservation?.startDate);
        this.endDate = date_util_1.DateUtil.format(reservation?.endDate);
        this.status = reservation?.status;
        this.isAllDay = reservation?.isAllDay;
        this.notifyBeforeStart = reservation?.notifyBeforeStart;
        this.notifyMinutesBeforeStart = reservation?.notifyMinutesBeforeStart;
    }
}
exports.ReservationResponseDto = ReservationResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "rejectReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: reservation_type_enum_1.ReservationStatus, required: false }),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _a : Object)
], ReservationResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationResponseDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationResponseDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number] }),
    __metadata("design:type", Array)
], ReservationResponseDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationResponseDto.prototype, "isMine", void 0);
class ReservationParticipantResponseDto {
}
exports.ReservationParticipantResponseDto = ReservationParticipantResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationParticipantResponseDto.prototype, "participantId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationParticipantResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationParticipantResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => business_dto_index_1.EmployeeResponseDto, required: false }),
    __metadata("design:type", typeof (_b = typeof business_dto_index_1.EmployeeResponseDto !== "undefined" && business_dto_index_1.EmployeeResponseDto) === "function" ? _b : Object)
], ReservationParticipantResponseDto.prototype, "employee", void 0);
class ReservationVehicleResponseDto {
}
exports.ReservationVehicleResponseDto = ReservationVehicleResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationVehicleResponseDto.prototype, "reservationVehicleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationVehicleResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "startOdometer", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "endOdometer", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "startFuelLevel", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "endFuelLevel", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ReservationVehicleResponseDto.prototype, "isReturned", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ReservationVehicleResponseDto.prototype, "returnedAt", void 0);
class ReservationWithResourceResponseDto extends ReservationResponseDto {
    constructor(reservation) {
        super(reservation);
        this.resource = reservation?.resource;
    }
}
exports.ReservationWithResourceResponseDto = ReservationWithResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => business_dto_index_1.ResourceResponseDto, required: false }),
    __metadata("design:type", typeof (_d = typeof business_dto_index_1.ResourceResponseDto !== "undefined" && business_dto_index_1.ResourceResponseDto) === "function" ? _d : Object)
], ReservationWithResourceResponseDto.prototype, "resource", void 0);
class ReservationWithRelationsResponseDto extends ReservationResponseDto {
    constructor(reservation) {
        super(reservation);
        this.resource = reservation?.resource;
        this.reservers = reservation?.participants?.filter((participant) => participant.type === reservation_type_enum_2.ParticipantsType.RESERVER);
        this.participants = reservation?.participants?.filter((participant) => participant.type === reservation_type_enum_2.ParticipantsType.PARTICIPANT);
        this.reservationVehicles = reservation?.reservationVehicles;
    }
}
exports.ReservationWithRelationsResponseDto = ReservationWithRelationsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => business_dto_index_1.ResourceResponseDto, required: false }),
    __metadata("design:type", typeof (_e = typeof business_dto_index_1.ResourceResponseDto !== "undefined" && business_dto_index_1.ResourceResponseDto) === "function" ? _e : Object)
], ReservationWithRelationsResponseDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ReservationParticipantResponseDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "reservers", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ReservationParticipantResponseDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "participants", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ReservationVehicleResponseDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "reservationVehicles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [business_dto_index_1.ResponseNotificationDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "notifications", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "isMine", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "returnable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "isDelayed", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "modifiable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "hasUnreadNotification", void 0);
class CreateReservationResponseDto {
}
exports.CreateReservationResponseDto = CreateReservationResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: '123e4567-e89b-12d3-a456-426614174000' }),
    __metadata("design:type", String)
], CreateReservationResponseDto.prototype, "reservationId", void 0);
class GroupedReservationResponseDto {
}
exports.GroupedReservationResponseDto = GroupedReservationResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '날짜 (YYYY-MM-DD 형식)' }),
    __metadata("design:type", String)
], GroupedReservationResponseDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '해당 날짜의 예약 목록',
        type: [ReservationWithRelationsResponseDto],
    }),
    __metadata("design:type", Array)
], GroupedReservationResponseDto.prototype, "reservations", void 0);
class GroupedReservationWithResourceResponseDto {
}
exports.GroupedReservationWithResourceResponseDto = GroupedReservationWithResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 정보',
        type: () => business_dto_index_1.ResourceResponseDto,
    }),
    __metadata("design:type", typeof (_f = typeof business_dto_index_1.ResourceResponseDto !== "undefined" && business_dto_index_1.ResourceResponseDto) === "function" ? _f : Object)
], GroupedReservationWithResourceResponseDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약 목록',
        required: false,
        type: [GroupedReservationResponseDto],
    }),
    __metadata("design:type", Array)
], GroupedReservationWithResourceResponseDto.prototype, "groupedReservations", void 0);
class CalendarResponseDto {
}
exports.CalendarResponseDto = CalendarResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약 캘린더',
        type: [ReservationWithRelationsResponseDto],
    }),
    __metadata("design:type", Array)
], CalendarResponseDto.prototype, "reservations", void 0);


/***/ }),

/***/ "./src/business/reservation-management/dtos/return-vehicle-response.dto.ts":
/*!*********************************************************************************!*\
  !*** ./src/business/reservation-management/dtos/return-vehicle-response.dto.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReturnVehicleDetailResponseDto = exports.ReturnVehicleResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class Location {
}
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], Location.prototype, "address", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], Location.prototype, "detailAddress", void 0);
class ReturnVehicleResponseDto {
}
exports.ReturnVehicleResponseDto = ReturnVehicleResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReturnVehicleResponseDto.prototype, "reservationVehicleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ReturnVehicleResponseDto.prototype, "returnedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => Location }),
    __metadata("design:type", Location)
], ReturnVehicleResponseDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReturnVehicleResponseDto.prototype, "returnedBy", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReturnVehicleResponseDto.prototype, "endOdometer", void 0);
class ReturnVehicleDetailResponseDto extends ReturnVehicleResponseDto {
}
exports.ReturnVehicleDetailResponseDto = ReturnVehicleDetailResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReturnVehicleDetailResponseDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReturnVehicleDetailResponseDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReturnVehicleDetailResponseDto.prototype, "indoorImages", void 0);


/***/ }),

/***/ "./src/business/reservation-management/dtos/update-reservation.dto.ts":
/*!****************************************************************************!*\
  !*** ./src/business/reservation-management/dtos/update-reservation.dto.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReturnVehicleDto = exports.UpdateReservationDto = exports.UpdateReservationCcReceipientDto = exports.UpdateReservationParticipantsDto = exports.UpdateReservationStatusDto = exports.UpdateReservationTimeDto = exports.UpdateReservationTitleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const resource_entity_1 = __webpack_require__(/*! @libs/entities/resource.entity */ "./libs/entities/resource.entity.ts");
class UpdateReservationTitleDto {
}
exports.UpdateReservationTitleDto = UpdateReservationTitleDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], UpdateReservationTitleDto.prototype, "title", void 0);
class UpdateReservationTimeDto {
    constructor(reservation) {
        this.startDate = date_util_1.DateUtil.format(reservation?.startDate);
        this.endDate = date_util_1.DateUtil.format(reservation?.endDate);
        this.isAllDay = reservation?.isAllDay;
    }
    getPropertiesAndTypes() {
        return Object.getOwnPropertyNames(this).map((property) => ({
            property,
            type: Reflect.getMetadata('design:type', this, property),
        }));
    }
}
exports.UpdateReservationTimeDto = UpdateReservationTimeDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 시작 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('시작 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], UpdateReservationTimeDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 종료 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('종료 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], UpdateReservationTimeDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('종일 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateReservationTimeDto.prototype, "isAllDay", void 0);
class UpdateReservationStatusDto {
}
exports.UpdateReservationStatusDto = UpdateReservationStatusDto;
__decorate([
    (0, swagger_1.ApiProperty)({ enum: reservation_type_enum_1.ReservationStatus }),
    (0, class_validator_1.IsEnum)(reservation_type_enum_1.ReservationStatus, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('예약 상태', Object.values(reservation_type_enum_1.ReservationStatus)),
    }),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _a : Object)
], UpdateReservationStatusDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('거절 사유') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('거절 사유', 0, 100) }),
    __metadata("design:type", String)
], UpdateReservationStatusDto.prototype, "rejectReason", void 0);
class UpdateReservationParticipantsDto {
}
exports.UpdateReservationParticipantsDto = UpdateReservationParticipantsDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('참가자 ID') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('참가자 ID', '문자열') }),
    __metadata("design:type", Array)
], UpdateReservationParticipantsDto.prototype, "participantIds", void 0);
class UpdateReservationCcReceipientDto {
}
exports.UpdateReservationCcReceipientDto = UpdateReservationCcReceipientDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('수신참조자 ID') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('수신참조자 ID', '문자열') }),
    __metadata("design:type", Array)
], UpdateReservationCcReceipientDto.prototype, "ccReceipientIds", void 0);
class UpdateReservationDto {
}
exports.UpdateReservationDto = UpdateReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 ID') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 시작 시간 (YYYY-MM-DD HH:mm:ss 형식)',
        required: false,
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('시작 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 종료 시간 (YYYY-MM-DD HH:mm:ss 형식)',
        required: false,
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('종료 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false, required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('종일 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateReservationDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false, required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('시작 전 알림 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateReservationDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number], example: [10, 20] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('알림 시간') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateReservationDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String], required: false }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('참가자 ID') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('참가자 ID', '문자열') }),
    __metadata("design:type", Array)
], UpdateReservationDto.prototype, "participantIds", void 0);
class ReturnVehicleDto {
}
exports.ReturnVehicleDto = ReturnVehicleDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_b = typeof resource_entity_1.ResourceLocation !== "undefined" && resource_entity_1.ResourceLocation) === "function" ? _b : Object)
], ReturnVehicleDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ minimum: 0, maximum: 999999999 }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('남은 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    __metadata("design:type", Number)
], ReturnVehicleDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ minimum: 0, maximum: 999999999 }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('총 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    __metadata("design:type", Number)
], ReturnVehicleDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [String],
        example: ['123e4567-e89b-12d3-a456-426614174000'],
    }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주차 위치 이미지 파일 ID') }),
    (0, class_validator_1.IsString)({
        each: true,
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('주차 위치 이미지 파일 ID', '문자열'),
    }),
    __metadata("design:type", Array)
], ReturnVehicleDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [String],
        example: ['123e4567-e89b-12d3-a456-426614174000'],
    }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주행거리계 이미지 파일 ID') }),
    (0, class_validator_1.IsString)({
        each: true,
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('주행거리계 이미지 파일 ID', '문자열'),
    }),
    __metadata("design:type", Array)
], ReturnVehicleDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [String],
        example: ['123e4567-e89b-12d3-a456-426614174000'],
    }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('차량 실내 이미지 파일 ID') }),
    (0, class_validator_1.IsString)({
        each: true,
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('차량 실내 이미지 파일 ID', '문자열'),
    }),
    __metadata("design:type", Array)
], ReturnVehicleDto.prototype, "indoorImages", void 0);


/***/ }),

/***/ "./src/business/reservation-management/reservation-management.module.ts":
/*!******************************************************************************!*\
  !*** ./src/business/reservation-management/reservation-management.module.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationManagementModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_controller_1 = __webpack_require__(/*! ./controllers/reservation.controller */ "./src/business/reservation-management/controllers/reservation.controller.ts");
const cron_reservation_controller_1 = __webpack_require__(/*! ./controllers/cron.reservation.controller */ "./src/business/reservation-management/controllers/cron.reservation.controller.ts");
const reservation_context_module_1 = __webpack_require__(/*! @src/context/reservation/reservation.context.module */ "./src/context/reservation/reservation.context.module.ts");
const reservation_service_1 = __webpack_require__(/*! ./services/reservation.service */ "./src/business/reservation-management/services/reservation.service.ts");
const cron_reservation_service_1 = __webpack_require__(/*! ./services/cron-reservation.service */ "./src/business/reservation-management/services/cron-reservation.service.ts");
const notification_context_module_1 = __webpack_require__(/*! @src/context/notification/notification.context.module */ "./src/context/notification/notification.context.module.ts");
const schedule_context_module_1 = __webpack_require__(/*! @src/context/schedule/schedule.context.module */ "./src/context/schedule/schedule.context.module.ts");
let ReservationManagementModule = class ReservationManagementModule {
};
exports.ReservationManagementModule = ReservationManagementModule;
exports.ReservationManagementModule = ReservationManagementModule = __decorate([
    (0, common_1.Module)({
        imports: [
            reservation_context_module_1.ReservationContextModule,
            notification_context_module_1.NotificationContextModule,
            schedule_context_module_1.ScheduleContextModule,
        ],
        controllers: [reservation_controller_1.ReservationController, cron_reservation_controller_1.CronReservationController],
        providers: [reservation_service_1.ReservationService, cron_reservation_service_1.CronReservationService],
        exports: [],
    })
], ReservationManagementModule);


/***/ }),

/***/ "./src/business/reservation-management/services/cron-reservation.service.ts":
/*!**********************************************************************************!*\
  !*** ./src/business/reservation-management/services/cron-reservation.service.ts ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CronReservationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_post_processing_service_1 = __webpack_require__(/*! @src/context/schedule/services/schedule-post-processing.service */ "./src/context/schedule/services/schedule-post-processing.service.ts");
const reservation_context_service_1 = __webpack_require__(/*! @src/context/reservation/services/reservation.context.service */ "./src/context/reservation/services/reservation.context.service.ts");
let CronReservationService = class CronReservationService {
    constructor(reservationContextService, schedulePostProcessingService) {
        this.reservationContextService = reservationContextService;
        this.schedulePostProcessingService = schedulePostProcessingService;
    }
    async closeReservation() {
        await this.schedulePostProcessingService.일정관련_배치_작업을_처리한다();
        return this.reservationContextService.예약을_종료한다();
    }
    async handleStartOdometer() {
        return this.reservationContextService.시작주행거리를_처리한다();
    }
};
exports.CronReservationService = CronReservationService;
exports.CronReservationService = CronReservationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_context_service_1.ReservationContextService !== "undefined" && reservation_context_service_1.ReservationContextService) === "function" ? _a : Object, typeof (_b = typeof schedule_post_processing_service_1.SchedulePostProcessingService !== "undefined" && schedule_post_processing_service_1.SchedulePostProcessingService) === "function" ? _b : Object])
], CronReservationService);


/***/ }),

/***/ "./src/business/reservation-management/services/reservation.service.ts":
/*!*****************************************************************************!*\
  !*** ./src/business/reservation-management/services/reservation.service.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const notification_context_service_1 = __webpack_require__(/*! @src/context/notification/services/notification.context.service */ "./src/context/notification/services/notification.context.service.ts");
const reservation_context_service_1 = __webpack_require__(/*! @src/context/reservation/services/reservation.context.service */ "./src/context/reservation/services/reservation.context.service.ts");
let ReservationService = class ReservationService {
    constructor(reservationContextService, notificationContextService) {
        this.reservationContextService = reservationContextService;
        this.notificationContextService = notificationContextService;
    }
    async findReservationList(startDate, endDate, resourceType, resourceId, status) {
        return this.reservationContextService.예약목록을_조회한다(startDate, endDate, resourceType, resourceId, status);
    }
    async findCheckReservationList(query) {
        return this.reservationContextService.확인필요_예약목록을_조회한다(query);
    }
    async findOne(user, reservationId) {
        const reservation = await this.reservationContextService.예약_상세를_조회한다(user, reservationId);
        const notifications = await this.notificationContextService.차량반납_알림을_조회한다(reservationId);
        return { ...reservation, notifications };
    }
    async updateStatus(reservationId, updateDto) {
        return this.reservationContextService.예약상태를_변경한다(reservationId, updateDto);
    }
    async returnVehicle(user, reservationId, returnDto) {
        return this.reservationContextService.차량을_반납한다(user, reservationId, returnDto);
    }
};
exports.ReservationService = ReservationService;
exports.ReservationService = ReservationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_context_service_1.ReservationContextService !== "undefined" && reservation_context_service_1.ReservationContextService) === "function" ? _a : Object, typeof (_b = typeof notification_context_service_1.NotificationContextService !== "undefined" && notification_context_service_1.NotificationContextService) === "function" ? _b : Object])
], ReservationService);


/***/ }),

/***/ "./src/business/resource-management/controllers/resource/resource-group.controller.ts":
/*!********************************************************************************************!*\
  !*** ./src/business/resource-management/controllers/resource/resource-group.controller.ts ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroupController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const create_resource_dto_1 = __webpack_require__(/*! ../../dtos/resource/create-resource.dto */ "./src/business/resource-management/dtos/resource/create-resource.dto.ts");
const resource_response_dto_1 = __webpack_require__(/*! ../../dtos/resource/resource-response.dto */ "./src/business/resource-management/dtos/resource/resource-response.dto.ts");
const update_resource_dto_1 = __webpack_require__(/*! ../../dtos/resource/update-resource.dto */ "./src/business/resource-management/dtos/resource/update-resource.dto.ts");
const resource_group_service_1 = __webpack_require__(/*! ../../services/resource-group.service */ "./src/business/resource-management/services/resource-group.service.ts");
let ResourceGroupController = class ResourceGroupController {
    constructor(resourceGroupService) {
        this.resourceGroupService = resourceGroupService;
    }
    async findParentResourceGroups() {
        return this.resourceGroupService.findParentResourceGroups();
    }
    async findAll(type) {
        return this.resourceGroupService.findResourceGroupsWithResourceData(type);
    }
    async create(createResourceGroupDto) {
        return this.resourceGroupService.createResourceGroup(createResourceGroupDto);
    }
    async updateOrder(updateResourceGroupOrdersDto) {
        return this.resourceGroupService.reorderResourceGroups(updateResourceGroupOrdersDto);
    }
    async update(resourceGroupId, updateResourceGroupDto) {
        return this.resourceGroupService.updateResourceGroup(resourceGroupId, updateResourceGroupDto);
    }
    async remove(resourceGroupId) {
        return this.resourceGroupService.deleteResourceGroup(resourceGroupId);
    }
};
exports.ResourceGroupController = ResourceGroupController;
__decorate([
    (0, common_1.Get)('parents'),
    (0, swagger_1.ApiOperation)({ summary: '상위그룹 목록 조회 #사용자/자원구분/모달' }),
    (0, swagger_1.ApiOkResponse)({
        description: '상위 자원 그룹 목록을 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], ResourceGroupController.prototype, "findParentResourceGroups", null);
__decorate([
    (0, common_1.Get)('resources'),
    (0, swagger_1.ApiOperation)({ summary: '상위그룹-하위그룹-자원 목록 조회 #사용자/자원선택/모달 #관리자/자원관리/자원목록' }),
    (0, swagger_1.ApiOkResponse)({
        description: '자원 그룹들과 각 그룹에 속한 자원 목록을 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupWithResourcesResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'type', enum: resource_type_enum_1.ResourceType, required: false }),
    __param(0, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], ResourceGroupController.prototype, "findAll", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 생성' }),
    (0, swagger_1.ApiOkResponse)({
        status: 201,
        description: '자원 그룹이 생성되었습니다.',
        type: resource_response_dto_1.ResourceGroupResponseDto,
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof create_resource_dto_1.CreateResourceGroupDto !== "undefined" && create_resource_dto_1.CreateResourceGroupDto) === "function" ? _e : Object]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], ResourceGroupController.prototype, "create", null);
__decorate([
    (0, common_1.Patch)('order'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 순서 변경' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '자원 그룹 순서가 성공적으로 변경되었습니다.',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof update_resource_dto_1.UpdateResourceGroupOrdersDto !== "undefined" && update_resource_dto_1.UpdateResourceGroupOrdersDto) === "function" ? _g : Object]),
    __metadata("design:returntype", Promise)
], ResourceGroupController.prototype, "updateOrder", null);
__decorate([
    (0, common_1.Patch)(':resourceGroupId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 수정' }),
    (0, swagger_1.ApiOkResponse)({
        description: '자원 그룹이 수정되었습니다.',
        type: resource_response_dto_1.ResourceGroupResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceGroupId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_h = typeof update_resource_dto_1.UpdateResourceGroupDto !== "undefined" && update_resource_dto_1.UpdateResourceGroupDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], ResourceGroupController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':resourceGroupId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 삭제' }),
    (0, swagger_1.ApiOkResponse)({
        description: '자원 그룹이 삭제되었습니다.',
    }),
    __param(0, (0, common_1.Param)('resourceGroupId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], ResourceGroupController.prototype, "remove", null);
exports.ResourceGroupController = ResourceGroupController = __decorate([
    (0, swagger_1.ApiTags)('v2 자원 그룹'),
    (0, common_1.Controller)('v2/resource-groups'),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_service_1.ResourceGroupService !== "undefined" && resource_group_service_1.ResourceGroupService) === "function" ? _a : Object])
], ResourceGroupController);


/***/ }),

/***/ "./src/business/resource-management/controllers/resource/resource.controller.ts":
/*!**************************************************************************************!*\
  !*** ./src/business/resource-management/controllers/resource/resource.controller.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const resource_response_dto_1 = __webpack_require__(/*! ../../dtos/resource/resource-response.dto */ "./src/business/resource-management/dtos/resource/resource-response.dto.ts");
const create_resource_dto_1 = __webpack_require__(/*! ../../dtos/resource/create-resource.dto */ "./src/business/resource-management/dtos/resource/create-resource.dto.ts");
const update_resource_dto_1 = __webpack_require__(/*! ../../dtos/resource/update-resource.dto */ "./src/business/resource-management/dtos/resource/update-resource.dto.ts");
const resource_service_1 = __webpack_require__(/*! ../../services/resource.service */ "./src/business/resource-management/services/resource.service.ts");
const available_time_response_dto_1 = __webpack_require__(/*! ../../dtos/resource/available-time-response.dto */ "./src/business/resource-management/dtos/resource/available-time-response.dto.ts");
const resource_query_dto_1 = __webpack_require__(/*! ../../dtos/resource/resource-query.dto */ "./src/business/resource-management/dtos/resource/resource-query.dto.ts");
const check_availability_dto_1 = __webpack_require__(/*! ../../dtos/resource/check-availability.dto */ "./src/business/resource-management/dtos/resource/check-availability.dto.ts");
let ResourceController = class ResourceController {
    constructor(resourceService) {
        this.resourceService = resourceService;
    }
    async createWithInfos(createResourceInfo) {
        return this.resourceService.createResourceWithInfos(createResourceInfo);
    }
    async findAll(type) {
        return this.resourceService.findResources(type);
    }
    async findAvailableTime(query) {
        return this.resourceService.findAvailableTime(query);
    }
    async checkAvailability(query) {
        return this.resourceService.checkAvailability(query.resourceId, query.startDate, query.endDate, query.reservationId);
    }
    async findOne(resourceId) {
        return this.resourceService.findResourceDetailForAdmin(resourceId);
    }
    async findResourcesByResourceGroupId(resourceGroupId) {
        return this.resourceService.findResourcesByResourceGroupId(resourceGroupId);
    }
    async reorder(updateResourceOrdersDto) {
        return this.resourceService.reorderResources(updateResourceOrdersDto);
    }
    async update(resourceId, updateResourceInfoDto) {
        return this.resourceService.updateResource(resourceId, updateResourceInfoDto);
    }
    async updateAvailability(resourceId, updateResourceInfoDto) {
        return this.resourceService.updateResource(resourceId, updateResourceInfoDto);
    }
    async remove(resourceId) {
        return this.resourceService.deleteResource(resourceId);
    }
};
exports.ResourceController = ResourceController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 생성 #관리자/자원관리/생성' }),
    (0, swagger_1.ApiOkResponse)({
        status: 201,
        description: '자원이 성공적으로 생성되었습니다.',
        type: resource_response_dto_1.CreateResourceResponseDto,
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof create_resource_dto_1.CreateResourceInfoDto !== "undefined" && create_resource_dto_1.CreateResourceInfoDto) === "function" ? _b : Object]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], ResourceController.prototype, "createWithInfos", null);
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 목록 조회 #관리자/자원관리/자원리스트' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '자원 목록을 성공적으로 조회했습니다.',
        type: [resource_response_dto_1.ResourceResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'type', enum: resource_type_enum_1.ResourceType }),
    __param(0, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], ResourceController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)('availability'),
    (0, swagger_1.ApiOperation)({
        summary: '예약 가능 시간 조회 #사용자/예약 생성 페이지',
        description: `
## 자원 가용성 조회 API

이 API는 세 가지 시나리오로 사용할 수 있습니다:

### 🎯 시나리오 1: 시간 슬롯 방식 (회의실, 장비)
30분 단위로 사용 가능한 시간 슬롯을 조회합니다.
- **필수**: resourceType, resourceGroupId, startDate, endDate(=startDate), timeUnit
- **선택**: am, pm (시간대 필터)

**예시**: \`?resourceType=MEETING_ROOM&resourceGroupId=xxx&startDate=2024-01-15&endDate=2024-01-15&timeUnit=30&pm=true\`

### 🎯 시나리오 2: 시간 범위 방식 (정확한 시간 지정)
특정 시간 범위에서 자원 가용성을 확인합니다.
- **필수**: resourceType, startDate, endDate, startTime, endTime, timeUnit
- **선택**: resourceGroupId

**예시**: \`?resourceType=EQUIPMENT&resourceGroupId=xxx&startDate=2024-01-15&endDate=2024-01-15&startTime=09:00:00&endTime=17:00:00\`

### 🎯 시나리오 3: 날짜 범위 방식 (숙소, 다일자)
여러 날짜에 걸친 자원 가용성을 확인합니다.
- **필수**: resourceType, resourceGroupId, startDate, endDate
- **선택**: startTime, endTime (체크인/체크아웃 시간)

**예시**: \`?resourceType=ACCOMMODATION&resourceGroupId=xxx&startDate=2024-01-15&endDate=2024-01-17&startTime=15:00:00&endTime=11:00:00\`
        `,
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '예약 가능 시간 조회 성공',
        type: [available_time_response_dto_1.ResourceAvailabilityDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof resource_query_dto_1.ResourceQueryDto !== "undefined" && resource_query_dto_1.ResourceQueryDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], ResourceController.prototype, "findAvailableTime", null);
__decorate([
    (0, common_1.Get)('check-availability'),
    (0, swagger_1.ApiOperation)({ summary: '예약 시간 가용성 확인' }),
    (0, swagger_1.ApiOkResponse)({
        description: '예약 시간 가용성 확인 결과',
        type: Boolean,
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_h = typeof check_availability_dto_1.CheckAvailabilityQueryDto !== "undefined" && check_availability_dto_1.CheckAvailabilityQueryDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], ResourceController.prototype, "checkAvailability", null);
__decorate([
    (0, common_1.Get)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 상세 조회 #관리자/자원관리/상세' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '자원을 성공적으로 조회했습니다.',
        type: resource_response_dto_1.ResourceResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], ResourceController.prototype, "findOne", null);
__decorate([
    (0, common_1.Get)('resource-group/:resourceGroupId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 상세 조회 #관리자/자원관리/자원리스트' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '자원 그룹을 성공적으로 조회했습니다.',
        type: [resource_response_dto_1.ResourceResponseDto],
    }),
    __param(0, (0, common_1.Param)('resourceGroupId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], ResourceController.prototype, "findResourcesByResourceGroupId", null);
__decorate([
    (0, common_1.Patch)('order'),
    (0, swagger_1.ApiOperation)({ summary: '자원 순서 변경' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '자원 순서가 성공적으로 변경되었습니다.',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_m = typeof update_resource_dto_1.UpdateResourceOrdersDto !== "undefined" && update_resource_dto_1.UpdateResourceOrdersDto) === "function" ? _m : Object]),
    __metadata("design:returntype", typeof (_o = typeof Promise !== "undefined" && Promise) === "function" ? _o : Object)
], ResourceController.prototype, "reorder", null);
__decorate([
    (0, common_1.Patch)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 수정' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '자원이 성공적으로 수정되었습니다.',
        type: resource_response_dto_1.ResourceResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_p = typeof update_resource_dto_1.UpdateResourceInfoDto !== "undefined" && update_resource_dto_1.UpdateResourceInfoDto) === "function" ? _p : Object]),
    __metadata("design:returntype", typeof (_q = typeof Promise !== "undefined" && Promise) === "function" ? _q : Object)
], ResourceController.prototype, "update", null);
__decorate([
    (0, common_1.Patch)(':resourceId/availability'),
    (0, swagger_1.ApiOperation)({ summary: '자원 예약 가능 상태 수정' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '자원이 성공적으로 수정되었습니다.',
        type: resource_response_dto_1.ResourceResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_r = typeof update_resource_dto_1.UpdateResourceInfoDto !== "undefined" && update_resource_dto_1.UpdateResourceInfoDto) === "function" ? _r : Object]),
    __metadata("design:returntype", typeof (_s = typeof Promise !== "undefined" && Promise) === "function" ? _s : Object)
], ResourceController.prototype, "updateAvailability", null);
__decorate([
    (0, common_1.Delete)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 삭제' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '자원이 성공적으로 삭제되었습니다.',
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_t = typeof Promise !== "undefined" && Promise) === "function" ? _t : Object)
], ResourceController.prototype, "remove", null);
exports.ResourceController = ResourceController = __decorate([
    (0, swagger_1.ApiTags)('v2 자원'),
    (0, common_1.Controller)('v2/resources'),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.ResourceService !== "undefined" && resource_service_1.ResourceService) === "function" ? _a : Object])
], ResourceController);


/***/ }),

/***/ "./src/business/resource-management/controllers/vehicle/consumable.controller.ts":
/*!***************************************************************************************!*\
  !*** ./src/business/resource-management/controllers/vehicle/consumable.controller.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const create_vehicle_info_dto_1 = __webpack_require__(/*! ../../dtos/vehicle/create-vehicle-info.dto */ "./src/business/resource-management/dtos/vehicle/create-vehicle-info.dto.ts");
const update_vehicle_info_dto_1 = __webpack_require__(/*! ../../dtos/vehicle/update-vehicle-info.dto */ "./src/business/resource-management/dtos/vehicle/update-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! ../../dtos/vehicle/vehicle-response.dto */ "./src/business/resource-management/dtos/vehicle/vehicle-response.dto.ts");
const consumable_service_1 = __webpack_require__(/*! ../../services/consumable.service */ "./src/business/resource-management/services/consumable.service.ts");
let ConsumableController = class ConsumableController {
    constructor(consumableService) {
        this.consumableService = consumableService;
    }
    async create(createConsumableDto) {
        return this.consumableService.save(createConsumableDto);
    }
    async findAll(vehicleInfoId) {
        return this.consumableService.findAll(vehicleInfoId);
    }
    async findOne(consumableId) {
        return this.consumableService.findOne(consumableId);
    }
    async update(consumableId, updateConsumableDto) {
        return this.consumableService.update(consumableId, updateConsumableDto);
    }
    async remove(consumableId) {
        await this.consumableService.delete(consumableId);
    }
};
exports.ConsumableController = ConsumableController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '소모품 등록' }),
    (0, swagger_1.ApiOkResponse)({
        status: 201,
        description: '소모품이 성공적으로 등록되었습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof create_vehicle_info_dto_1.CreateConsumableDto !== "undefined" && create_vehicle_info_dto_1.CreateConsumableDto) === "function" ? _b : Object]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], ConsumableController.prototype, "create", null);
__decorate([
    (0, common_1.Get)('vehicle/:vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 목록 조회' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '소모품 목록을 성공적으로 조회했습니다.',
        type: [vehicle_response_dto_1.ConsumableResponseDto],
    }),
    __param(0, (0, common_1.Param)('vehicleInfoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], ConsumableController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 상세 조회' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '소모품을 성공적으로 조회했습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, common_1.Param)('consumableId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], ConsumableController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 수정' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '소모품이 성공적으로 수정되었습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, common_1.Param)('consumableId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_f = typeof update_vehicle_info_dto_1.UpdateConsumableDto !== "undefined" && update_vehicle_info_dto_1.UpdateConsumableDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], ConsumableController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 삭제' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '소모품이 성공적으로 삭제되었습니다.',
    }),
    __param(0, (0, common_1.Param)('consumableId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], ConsumableController.prototype, "remove", null);
exports.ConsumableController = ConsumableController = __decorate([
    (0, swagger_1.ApiTags)('v2 차량 소모품'),
    (0, common_1.Controller)('v2/consumables'),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_service_1.ConsumableService !== "undefined" && consumable_service_1.ConsumableService) === "function" ? _a : Object])
], ConsumableController);


/***/ }),

/***/ "./src/business/resource-management/controllers/vehicle/maintenance.controller.ts":
/*!****************************************************************************************!*\
  !*** ./src/business/resource-management/controllers/vehicle/maintenance.controller.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MaintenanceController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const create_vehicle_info_dto_1 = __webpack_require__(/*! ../../dtos/vehicle/create-vehicle-info.dto */ "./src/business/resource-management/dtos/vehicle/create-vehicle-info.dto.ts");
const update_vehicle_info_dto_1 = __webpack_require__(/*! ../../dtos/vehicle/update-vehicle-info.dto */ "./src/business/resource-management/dtos/vehicle/update-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! ../../dtos/vehicle/vehicle-response.dto */ "./src/business/resource-management/dtos/vehicle/vehicle-response.dto.ts");
const pagination_query_dto_1 = __webpack_require__(/*! @libs/dtos/pagination-query.dto */ "./libs/dtos/pagination-query.dto.ts");
const maintenance_service_1 = __webpack_require__(/*! ../../services/maintenance.service */ "./src/business/resource-management/services/maintenance.service.ts");
let MaintenanceController = class MaintenanceController {
    constructor(maintenanceService) {
        this.maintenanceService = maintenanceService;
    }
    async create(createMaintenanceDto) {
        return this.maintenanceService.save(createMaintenanceDto);
    }
    async findAll(vehicleInfoId, query) {
        const { page, limit } = query;
        return this.maintenanceService.findAllByVehicleInfoId(vehicleInfoId, page, limit);
    }
    async findOne(maintenanceId) {
        return this.maintenanceService.findOne(maintenanceId);
    }
    async update(maintenanceId, updateMaintenanceDto) {
        return this.maintenanceService.update(maintenanceId, updateMaintenanceDto);
    }
    async remove(maintenanceId) {
        return this.maintenanceService.delete(maintenanceId);
    }
};
exports.MaintenanceController = MaintenanceController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 생성' }),
    (0, swagger_1.ApiOkResponse)({
        status: 201,
        description: '정비 이력이 생성되었습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof create_vehicle_info_dto_1.CreateMaintenanceDto !== "undefined" && create_vehicle_info_dto_1.CreateMaintenanceDto) === "function" ? _b : Object]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], MaintenanceController.prototype, "create", null);
__decorate([
    (0, common_1.Get)('vehicle/:vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 목록 조회' }),
    (0, swagger_1.ApiOkResponse)({
        description: '정비 이력 목록을 조회했습니다.',
        type: [vehicle_response_dto_1.MaintenanceResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    __param(0, (0, common_1.Param)('vehicleInfoId')),
    __param(1, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_d = typeof pagination_query_dto_1.PaginationQueryDto !== "undefined" && pagination_query_dto_1.PaginationQueryDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], MaintenanceController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':maintenanceId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 상세 이력 조회' }),
    (0, swagger_1.ApiOkResponse)({
        description: '정비 상세 이력을 조회했습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, common_1.Param)('maintenanceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], MaintenanceController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':maintenanceId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 수정' }),
    (0, swagger_1.ApiOkResponse)({
        description: '정비 이력이 수정되었습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, common_1.Param)('maintenanceId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_g = typeof update_vehicle_info_dto_1.UpdateMaintenanceDto !== "undefined" && update_vehicle_info_dto_1.UpdateMaintenanceDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], MaintenanceController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':maintenanceId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 삭제' }),
    (0, swagger_1.ApiOkResponse)({
        description: '정비 이력이 삭제되었습니다.',
    }),
    __param(0, (0, common_1.Param)('maintenanceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], MaintenanceController.prototype, "remove", null);
exports.MaintenanceController = MaintenanceController = __decorate([
    (0, swagger_1.ApiTags)('v2 차량 정비 이력'),
    (0, common_1.Controller)('v2/maintenances'),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.MaintenanceService !== "undefined" && maintenance_service_1.MaintenanceService) === "function" ? _a : Object])
], MaintenanceController);


/***/ }),

/***/ "./src/business/resource-management/controllers/vehicle/reservation-vehicle.controller.ts":
/*!************************************************************************************************!*\
  !*** ./src/business/resource-management/controllers/vehicle/reservation-vehicle.controller.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationVehicleController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const vehicle_info_service_1 = __webpack_require__(/*! ../../services/vehicle-info.service */ "./src/business/resource-management/services/vehicle-info.service.ts");
const return_vehicle_response_dto_1 = __webpack_require__(/*! ../../dtos/vehicle/return-vehicle-response.dto */ "./src/business/resource-management/dtos/vehicle/return-vehicle-response.dto.ts");
let ReservationVehicleController = class ReservationVehicleController {
    constructor(vehicleInfoService) {
        this.vehicleInfoService = vehicleInfoService;
    }
    async findReturnDetail(reservationVehicleId) {
        return this.vehicleInfoService.findReturnDetail(reservationVehicleId);
    }
};
exports.ReservationVehicleController = ReservationVehicleController;
__decorate([
    (0, common_1.Get)(':reservationVehicleId'),
    (0, swagger_1.ApiOperation)({ summary: '차량 반납 상세 조회' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '차량 반납 상세를 성공적으로 조회했습니다.',
        type: return_vehicle_response_dto_1.ReturnVehicleDetailResponseDto,
    }),
    __param(0, (0, common_1.Param)('reservationVehicleId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], ReservationVehicleController.prototype, "findReturnDetail", null);
exports.ReservationVehicleController = ReservationVehicleController = __decorate([
    (0, swagger_1.ApiTags)('v2 차량 예약 정보'),
    (0, common_1.Controller)('v2/reservation-vehicle'),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_service_1.VehicleInfoService !== "undefined" && vehicle_info_service_1.VehicleInfoService) === "function" ? _a : Object])
], ReservationVehicleController);


/***/ }),

/***/ "./src/business/resource-management/controllers/vehicle/vehicle-info.controller.ts":
/*!*****************************************************************************************!*\
  !*** ./src/business/resource-management/controllers/vehicle/vehicle-info.controller.ts ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfoController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const update_vehicle_info_dto_1 = __webpack_require__(/*! ../../dtos/vehicle/update-vehicle-info.dto */ "./src/business/resource-management/dtos/vehicle/update-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! ../../dtos/vehicle/vehicle-response.dto */ "./src/business/resource-management/dtos/vehicle/vehicle-response.dto.ts");
const return_vehicle_response_dto_1 = __webpack_require__(/*! ../../dtos/vehicle/return-vehicle-response.dto */ "./src/business/resource-management/dtos/vehicle/return-vehicle-response.dto.ts");
const vehicle_info_service_1 = __webpack_require__(/*! ../../services/vehicle-info.service */ "./src/business/resource-management/services/vehicle-info.service.ts");
let VehicleInfoController = class VehicleInfoController {
    constructor(vehicleInfoService) {
        this.vehicleInfoService = vehicleInfoService;
    }
    async findVehicleInfo(vehicleInfoId) {
        return this.vehicleInfoService.findVehicleInfo(vehicleInfoId);
    }
    async update(vehicleInfoId, updateVehicleInfoDto) {
        return this.vehicleInfoService.updateVehicleInfo(vehicleInfoId, updateVehicleInfoDto);
    }
    async findReturnList(vehicleInfoId) {
        return this.vehicleInfoService.findReturnList(vehicleInfoId);
    }
};
exports.VehicleInfoController = VehicleInfoController;
__decorate([
    (0, common_1.Get)(':vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '차량 정보 조회' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '차량 정보를 성공적으로 조회했습니다.',
        type: vehicle_response_dto_1.VehicleInfoResponseDto,
    }),
    __param(0, (0, common_1.Param)('vehicleInfoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], VehicleInfoController.prototype, "findVehicleInfo", null);
__decorate([
    (0, common_1.Patch)(':vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '차량 정보 수정' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '차량 정보가 성공적으로 수정되었습니다.',
        type: vehicle_response_dto_1.VehicleInfoResponseDto,
    }),
    __param(0, (0, common_1.Param)('vehicleInfoId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_c = typeof update_vehicle_info_dto_1.UpdateVehicleInfoDto !== "undefined" && update_vehicle_info_dto_1.UpdateVehicleInfoDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], VehicleInfoController.prototype, "update", null);
__decorate([
    (0, common_1.Get)(':vehicleInfoId/return-list'),
    (0, swagger_1.ApiOperation)({ summary: '차량 반납 리스트 조회' }),
    (0, swagger_1.ApiOkResponse)({
        status: 200,
        description: '차량 반납 리스트를 성공적으로 조회했습니다.',
        type: [return_vehicle_response_dto_1.ReturnVehicleResponseDto],
    }),
    __param(0, (0, common_1.Param)('vehicleInfoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], VehicleInfoController.prototype, "findReturnList", null);
exports.VehicleInfoController = VehicleInfoController = __decorate([
    (0, swagger_1.ApiTags)('v2 차량 정보'),
    (0, common_1.Controller)('v2/vehicle-info'),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_service_1.VehicleInfoService !== "undefined" && vehicle_info_service_1.VehicleInfoService) === "function" ? _a : Object])
], VehicleInfoController);


/***/ }),

/***/ "./src/business/resource-management/dtos/accommodation/accommodation-info-response.dto.ts":
/*!************************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/accommodation/accommodation-info-response.dto.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationInfoResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class AccommodationInfoResponseDto {
}
exports.AccommodationInfoResponseDto = AccommodationInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], AccommodationInfoResponseDto.prototype, "accommodationInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], AccommodationInfoResponseDto.prototype, "resourceId", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/accommodation/create-accommodation-info.dto.ts":
/*!**********************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/accommodation/create-accommodation-info.dto.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateAccommodationInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const create_resource_dto_1 = __webpack_require__(/*! ../resource/create-resource.dto */ "./src/business/resource-management/dtos/resource/create-resource.dto.ts");
class CreateAccommodationInfoDto {
}
exports.CreateAccommodationInfoDto = CreateAccommodationInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: create_resource_dto_1.ResourceLocationURL }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof create_resource_dto_1.ResourceLocationURL !== "undefined" && create_resource_dto_1.ResourceLocationURL) === "function" ? _a : Object)
], CreateAccommodationInfoDto.prototype, "locationURLs", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/accommodation/update-accommodation-info.dto.ts":
/*!**********************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/accommodation/update-accommodation-info.dto.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateAccommodationInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const create_resource_dto_1 = __webpack_require__(/*! ../resource/create-resource.dto */ "./src/business/resource-management/dtos/resource/create-resource.dto.ts");
class UpdateAccommodationInfoDto {
}
exports.UpdateAccommodationInfoDto = UpdateAccommodationInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '숙박시설 ID',
        example: 'accommodation-123',
    }),
    __metadata("design:type", String)
], UpdateAccommodationInfoDto.prototype, "accommodationInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: create_resource_dto_1.ResourceLocationURL }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof create_resource_dto_1.ResourceLocationURL !== "undefined" && create_resource_dto_1.ResourceLocationURL) === "function" ? _a : Object)
], UpdateAccommodationInfoDto.prototype, "locationURLs", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/equipment/create-equipment-info.dto.ts":
/*!**************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/equipment/create-equipment-info.dto.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateEquipmentInfoDto = void 0;
class CreateEquipmentInfoDto {
}
exports.CreateEquipmentInfoDto = CreateEquipmentInfoDto;


/***/ }),

/***/ "./src/business/resource-management/dtos/equipment/equipment-info-response.dto.ts":
/*!****************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/equipment/equipment-info-response.dto.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EquipmentInfoResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EquipmentInfoResponseDto {
}
exports.EquipmentInfoResponseDto = EquipmentInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EquipmentInfoResponseDto.prototype, "equipmentInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EquipmentInfoResponseDto.prototype, "resourceId", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/equipment/update-equipment-info.dto.ts":
/*!**************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/equipment/update-equipment-info.dto.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateEquipmentInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class UpdateEquipmentInfoDto {
}
exports.UpdateEquipmentInfoDto = UpdateEquipmentInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '장비 ID',
        example: 'equipment-123',
    }),
    __metadata("design:type", String)
], UpdateEquipmentInfoDto.prototype, "equipmentInfoId", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/meeting-room/create-meeting-room-info.dto.ts":
/*!********************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/meeting-room/create-meeting-room-info.dto.ts ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateMeetingRoomInfoDto = void 0;
class CreateMeetingRoomInfoDto {
}
exports.CreateMeetingRoomInfoDto = CreateMeetingRoomInfoDto;


/***/ }),

/***/ "./src/business/resource-management/dtos/meeting-room/meeting-room-info-response.dto.ts":
/*!**********************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/meeting-room/meeting-room-info-response.dto.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomInfoResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class MeetingRoomInfoResponseDto {
}
exports.MeetingRoomInfoResponseDto = MeetingRoomInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MeetingRoomInfoResponseDto.prototype, "meetingRoomInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MeetingRoomInfoResponseDto.prototype, "resourceId", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/meeting-room/update-meeting-room-info.dto.ts":
/*!********************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/meeting-room/update-meeting-room-info.dto.ts ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateMeetingRoomInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class UpdateMeetingRoomInfoDto {
}
exports.UpdateMeetingRoomInfoDto = UpdateMeetingRoomInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '회의실 ID',
        example: 'meeting-room-123',
    }),
    __metadata("design:type", String)
], UpdateMeetingRoomInfoDto.prototype, "meetingRoomInfoId", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/resource/available-time-response.dto.ts":
/*!***************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/resource/available-time-response.dto.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceAvailabilityDto = exports.TimeSlotDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class TimeSlotDto {
}
exports.TimeSlotDto = TimeSlotDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 시간 (ISO 문자열)',
        example: '2025-01-01T09:00:00',
    }),
    __metadata("design:type", String)
], TimeSlotDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 시간 (ISO 문자열)',
        example: '2025-01-01T10:00:00',
    }),
    __metadata("design:type", String)
], TimeSlotDto.prototype, "endTime", void 0);
class ResourceAvailabilityDto {
}
exports.ResourceAvailabilityDto = ResourceAvailabilityDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 ID',
        example: '78117aaf-a203-43a3-bb38-51ec91ca935a',
    }),
    __metadata("design:type", String)
], ResourceAvailabilityDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 이름',
        example: '회의실 A',
    }),
    __metadata("design:type", String)
], ResourceAvailabilityDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        required: false,
        description: '자원 위치',
        example: '서울특별시 강남구 테헤란로 14길 6 남도빌딩 3층',
    }),
    __metadata("design:type", String)
], ResourceAvailabilityDto.prototype, "resourceLocation", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        required: false,
        description: '가용 시간 슬롯 목록',
        type: [TimeSlotDto],
    }),
    __metadata("design:type", Array)
], ResourceAvailabilityDto.prototype, "availableTimeSlots", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/resource/check-availability.dto.ts":
/*!**********************************************************************************!*\
  !*** ./src/business/resource-management/dtos/resource/check-availability.dto.ts ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckAvailabilityQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CheckAvailabilityQueryDto {
}
exports.CheckAvailabilityQueryDto = CheckAvailabilityQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 시작 시간' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 종료 시간' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 ID', required: false }),
    (0, class_validator_1.IsUUID)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "reservationId", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/resource/create-resource.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/business/resource-management/dtos/resource/create-resource.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateResourceInfoDto = exports.CreateResourceDto = exports.ResourceLocationURL = exports.ResourceLocation = exports.CreateResourceManagerDto = exports.CreateResourceGroupDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const create_vehicle_info_dto_1 = __webpack_require__(/*! ../vehicle/create-vehicle-info.dto */ "./src/business/resource-management/dtos/vehicle/create-vehicle-info.dto.ts");
const create_meeting_room_info_dto_1 = __webpack_require__(/*! ../meeting-room/create-meeting-room-info.dto */ "./src/business/resource-management/dtos/meeting-room/create-meeting-room-info.dto.ts");
const create_accommodation_info_dto_1 = __webpack_require__(/*! ../accommodation/create-accommodation-info.dto */ "./src/business/resource-management/dtos/accommodation/create-accommodation-info.dto.ts");
const create_equipment_info_dto_1 = __webpack_require__(/*! ../equipment/create-equipment-info.dto */ "./src/business/resource-management/dtos/equipment/create-equipment-info.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class CreateResourceGroupDto {
}
exports.CreateResourceGroupDto = CreateResourceGroupDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('상위 자원 그룹 ID') }),
    __metadata("design:type", String)
], CreateResourceGroupDto.prototype, "parentResourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('자원 타입', Object.values(resource_type_enum_1.ResourceType)) }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], CreateResourceGroupDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceGroupDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceGroupDto.prototype, "description", void 0);
class CreateResourceManagerDto {
}
exports.CreateResourceManagerDto = CreateResourceManagerDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID' }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('직원 ID') }),
    __metadata("design:type", String)
], CreateResourceManagerDto.prototype, "employeeId", void 0);
class ResourceLocation {
}
exports.ResourceLocation = ResourceLocation;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('주소') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('주소', 0, 100) }),
    __metadata("design:type", String)
], ResourceLocation.prototype, "address", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('상세 주소') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('상세 주소', 0, 100) }),
    __metadata("design:type", String)
], ResourceLocation.prototype, "detailAddress", void 0);
class ResourceLocationURL {
}
exports.ResourceLocationURL = ResourceLocationURL;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('Tmap URL') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], ResourceLocationURL.prototype, "tmap", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('Navermap URL') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], ResourceLocationURL.prototype, "navermap", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('Kakaomap URL') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], ResourceLocationURL.prototype, "kakaomap", void 0);
class CreateResourceDto {
}
exports.CreateResourceDto = CreateResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 그룹 ID') }),
    __metadata("design:type", String)
], CreateResourceDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('이름', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: ResourceLocation }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", ResourceLocation)
], CreateResourceDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: ResourceLocationURL }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", ResourceLocationURL)
], CreateResourceDto.prototype, "locationURLs", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String], example: ['123e4567-e89b-12d3-a456-426614174000'] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지 파일 ID') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], CreateResourceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('참가자 변경 알림 여부') }),
    __metadata("design:type", Boolean)
], CreateResourceDto.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('예약 변경 알림 여부') }),
    __metadata("design:type", Boolean)
], CreateResourceDto.prototype, "notifyReservationChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('자원 타입', Object.values(resource_type_enum_1.ResourceType)) }),
    __metadata("design:type", typeof (_b = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _b : Object)
], CreateResourceDto.prototype, "type", void 0);
class CreateResourceInfoDto {
}
exports.CreateResourceInfoDto = CreateResourceInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: CreateResourceDto }),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => CreateResourceDto),
    __metadata("design:type", CreateResourceDto)
], CreateResourceInfoDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        oneOf: [
            { $ref: (0, swagger_1.getSchemaPath)(create_vehicle_info_dto_1.CreateVehicleInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(create_meeting_room_info_dto_1.CreateMeetingRoomInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(create_accommodation_info_dto_1.CreateAccommodationInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(create_equipment_info_dto_1.CreateEquipmentInfoDto) },
        ],
    }),
    __metadata("design:type", Object)
], CreateResourceInfoDto.prototype, "typeInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [CreateResourceManagerDto] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('관리자') }),
    (0, class_validator_1.ValidateNested)({ each: true }),
    (0, class_transformer_1.Type)(() => CreateResourceManagerDto),
    __metadata("design:type", Array)
], CreateResourceInfoDto.prototype, "managers", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/resource/resource-query.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/business/resource-management/dtos/resource/resource-query.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const pagination_query_dto_1 = __webpack_require__(/*! @libs/dtos/pagination-query.dto */ "./libs/dtos/pagination-query.dto.ts");
class ResourceQueryDto extends pagination_query_dto_1.PaginationQueryDto {
}
exports.ResourceQueryDto = ResourceQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '리소스 타입',
        enum: resource_type_enum_1.ResourceType,
        required: true,
        example: resource_type_enum_1.ResourceType.MEETING_ROOM,
    }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], ResourceQueryDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '리소스 그룹 ID',
        example: 'ca33f67a-a9c2-4a29-b266-3d82f9aa7fe4',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '예약 ID',
        example: '123e4567-e89b-12d3-a456-426614174000',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '시작 날짜',
        example: '2024-01-01',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '종료 날짜',
        example: '2024-01-31',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '시작 시간',
        example: '09:00:00',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '종료 시간',
        example: '18:00:00',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "endTime", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '오전 시간대 필터',
        example: true,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    __metadata("design:type", Boolean)
], ResourceQueryDto.prototype, "am", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '오후 시간대 필터',
        example: true,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    __metadata("design:type", Boolean)
], ResourceQueryDto.prototype, "pm", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '이용 시간 단위(분)',
        example: 30,
        minimum: 1,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.Min)(1),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], ResourceQueryDto.prototype, "timeUnit", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/resource/resource-response.dto.ts":
/*!*********************************************************************************!*\
  !*** ./src/business/resource-management/dtos/resource/resource-response.dto.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroupWithResourcesAndReservationsResponseDto = exports.ResourceGroupWithResourcesResponseDto = exports.ChildResourceGroupResponseDto = exports.ResourceWithReservationsResponseDto = exports.ResourceSelectResponseDto = exports.ResourceResponseDto = exports.ResourceGroupResponseDto = exports.ResourceManagerResponseDto = exports.CreateResourceResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const vehicle_response_dto_1 = __webpack_require__(/*! ../vehicle/vehicle-response.dto */ "./src/business/resource-management/dtos/vehicle/vehicle-response.dto.ts");
const accommodation_info_response_dto_1 = __webpack_require__(/*! ../accommodation/accommodation-info-response.dto */ "./src/business/resource-management/dtos/accommodation/accommodation-info-response.dto.ts");
const meeting_room_info_response_dto_1 = __webpack_require__(/*! ../meeting-room/meeting-room-info-response.dto */ "./src/business/resource-management/dtos/meeting-room/meeting-room-info-response.dto.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const create_resource_dto_1 = __webpack_require__(/*! ./create-resource.dto */ "./src/business/resource-management/dtos/resource/create-resource.dto.ts");
const reservation_response_dto_1 = __webpack_require__(/*! @src/business/reservation-management/dtos/reservation-response.dto */ "./src/business/reservation-management/dtos/reservation-response.dto.ts");
const employee_response_dto_1 = __webpack_require__(/*! @src/business/employee-management/dtos/employee-response.dto */ "./src/business/employee-management/dtos/employee-response.dto.ts");
const file_response_dto_1 = __webpack_require__(/*! @src/context/file/dtos/file-response.dto */ "./src/context/file/dtos/file-response.dto.ts");
const equipment_info_response_dto_1 = __webpack_require__(/*! @src/business/resource-management/dtos/equipment/equipment-info-response.dto */ "./src/business/resource-management/dtos/equipment/equipment-info-response.dto.ts");
class CreateResourceResponseDto {
}
exports.CreateResourceResponseDto = CreateResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateResourceResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], CreateResourceResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateResourceResponseDto.prototype, "typeInfoId", void 0);
class ResourceManagerResponseDto {
}
exports.ResourceManagerResponseDto = ResourceManagerResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceManagerResponseDto.prototype, "resourceManagerId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceManagerResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceManagerResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_b = typeof employee_response_dto_1.EmployeeResponseDto !== "undefined" && employee_response_dto_1.EmployeeResponseDto) === "function" ? _b : Object)
], ResourceManagerResponseDto.prototype, "employee", void 0);
class ResourceGroupResponseDto {
}
exports.ResourceGroupResponseDto = ResourceGroupResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    __metadata("design:type", typeof (_c = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _c : Object)
], ResourceGroupResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ResourceGroupResponseDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "parentResourceGroupId", void 0);
class ResourceResponseDto {
    constructor(resource) {
        this.resourceId = resource?.resourceId;
        this.resourceGroupId = resource?.resourceGroupId;
        this.name = resource?.name;
        this.description = resource?.description;
        this.location = resource?.location;
        this.locationURLs = resource?.locationURLs;
        this.images = resource?.images;
        this.type = resource?.type;
        this.isAvailable = resource?.isAvailable;
        this.unavailableReason = resource?.unavailableReason;
        this.notifyParticipantChange = resource?.notifyParticipantChange;
        this.notifyReservationChange = resource?.notifyReservationChange;
        this.order = resource?.order;
        this.managers = resource?.resourceManagers;
        this.resourceGroup = resource?.resourceGroup;
        this.imageFiles = resource?.images ? resource['imageFiles'] : [];
        if (resource?.vehicleInfo) {
            this.typeInfo = resource.vehicleInfo;
        }
        else if (resource?.meetingRoomInfo) {
            this.typeInfo = resource.meetingRoomInfo;
        }
        else if (resource?.accommodationInfo) {
            this.typeInfo = resource.accommodationInfo;
        }
        else if (resource?.equipmentInfo) {
            this.typeInfo = resource.equipmentInfo;
        }
    }
}
exports.ResourceResponseDto = ResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: create_resource_dto_1.ResourceLocation }),
    __metadata("design:type", typeof (_d = typeof create_resource_dto_1.ResourceLocation !== "undefined" && create_resource_dto_1.ResourceLocation) === "function" ? _d : Object)
], ResourceResponseDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: create_resource_dto_1.ResourceLocationURL }),
    __metadata("design:type", typeof (_e = typeof create_resource_dto_1.ResourceLocationURL !== "undefined" && create_resource_dto_1.ResourceLocationURL) === "function" ? _e : Object)
], ResourceResponseDto.prototype, "locationURLs", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    __metadata("design:type", Array)
], ResourceResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [file_response_dto_1.FileResponseDto] }),
    __metadata("design:type", Array)
], ResourceResponseDto.prototype, "imageFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    __metadata("design:type", typeof (_f = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _f : Object)
], ResourceResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceResponseDto.prototype, "isAvailable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "unavailableReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceResponseDto.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceResponseDto.prototype, "notifyReservationChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ResourceResponseDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        required: false,
        oneOf: [
            { $ref: (0, swagger_1.getSchemaPath)(vehicle_response_dto_1.VehicleInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(meeting_room_info_response_dto_1.MeetingRoomInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(accommodation_info_response_dto_1.AccommodationInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(equipment_info_response_dto_1.EquipmentInfoResponseDto) },
        ],
    }),
    __metadata("design:type", Object)
], ResourceResponseDto.prototype, "typeInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [ResourceManagerResponseDto] }),
    __metadata("design:type", Array)
], ResourceResponseDto.prototype, "managers", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", ResourceGroupResponseDto)
], ResourceResponseDto.prototype, "resourceGroup", void 0);
class ResourceSelectResponseDto {
}
exports.ResourceSelectResponseDto = ResourceSelectResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    __metadata("design:type", Array)
], ResourceSelectResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceSelectResponseDto.prototype, "isAvailable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "unavailableReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ResourceSelectResponseDto.prototype, "order", void 0);
class ResourceWithReservationsResponseDto extends ResourceResponseDto {
    constructor(resource) {
        super(resource);
        this.reservations = resource?.reservations.map((reservation) => new reservation_response_dto_1.ReservationResponseDto(reservation));
    }
}
exports.ResourceWithReservationsResponseDto = ResourceWithReservationsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [reservation_response_dto_1.ReservationResponseDto] }),
    __metadata("design:type", Array)
], ResourceWithReservationsResponseDto.prototype, "reservations", void 0);
class ChildResourceGroupResponseDto extends ResourceGroupResponseDto {
}
exports.ChildResourceGroupResponseDto = ChildResourceGroupResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => ResourceSelectResponseDto, required: false }),
    __metadata("design:type", Array)
], ChildResourceGroupResponseDto.prototype, "resources", void 0);
class ResourceGroupWithResourcesResponseDto extends ResourceGroupResponseDto {
}
exports.ResourceGroupWithResourcesResponseDto = ResourceGroupWithResourcesResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [ChildResourceGroupResponseDto],
        required: false,
    }),
    __metadata("design:type", Array)
], ResourceGroupWithResourcesResponseDto.prototype, "children", void 0);
class ResourceGroupWithResourcesAndReservationsResponseDto extends ResourceGroupResponseDto {
}
exports.ResourceGroupWithResourcesAndReservationsResponseDto = ResourceGroupWithResourcesAndReservationsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [ResourceWithReservationsResponseDto],
        required: false,
    }),
    __metadata("design:type", Array)
], ResourceGroupWithResourcesAndReservationsResponseDto.prototype, "resources", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/resource/time-slot.dto.ts":
/*!*************************************************************************!*\
  !*** ./src/business/resource-management/dtos/resource/time-slot.dto.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TimeSlotDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class TimeSlotDto {
}
exports.TimeSlotDto = TimeSlotDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 시간',
        example: '2025-01-01 09:00:00',
    }),
    __metadata("design:type", String)
], TimeSlotDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 시간',
        example: '2025-01-01 10:00:00',
    }),
    __metadata("design:type", String)
], TimeSlotDto.prototype, "endTime", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/resource/update-resource.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/business/resource-management/dtos/resource/update-resource.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateResourceGroupOrdersDto = exports.NewOrderResourceGroupDto = exports.UpdateResourceOrdersDto = exports.NewOrderResourceDto = exports.UpdateResourceInfoDto = exports.UpdateResourceDto = exports.UpdateResourceGroupDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const create_resource_dto_1 = __webpack_require__(/*! ./create-resource.dto */ "./src/business/resource-management/dtos/resource/create-resource.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const update_accommodation_info_dto_1 = __webpack_require__(/*! ../accommodation/update-accommodation-info.dto */ "./src/business/resource-management/dtos/accommodation/update-accommodation-info.dto.ts");
const update_vehicle_info_dto_1 = __webpack_require__(/*! ../vehicle/update-vehicle-info.dto */ "./src/business/resource-management/dtos/vehicle/update-vehicle-info.dto.ts");
const update_meeting_room_info_dto_1 = __webpack_require__(/*! ../meeting-room/update-meeting-room-info.dto */ "./src/business/resource-management/dtos/meeting-room/update-meeting-room-info.dto.ts");
const update_equipment_info_dto_1 = __webpack_require__(/*! ../equipment/update-equipment-info.dto */ "./src/business/resource-management/dtos/equipment/update-equipment-info.dto.ts");
class UpdateResourceGroupDto {
}
exports.UpdateResourceGroupDto = UpdateResourceGroupDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceGroupDto.prototype, "title", void 0);
class UpdateResourceDto {
}
exports.UpdateResourceDto = UpdateResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 그룹 ID') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('이름') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('이름', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: 'object' }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof create_resource_dto_1.ResourceLocation !== "undefined" && create_resource_dto_1.ResourceLocation) === "function" ? _a : Object)
], UpdateResourceDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: 'object' }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_b = typeof create_resource_dto_1.ResourceLocationURL !== "undefined" && create_resource_dto_1.ResourceLocationURL) === "function" ? _b : Object)
], UpdateResourceDto.prototype, "locationURLs", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateResourceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('사용 가능 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateResourceDto.prototype, "isAvailable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('사용 불가 사유') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('사용 불가 사유', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "unavailableReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('참가자 변경 알림 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateResourceDto.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('예약 변경 알림 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateResourceDto.prototype, "notifyReservationChange", void 0);
class UpdateResourceInfoDto {
}
exports.UpdateResourceInfoDto = UpdateResourceInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: UpdateResourceDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => UpdateResourceDto),
    __metadata("design:type", UpdateResourceDto)
], UpdateResourceInfoDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        required: false,
        oneOf: [
            { $ref: (0, swagger_1.getSchemaPath)(update_vehicle_info_dto_1.UpdateVehicleInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(update_meeting_room_info_dto_1.UpdateMeetingRoomInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(update_accommodation_info_dto_1.UpdateAccommodationInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(update_equipment_info_dto_1.UpdateEquipmentInfoDto) },
        ],
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Object)
], UpdateResourceInfoDto.prototype, "typeInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [create_resource_dto_1.CreateResourceManagerDto] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('관리자') }),
    (0, class_validator_1.ValidateNested)({ each: true }),
    (0, class_transformer_1.Type)(() => create_resource_dto_1.CreateResourceManagerDto),
    __metadata("design:type", Array)
], UpdateResourceInfoDto.prototype, "managers", void 0);
class NewOrderResourceDto {
}
exports.NewOrderResourceDto = NewOrderResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 ID') }),
    __metadata("design:type", String)
], NewOrderResourceDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsNumber)({}, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_NUMBER('순서') }),
    __metadata("design:type", Number)
], NewOrderResourceDto.prototype, "newOrder", void 0);
class UpdateResourceOrdersDto {
}
exports.UpdateResourceOrdersDto = UpdateResourceOrdersDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [NewOrderResourceDto] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('순서 목록') }),
    __metadata("design:type", Array)
], UpdateResourceOrdersDto.prototype, "orders", void 0);
class NewOrderResourceGroupDto {
}
exports.NewOrderResourceGroupDto = NewOrderResourceGroupDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 그룹 ID') }),
    __metadata("design:type", String)
], NewOrderResourceGroupDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsNumber)({}, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_NUMBER('순서') }),
    __metadata("design:type", Number)
], NewOrderResourceGroupDto.prototype, "newOrder", void 0);
class UpdateResourceGroupOrdersDto {
}
exports.UpdateResourceGroupOrdersDto = UpdateResourceGroupOrdersDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [NewOrderResourceGroupDto] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('순서 목록') }),
    __metadata("design:type", Array)
], UpdateResourceGroupOrdersDto.prototype, "orders", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/vehicle/create-vehicle-info.dto.ts":
/*!**********************************************************************************!*\
  !*** ./src/business/resource-management/dtos/vehicle/create-vehicle-info.dto.ts ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateMaintenanceDto = exports.CreateConsumableDto = exports.CreateVehicleInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class CreateVehicleInfoDto {
}
exports.CreateVehicleInfoDto = CreateVehicleInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: true }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('차량 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('차량 번호', 0, 100) }),
    __metadata("design:type", String)
], CreateVehicleInfoDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('남은 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    __metadata("design:type", Number)
], CreateVehicleInfoDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('총 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    __metadata("design:type", Number)
], CreateVehicleInfoDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험 이름', 0, 100) }),
    __metadata("design:type", String)
], CreateVehicleInfoDto.prototype, "insuranceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험사 전화 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험사 전화 번호', 0, 100) }),
    __metadata("design:type", String)
], CreateVehicleInfoDto.prototype, "insuranceNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], example: ['123e4567-e89b-12d3-a456-426614174000'] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주차위치 이미지 파일 ID') }),
    __metadata("design:type", Array)
], CreateVehicleInfoDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], example: ['123e4567-e89b-12d3-a456-426614174000'] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('계기판 이미지 파일 ID') }),
    __metadata("design:type", Array)
], CreateVehicleInfoDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], example: ['123e4567-e89b-12d3-a456-426614174000'] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('실내 이미지 파일 ID') }),
    __metadata("design:type", Array)
], CreateVehicleInfoDto.prototype, "indoorImages", void 0);
class CreateConsumableDto {
}
exports.CreateConsumableDto = CreateConsumableDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('소모품 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('소모품 이름', 0, 100) }),
    __metadata("design:type", String)
], CreateConsumableDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 주기' }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('소모품 교체 주기') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    __metadata("design:type", Number)
], CreateConsumableDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ default: true, description: '소모품 교체 알림 주기' }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('소모품 교체 알림 주기') }),
    __metadata("design:type", Boolean)
], CreateConsumableDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '차량 ID',
        example: 'vehicle-123',
    }),
    __metadata("design:type", String)
], CreateConsumableDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '초기 주행거리',
        example: 0,
    }),
    __metadata("design:type", Number)
], CreateConsumableDto.prototype, "initMileage", void 0);
class CreateMaintenanceDto {
}
exports.CreateMaintenanceDto = CreateMaintenanceDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('날짜', 'YYYY-MM-DD'),
    }),
    __metadata("design:type", String)
], CreateMaintenanceDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    __metadata("design:type", Number)
], CreateMaintenanceDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('비용') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    __metadata("design:type", Number)
], CreateMaintenanceDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], example: ['123e4567-e89b-12d3-a456-426614174000'] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지 파일 ID   ') }),
    __metadata("design:type", Array)
], CreateMaintenanceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '소모품 ID',
        example: 'consumable-123',
    }),
    __metadata("design:type", String)
], CreateMaintenanceDto.prototype, "consumableId", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/vehicle/return-vehicle-response.dto.ts":
/*!**************************************************************************************!*\
  !*** ./src/business/resource-management/dtos/vehicle/return-vehicle-response.dto.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReturnVehicleDetailResponseDto = exports.ReturnVehicleResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class Location {
}
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], Location.prototype, "address", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], Location.prototype, "detailAddress", void 0);
class ReturnVehicleResponseDto {
}
exports.ReturnVehicleResponseDto = ReturnVehicleResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReturnVehicleResponseDto.prototype, "reservationVehicleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ReturnVehicleResponseDto.prototype, "returnedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => Location }),
    __metadata("design:type", Location)
], ReturnVehicleResponseDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReturnVehicleResponseDto.prototype, "returnedBy", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReturnVehicleResponseDto.prototype, "endOdometer", void 0);
class ReturnVehicleDetailResponseDto extends ReturnVehicleResponseDto {
}
exports.ReturnVehicleDetailResponseDto = ReturnVehicleDetailResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReturnVehicleDetailResponseDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReturnVehicleDetailResponseDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReturnVehicleDetailResponseDto.prototype, "indoorImages", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/vehicle/update-vehicle-info.dto.ts":
/*!**********************************************************************************!*\
  !*** ./src/business/resource-management/dtos/vehicle/update-vehicle-info.dto.ts ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateVehicleInfoDto = exports.UpdateConsumableDto = exports.UpdateMaintenanceDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class UpdateMaintenanceDto {
}
exports.UpdateMaintenanceDto = UpdateMaintenanceDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('날짜', 'YYYY-MM-DD'),
    }),
    __metadata("design:type", String)
], UpdateMaintenanceDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], UpdateMaintenanceDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('비용') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    __metadata("design:type", Number)
], UpdateMaintenanceDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], example: ['123e4567-e89b-12d3-a456-426614174000'] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지 파일 ID') }),
    __metadata("design:type", Array)
], UpdateMaintenanceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '소모품 ID',
        example: 'consumable-123',
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateMaintenanceDto.prototype, "consumableId", void 0);
class UpdateConsumableDto {
}
exports.UpdateConsumableDto = UpdateConsumableDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('소모품 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('소모품 이름', 0, 100) }),
    __metadata("design:type", String)
], UpdateConsumableDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 주기' }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('소모품 교체 주기') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    __metadata("design:type", Number)
], UpdateConsumableDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ default: true, description: '소모품 교체 알림 주기' }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('소모품 교체 알림 주기') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateConsumableDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '차량 ID',
        example: 'vehicle-123',
    }),
    __metadata("design:type", String)
], UpdateConsumableDto.prototype, "vehicleInfoId", void 0);
class UpdateVehicleInfoDto {
}
exports.UpdateVehicleInfoDto = UpdateVehicleInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '차량 ID',
        example: 'vehicle-123',
    }),
    __metadata("design:type", String)
], UpdateVehicleInfoDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('차량 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('차량 번호', 0, 100) }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateVehicleInfoDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험 이름', 0, 100) }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateVehicleInfoDto.prototype, "insuranceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험 번호', 0, 100) }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateVehicleInfoDto.prototype, "insuranceNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('총 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], UpdateVehicleInfoDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('남은 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], UpdateVehicleInfoDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], example: ['123e4567-e89b-12d3-a456-426614174000'] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주차 위치 이미지 파일 ID') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateVehicleInfoDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], example: ['123e4567-e89b-12d3-a456-426614174000'] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주행거리계 이미지 파일 ID') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateVehicleInfoDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], example: ['123e4567-e89b-12d3-a456-426614174000'] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('실내 이미지 파일 ID') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateVehicleInfoDto.prototype, "indoorImages", void 0);


/***/ }),

/***/ "./src/business/resource-management/dtos/vehicle/vehicle-response.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/business/resource-management/dtos/vehicle/vehicle-response.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfoResponseDto = exports.ConsumableResponseDto = exports.MaintenanceResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const business_dto_index_1 = __webpack_require__(/*! @src/business.dto.index */ "./src/business.dto.index.ts");
class MaintenanceResponseDto {
}
exports.MaintenanceResponseDto = MaintenanceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "maintenanceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], MaintenanceResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "mileageFromLastMaintenance", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], MaintenanceResponseDto.prototype, "maintanceRequired", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "previousMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], MaintenanceResponseDto.prototype, "isLatest", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "previousDate", void 0);
class ConsumableResponseDto {
}
exports.ConsumableResponseDto = ConsumableResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ConsumableResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ConsumableResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    __metadata("design:type", String)
], ConsumableResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 주기' }),
    __metadata("design:type", Number)
], ConsumableResponseDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 알림 주기' }),
    __metadata("design:type", Boolean)
], ConsumableResponseDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [MaintenanceResponseDto], required: false }),
    __metadata("design:type", Array)
], ConsumableResponseDto.prototype, "maintenances", void 0);
class VehicleInfoResponseDto {
}
exports.VehicleInfoResponseDto = VehicleInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "insuranceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "insuranceNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], VehicleInfoResponseDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], VehicleInfoResponseDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "indoorImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [business_dto_index_1.FileResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "parkingLocationFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [business_dto_index_1.FileResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "odometerFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [business_dto_index_1.FileResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "indoorFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ConsumableResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "consumables", void 0);


/***/ }),

/***/ "./src/business/resource-management/resource-management.module.ts":
/*!************************************************************************!*\
  !*** ./src/business/resource-management/resource-management.module.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceManagementModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_context_module_1 = __webpack_require__(/*! @src/context/resource/resource.context.module */ "./src/context/resource/resource.context.module.ts");
const reservation_context_module_1 = __webpack_require__(/*! @src/context/reservation/reservation.context.module */ "./src/context/reservation/reservation.context.module.ts");
const file_context_module_1 = __webpack_require__(/*! @src/context/file/file.context.module */ "./src/context/file/file.context.module.ts");
const notification_context_module_1 = __webpack_require__(/*! @src/context/notification/notification.context.module */ "./src/context/notification/notification.context.module.ts");
const resource_controller_1 = __webpack_require__(/*! ./controllers/resource/resource.controller */ "./src/business/resource-management/controllers/resource/resource.controller.ts");
const resource_group_controller_1 = __webpack_require__(/*! ./controllers/resource/resource-group.controller */ "./src/business/resource-management/controllers/resource/resource-group.controller.ts");
const vehicle_info_controller_1 = __webpack_require__(/*! ./controllers/vehicle/vehicle-info.controller */ "./src/business/resource-management/controllers/vehicle/vehicle-info.controller.ts");
const consumable_controller_1 = __webpack_require__(/*! ./controllers/vehicle/consumable.controller */ "./src/business/resource-management/controllers/vehicle/consumable.controller.ts");
const maintenance_controller_1 = __webpack_require__(/*! ./controllers/vehicle/maintenance.controller */ "./src/business/resource-management/controllers/vehicle/maintenance.controller.ts");
const reservation_vehicle_controller_1 = __webpack_require__(/*! ./controllers/vehicle/reservation-vehicle.controller */ "./src/business/resource-management/controllers/vehicle/reservation-vehicle.controller.ts");
const resource_service_1 = __webpack_require__(/*! ./services/resource.service */ "./src/business/resource-management/services/resource.service.ts");
const resource_group_service_1 = __webpack_require__(/*! ./services/resource-group.service */ "./src/business/resource-management/services/resource-group.service.ts");
const vehicle_info_service_1 = __webpack_require__(/*! ./services/vehicle-info.service */ "./src/business/resource-management/services/vehicle-info.service.ts");
const consumable_service_1 = __webpack_require__(/*! ./services/consumable.service */ "./src/business/resource-management/services/consumable.service.ts");
const maintenance_service_1 = __webpack_require__(/*! ./services/maintenance.service */ "./src/business/resource-management/services/maintenance.service.ts");
let ResourceManagementModule = class ResourceManagementModule {
};
exports.ResourceManagementModule = ResourceManagementModule;
exports.ResourceManagementModule = ResourceManagementModule = __decorate([
    (0, common_1.Module)({
        imports: [resource_context_module_1.ResourceContextModule, reservation_context_module_1.ReservationContextModule, file_context_module_1.FileContextModule, notification_context_module_1.NotificationContextModule],
        controllers: [
            resource_controller_1.ResourceController,
            resource_group_controller_1.ResourceGroupController,
            vehicle_info_controller_1.VehicleInfoController,
            consumable_controller_1.ConsumableController,
            maintenance_controller_1.MaintenanceController,
            reservation_vehicle_controller_1.ReservationVehicleController,
        ],
        providers: [resource_service_1.ResourceService, resource_group_service_1.ResourceGroupService, vehicle_info_service_1.VehicleInfoService, consumable_service_1.ConsumableService, maintenance_service_1.MaintenanceService],
        exports: [resource_service_1.ResourceService, resource_group_service_1.ResourceGroupService, vehicle_info_service_1.VehicleInfoService, consumable_service_1.ConsumableService, maintenance_service_1.MaintenanceService],
    })
], ResourceManagementModule);


/***/ }),

/***/ "./src/business/resource-management/services/consumable.service.ts":
/*!*************************************************************************!*\
  !*** ./src/business/resource-management/services/consumable.service.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const consumable_context_service_1 = __webpack_require__(/*! @src/context/resource/services/consumable.context.service */ "./src/context/resource/services/consumable.context.service.ts");
let ConsumableService = class ConsumableService {
    constructor(consumableContextService) {
        this.consumableContextService = consumableContextService;
    }
    async save(createConsumableDto) {
        return this.consumableContextService.소모품을_저장한다(createConsumableDto);
    }
    async findAll(vehicleInfoId) {
        return this.consumableContextService.차량별_소모품목록을_조회한다(vehicleInfoId);
    }
    async findOne(consumableId) {
        return this.consumableContextService.소모품을_조회한다(consumableId);
    }
    async update(consumableId, updateConsumableDto) {
        return this.consumableContextService.소모품을_수정한다(consumableId, updateConsumableDto);
    }
    async delete(consumableId) {
        return this.consumableContextService.소모품을_삭제한다(consumableId);
    }
};
exports.ConsumableService = ConsumableService;
exports.ConsumableService = ConsumableService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_context_service_1.ConsumableContextService !== "undefined" && consumable_context_service_1.ConsumableContextService) === "function" ? _a : Object])
], ConsumableService);


/***/ }),

/***/ "./src/business/resource-management/services/maintenance.service.ts":
/*!**************************************************************************!*\
  !*** ./src/business/resource-management/services/maintenance.service.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MaintenanceService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const maintenance_context_service_1 = __webpack_require__(/*! @src/context/resource/services/maintenance.context.service */ "./src/context/resource/services/maintenance.context.service.ts");
const notification_context_service_1 = __webpack_require__(/*! @src/context/notification/services/notification.context.service */ "./src/context/notification/services/notification.context.service.ts");
let MaintenanceService = class MaintenanceService {
    constructor(maintenanceContextService, notificationContextService) {
        this.maintenanceContextService = maintenanceContextService;
        this.notificationContextService = notificationContextService;
    }
    async save(createMaintenanceDto) {
        const maintenance = await this.maintenanceContextService.정비이력을_저장한다(createMaintenanceDto);
        return maintenance;
    }
    async findAllByVehicleInfoId(vehicleInfoId, page, limit) {
        return this.maintenanceContextService.차량별_정비이력을_조회한다(vehicleInfoId, page, limit);
    }
    async findOne(maintenanceId) {
        return this.maintenanceContextService.정비이력을_조회한다(maintenanceId);
    }
    async update(maintenanceId, updateMaintenanceDto) {
        return this.maintenanceContextService.정비이력을_수정한다(maintenanceId, updateMaintenanceDto);
    }
    async delete(maintenanceId) {
        return this.maintenanceContextService.정비이력을_삭제한다(maintenanceId);
    }
};
exports.MaintenanceService = MaintenanceService;
exports.MaintenanceService = MaintenanceService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_context_service_1.MaintenanceContextService !== "undefined" && maintenance_context_service_1.MaintenanceContextService) === "function" ? _a : Object, typeof (_b = typeof notification_context_service_1.NotificationContextService !== "undefined" && notification_context_service_1.NotificationContextService) === "function" ? _b : Object])
], MaintenanceService);


/***/ }),

/***/ "./src/business/resource-management/services/resource-group.service.ts":
/*!*****************************************************************************!*\
  !*** ./src/business/resource-management/services/resource-group.service.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroupService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_group_context_service_1 = __webpack_require__(/*! @src/context/resource/services/resource-group.context.service */ "./src/context/resource/services/resource-group.context.service.ts");
let ResourceGroupService = class ResourceGroupService {
    constructor(resourceGroupContextService) {
        this.resourceGroupContextService = resourceGroupContextService;
    }
    async findParentResourceGroups() {
        return this.resourceGroupContextService.상위_자원그룹을_조회한다();
    }
    async findResourceGroupsWithResourceData(type) {
        return this.resourceGroupContextService.자원데이터포함_그룹목록을_조회한다(type);
    }
    async createResourceGroup(createResourceGroupDto) {
        return this.resourceGroupContextService.자원그룹을_생성한다(createResourceGroupDto);
    }
    async reorderResourceGroups(updateResourceGroupOrdersDto) {
        return this.resourceGroupContextService.자원그룹_순서를_변경한다(updateResourceGroupOrdersDto);
    }
    async updateResourceGroup(resourceGroupId, updateResourceGroupDto) {
        return this.resourceGroupContextService.자원그룹을_수정한다(resourceGroupId, updateResourceGroupDto);
    }
    async deleteResourceGroup(resourceGroupId) {
        return this.resourceGroupContextService.자원그룹을_삭제한다(resourceGroupId);
    }
    async findParentResourceGroupsForUser() {
        return this.resourceGroupContextService.상위_자원그룹을_조회한다();
    }
    async findResourceGroupsWithResourceDataForUser(type) {
        return this.resourceGroupContextService.자원데이터포함_그룹목록을_조회한다(type);
    }
};
exports.ResourceGroupService = ResourceGroupService;
exports.ResourceGroupService = ResourceGroupService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_context_service_1.ResourceGroupContextService !== "undefined" && resource_group_context_service_1.ResourceGroupContextService) === "function" ? _a : Object])
], ResourceGroupService);


/***/ }),

/***/ "./src/business/resource-management/services/resource.service.ts":
/*!***********************************************************************!*\
  !*** ./src/business/resource-management/services/resource.service.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const resource_context_service_1 = __webpack_require__(/*! @src/context/resource/services/resource.context.service */ "./src/context/resource/services/resource.context.service.ts");
const reservation_context_service_1 = __webpack_require__(/*! @src/context/reservation/services/reservation.context.service */ "./src/context/reservation/services/reservation.context.service.ts");
const available_time_response_dto_1 = __webpack_require__(/*! ../dtos/resource/available-time-response.dto */ "./src/business/resource-management/dtos/resource/available-time-response.dto.ts");
let ResourceService = class ResourceService {
    constructor(resourceContextService, reservationContextService) {
        this.resourceContextService = resourceContextService;
        this.reservationContextService = reservationContextService;
    }
    async createResourceWithInfos(createResourceInfo) {
        return this.resourceContextService.자원과_상세정보를_생성한다(createResourceInfo);
    }
    async findResources(type) {
        return this.resourceContextService.자원_목록을_조회한다(type);
    }
    async findResourcesByResourceGroupId(resourceGroupId) {
        return this.resourceContextService.그룹별_자원_목록을_조회한다(resourceGroupId);
    }
    async findResourceDetailForAdmin(resourceId) {
        return this.resourceContextService.자원_상세정보를_조회한다(resourceId);
    }
    async reorderResources(updateResourceOrdersDto) {
        return this.resourceContextService.자원_순서를_변경한다(updateResourceOrdersDto);
    }
    async updateResource(resourceId, updateResourceInfoDto) {
        return this.resourceContextService.자원을_수정한다(resourceId, updateResourceInfoDto);
    }
    async deleteResource(resourceId) {
        return this.resourceContextService.자원을_삭제한다(resourceId);
    }
    async findResourcesByTypeAndDateWithReservations(user, type, startDate, endDate, isMine) {
        return [];
    }
    async findAvailableTime(query) {
        const { resourceType, resourceGroupId, startDate, endDate, startTime, endTime, am, pm, timeUnit, reservationId, } = query;
        this.validateAvailabilityQuery(query);
        const resources = await this.resourceContextService.그룹별_사용가능한_자원_목록을_조회한다(resourceGroupId, resourceType);
        if (resources.length === 0) {
            return [];
        }
        const isAccommodation = resourceType === resource_type_enum_1.ResourceType.ACCOMMODATION;
        const isSameDay = startDate === endDate;
        const isTimeSlotRequest = !isAccommodation && isSameDay && timeUnit;
        const result = [];
        for (const resource of resources) {
            const dateRangeStart = startTime
                ? new Date(`${startDate} ${startTime}`)
                : new Date(`${startDate} 00:00:00`);
            const dateRangeEnd = endTime ? new Date(`${endDate} ${endTime}`) : new Date(`${endDate} 23:59:59`);
            const reservations = await this.reservationContextService.자원의_날짜범위_예약을_조회한다(resource.resourceId, dateRangeStart, dateRangeEnd, reservationId);
            if (isTimeSlotRequest) {
                const availabilityDto = await this.calculateTimeSlotAvailability(resource, startDate, endDate, am, pm, timeUnit, reservations);
                console.log(availabilityDto);
                result.push(availabilityDto);
            }
            else if (isAccommodation || !isSameDay) {
                const hasConflict = this.checkDateRangeConflict(reservations, dateRangeStart, dateRangeEnd);
                if (!hasConflict) {
                    const availabilityDto = new available_time_response_dto_1.ResourceAvailabilityDto();
                    availabilityDto.resourceId = resource.resourceId;
                    availabilityDto.resourceName = resource.name;
                    if (resource.location) {
                        const location = resource.location;
                        availabilityDto.resourceLocation =
                            location.address + (location.detailAddress ? ` ${location.detailAddress}` : '');
                    }
                    result.push(availabilityDto);
                }
            }
            else {
                throw new common_1.BadRequestException('시간 조회 조건이 올바르지 않습니다.');
            }
        }
        return result;
    }
    validateAvailabilityQuery(query) {
        const { startDate, endDate, startTime, endTime, am, pm, timeUnit } = query;
        if (!startDate && !endDate) {
            throw new common_1.BadRequestException('시작날짜 또는 종료날짜가 필요합니다.');
        }
        if (startDate && endDate && startDate > endDate) {
            throw new common_1.BadRequestException('시작날짜가 종료날짜보다 늦을 수 없습니다.');
        }
        const isTimeRange = startTime && endTime;
        const isTimeSelected = (am !== undefined || pm !== undefined) && timeUnit;
        if (isTimeRange && isTimeSelected) {
            throw new common_1.BadRequestException('시간 범위와 시간대 선택을 동시에 할 수 없습니다.');
        }
    }
    async calculateTimeSlotAvailability(resource, startDate, endDate, am, pm, timeUnit, reservations = []) {
        const availabilityDto = new available_time_response_dto_1.ResourceAvailabilityDto();
        availabilityDto.resourceId = resource.resourceId;
        availabilityDto.resourceName = resource.name;
        const isToday = startDate === new Date().toISOString().slice(0, 10);
        const timeRange = this.resourceContextService.현재시간_기준_가용시간대를_계산한다(resource.type, startDate, isToday);
        const availableSlots = this.calculateAvailableTimeSlots(startDate, timeRange.startTime, timeRange.endTime, timeUnit, am, pm, reservations);
        availabilityDto.availableTimeSlots = availableSlots;
        return availabilityDto;
    }
    calculateAvailableTimeSlots(dateStr, startTime, endTime, timeUnit, am, pm, reservations = []) {
        const availableSlots = [];
        const slotIntervalMinutes = 30;
        let actualStartTime = startTime;
        let actualEndTime = endTime;
        if (am && !pm) {
            actualEndTime = '12:00:00';
        }
        else if (!am && pm) {
            actualStartTime = '12:00:00';
        }
        const startDateTime = new Date(`${dateStr} ${actualStartTime}`);
        const endDateTime = new Date(`${dateStr} ${actualEndTime}`);
        const slotStart = new Date(startDateTime);
        while (slotStart < endDateTime) {
            const slotEnd = new Date(slotStart);
            slotEnd.setMinutes(slotEnd.getMinutes() + timeUnit);
            if (slotEnd > endDateTime) {
                slotStart.setMinutes(slotStart.getMinutes() + slotIntervalMinutes);
                continue;
            }
            const isAvailable = this.reservationContextService.시간슬롯별_예약가능여부를_계산한다(reservations, slotStart, slotEnd);
            if (isAvailable) {
                availableSlots.push({
                    startTime: slotStart.toISOString(),
                    endTime: slotEnd.toISOString(),
                });
            }
            slotStart.setMinutes(slotStart.getMinutes() + slotIntervalMinutes);
        }
        return availableSlots;
    }
    checkDateRangeConflict(reservations, requestStart, requestEnd) {
        return reservations.some((reservation) => {
            const reservationStart = new Date(reservation.startDate);
            const reservationEnd = new Date(reservation.endDate);
            return ((requestStart >= reservationStart && requestStart < reservationEnd) ||
                (requestEnd > reservationStart && requestEnd <= reservationEnd) ||
                (requestStart < reservationStart && requestEnd > reservationEnd));
        });
    }
    async checkAvailability(resourceId, startDate, endDate, reservationId) {
        const result = await this.resourceContextService.자원의_해당시간_예약을_확인한다(resourceId, startDate, endDate, reservationId);
        return !result;
    }
    async findResourceDetailForUser(employeeId, resourceId) {
        return this.resourceContextService.자원_상세정보를_조회한다(resourceId);
    }
};
exports.ResourceService = ResourceService;
exports.ResourceService = ResourceService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_context_service_1.ResourceContextService !== "undefined" && resource_context_service_1.ResourceContextService) === "function" ? _a : Object, typeof (_b = typeof reservation_context_service_1.ReservationContextService !== "undefined" && reservation_context_service_1.ReservationContextService) === "function" ? _b : Object])
], ResourceService);


/***/ }),

/***/ "./src/business/resource-management/services/vehicle-info.service.ts":
/*!***************************************************************************!*\
  !*** ./src/business/resource-management/services/vehicle-info.service.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfoService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const vehicle_info_context_service_1 = __webpack_require__(/*! @src/context/resource/services/vehicle-info.context.service */ "./src/context/resource/services/vehicle-info.context.service.ts");
const file_context_service_1 = __webpack_require__(/*! @src/context/file/services/file.context.service */ "./src/context/file/services/file.context.service.ts");
let VehicleInfoService = class VehicleInfoService {
    constructor(vehicleInfoContextService, fileContextService) {
        this.vehicleInfoContextService = vehicleInfoContextService;
        this.fileContextService = fileContextService;
    }
    async findVehicleInfo(vehicleInfoId) {
        return this.vehicleInfoContextService.차량정보를_조회한다(vehicleInfoId);
    }
    async updateVehicleInfo(vehicleInfoId, updateVehicleInfoDto) {
        return this.vehicleInfoContextService.차량정보를_수정한다(vehicleInfoId, updateVehicleInfoDto);
    }
    async findReturnList(vehicleInfoId) {
        const returnList = await this.vehicleInfoContextService.반납_리스트를_조회한다(vehicleInfoId);
        return returnList.map((returnVehicle) => {
            return {
                reservationVehicleId: returnVehicle.reservationVehicleId,
                returnedAt: returnVehicle.returnedAt,
                returnedBy: returnVehicle.returnedBy,
                endOdometer: returnVehicle.endOdometer,
                location: returnVehicle.location,
            };
        });
    }
    async findReturnDetail(reservationVehicleId) {
        const returnDetail = await this.vehicleInfoContextService.반납_상세정보를_조회한다(reservationVehicleId);
        const reservationVehicleFile = await this.fileContextService.차량예약_파일을_조회한다(reservationVehicleId);
        return {
            reservationVehicleId: returnDetail.reservationVehicleId,
            returnedAt: returnDetail.returnedAt,
            returnedBy: returnDetail.returnedBy,
            endOdometer: returnDetail.endOdometer,
            location: returnDetail.location,
            parkingLocationImages: reservationVehicleFile.parkingLocationImages.map((image) => image.filePath),
            odometerImages: reservationVehicleFile.odometerImages.map((image) => image.filePath),
            indoorImages: reservationVehicleFile.indoorImages.map((image) => image.filePath),
        };
    }
};
exports.VehicleInfoService = VehicleInfoService;
exports.VehicleInfoService = VehicleInfoService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_context_service_1.VehicleInfoContextService !== "undefined" && vehicle_info_context_service_1.VehicleInfoContextService) === "function" ? _a : Object, typeof (_b = typeof file_context_service_1.FileContextService !== "undefined" && file_context_service_1.FileContextService) === "function" ? _b : Object])
], VehicleInfoService);


/***/ }),

/***/ "./src/business/schedule-management/controllers/schedule.controllers.ts":
/*!******************************************************************************!*\
  !*** ./src/business/schedule-management/controllers/schedule.controllers.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const schedule_management_service_1 = __webpack_require__(/*! ../schedule-management.service */ "./src/business/schedule-management/schedule-management.service.ts");
const employee_entity_1 = __webpack_require__(/*! @libs/entities/employee.entity */ "./libs/entities/employee.entity.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const schedule_calendar_query_dto_1 = __webpack_require__(/*! ../dtos/schedule-calendar-query.dto */ "./src/business/schedule-management/dtos/schedule-calendar-query.dto.ts");
const schedule_calendar_response_dto_1 = __webpack_require__(/*! ../dtos/schedule-calendar-response.dto */ "./src/business/schedule-management/dtos/schedule-calendar-response.dto.ts");
const my_schedule_query_dto_1 = __webpack_require__(/*! ../dtos/my-schedule-query.dto */ "./src/business/schedule-management/dtos/my-schedule-query.dto.ts");
const my_schedule_response_dto_1 = __webpack_require__(/*! ../dtos/my-schedule-response.dto */ "./src/business/schedule-management/dtos/my-schedule-response.dto.ts");
const resource_schedule_query_dto_1 = __webpack_require__(/*! ../dtos/resource-schedule-query.dto */ "./src/business/schedule-management/dtos/resource-schedule-query.dto.ts");
const resource_schedule_response_dto_1 = __webpack_require__(/*! ../dtos/resource-schedule-response.dto */ "./src/business/schedule-management/dtos/resource-schedule-response.dto.ts");
const schedule_detail_query_dto_1 = __webpack_require__(/*! ../dtos/schedule-detail-query.dto */ "./src/business/schedule-management/dtos/schedule-detail-query.dto.ts");
const schedule_detail_response_dto_1 = __webpack_require__(/*! ../dtos/schedule-detail-response.dto */ "./src/business/schedule-management/dtos/schedule-detail-response.dto.ts");
const schedule_create_request_dto_1 = __webpack_require__(/*! ../dtos/schedule-create-request.dto */ "./src/business/schedule-management/dtos/schedule-create-request.dto.ts");
const schedule_create_response_dto_1 = __webpack_require__(/*! ../dtos/schedule-create-response.dto */ "./src/business/schedule-management/dtos/schedule-create-response.dto.ts");
const schedule_extend_response_dto_1 = __webpack_require__(/*! ../dtos/schedule-extend-response.dto */ "./src/business/schedule-management/dtos/schedule-extend-response.dto.ts");
const schedule_update_request_dto_1 = __webpack_require__(/*! ../dtos/schedule-update-request.dto */ "./src/business/schedule-management/dtos/schedule-update-request.dto.ts");
const my_schedule_history_query_dto_1 = __webpack_require__(/*! ../dtos/my-schedule-history-query.dto */ "./src/business/schedule-management/dtos/my-schedule-history-query.dto.ts");
const my_schedule_history_response_dto_1 = __webpack_require__(/*! ../dtos/my-schedule-history-response.dto */ "./src/business/schedule-management/dtos/my-schedule-history-response.dto.ts");
let ScheduleController = class ScheduleController {
    constructor(scheduleManagementService) {
        this.scheduleManagementService = scheduleManagementService;
    }
    async cronJobPostProcessing() {
        return this.scheduleManagementService.postProcessingSchedules();
    }
    async findCalendar(user, query) {
        return this.scheduleManagementService.findCalendar(user, query);
    }
    async findMySchedules(user, query) {
        return this.scheduleManagementService.findMySchedules(user, query);
    }
    async findMyScheduleHistory(user, query) {
        return this.scheduleManagementService.findMyScheduleHistory(user, query);
    }
    async findResourceSchedules(user, query) {
        return this.scheduleManagementService.findResourceSchedules(user, query);
    }
    async findScheduleDetail(user, query) {
        return this.scheduleManagementService.findScheduleDetail(user, query);
    }
    async createSchedule(user, createScheduleDto) {
        return this.scheduleManagementService.createSchedule(user, createScheduleDto);
    }
    async cancelSchedule(user, scheduleId) {
        return this.scheduleManagementService.cancelSchedule(user, scheduleId);
    }
    async completeSchedule(user, scheduleId) {
        return this.scheduleManagementService.completeSchedule(user, scheduleId);
    }
    async checkScheduleExtendable(user, scheduleId) {
        return this.scheduleManagementService.checkScheduleExtendable(user, scheduleId);
    }
    async extendSchedule30Min(user, scheduleId) {
        return this.scheduleManagementService.extendSchedule30Min(user, scheduleId);
    }
    async updateSchedule(user, scheduleId, updateScheduleDto) {
        return this.scheduleManagementService.updateSchedule(user, scheduleId, updateScheduleDto);
    }
};
exports.ScheduleController = ScheduleController;
__decorate([
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, common_1.Get)('cron-job/post-processing'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], ScheduleController.prototype, "cronJobPostProcessing", null);
__decorate([
    (0, swagger_1.ApiOperation)({
        summary: '일정 캘린더 조회',
        description: '월별 일정 캘린더를 조회합니다. 카테고리 필터 및 내 일정만 조회 옵션을 지원합니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '일정 캘린더 조회 성공',
        type: schedule_calendar_response_dto_1.ScheduleCalendarResponseDto,
    }),
    (0, common_1.Get)('calendar'),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _c : Object, typeof (_d = typeof schedule_calendar_query_dto_1.ScheduleCalendarQueryDto !== "undefined" && schedule_calendar_query_dto_1.ScheduleCalendarQueryDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], ScheduleController.prototype, "findCalendar", null);
__decorate([
    (0, swagger_1.ApiOperation)({
        summary: '내 일정 조회 (통계 + 목록)',
        description: '로그인한 사용자의 일정 통계와 목록을 함께 조회합니다. 통계는 검색에 영향받지 않으며, 목록은 검색과 페이지네이션이 적용됩니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '내 일정 조회 성공',
        type: my_schedule_response_dto_1.MyScheduleResponseDto,
    }),
    (0, common_1.Get)('my'),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _f : Object, typeof (_g = typeof my_schedule_query_dto_1.MyScheduleQueryDto !== "undefined" && my_schedule_query_dto_1.MyScheduleQueryDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], ScheduleController.prototype, "findMySchedules", null);
__decorate([
    (0, swagger_1.ApiOperation)({
        summary: '내 일정 내역 조회',
        description: '로그인한 사용자의 일정 목록을 조회합니다. 목록은 검색과 페이지네이션이 적용됩니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '내 일정 내역 조회 성공',
        type: my_schedule_history_response_dto_1.MyScheduleHistoryResponseDto,
    }),
    (0, common_1.Get)('my/history'),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _j : Object, typeof (_k = typeof my_schedule_history_query_dto_1.MyScheduleHistoryQueryDto !== "undefined" && my_schedule_history_query_dto_1.MyScheduleHistoryQueryDto) === "function" ? _k : Object]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], ScheduleController.prototype, "findMyScheduleHistory", null);
__decorate([
    (0, swagger_1.ApiOperation)({
        summary: '자원별 일정 조회',
        description: '자원 유형별로 일정을 조회합니다. 숙소는 월별, 그 외는 일별로 조회하며, 자원그룹별로 그룹핑됩니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '자원별 일정 조회 성공',
        type: resource_schedule_response_dto_1.ResourceScheduleResponseDto,
    }),
    (0, common_1.Get)('resource'),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_m = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _m : Object, typeof (_o = typeof resource_schedule_query_dto_1.ResourceScheduleQueryDto !== "undefined" && resource_schedule_query_dto_1.ResourceScheduleQueryDto) === "function" ? _o : Object]),
    __metadata("design:returntype", typeof (_p = typeof Promise !== "undefined" && Promise) === "function" ? _p : Object)
], ScheduleController.prototype, "findResourceSchedules", null);
__decorate([
    (0, swagger_1.ApiOperation)({
        summary: '일정 상세 조회',
        description: '일정 상세 정보를 조회합니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '일정 상세 조회 성공',
        type: schedule_detail_response_dto_1.ScheduleDetailResponseDto,
    }),
    (0, common_1.Get)('detail'),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_q = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _q : Object, typeof (_r = typeof schedule_detail_query_dto_1.ScheduleDetailQueryDto !== "undefined" && schedule_detail_query_dto_1.ScheduleDetailQueryDto) === "function" ? _r : Object]),
    __metadata("design:returntype", typeof (_s = typeof Promise !== "undefined" && Promise) === "function" ? _s : Object)
], ScheduleController.prototype, "findScheduleDetail", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({
        summary: '일정 추가',
        description: '일정을 생성합니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '일정 추가 성공',
        type: schedule_create_response_dto_1.ScheduleCreateResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_t = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _t : Object, typeof (_u = typeof schedule_create_request_dto_1.ScheduleCreateRequestDto !== "undefined" && schedule_create_request_dto_1.ScheduleCreateRequestDto) === "function" ? _u : Object]),
    __metadata("design:returntype", typeof (_v = typeof Promise !== "undefined" && Promise) === "function" ? _v : Object)
], ScheduleController.prototype, "createSchedule", null);
__decorate([
    (0, swagger_1.ApiOperation)({
        summary: '일정 삭제 (취소)',
        description: '일정을 취소 상태로 변경합니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '일정 취소 성공',
        type: Boolean,
    }),
    (0, common_1.Patch)(':scheduleId/cancel'),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('scheduleId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_w = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _w : Object, String]),
    __metadata("design:returntype", typeof (_x = typeof Promise !== "undefined" && Promise) === "function" ? _x : Object)
], ScheduleController.prototype, "cancelSchedule", null);
__decorate([
    (0, swagger_1.ApiOperation)({
        summary: '일정 완료 (종료)',
        description: '일정을 완료 상태로 변경하고 관련 정보를 업데이트합니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '일정 완료 성공',
        type: Boolean,
    }),
    (0, common_1.Patch)(':scheduleId/complete'),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('scheduleId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_y = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _y : Object, String]),
    __metadata("design:returntype", typeof (_z = typeof Promise !== "undefined" && Promise) === "function" ? _z : Object)
], ScheduleController.prototype, "completeSchedule", null);
__decorate([
    (0, swagger_1.ApiOperation)({
        summary: '일정 연장 가능 여부 확인',
        description: '자원예약이 포함된 일정의 30분 연장 가능 여부를 확인합니다. 일정 종료 15분 전부터 확인 가능합니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '일정 연장 가능 여부',
        type: Boolean,
    }),
    (0, common_1.Get)(':scheduleId/check/extendable'),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('scheduleId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_0 = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _0 : Object, String]),
    __metadata("design:returntype", typeof (_1 = typeof Promise !== "undefined" && Promise) === "function" ? _1 : Object)
], ScheduleController.prototype, "checkScheduleExtendable", null);
__decorate([
    (0, swagger_1.ApiOperation)({
        summary: '일정 30분 연장',
        description: '자원예약이 포함된 일정을 현재 종료시간에서 30분 연장합니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '일정 30분 연장 성공',
        type: schedule_extend_response_dto_1.ScheduleExtendResponseDto,
    }),
    (0, common_1.Patch)(':scheduleId/extend'),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('scheduleId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_2 = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _2 : Object, String]),
    __metadata("design:returntype", typeof (_3 = typeof Promise !== "undefined" && Promise) === "function" ? _3 : Object)
], ScheduleController.prototype, "extendSchedule30Min", null);
__decorate([
    (0, swagger_1.ApiOperation)({
        summary: '일정 수정',
        description: '일정의 날짜, 시간 및 기타 정보를 수정합니다.',
    }),
    (0, swagger_1.ApiOkResponse)({
        description: '일정 수정 성공',
        type: Boolean,
    }),
    (0, common_1.Patch)(':scheduleId'),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('scheduleId')),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_4 = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _4 : Object, String, typeof (_5 = typeof schedule_update_request_dto_1.ScheduleUpdateRequestDto !== "undefined" && schedule_update_request_dto_1.ScheduleUpdateRequestDto) === "function" ? _5 : Object]),
    __metadata("design:returntype", typeof (_6 = typeof Promise !== "undefined" && Promise) === "function" ? _6 : Object)
], ScheduleController.prototype, "updateSchedule", null);
exports.ScheduleController = ScheduleController = __decorate([
    (0, swagger_1.ApiTags)('v2 일정'),
    (0, common_1.Controller)('v2/schedule'),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_management_service_1.ScheduleManagementService !== "undefined" && schedule_management_service_1.ScheduleManagementService) === "function" ? _a : Object])
], ScheduleController);


/***/ }),

/***/ "./src/business/schedule-management/dtos/my-schedule-history-query.dto.ts":
/*!********************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/my-schedule-history-query.dto.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MyScheduleHistoryQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class MyScheduleHistoryQueryDto {
    constructor() {
        this.page = 1;
        this.limit = 20;
    }
}
exports.MyScheduleHistoryQueryDto = MyScheduleHistoryQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '검색 키워드 (제목 또는 자원명)',
        required: false,
        example: '회의실',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    (0, class_transformer_1.Transform)(({ value }) => value?.trim()),
    __metadata("design:type", String)
], MyScheduleHistoryQueryDto.prototype, "keyword", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '페이지 번호',
        required: false,
        example: 1,
        default: 1,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => parseInt(value) || 1),
    __metadata("design:type", Number)
], MyScheduleHistoryQueryDto.prototype, "page", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '페이지당 항목 수',
        required: false,
        example: 20,
        default: 20,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => parseInt(value) || 20),
    __metadata("design:type", Number)
], MyScheduleHistoryQueryDto.prototype, "limit", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/my-schedule-history-response.dto.ts":
/*!***********************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/my-schedule-history-response.dto.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MyScheduleHistoryResponseDto = exports.MyScheduleHistoryItemDto = exports.MyScheduleParticipantDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const my_schedule_response_dto_1 = __webpack_require__(/*! ./my-schedule-response.dto */ "./src/business/schedule-management/dtos/my-schedule-response.dto.ts");
class MyScheduleParticipantDto {
}
exports.MyScheduleParticipantDto = MyScheduleParticipantDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '직원 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], MyScheduleParticipantDto.prototype, "employeeId", void 0);
class MyScheduleHistoryItemDto {
}
exports.MyScheduleHistoryItemDto = MyScheduleHistoryItemDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], MyScheduleHistoryItemDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 제목',
        example: '주간 프로젝트 회의',
    }),
    __metadata("design:type", String)
], MyScheduleHistoryItemDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 설명',
        required: false,
        example: '주간 진행사항 점검 및 이슈 논의',
    }),
    __metadata("design:type", String)
], MyScheduleHistoryItemDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 날짜 및 시간',
        example: '2024-01-15T09:00:00Z',
    }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], MyScheduleHistoryItemDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 날짜 및 시간',
        example: '2024-01-15T10:00:00Z',
    }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], MyScheduleHistoryItemDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 유형',
        example: '프로젝트',
        enum: ['일정', '프로젝트', '자원'],
    }),
    __metadata("design:type", String)
], MyScheduleHistoryItemDto.prototype, "scheduleType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 전 알림 시점 (분 단위)',
        type: [Number],
        required: false,
        example: [10, 30],
    }),
    __metadata("design:type", Array)
], MyScheduleHistoryItemDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '참석자 정보',
        type: [MyScheduleParticipantDto],
    }),
    __metadata("design:type", Array)
], MyScheduleHistoryItemDto.prototype, "participants", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '관련 프로젝트 정보',
        type: my_schedule_response_dto_1.MyScheduleProjectDto,
        required: false,
    }),
    __metadata("design:type", typeof (_c = typeof my_schedule_response_dto_1.MyScheduleProjectDto !== "undefined" && my_schedule_response_dto_1.MyScheduleProjectDto) === "function" ? _c : Object)
], MyScheduleHistoryItemDto.prototype, "project", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '관련 자원 정보',
        type: my_schedule_response_dto_1.MyScheduleResourceDto,
        required: false,
    }),
    __metadata("design:type", typeof (_d = typeof my_schedule_response_dto_1.MyScheduleResourceDto !== "undefined" && my_schedule_response_dto_1.MyScheduleResourceDto) === "function" ? _d : Object)
], MyScheduleHistoryItemDto.prototype, "resource", void 0);
class MyScheduleHistoryResponseDto {
}
exports.MyScheduleHistoryResponseDto = MyScheduleHistoryResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '현재 페이지',
        example: 1,
    }),
    __metadata("design:type", Number)
], MyScheduleHistoryResponseDto.prototype, "currentPage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '페이지당 항목 수',
        example: 20,
    }),
    __metadata("design:type", Number)
], MyScheduleHistoryResponseDto.prototype, "pageSize", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '총 페이지 수',
        example: 3,
    }),
    __metadata("design:type", Number)
], MyScheduleHistoryResponseDto.prototype, "totalPages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '다음 페이지 존재 여부',
        example: true,
    }),
    __metadata("design:type", Boolean)
], MyScheduleHistoryResponseDto.prototype, "hasNext", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '이전 페이지 존재 여부',
        example: false,
    }),
    __metadata("design:type", Boolean)
], MyScheduleHistoryResponseDto.prototype, "hasPrevious", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 목록',
        type: [MyScheduleHistoryItemDto],
    }),
    __metadata("design:type", Array)
], MyScheduleHistoryResponseDto.prototype, "schedules", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/my-schedule-query.dto.ts":
/*!************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/my-schedule-query.dto.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MyScheduleQueryDto = exports.ScheduleCategoryType = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
var ScheduleCategoryType;
(function (ScheduleCategoryType) {
    ScheduleCategoryType["ALL"] = "ALL";
    ScheduleCategoryType["SCHEDULE"] = "SCHEDULE";
    ScheduleCategoryType["PROJECT"] = "PROJECT";
    ScheduleCategoryType["RESOURCE"] = "RESOURCE";
})(ScheduleCategoryType || (exports.ScheduleCategoryType = ScheduleCategoryType = {}));
class MyScheduleQueryDto {
    constructor() {
        this.page = 1;
        this.limit = 20;
    }
}
exports.MyScheduleQueryDto = MyScheduleQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '역할 기준 필터 (예약자, 참석자)',
        enum: reservation_type_enum_1.ParticipantsType,
        required: false,
        example: reservation_type_enum_1.ParticipantsType.RESERVER,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(reservation_type_enum_1.ParticipantsType),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ParticipantsType !== "undefined" && reservation_type_enum_1.ParticipantsType) === "function" ? _a : Object)
], MyScheduleQueryDto.prototype, "role", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '카테고리 필터 (전체, 일정, 프로젝트, 자원)',
        enum: ScheduleCategoryType,
        required: false,
        example: ScheduleCategoryType.ALL,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(ScheduleCategoryType),
    __metadata("design:type", String)
], MyScheduleQueryDto.prototype, "category", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '검색 키워드 (제목 또는 자원명)',
        required: false,
        example: '회의실',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    (0, class_transformer_1.Transform)(({ value }) => value?.trim()),
    __metadata("design:type", String)
], MyScheduleQueryDto.prototype, "keyword", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '페이지 번호',
        required: false,
        example: 1,
        default: 1,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => parseInt(value) || 1),
    __metadata("design:type", Number)
], MyScheduleQueryDto.prototype, "page", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '페이지당 항목 수',
        required: false,
        example: 20,
        default: 20,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => parseInt(value) || 20),
    __metadata("design:type", Number)
], MyScheduleQueryDto.prototype, "limit", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/my-schedule-response.dto.ts":
/*!***************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/my-schedule-response.dto.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MyScheduleResponseDto = exports.MyScheduleItemDto = exports.MyScheduleProjectDto = exports.MyScheduleResourceDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const my_schedule_statistics_response_dto_1 = __webpack_require__(/*! ./my-schedule-statistics-response.dto */ "./src/business/schedule-management/dtos/my-schedule-statistics-response.dto.ts");
class MyScheduleResourceDto {
}
exports.MyScheduleResourceDto = MyScheduleResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], MyScheduleResourceDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 이름',
        example: '회의실 A',
    }),
    __metadata("design:type", String)
], MyScheduleResourceDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 타입',
        example: 'MEETING_ROOM',
    }),
    __metadata("design:type", String)
], MyScheduleResourceDto.prototype, "resourceType", void 0);
class MyScheduleProjectDto {
}
exports.MyScheduleProjectDto = MyScheduleProjectDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], MyScheduleProjectDto.prototype, "projectId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 이름',
        example: '신규 시스템 개발',
    }),
    __metadata("design:type", String)
], MyScheduleProjectDto.prototype, "projectName", void 0);
class MyScheduleItemDto {
}
exports.MyScheduleItemDto = MyScheduleItemDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], MyScheduleItemDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 제목',
        example: '주간 프로젝트 회의',
    }),
    __metadata("design:type", String)
], MyScheduleItemDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 설명',
        required: false,
        example: '주간 진행사항 점검 및 이슈 논의',
    }),
    __metadata("design:type", String)
], MyScheduleItemDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 날짜 및 시간',
        example: '2024-01-15T09:00:00Z',
    }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], MyScheduleItemDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 날짜 및 시간',
        example: '2024-01-15T10:00:00Z',
    }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], MyScheduleItemDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 유형',
        example: '프로젝트',
        enum: ['일정', '프로젝트', '자원'],
    }),
    __metadata("design:type", String)
], MyScheduleItemDto.prototype, "scheduleType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '관련 프로젝트 정보',
        type: MyScheduleProjectDto,
        required: false,
    }),
    __metadata("design:type", MyScheduleProjectDto)
], MyScheduleItemDto.prototype, "project", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '관련 자원 정보',
        type: MyScheduleResourceDto,
        required: false,
    }),
    __metadata("design:type", MyScheduleResourceDto)
], MyScheduleItemDto.prototype, "resource", void 0);
class MyScheduleResponseDto {
}
exports.MyScheduleResponseDto = MyScheduleResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '통계 정보 (검색/페이지네이션과 무관한 전체 통계)',
        type: [my_schedule_statistics_response_dto_1.StatisticsItemDto],
    }),
    __metadata("design:type", Array)
], MyScheduleResponseDto.prototype, "statistics", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '전체 일정 개수 (필터링 후, 검색 전)',
        example: 45,
    }),
    __metadata("design:type", Number)
], MyScheduleResponseDto.prototype, "totalCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '검색 결과 개수',
        example: 25,
    }),
    __metadata("design:type", Number)
], MyScheduleResponseDto.prototype, "filteredCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '현재 페이지',
        example: 1,
    }),
    __metadata("design:type", Number)
], MyScheduleResponseDto.prototype, "currentPage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '페이지당 항목 수',
        example: 20,
    }),
    __metadata("design:type", Number)
], MyScheduleResponseDto.prototype, "pageSize", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '총 페이지 수',
        example: 3,
    }),
    __metadata("design:type", Number)
], MyScheduleResponseDto.prototype, "totalPages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '다음 페이지 존재 여부',
        example: true,
    }),
    __metadata("design:type", Boolean)
], MyScheduleResponseDto.prototype, "hasNext", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '이전 페이지 존재 여부',
        example: false,
    }),
    __metadata("design:type", Boolean)
], MyScheduleResponseDto.prototype, "hasPrevious", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 목록 (페이지네이션 적용됨)',
        type: [MyScheduleItemDto],
    }),
    __metadata("design:type", Array)
], MyScheduleResponseDto.prototype, "schedules", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/my-schedule-statistics-query.dto.ts":
/*!***********************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/my-schedule-statistics-query.dto.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MyScheduleStatisticsQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const my_schedule_query_dto_1 = __webpack_require__(/*! ./my-schedule-query.dto */ "./src/business/schedule-management/dtos/my-schedule-query.dto.ts");
class MyScheduleStatisticsQueryDto {
}
exports.MyScheduleStatisticsQueryDto = MyScheduleStatisticsQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '역할 기준 필터 (예약자, 참석자)',
        enum: reservation_type_enum_1.ParticipantsType,
        required: false,
        example: reservation_type_enum_1.ParticipantsType.RESERVER,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(reservation_type_enum_1.ParticipantsType),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ParticipantsType !== "undefined" && reservation_type_enum_1.ParticipantsType) === "function" ? _a : Object)
], MyScheduleStatisticsQueryDto.prototype, "role", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '카테고리 필터 (전체, 일정, 프로젝트, 자원)',
        enum: my_schedule_query_dto_1.ScheduleCategoryType,
        required: false,
        example: my_schedule_query_dto_1.ScheduleCategoryType.ALL,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(my_schedule_query_dto_1.ScheduleCategoryType),
    __metadata("design:type", typeof (_b = typeof my_schedule_query_dto_1.ScheduleCategoryType !== "undefined" && my_schedule_query_dto_1.ScheduleCategoryType) === "function" ? _b : Object)
], MyScheduleStatisticsQueryDto.prototype, "category", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/my-schedule-statistics-response.dto.ts":
/*!**************************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/my-schedule-statistics-response.dto.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MyScheduleStatisticsResponseDto = exports.StatisticsItemDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class StatisticsItemDto {
}
exports.StatisticsItemDto = StatisticsItemDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '세부항목 라벨',
        example: '예약자',
    }),
    __metadata("design:type", String)
], StatisticsItemDto.prototype, "label", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '해당 항목의 건수',
        example: 15,
    }),
    __metadata("design:type", Number)
], StatisticsItemDto.prototype, "count", void 0);
class MyScheduleStatisticsResponseDto {
}
exports.MyScheduleStatisticsResponseDto = MyScheduleStatisticsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '라벨',
        example: '예약자',
    }),
    __metadata("design:type", String)
], MyScheduleStatisticsResponseDto.prototype, "label", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '전체 일정 건수',
        example: 24,
    }),
    __metadata("design:type", Number)
], MyScheduleStatisticsResponseDto.prototype, "totalCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '통계 요약 정보 (필터 조건에 따라 동적 변경)',
        type: [StatisticsItemDto],
    }),
    __metadata("design:type", Array)
], MyScheduleStatisticsResponseDto.prototype, "statistics", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/resource-schedule-query.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/resource-schedule-query.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceScheduleQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
class ResourceScheduleQueryDto {
}
exports.ResourceScheduleQueryDto = ResourceScheduleQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 유형',
        enum: resource_type_enum_1.ResourceType,
        example: resource_type_enum_1.ResourceType.MEETING_ROOM,
    }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], ResourceScheduleQueryDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '조회 날짜 (일별 검색용 - YYYY-MM-DD 형식)',
        required: false,
        example: '2024-01-15',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ResourceScheduleQueryDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '조회 월 (월별 검색용 - YYYY-MM 형식, 숙소 전용)',
        required: false,
        example: '2024-01',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    (0, class_transformer_1.Transform)(({ value }) => value?.trim()),
    __metadata("design:type", String)
], ResourceScheduleQueryDto.prototype, "month", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/resource-schedule-response.dto.ts":
/*!*********************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/resource-schedule-response.dto.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceScheduleResponseDto = exports.ResourceGroupDto = exports.ResourceInfoDto = exports.ResourceScheduleItemDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
class ResourceScheduleItemDto {
    static fromScheduleData(scheduleData, currentEmployeeId) {
        const dto = new ResourceScheduleItemDto();
        const { schedule, participants } = scheduleData;
        const reserver = participants?.find((p) => p.type === reservation_type_enum_1.ParticipantsType.RESERVER);
        dto.scheduleId = schedule.scheduleId;
        dto.title = schedule.title;
        dto.description = schedule.description;
        dto.startDate = schedule.startDate;
        dto.endDate = schedule.endDate;
        dto.reserverName = reserver?.employee?.name || '알 수 없음';
        dto.isMine = reserver?.employeeId === currentEmployeeId;
        return dto;
    }
}
exports.ResourceScheduleItemDto = ResourceScheduleItemDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ResourceScheduleItemDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 제목',
        example: '프로젝트 회의',
    }),
    __metadata("design:type", String)
], ResourceScheduleItemDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 설명',
        required: false,
        example: '주간 진행사항 점검',
    }),
    __metadata("design:type", String)
], ResourceScheduleItemDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 날짜 및 시간',
        example: '2024-01-15T09:00:00Z',
    }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ResourceScheduleItemDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 날짜 및 시간',
        example: '2024-01-15T10:00:00Z',
    }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ResourceScheduleItemDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약자 이름',
        example: '홍길동',
    }),
    __metadata("design:type", String)
], ResourceScheduleItemDto.prototype, "reserverName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '내 일정 여부',
        example: true,
    }),
    __metadata("design:type", Boolean)
], ResourceScheduleItemDto.prototype, "isMine", void 0);
class ResourceInfoDto {
    static fromResourceAndSchedules(resource, scheduleDataList, currentEmployeeId) {
        const dto = new ResourceInfoDto();
        dto.resourceId = resource.resourceId;
        dto.resourceName = resource.name;
        dto.resourceDescription = resource.description;
        dto.isAvailable = resource.isAvailable;
        dto.unavailableReason = resource.unavailableReason;
        dto.schedules = scheduleDataList.map((scheduleData) => ResourceScheduleItemDto.fromScheduleData(scheduleData, currentEmployeeId));
        return dto;
    }
}
exports.ResourceInfoDto = ResourceInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ResourceInfoDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원명',
        example: '회의실 A',
    }),
    __metadata("design:type", String)
], ResourceInfoDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 설명',
        required: false,
        example: '10인용 대회의실',
    }),
    __metadata("design:type", String)
], ResourceInfoDto.prototype, "resourceDescription", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 사용 가능 여부',
        required: false,
        example: true,
    }),
    __metadata("design:type", Boolean)
], ResourceInfoDto.prototype, "isAvailable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 사용 불가능 이유',
        required: false,
        example: '자원 사용 불가능',
    }),
    __metadata("design:type", String)
], ResourceInfoDto.prototype, "unavailableReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '해당 자원의 일정 목록',
        type: [ResourceScheduleItemDto],
    }),
    __metadata("design:type", Array)
], ResourceInfoDto.prototype, "schedules", void 0);
class ResourceGroupDto {
    static fromResourceGroupAndData(resourceGroup, resources, scheduleDataMap, currentEmployeeId) {
        const dto = new ResourceGroupDto();
        dto.resourceGroupId = resourceGroup.resourceGroupId;
        dto.resourceGroupName = resourceGroup.title;
        dto.resourceGroupDescription = resourceGroup.description;
        dto.order = resourceGroup.order;
        dto.resources = resources.map((resource) => {
            const resourceSchedules = scheduleDataMap.get(resource.resourceId) || [];
            return ResourceInfoDto.fromResourceAndSchedules(resource, resourceSchedules, currentEmployeeId);
        });
        return dto;
    }
    static fromResourceGroupsAndData(resourceGroups, resourceMap, scheduleDataList, currentEmployeeId) {
        const scheduleDataMap = new Map();
        scheduleDataList.forEach(({ schedule, resource, participants }) => {
            if (resource) {
                if (!scheduleDataMap.has(resource.resourceId)) {
                    scheduleDataMap.set(resource.resourceId, []);
                }
                scheduleDataMap.get(resource.resourceId).push({
                    schedule,
                    participants,
                });
            }
        });
        const resourceGroupDtos = resourceGroups.map((group) => {
            const resources = resourceMap.get(group.resourceGroupId) || [];
            return ResourceGroupDto.fromResourceGroupAndData(group, resources, scheduleDataMap, currentEmployeeId);
        });
        return resourceGroupDtos.sort((a, b) => a.order - b.order);
    }
}
exports.ResourceGroupDto = ResourceGroupDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 그룹 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ResourceGroupDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 그룹명',
        example: '본사 회의실',
    }),
    __metadata("design:type", String)
], ResourceGroupDto.prototype, "resourceGroupName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 그룹 설명',
        required: false,
        example: '본사 건물 내 회의실 그룹',
    }),
    __metadata("design:type", String)
], ResourceGroupDto.prototype, "resourceGroupDescription", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 그룹 순서', example: 1 }),
    __metadata("design:type", Number)
], ResourceGroupDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '해당 그룹의 자원 목록',
        type: [ResourceInfoDto],
    }),
    __metadata("design:type", Array)
], ResourceGroupDto.prototype, "resources", void 0);
class ResourceScheduleResponseDto {
}
exports.ResourceScheduleResponseDto = ResourceScheduleResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 유형', enum: resource_type_enum_1.ResourceType, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    __metadata("design:type", typeof (_c = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _c : Object)
], ResourceScheduleResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 그룹별 일정 목록',
        type: [ResourceGroupDto],
    }),
    __metadata("design:type", Array)
], ResourceScheduleResponseDto.prototype, "resourceGroups", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-calendar-query.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-calendar-query.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleCalendarQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const my_schedule_query_dto_1 = __webpack_require__(/*! ./my-schedule-query.dto */ "./src/business/schedule-management/dtos/my-schedule-query.dto.ts");
class ScheduleCalendarQueryDto {
}
exports.ScheduleCalendarQueryDto = ScheduleCalendarQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '조회할 날짜 (YYYY-MM 형식)',
        example: '2024-01',
        required: true,
    }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ScheduleCalendarQueryDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '카테고리 필터 (전체, 일정, 프로젝트, 자원)',
        enum: my_schedule_query_dto_1.ScheduleCategoryType,
        example: my_schedule_query_dto_1.ScheduleCategoryType.ALL,
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(my_schedule_query_dto_1.ScheduleCategoryType),
    __metadata("design:type", typeof (_a = typeof my_schedule_query_dto_1.ScheduleCategoryType !== "undefined" && my_schedule_query_dto_1.ScheduleCategoryType) === "function" ? _a : Object)
], ScheduleCalendarQueryDto.prototype, "category", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '내 일정만 조회 여부',
        example: false,
        required: false,
        type: Boolean,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => {
        if (value === 'true')
            return true;
        if (value === 'false')
            return false;
        return Boolean(value);
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], ScheduleCalendarQueryDto.prototype, "mySchedule", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-calendar-response.dto.ts":
/*!*********************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-calendar-response.dto.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleCalendarResponseDto = exports.ScheduleCalendarItemDto = exports.ProjectDto = exports.ReservationDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class ReservationDto {
}
exports.ReservationDto = ReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 예약 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ReservationDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 이름',
        example: '자원 1',
    }),
    __metadata("design:type", String)
], ReservationDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 타입',
        example: '자원 1',
    }),
    __metadata("design:type", String)
], ReservationDto.prototype, "resourceType", void 0);
class ProjectDto {
}
exports.ProjectDto = ProjectDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ProjectDto.prototype, "projectId", void 0);
class ScheduleCalendarItemDto {
}
exports.ScheduleCalendarItemDto = ScheduleCalendarItemDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ScheduleCalendarItemDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 제목',
        example: '프로젝트 회의',
    }),
    __metadata("design:type", String)
], ScheduleCalendarItemDto.prototype, "scheduleTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 날짜 및 시간',
        example: '2024-01-15T09:00:00Z',
    }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ScheduleCalendarItemDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 날짜 및 시간',
        example: '2024-01-15T10:00:00Z',
    }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ScheduleCalendarItemDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약자 정보',
        example: '홍길동',
    }),
    __metadata("design:type", String)
], ScheduleCalendarItemDto.prototype, "reserverName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 정보',
        example: '프로젝트 1',
        required: false,
    }),
    __metadata("design:type", ProjectDto)
], ScheduleCalendarItemDto.prototype, "project", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 예약 정보',
        example: '자원 예약 1',
        required: false,
    }),
    __metadata("design:type", ReservationDto)
], ScheduleCalendarItemDto.prototype, "reservation", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '안읽은 알림 여부',
        example: true,
        required: false,
    }),
    __metadata("design:type", Boolean)
], ScheduleCalendarItemDto.prototype, "hasUnreadNotification", void 0);
class ScheduleCalendarResponseDto {
}
exports.ScheduleCalendarResponseDto = ScheduleCalendarResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 목록',
        type: [ScheduleCalendarItemDto],
    }),
    __metadata("design:type", Array)
], ScheduleCalendarResponseDto.prototype, "schedules", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-cancel-request.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-cancel-request.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleCancelRequestDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ScheduleCancelRequestDto {
}
exports.ScheduleCancelRequestDto = ScheduleCancelRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '취소 사유',
        example: '급한 업무로 인해 일정을 취소합니다.',
        required: false,
        maxLength: 500,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.MaxLength)(500, { message: '취소 사유는 500자를 초과할 수 없습니다.' }),
    __metadata("design:type", String)
], ScheduleCancelRequestDto.prototype, "reason", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-cancel-response.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-cancel-response.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleCancelResponseDto = exports.CancelledReservationDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class CancelledReservationDto {
}
exports.CancelledReservationDto = CancelledReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 ID', example: 'uuid-string' }),
    __metadata("design:type", String)
], CancelledReservationDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 상태', example: 'CANCELLED' }),
    __metadata("design:type", String)
], CancelledReservationDto.prototype, "status", void 0);
class ScheduleCancelResponseDto {
}
exports.ScheduleCancelResponseDto = ScheduleCancelResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 ID', example: 'uuid-string' }),
    __metadata("design:type", String)
], ScheduleCancelResponseDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 제목', example: '주간 팀 회의' }),
    __metadata("design:type", String)
], ScheduleCancelResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 상태', example: 'CANCELLED' }),
    __metadata("design:type", String)
], ScheduleCancelResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '취소된 시간', example: '2025-01-20T15:30:00.000Z' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ScheduleCancelResponseDto.prototype, "cancelledAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '취소 사유',
        example: '급한 업무로 인해 일정을 취소합니다.',
        required: false,
    }),
    __metadata("design:type", String)
], ScheduleCancelResponseDto.prototype, "reason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '연결된 예약 정보',
        type: CancelledReservationDto,
        required: false,
    }),
    __metadata("design:type", CancelledReservationDto)
], ScheduleCancelResponseDto.prototype, "reservation", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-complete-request.dto.ts":
/*!********************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-complete-request.dto.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleCompleteRequestDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ScheduleCompleteRequestDto {
}
exports.ScheduleCompleteRequestDto = ScheduleCompleteRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '완료 메모',
        example: '회의가 성공적으로 완료되었습니다. 다음 액션 아이템들이 논의되었습니다.',
        required: false,
        maxLength: 1000,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.MaxLength)(1000, { message: '완료 메모는 1000자를 초과할 수 없습니다.' }),
    __metadata("design:type", String)
], ScheduleCompleteRequestDto.prototype, "completionNotes", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-complete-response.dto.ts":
/*!*********************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-complete-response.dto.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleCompleteResponseDto = exports.CompletedReservationDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class CompletedReservationDto {
}
exports.CompletedReservationDto = CompletedReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 ID', example: 'uuid-string' }),
    __metadata("design:type", String)
], CompletedReservationDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 상태', example: 'CLOSED' }),
    __metadata("design:type", String)
], CompletedReservationDto.prototype, "status", void 0);
class ScheduleCompleteResponseDto {
}
exports.ScheduleCompleteResponseDto = ScheduleCompleteResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 ID', example: 'uuid-string' }),
    __metadata("design:type", String)
], ScheduleCompleteResponseDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 제목', example: '주간 팀 회의' }),
    __metadata("design:type", String)
], ScheduleCompleteResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 상태', example: 'COMPLETED' }),
    __metadata("design:type", String)
], ScheduleCompleteResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '완료된 시간', example: '2025-01-20T15:30:00.000Z' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ScheduleCompleteResponseDto.prototype, "completedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '완료 메모',
        example: '회의가 성공적으로 완료되었습니다.',
        required: false,
    }),
    __metadata("design:type", String)
], ScheduleCompleteResponseDto.prototype, "completionNotes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '연결된 예약 정보',
        type: CompletedReservationDto,
        required: false,
    }),
    __metadata("design:type", CompletedReservationDto)
], ScheduleCompleteResponseDto.prototype, "reservation", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-create-request.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-create-request.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleCreateRequestDto = exports.ResourceSelectionDto = exports.ProjectSelectionDto = exports.ScheduleParticipantDto = exports.ScheduleDateRangeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
class ScheduleDateRangeDto {
}
exports.ScheduleDateRangeDto = ScheduleDateRangeDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 날짜 및 시간',
        example: '2025-08-25T10:00:00Z',
    }),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ScheduleDateRangeDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 날짜 및 시간',
        example: '2025-08-25T11:00:00Z',
    }),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ScheduleDateRangeDto.prototype, "endDate", void 0);
class ScheduleParticipantDto {
}
exports.ScheduleParticipantDto = ScheduleParticipantDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '참석자 직원 ID',
        example: 'uuid-string',
    }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], ScheduleParticipantDto.prototype, "employeeId", void 0);
class ProjectSelectionDto {
}
exports.ProjectSelectionDto = ProjectSelectionDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 ID',
        example: 'uuid-string',
    }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], ProjectSelectionDto.prototype, "projectId", void 0);
class ResourceSelectionDto {
}
exports.ResourceSelectionDto = ResourceSelectionDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 유형',
        enum: resource_type_enum_1.ResourceType,
        example: resource_type_enum_1.ResourceType.MEETING_ROOM,
    }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], ResourceSelectionDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 ID',
        example: 'uuid-string',
    }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], ResourceSelectionDto.prototype, "resourceId", void 0);
class ScheduleCreateRequestDto {
}
exports.ScheduleCreateRequestDto = ScheduleCreateRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 날짜 범위 목록 (연속되지 않은 여러 날짜 가능)',
        type: [ScheduleDateRangeDto],
        example: [
            {
                startDate: new Date('2025-09-05T01:00:00Z').toISOString(),
                endDate: new Date('2025-09-05T02:00:00Z').toISOString(),
            },
            {
                startDate: new Date('2025-09-06T01:00:00Z').toISOString(),
                endDate: new Date('2025-09-06T02:00:00Z').toISOString(),
            },
        ],
    }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.ValidateNested)({ each: true }),
    (0, class_transformer_1.Type)(() => ScheduleDateRangeDto),
    __metadata("design:type", Array)
], ScheduleCreateRequestDto.prototype, "datesSelection", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 제목',
        example: '주간 팀 회의',
    }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ScheduleCreateRequestDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 내용',
        example: '주간 업무 공유 및 계획 수립',
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ScheduleCreateRequestDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 장소',
        example: '회의실 A',
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ScheduleCreateRequestDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 시작 전 알림 여부',
        example: true,
    }),
    __metadata("design:type", Boolean)
], ScheduleCreateRequestDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '알림 시간 (분 단위)',
        example: [5, 10, 30],
        type: [Number],
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsInt)({ each: true }),
    (0, class_validator_1.Min)(0, { each: true }),
    __metadata("design:type", Array)
], ScheduleCreateRequestDto.prototype, "notificationMinutes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 유형',
        enum: schedule_type_enum_1.ScheduleType,
        example: schedule_type_enum_1.ScheduleType.DEPARTMENT,
    }),
    (0, class_validator_1.IsEnum)(schedule_type_enum_1.ScheduleType),
    __metadata("design:type", typeof (_b = typeof schedule_type_enum_1.ScheduleType !== "undefined" && schedule_type_enum_1.ScheduleType) === "function" ? _b : Object)
], ScheduleCreateRequestDto.prototype, "scheduleType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '참석자 목록',
        type: [ScheduleParticipantDto],
    }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.ValidateNested)({ each: true }),
    (0, class_transformer_1.Type)(() => ScheduleParticipantDto),
    __metadata("design:type", Array)
], ScheduleCreateRequestDto.prototype, "participants", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 선택',
        type: ProjectSelectionDto,
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => ProjectSelectionDto),
    __metadata("design:type", ProjectSelectionDto)
], ScheduleCreateRequestDto.prototype, "projectSelection", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 선택',
        type: ResourceSelectionDto,
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => ResourceSelectionDto),
    __metadata("design:type", ResourceSelectionDto)
], ScheduleCreateRequestDto.prototype, "resourceSelection", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-create-response.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-create-response.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleCreateResponseDto = exports.FailedScheduleDto = exports.CreatedScheduleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
class CreatedScheduleDto {
}
exports.CreatedScheduleDto = CreatedScheduleDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 ID', example: 'uuid-string' }),
    __metadata("design:type", String)
], CreatedScheduleDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 제목', example: '주간 팀 회의' }),
    __metadata("design:type", String)
], CreatedScheduleDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '시작 날짜 및 시간', example: '2025-08-25T10:00:00Z' }),
    __metadata("design:type", String)
], CreatedScheduleDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '종료 날짜 및 시간', example: '2025-08-25T11:00:00Z' }),
    __metadata("design:type", String)
], CreatedScheduleDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 유형', enum: schedule_type_enum_1.ScheduleType, example: schedule_type_enum_1.ScheduleType.DEPARTMENT }),
    __metadata("design:type", typeof (_a = typeof schedule_type_enum_1.ScheduleType !== "undefined" && schedule_type_enum_1.ScheduleType) === "function" ? _a : Object)
], CreatedScheduleDto.prototype, "scheduleType", void 0);
class FailedScheduleDto {
}
exports.FailedScheduleDto = FailedScheduleDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '시작 날짜 및 시간', example: '2025-08-25T10:00:00Z' }),
    __metadata("design:type", String)
], FailedScheduleDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '종료 날짜 및 시간', example: '2025-08-25T11:00:00Z' }),
    __metadata("design:type", String)
], FailedScheduleDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '실패 사유', example: '선택한 시간대에 자원이 이미 예약되어 있습니다.' }),
    __metadata("design:type", String)
], FailedScheduleDto.prototype, "reason", void 0);
class ScheduleCreateResponseDto {
}
exports.ScheduleCreateResponseDto = ScheduleCreateResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '성공적으로 생성된 일정 목록',
        type: [CreatedScheduleDto],
    }),
    __metadata("design:type", Array)
], ScheduleCreateResponseDto.prototype, "createdSchedules", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '생성에 실패한 일정 목록',
        type: [FailedScheduleDto],
    }),
    __metadata("design:type", Array)
], ScheduleCreateResponseDto.prototype, "failedSchedules", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-detail-query.dto.ts":
/*!****************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-detail-query.dto.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleDetailQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class ScheduleDetailQueryDto {
    constructor() {
        this.includeProject = false;
        this.includeReservation = false;
    }
}
exports.ScheduleDetailQueryDto = ScheduleDetailQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 ID',
        example: 'uuid-string',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], ScheduleDetailQueryDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 정보 포함 여부',
        required: false,
        example: true,
        default: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], ScheduleDetailQueryDto.prototype, "includeProject", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원예약 정보 포함 여부',
        required: false,
        example: true,
        default: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], ScheduleDetailQueryDto.prototype, "includeReservation", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-detail-response.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-detail-response.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleDetailResponseDto = exports.ScheduleDetailReservationDto = exports.ScheduleDetailResourceDto = exports.ScheduleDetailParticipantDto = exports.ScheduleDetailProjectDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! @src/business/resource-management/dtos/vehicle/vehicle-response.dto */ "./src/business/resource-management/dtos/vehicle/vehicle-response.dto.ts");
const business_dto_index_1 = __webpack_require__(/*! @src/business.dto.index */ "./src/business.dto.index.ts");
const business_dto_index_2 = __webpack_require__(/*! @src/business.dto.index */ "./src/business.dto.index.ts");
const business_dto_index_3 = __webpack_require__(/*! @src/business.dto.index */ "./src/business.dto.index.ts");
class ScheduleDetailProjectDto {
    static fromProject(project) {
        const dto = new ScheduleDetailProjectDto();
        dto.projectId = project.projectId;
        dto.projectName = project.projectName;
        return dto;
    }
}
exports.ScheduleDetailProjectDto = ScheduleDetailProjectDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ScheduleDetailProjectDto.prototype, "projectId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 이름 (추후 프로젝트 테이블 구현 시 실제 데이터로 대체)',
        example: '신규 시스템 개발',
    }),
    __metadata("design:type", String)
], ScheduleDetailProjectDto.prototype, "projectName", void 0);
class ScheduleDetailParticipantDto {
    static fromParticipantWithEmployee(participantWithEmployee) {
        const dto = new ScheduleDetailParticipantDto();
        dto.participantId = participantWithEmployee.participantId;
        dto.employeeId = participantWithEmployee.employeeId;
        dto.employeeName = participantWithEmployee.employee?.name || '';
        dto.participantType = participantWithEmployee.type;
        return dto;
    }
    static fromParticipantsArray(participants) {
        return participants.map((p) => this.fromParticipantWithEmployee(p));
    }
}
exports.ScheduleDetailParticipantDto = ScheduleDetailParticipantDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '참가자 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ScheduleDetailParticipantDto.prototype, "participantId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '직원 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ScheduleDetailParticipantDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '직원 이름',
        example: '김철수',
    }),
    __metadata("design:type", String)
], ScheduleDetailParticipantDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '참가자 유형 (예약자/참석자)',
        example: 'RESERVER',
    }),
    __metadata("design:type", String)
], ScheduleDetailParticipantDto.prototype, "participantType", void 0);
class ScheduleDetailResourceDto {
    static fromResourceAndTypeInfo(resource, typeInfo) {
        const dto = new ScheduleDetailResourceDto();
        dto.resourceId = resource.resourceId;
        dto.name = resource.name;
        dto.type = resource.type;
        dto.images = resource.images;
        dto.description = resource.description;
        dto.location = resource.location;
        dto.typeInfo = typeInfo;
        return dto;
    }
}
exports.ScheduleDetailResourceDto = ScheduleDetailResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ScheduleDetailResourceDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 이름',
        example: '회의실 A',
    }),
    __metadata("design:type", String)
], ScheduleDetailResourceDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 타입',
        enum: resource_type_enum_1.ResourceType,
        example: resource_type_enum_1.ResourceType.MEETING_ROOM,
    }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], ScheduleDetailResourceDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 설명',
        required: false,
        example: '대형 회의실, 프로젝터 완비',
    }),
    __metadata("design:type", String)
], ScheduleDetailResourceDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 이미지',
        isArray: true,
        required: false,
        type: [String],
    }),
    __metadata("design:type", Array)
], ScheduleDetailResourceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 위치 정보',
        required: false,
        type: 'object',
    }),
    __metadata("design:type", Object)
], ScheduleDetailResourceDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 타입별 상세 정보',
        required: false,
        oneOf: [
            { $ref: (0, swagger_1.getSchemaPath)(vehicle_response_dto_1.VehicleInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(business_dto_index_1.MeetingRoomInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(business_dto_index_2.AccommodationInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(business_dto_index_3.EquipmentInfoResponseDto) },
        ],
    }),
    __metadata("design:type", Object)
], ScheduleDetailResourceDto.prototype, "typeInfo", void 0);
class ScheduleDetailReservationDto {
    static fromReservationAndResource(reservation, resource, typeInfo) {
        const dto = new ScheduleDetailReservationDto();
        dto.reservationId = reservation.reservationId;
        dto.title = reservation.title;
        dto.description = reservation.description;
        dto.status = reservation.status;
        dto.resource = ScheduleDetailResourceDto.fromResourceAndTypeInfo(resource, typeInfo);
        return dto;
    }
}
exports.ScheduleDetailReservationDto = ScheduleDetailReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ScheduleDetailReservationDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약 제목',
        example: '회의실 A 예약',
    }),
    __metadata("design:type", String)
], ScheduleDetailReservationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약 설명',
        required: false,
        example: '주간 회의를 위한 예약',
    }),
    __metadata("design:type", String)
], ScheduleDetailReservationDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약 상태',
        enum: reservation_type_enum_1.ReservationStatus,
        example: reservation_type_enum_1.ReservationStatus.CONFIRMED,
    }),
    __metadata("design:type", typeof (_c = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _c : Object)
], ScheduleDetailReservationDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 정보',
        type: ScheduleDetailResourceDto,
    }),
    __metadata("design:type", ScheduleDetailResourceDto)
], ScheduleDetailReservationDto.prototype, "resource", void 0);
class ScheduleDetailResponseDto {
}
exports.ScheduleDetailResponseDto = ScheduleDetailResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 ID',
        example: 'uuid-string',
    }),
    __metadata("design:type", String)
], ScheduleDetailResponseDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 제목',
        example: '주간 프로젝트 회의',
    }),
    __metadata("design:type", String)
], ScheduleDetailResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 설명',
        required: false,
        example: '주간 진행사항 점검 및 이슈 논의',
    }),
    __metadata("design:type", String)
], ScheduleDetailResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 날짜 및 시간',
        example: '2024-01-15T09:00:00Z',
    }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], ScheduleDetailResponseDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 날짜 및 시간',
        example: '2024-01-15T10:00:00Z',
    }),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], ScheduleDetailResponseDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 유형',
        enum: schedule_type_enum_1.ScheduleType,
        example: schedule_type_enum_1.ScheduleType.COMPANY,
    }),
    __metadata("design:type", typeof (_f = typeof schedule_type_enum_1.ScheduleType !== "undefined" && schedule_type_enum_1.ScheduleType) === "function" ? _f : Object)
], ScheduleDetailResponseDto.prototype, "scheduleType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 상태',
        enum: schedule_type_enum_1.ScheduleStatus,
        example: schedule_type_enum_1.ScheduleStatus.PROCESSING,
    }),
    __metadata("design:type", typeof (_g = typeof schedule_type_enum_1.ScheduleStatus !== "undefined" && schedule_type_enum_1.ScheduleStatus) === "function" ? _g : Object)
], ScheduleDetailResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 전 알림 여부',
        example: true,
    }),
    __metadata("design:type", Boolean)
], ScheduleDetailResponseDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 전 알림 시점 (분 단위)',
        type: [Number],
        required: false,
        example: [10, 30],
    }),
    __metadata("design:type", Array)
], ScheduleDetailResponseDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 소유자 여부',
        example: true,
        required: false,
    }),
    __metadata("design:type", Boolean)
], ScheduleDetailResponseDto.prototype, "isMine", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약자 정보',
        type: ScheduleDetailParticipantDto,
        required: false,
    }),
    __metadata("design:type", ScheduleDetailParticipantDto)
], ScheduleDetailResponseDto.prototype, "reserver", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '참가자 목록 (예약자 제외)',
        type: [ScheduleDetailParticipantDto],
    }),
    __metadata("design:type", Array)
], ScheduleDetailResponseDto.prototype, "participants", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '관련 프로젝트 정보 (옵션)',
        type: ScheduleDetailProjectDto,
        required: false,
    }),
    __metadata("design:type", ScheduleDetailProjectDto)
], ScheduleDetailResponseDto.prototype, "project", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '관련 자원예약 정보 (옵션)',
        type: ScheduleDetailReservationDto,
        required: false,
    }),
    __metadata("design:type", ScheduleDetailReservationDto)
], ScheduleDetailResponseDto.prototype, "reservation", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-extend-request.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-extend-request.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleExtendRequestDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ScheduleExtendRequestDto {
}
exports.ScheduleExtendRequestDto = ScheduleExtendRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '새로운 종료 날짜 및 시간',
        example: '2025-08-25T13:00:00Z',
    }),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ScheduleExtendRequestDto.prototype, "newEndDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '연장 사유',
        example: '논의할 내용이 많아 30분 연장합니다.',
        required: false,
        maxLength: 500,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.MaxLength)(500, { message: '연장 사유는 500자를 초과할 수 없습니다.' }),
    __metadata("design:type", String)
], ScheduleExtendRequestDto.prototype, "reason", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-extend-response.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-extend-response.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleExtendResponseDto = exports.ExtendedReservationDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class ExtendedReservationDto {
}
exports.ExtendedReservationDto = ExtendedReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 ID', example: 'uuid-string' }),
    __metadata("design:type", String)
], ExtendedReservationDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 종료 시간', example: '2025-08-25T13:00:00.000Z' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ExtendedReservationDto.prototype, "endDate", void 0);
class ScheduleExtendResponseDto {
}
exports.ScheduleExtendResponseDto = ScheduleExtendResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 ID', example: 'uuid-string' }),
    __metadata("design:type", String)
], ScheduleExtendResponseDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 제목', example: '주간 팀 회의' }),
    __metadata("design:type", String)
], ScheduleExtendResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '기존 종료 시간', example: '2025-08-25T11:00:00.000Z' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ScheduleExtendResponseDto.prototype, "originalEndDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '새로운 종료 시간', example: '2025-08-25T13:00:00.000Z' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ScheduleExtendResponseDto.prototype, "newEndDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '연장 사유',
        example: '논의할 내용이 많아 30분 연장합니다.',
        required: false,
    }),
    __metadata("design:type", String)
], ScheduleExtendResponseDto.prototype, "reason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '연결된 예약 정보',
        type: ExtendedReservationDto,
        required: false,
    }),
    __metadata("design:type", ExtendedReservationDto)
], ScheduleExtendResponseDto.prototype, "reservation", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-update-request.dto.ts":
/*!******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-update-request.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleUpdateRequestDto = exports.ScheduleUpdateResourceDto = exports.ScheduleUpdateInfoDto = exports.ScheduleUpdateDateDto = void 0;
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ScheduleUpdateDateDto {
}
exports.ScheduleUpdateDateDto = ScheduleUpdateDateDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 날짜 및 시간',
        example: '2025-08-25T10:00:00Z',
        required: true,
    }),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ScheduleUpdateDateDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 날짜 및 시간',
        example: '2025-08-25T11:00:00Z',
        required: true,
    }),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ScheduleUpdateDateDto.prototype, "endDate", void 0);
class ScheduleUpdateInfoDto {
}
exports.ScheduleUpdateInfoDto = ScheduleUpdateInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 제목',
        example: '수정된 주간 팀 회의',
        required: false,
        maxLength: 100,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.MaxLength)(100, { message: '제목은 100자를 초과할 수 없습니다.' }),
    __metadata("design:type", String)
], ScheduleUpdateInfoDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 설명',
        example: '수정된 회의 설명입니다.',
        required: false,
        maxLength: 1000,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.MaxLength)(1000, { message: '설명은 1000자를 초과할 수 없습니다.' }),
    __metadata("design:type", String)
], ScheduleUpdateInfoDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 전 알림 여부',
        type: Boolean,
        example: true,
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], ScheduleUpdateInfoDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 전 알림 시간 (분)',
        type: [Number],
        example: [10, 30],
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsInt)({ each: true }),
    (0, class_validator_1.Min)(1, { each: true }),
    __metadata("design:type", Array)
], ScheduleUpdateInfoDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '위치',
        type: String,
        example: '123e4567-e89b-12d3-a456-426614174000',
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ScheduleUpdateInfoDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 타입',
        example: schedule_type_enum_1.ScheduleType.PERSONAL,
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(schedule_type_enum_1.ScheduleType),
    __metadata("design:type", typeof (_a = typeof schedule_type_enum_1.ScheduleType !== "undefined" && schedule_type_enum_1.ScheduleType) === "function" ? _a : Object)
], ScheduleUpdateInfoDto.prototype, "scheduleType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 ID',
        example: '123e4567-e89b-12d3-a456-426614174000',
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ScheduleUpdateInfoDto.prototype, "projectId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '참여자',
        example: ['123e4567-e89b-12d3-a456-426614174000'],
        required: false,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsString)({ each: true }),
    __metadata("design:type", Array)
], ScheduleUpdateInfoDto.prototype, "participants", void 0);
class ScheduleUpdateResourceDto {
}
exports.ScheduleUpdateResourceDto = ScheduleUpdateResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 ID',
        example: '123e4567-e89b-12d3-a456-426614174000',
        required: true,
    }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ScheduleUpdateResourceDto.prototype, "resourceId", void 0);
class ScheduleUpdateRequestDto {
}
exports.ScheduleUpdateRequestDto = ScheduleUpdateRequestDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '날짜 정보',
        type: ScheduleUpdateDateDto,
        example: {
            startDate: '2025-08-25T10:00:00Z',
            endDate: '2025-08-25T11:00:00Z',
        },
    }),
    __metadata("design:type", ScheduleUpdateDateDto)
], ScheduleUpdateRequestDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '정보 정보',
        type: ScheduleUpdateInfoDto,
        example: {
            title: '수정된 주간 팀 회의',
            description: '수정된 회의 설명입니다.',
            notifyBeforeStart: true,
            notifyMinutesBeforeStart: [10, 30],
            location: '11층 or 수지구 동천동',
            scheduleType: schedule_type_enum_1.ScheduleType.PERSONAL,
            projectId: '123e4567-e89b-12d3-a456-426614174000',
            participants: ['123e4567-e89b-12d3-a456-426614174000'],
        },
    }),
    __metadata("design:type", ScheduleUpdateInfoDto)
], ScheduleUpdateRequestDto.prototype, "info", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '자원 정보',
        type: ScheduleUpdateResourceDto,
        example: {
            resourceId: '123e4567-e89b-12d3-a456-426614174000',
        },
    }),
    __metadata("design:type", ScheduleUpdateResourceDto)
], ScheduleUpdateRequestDto.prototype, "resource", void 0);


/***/ }),

/***/ "./src/business/schedule-management/dtos/schedule-update-response.dto.ts":
/*!*******************************************************************************!*\
  !*** ./src/business/schedule-management/dtos/schedule-update-response.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleUpdateResponseDto = exports.UpdatedReservationDto = exports.ScheduleChangeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class ScheduleChangeDto {
}
exports.ScheduleChangeDto = ScheduleChangeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '변경 전 값' }),
    __metadata("design:type", Object)
], ScheduleChangeDto.prototype, "from", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '변경 후 값' }),
    __metadata("design:type", Object)
], ScheduleChangeDto.prototype, "to", void 0);
class UpdatedReservationDto {
}
exports.UpdatedReservationDto = UpdatedReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 ID', example: 'uuid-string' }),
    __metadata("design:type", String)
], UpdatedReservationDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 제목', example: '수정된 주간 팀 회의' }),
    __metadata("design:type", String)
], UpdatedReservationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 시작 시간', example: '2025-08-25T10:00:00.000Z' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], UpdatedReservationDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 종료 시간', example: '2025-08-25T11:00:00.000Z' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], UpdatedReservationDto.prototype, "endDate", void 0);
class ScheduleUpdateResponseDto {
}
exports.ScheduleUpdateResponseDto = ScheduleUpdateResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 ID', example: 'uuid-string' }),
    __metadata("design:type", String)
], ScheduleUpdateResponseDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 제목', example: '수정된 주간 팀 회의' }),
    __metadata("design:type", String)
], ScheduleUpdateResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 설명',
        example: '수정된 회의 설명입니다.',
        required: false,
    }),
    __metadata("design:type", String)
], ScheduleUpdateResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '시작 날짜 및 시간', example: '2025-08-25T10:00:00.000Z' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ScheduleUpdateResponseDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '종료 날짜 및 시간', example: '2025-08-25T11:00:00.000Z' }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], ScheduleUpdateResponseDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '변경 내역',
        type: 'object',
        example: {
            title: { from: '기존 제목', to: '새로운 제목' },
            startDate: { from: '2025-08-25T09:00:00.000Z', to: '2025-08-25T10:00:00.000Z' },
        },
    }),
    __metadata("design:type", typeof (_e = typeof Record !== "undefined" && Record) === "function" ? _e : Object)
], ScheduleUpdateResponseDto.prototype, "changes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '수정 사유',
        example: '시간 변경 요청으로 인한 수정입니다.',
        required: false,
    }),
    __metadata("design:type", String)
], ScheduleUpdateResponseDto.prototype, "reason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '연결된 예약 정보',
        type: UpdatedReservationDto,
        required: false,
    }),
    __metadata("design:type", UpdatedReservationDto)
], ScheduleUpdateResponseDto.prototype, "reservation", void 0);


/***/ }),

/***/ "./src/business/schedule-management/schedule-management.module.ts":
/*!************************************************************************!*\
  !*** ./src/business/schedule-management/schedule-management.module.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleManagementModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_controllers_1 = __webpack_require__(/*! ./controllers/schedule.controllers */ "./src/business/schedule-management/controllers/schedule.controllers.ts");
const schedule_management_service_1 = __webpack_require__(/*! ./schedule-management.service */ "./src/business/schedule-management/schedule-management.service.ts");
const schedule_context_module_1 = __webpack_require__(/*! ../../context/schedule/schedule.context.module */ "./src/context/schedule/schedule.context.module.ts");
const resource_context_module_1 = __webpack_require__(/*! ../../context/resource/resource.context.module */ "./src/context/resource/resource.context.module.ts");
const reservation_context_module_1 = __webpack_require__(/*! ../../context/reservation/reservation.context.module */ "./src/context/reservation/reservation.context.module.ts");
const notification_context_module_1 = __webpack_require__(/*! ../../context/notification/notification.context.module */ "./src/context/notification/notification.context.module.ts");
const file_context_module_1 = __webpack_require__(/*! ../../context/file/file.context.module */ "./src/context/file/file.context.module.ts");
const project_context_module_1 = __webpack_require__(/*! ../../context/project/project.context.module */ "./src/context/project/project.context.module.ts");
const employee_context_module_1 = __webpack_require__(/*! @src/context/employee/employee.context.module */ "./src/context/employee/employee.context.module.ts");
let ScheduleManagementModule = class ScheduleManagementModule {
};
exports.ScheduleManagementModule = ScheduleManagementModule;
exports.ScheduleManagementModule = ScheduleManagementModule = __decorate([
    (0, common_1.Module)({
        imports: [
            schedule_context_module_1.ScheduleContextModule,
            resource_context_module_1.ResourceContextModule,
            reservation_context_module_1.ReservationContextModule,
            notification_context_module_1.NotificationContextModule,
            file_context_module_1.FileContextModule,
            project_context_module_1.ProjectContextModule,
            employee_context_module_1.EmployeeContextModule,
        ],
        controllers: [schedule_controllers_1.ScheduleController],
        providers: [schedule_management_service_1.ScheduleManagementService],
        exports: [],
    })
], ScheduleManagementModule);


/***/ }),

/***/ "./src/business/schedule-management/schedule-management.service.ts":
/*!*************************************************************************!*\
  !*** ./src/business/schedule-management/schedule-management.service.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var ScheduleManagementService_1;
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleManagementService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_query_context_service_1 = __webpack_require__(/*! ../../context/schedule/services/schedule-query.context.service */ "./src/context/schedule/services/schedule-query.context.service.ts");
const reservation_context_service_1 = __webpack_require__(/*! ../../context/reservation/services/reservation.context.service */ "./src/context/reservation/services/reservation.context.service.ts");
const resource_context_service_1 = __webpack_require__(/*! ../../context/resource/services/resource.context.service */ "./src/context/resource/services/resource.context.service.ts");
const project_context_service_1 = __webpack_require__(/*! ../../context/project/project.context.service */ "./src/context/project/project.context.service.ts");
const vehicle_info_context_service_1 = __webpack_require__(/*! ../../context/resource/services/vehicle-info.context.service */ "./src/context/resource/services/vehicle-info.context.service.ts");
const file_context_service_1 = __webpack_require__(/*! ../../context/file/services/file.context.service */ "./src/context/file/services/file.context.service.ts");
const schedule_authorization_service_1 = __webpack_require__(/*! ../../context/schedule/services/schedule-authorization.service */ "./src/context/schedule/services/schedule-authorization.service.ts");
const schedule_policy_service_1 = __webpack_require__(/*! ../../context/schedule/services/schedule-policy.service */ "./src/context/schedule/services/schedule-policy.service.ts");
const schedule_state_transition_service_1 = __webpack_require__(/*! ../../context/schedule/services/schedule-state-transition.service */ "./src/context/schedule/services/schedule-state-transition.service.ts");
const schedule_mutation_context_service_1 = __webpack_require__(/*! ../../context/schedule/services/schedule-mutation.context.service */ "./src/context/schedule/services/schedule-mutation.context.service.ts");
const schedule_post_processing_service_1 = __webpack_require__(/*! ../../context/schedule/services/schedule-post-processing.service */ "./src/context/schedule/services/schedule-post-processing.service.ts");
const schedule_authorization_service_2 = __webpack_require__(/*! ../../context/schedule/services/schedule-authorization.service */ "./src/context/schedule/services/schedule-authorization.service.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const schedule_detail_response_dto_1 = __webpack_require__(/*! ./dtos/schedule-detail-response.dto */ "./src/business/schedule-management/dtos/schedule-detail-response.dto.ts");
const resource_schedule_response_dto_1 = __webpack_require__(/*! ./dtos/resource-schedule-response.dto */ "./src/business/schedule-management/dtos/resource-schedule-response.dto.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_context_service_1 = __webpack_require__(/*! @src/context/employee/employee.context.service */ "./src/context/employee/employee.context.service.ts");
const schedule_notification_context_service_1 = __webpack_require__(/*! @src/context/notification/services/schedule-notification.context.service */ "./src/context/notification/services/schedule-notification.context.service.ts");
let ScheduleManagementService = ScheduleManagementService_1 = class ScheduleManagementService {
    constructor(dataSource, reservationContextService, resourceContextService, projectContextService, vehicleInfoContextService, fileContextService, employeeContextService, scheduleNotificationContextService, scheduleAuthorizationService, schedulePolicyService, scheduleQueryContextService, scheduleMutationService, scheduleStateTransitionService, schedulePostProcessingService) {
        this.dataSource = dataSource;
        this.reservationContextService = reservationContextService;
        this.resourceContextService = resourceContextService;
        this.projectContextService = projectContextService;
        this.vehicleInfoContextService = vehicleInfoContextService;
        this.fileContextService = fileContextService;
        this.employeeContextService = employeeContextService;
        this.scheduleNotificationContextService = scheduleNotificationContextService;
        this.scheduleAuthorizationService = scheduleAuthorizationService;
        this.schedulePolicyService = schedulePolicyService;
        this.scheduleQueryContextService = scheduleQueryContextService;
        this.scheduleMutationService = scheduleMutationService;
        this.scheduleStateTransitionService = scheduleStateTransitionService;
        this.schedulePostProcessingService = schedulePostProcessingService;
        this.logger = new common_1.Logger(ScheduleManagementService_1.name);
    }
    async postProcessingSchedules() {
        return this.schedulePostProcessingService.일정관련_배치_작업을_처리한다();
    }
    async findCalendar(user, query) {
        this.logger.log(`캘린더 조회 요청 - 사용자: ${user.employeeId}, 날짜: ${query.date}`);
        const scheduleIds = await this.scheduleQueryContextService.캘린더용_일정을_조회한다(query.date, query.category, query.mySchedule ? user.employeeId : undefined);
        if (scheduleIds.length === 0) {
            return { schedules: [] };
        }
        const scheduleDataList = await this.scheduleQueryContextService.복수_일정과_관계정보들을_조회한다(scheduleIds, {
            withReservation: true,
            withResource: true,
            withParticipants: true,
        });
        const scheduleCalendarItems = scheduleDataList.map(({ schedule, reservation, resource, participants }) => {
            const reserver = participants?.find((p) => p.type === reservation_type_enum_1.ParticipantsType.RESERVER);
            return {
                scheduleId: schedule.scheduleId,
                scheduleTitle: schedule.title,
                startDate: schedule.startDate,
                endDate: schedule.endDate,
                reserverName: reserver?.employee?.name || '',
                project: undefined,
                reservation: reservation && resource
                    ? {
                        reservationId: reservation.reservationId,
                        resourceName: resource.name,
                        resourceType: resource.type,
                    }
                    : undefined,
                hasUnreadNotification: false,
            };
        });
        return {
            schedules: scheduleCalendarItems,
        };
    }
    async findMySchedules(user, query) {
        this.logger.log(`내 일정 조회 요청 - 사용자: ${user.employeeId}`);
        const page = query.page || 1;
        const limit = query.limit || 20;
        const { scheduleIds, statistics, totalCount, filteredCount, totalPages, hasNext, hasPrevious } = await this.scheduleQueryContextService.내_일정을_조회한다(user.employeeId, query);
        const scheduleDataList = await this.scheduleQueryContextService.복수_일정과_관계정보들을_조회한다(scheduleIds, {
            withProject: true,
            withReservation: true,
            withResource: true,
        });
        const scheduleCalendarItems = scheduleDataList.map(({ schedule, project, reservation, resource }) => {
            return {
                scheduleId: schedule.scheduleId,
                title: schedule.title,
                description: schedule.description,
                startDate: schedule.startDate,
                endDate: schedule.endDate,
                scheduleType: this.scheduleQueryContextService.일정타입_라벨을_가져온다(schedule.scheduleType),
                project: project
                    ? {
                        projectId: project.projectId,
                        projectName: project.projectName,
                    }
                    : undefined,
                resource: reservation
                    ? {
                        resourceId: reservation.reservationId,
                        resourceName: resource.name,
                        resourceType: resource.type,
                    }
                    : undefined,
            };
        });
        return {
            statistics,
            totalCount,
            filteredCount,
            currentPage: page,
            pageSize: limit,
            totalPages,
            hasNext,
            hasPrevious,
            schedules: scheduleCalendarItems,
        };
    }
    async findMyScheduleHistory(user, query) {
        this.logger.log(`내 일정 내역 조회 요청 - 사용자: ${user.employeeId}`);
        const page = query.page || 1;
        const limit = query.limit || 20;
        const { scheduleIds, filteredCount, totalPages, hasNext, hasPrevious } = await this.scheduleQueryContextService.내_일정_내역을_조회한다(user.employeeId, query);
        const scheduleDataList = await this.scheduleQueryContextService.복수_일정과_관계정보들을_조회한다(scheduleIds, {
            withProject: true,
            withReservation: true,
            withResource: true,
            withParticipants: true,
        });
        const scheduleCalendarItems = scheduleDataList.map(({ schedule, project, reservation, resource, participants }) => {
            return {
                scheduleId: schedule.scheduleId,
                title: schedule.title,
                description: schedule.description,
                startDate: schedule.startDate,
                endDate: schedule.endDate,
                scheduleType: this.scheduleQueryContextService.일정타입_라벨을_가져온다(schedule.scheduleType),
                notifyMinutesBeforeStart: schedule.notifyMinutesBeforeStart,
                participants: participants?.map((participant) => ({
                    employeeId: participant.employeeId,
                })),
                project: project
                    ? {
                        projectId: project.projectId,
                        projectName: project.projectName,
                    }
                    : undefined,
                resource: reservation
                    ? {
                        resourceId: reservation.reservationId,
                        resourceName: resource.name,
                        resourceType: resource.type,
                    }
                    : undefined,
            };
        });
        return {
            currentPage: page,
            pageSize: limit,
            totalPages,
            hasNext,
            hasPrevious,
            schedules: scheduleCalendarItems,
        };
    }
    async findResourceSchedules(user, query) {
        this.logger.log(`자원별 일정 조회 요청 - 사용자: ${user.employeeId}, 자원타입: ${query.resourceType}`);
        const { scheduleDataList, resourceGroups, resourceMap } = await this.scheduleQueryContextService.자원별_일정_조회_데이터를_조회한다(query.resourceType, query.date, query.month);
        const resourceGroupDtos = resource_schedule_response_dto_1.ResourceGroupDto.fromResourceGroupsAndData(resourceGroups, resourceMap, scheduleDataList, user.employeeId);
        return {
            type: query.resourceType,
            resourceGroups: resourceGroupDtos,
        };
    }
    async findScheduleDetail(user, query) {
        this.logger.log(`일정 상세 조회 요청 - 사용자: ${user.employeeId}, 일정ID: ${query.scheduleId}`);
        const { scheduleId, includeProject, includeReservation } = query;
        const scheduleData = await this.scheduleQueryContextService.일정과_관계정보들을_조회한다(scheduleId, {
            withProject: includeProject,
            withReservation: includeReservation,
            withResource: includeReservation,
            withParticipants: true,
        });
        if (scheduleData === null) {
            throw new common_1.NotFoundException(`일정을 찾을 수 없습니다. ID: ${scheduleId}`);
        }
        const { schedule, project, reservation, resource, participants } = scheduleData;
        const reserver = participants?.find((p) => p.type === reservation_type_enum_1.ParticipantsType.RESERVER);
        const regularParticipants = participants?.filter((p) => p.type !== reservation_type_enum_1.ParticipantsType.RESERVER) || [];
        const reserverDto = reserver ? schedule_detail_response_dto_1.ScheduleDetailParticipantDto.fromParticipantWithEmployee(reserver) : undefined;
        const participantsDto = schedule_detail_response_dto_1.ScheduleDetailParticipantDto.fromParticipantsArray(regularParticipants);
        const projectDto = project ? schedule_detail_response_dto_1.ScheduleDetailProjectDto.fromProject(project) : undefined;
        let reservationDto = undefined;
        if (reservation && resource) {
            const resourceImages = await this.fileContextService.자원_파일을_조회한다(resource.resourceId);
            resource.images = resourceImages.images.map((image) => image.filePath);
            const typeInfo = await this.resourceContextService.자원의_타입별_상세정보를_조회한다(resource);
            if (resource.type === resource_type_enum_1.ResourceType.VEHICLE) {
                const vehicleInfo = await this.vehicleInfoContextService.차량정보만_조회한다(resource.resourceId);
                const { parkingLocationImages, odometerImages, indoorImages } = await this.fileContextService.차량정보_파일을_조회한다(vehicleInfo.vehicleInfoId);
                typeInfo.parkingLocationImages = parkingLocationImages;
                typeInfo.odometerImages = odometerImages;
                typeInfo.indoorImages = indoorImages;
            }
            reservationDto = schedule_detail_response_dto_1.ScheduleDetailReservationDto.fromReservationAndResource(reservation, resource, typeInfo);
        }
        return {
            scheduleId: schedule.scheduleId,
            title: schedule.title,
            description: schedule.description,
            startDate: schedule.startDate,
            endDate: schedule.endDate,
            scheduleType: schedule.scheduleType,
            status: schedule.status,
            notifyBeforeStart: schedule.notifyBeforeStart,
            notifyMinutesBeforeStart: schedule.notifyMinutesBeforeStart,
            isMine: reserver?.employeeId === user.employeeId,
            reserver: reserverDto,
            participants: participantsDto,
            project: projectDto,
            reservation: reservationDto,
        };
    }
    async createSchedule(user, createScheduleDto) {
        this.logger.log(`일정 생성 요청 - 사용자: ${user.employeeId}, 제목: ${createScheduleDto.title}`);
        const { datesSelection, title, description, location, notifyBeforeStart, notificationMinutes, scheduleType, participants, projectSelection, resourceSelection, } = createScheduleDto;
        const authResult = await this.scheduleAuthorizationService.일정_생성_권한을_확인한다(user);
        this.scheduleAuthorizationService.권한_체크_실패시_예외를_던진다(authResult);
        let projectId = null;
        let resourceInfo = null;
        if (projectSelection) {
            projectId = projectSelection.projectId;
            const projectExists = await this.projectContextService.프로젝트_존재여부를_확인한다(projectId);
            if (!projectExists) {
                throw new common_1.BadRequestException('존재하지 않는 프로젝트입니다.');
            }
        }
        if (resourceSelection) {
            resourceInfo = await this.resourceContextService.자원정보를_조회한다(resourceSelection.resourceId);
            if (!resourceInfo) {
                throw new common_1.BadRequestException('존재하지 않는 자원입니다.');
            }
        }
        const createRequest = {
            title,
            description,
            location,
            scheduleType,
            participants,
            datesSelection,
            resourceSelection,
            projectSelection,
        };
        const policyResult = await this.schedulePolicyService.다중_일정_생성이_가능한지_확인한다(createRequest);
        this.schedulePolicyService.정책_체크_실패시_예외를_던진다(policyResult);
        const createdSchedules = [];
        const failedSchedules = [];
        for (const dateRange of datesSelection) {
            const data = {
                title,
                description,
                location,
                scheduleType,
                notifyBeforeStart,
                notifyMinutesBeforeStart: notificationMinutes || [],
                participants,
                dateRange,
                resourceSelection,
                projectSelection,
            };
            const result = {
                success: true,
                schedule: null,
                reason: null,
            };
            const queryRunner = this.dataSource.createQueryRunner();
            await queryRunner.connect();
            await queryRunner.startTransaction();
            try {
                let reservationId = null;
                if (data.resourceSelection) {
                    const isAvailable = await this.reservationContextService.자원예약이_가능한지_확인한다(data.resourceSelection.resourceId, new Date(data.dateRange.startDate), new Date(data.dateRange.endDate));
                    if (!isAvailable) {
                        await queryRunner.rollbackTransaction();
                        result.success = false;
                        result.reason = '선택한 시간대에 자원이 이미 예약되어 있습니다.';
                    }
                    const reservationData = {
                        title: data.title,
                        description: data.description || '',
                        resourceId: data.resourceSelection.resourceId,
                        resourceType: data.resourceSelection.resourceType,
                        status: data.resourceSelection.resourceType === resource_type_enum_1.ResourceType.ACCOMMODATION
                            ? reservation_type_enum_1.ReservationStatus.PENDING
                            : reservation_type_enum_1.ReservationStatus.CONFIRMED,
                        startDate: new Date(data.dateRange.startDate),
                        endDate: new Date(data.dateRange.endDate),
                    };
                    const createdReservation = await this.reservationContextService.자원예약을_생성한다(reservationData, queryRunner);
                    reservationId = createdReservation.reservationId;
                }
                const scheduleData = {
                    title: data.title,
                    description: data.location
                        ? `${data.description || ''}\n장소: ${data.location}`.trim()
                        : data.description,
                    startDate: new Date(data.dateRange.startDate),
                    endDate: new Date(data.dateRange.endDate),
                    scheduleType: data.scheduleType,
                    notifyBeforeStart: data.notifyBeforeStart || false,
                    notifyMinutesBeforeStart: data.notifyMinutesBeforeStart || [],
                };
                const createdSchedule = await this.scheduleMutationService.일정을_생성한다(scheduleData, queryRunner);
                await this.scheduleMutationService.일정_참가자를_추가한다(createdSchedule.scheduleId, user.employeeId, 'RESERVER', queryRunner);
                for (const participant of data.participants) {
                    if (participant.employeeId !== user.employeeId) {
                        await this.scheduleMutationService.일정_참가자를_추가한다(createdSchedule.scheduleId, participant.employeeId, 'PARTICIPANT', queryRunner);
                    }
                }
                const relationData = {
                    scheduleId: createdSchedule.scheduleId,
                    projectId: data.projectSelection?.projectId || null,
                    reservationId: reservationId,
                };
                await this.scheduleMutationService.일정관계정보를_생성한다(relationData, queryRunner);
                await queryRunner.commitTransaction();
                result.success = true;
                result.schedule = createdSchedule;
            }
            catch (error) {
                await queryRunner.rollbackTransaction();
                result.success = false;
                result.reason = `일정 생성 실패: ${error.message}`;
            }
            finally {
                await queryRunner.release();
            }
            if (result.success) {
                createdSchedules.push(result.schedule);
            }
            else {
                failedSchedules.push({
                    startDate: dateRange.startDate,
                    endDate: dateRange.endDate,
                    reason: result.reason,
                });
            }
        }
        if (createdSchedules.length > 0) {
            const { schedule, reservation, resource } = await this.scheduleQueryContextService.일정과_관계정보들을_조회한다(createdSchedules[0].scheduleId, {
                withReservation: true,
                withResource: true,
            });
            const systemAdmins = await this.employeeContextService.시스템관리자_목록을_조회한다();
            await this.scheduleNotificationContextService.일정_생성_알림을_전송한다({ schedule, reservation, resource }, [user.employeeId, ...participants.map((participant) => participant.employeeId)], systemAdmins.map((admin) => admin.employeeId));
        }
        const createdSchedulesDtos = createdSchedules.map((schedule) => ({
            scheduleId: schedule.scheduleId,
            title: schedule.title,
            startDate: schedule.startDate.toISOString(),
            endDate: schedule.endDate.toISOString(),
            scheduleType: schedule.scheduleType,
        }));
        return {
            createdSchedules: createdSchedulesDtos,
            failedSchedules,
        };
    }
    async cancelSchedule(user, scheduleId, cancelDto) {
        this.logger.log(`일정 취소 요청 - 사용자: ${user.employeeId}, 일정: ${scheduleId}`);
        const authResult = await this.scheduleAuthorizationService.일정_권한을_확인한다(user, scheduleId, schedule_authorization_service_2.ScheduleAction.CANCEL);
        this.scheduleAuthorizationService.권한_체크_실패시_예외를_던진다(authResult);
        const { schedule, reservation, resource, participants } = await this.scheduleQueryContextService.일정과_관계정보들을_조회한다(scheduleId, {
            withReservation: true,
            withResource: true,
            withParticipants: true,
        });
        const policyResult = await this.schedulePolicyService.일정_취소가_가능한지_확인한다(schedule, reservation);
        this.schedulePolicyService.정책_체크_실패시_예외를_던진다(policyResult);
        const cancelResult = await this.scheduleStateTransitionService.일정을_취소한다(schedule, reservation);
        await this.scheduleNotificationContextService.일정_취소_알림을_전송한다({ schedule, reservation, resource }, [
            user.employeeId,
            ...participants.map((participant) => participant.employeeId),
        ]);
        return cancelResult;
    }
    async completeSchedule(user, scheduleId, completeDto) {
        this.logger.log(`일정 완료 요청 - 사용자: ${user.employeeId}, 일정: ${scheduleId}`);
        const authResult = await this.scheduleAuthorizationService.일정_권한을_확인한다(user, scheduleId, schedule_authorization_service_2.ScheduleAction.COMPLETE);
        this.scheduleAuthorizationService.권한_체크_실패시_예외를_던진다(authResult);
        const { schedule, reservation } = await this.scheduleQueryContextService.일정과_관계정보들을_조회한다(scheduleId, {
            withReservation: true,
        });
        const policyResult = await this.schedulePolicyService.일정_완료가_가능한지_확인한다(schedule, reservation);
        this.schedulePolicyService.정책_체크_실패시_예외를_던진다(policyResult);
        const completeResult = await this.scheduleStateTransitionService.일정을_완료한다(schedule, reservation);
        return completeResult;
    }
    async checkScheduleExtendable(user, scheduleId) {
        this.logger.log(`일정 연장 가능 여부 확인 요청 - 사용자: ${user.employeeId}, 일정: ${scheduleId}`);
        try {
            const authResult = await this.scheduleAuthorizationService.일정_권한을_확인한다(user, scheduleId, schedule_authorization_service_2.ScheduleAction.EXTEND);
            this.scheduleAuthorizationService.권한_체크_실패시_예외를_던진다(authResult);
            const { schedule, reservation } = await this.scheduleQueryContextService.일정과_관계정보들을_조회한다(scheduleId, {
                withReservation: true,
            });
            const policyResult = await this.schedulePolicyService.일정_30분_연장이_가능한지_확인한다(schedule, reservation);
            console.log(policyResult);
            return policyResult.isAllowed;
        }
        catch (error) {
            this.logger.warn(`일정 연장 가능 여부 확인 실패: ${error.message}`);
            return false;
        }
    }
    async extendSchedule30Min(user, scheduleId) {
        this.logger.log(`일정 30분 연장 요청 - 사용자: ${user.employeeId}, 일정: ${scheduleId}`);
        const authResult = await this.scheduleAuthorizationService.일정_권한을_확인한다(user, scheduleId, schedule_authorization_service_2.ScheduleAction.EXTEND);
        this.scheduleAuthorizationService.권한_체크_실패시_예외를_던진다(authResult);
        const { schedule, reservation } = await this.scheduleQueryContextService.일정과_관계정보들을_조회한다(scheduleId, {
            withReservation: true,
        });
        const policyResult = await this.schedulePolicyService.일정_30분_연장이_가능한지_확인한다(schedule, reservation);
        this.schedulePolicyService.정책_체크_실패시_예외를_던진다(policyResult);
        const newEndDate = new Date(schedule.endDate);
        newEndDate.setMinutes(newEndDate.getMinutes() + 30);
        const extendResult = await this.scheduleStateTransitionService.일정을_연장한다(schedule, reservation, newEndDate, '30분 자동 연장');
        return {
            scheduleId: extendResult.schedule.scheduleId,
            title: extendResult.schedule.title,
            originalEndDate: extendResult.originalEndDate,
            newEndDate: extendResult.newEndDate,
            reason: '30분 자동 연장',
            reservation: extendResult.reservation
                ? {
                    reservationId: extendResult.reservation.reservationId,
                    endDate: extendResult.reservation.endDate,
                }
                : undefined,
        };
    }
    async updateSchedule(user, scheduleId, updateDto) {
        this.logger.log(`일정 수정 요청 - 사용자: ${user.employeeId}, 일정: ${scheduleId}`);
        const updateScenarios = this.schedulePolicyService.수정_시나리오를_분석한다(updateDto);
        this.schedulePolicyService.수정요청을_기본검증한다(updateDto, updateScenarios);
        const authResult = await this.scheduleAuthorizationService.일정_권한을_확인한다(user, scheduleId, schedule_authorization_service_2.ScheduleAction.UPDATE);
        this.scheduleAuthorizationService.권한_체크_실패시_예외를_던진다(authResult);
        const { schedule, reservation } = await this.scheduleQueryContextService.일정과_관계정보들을_조회한다(scheduleId, {
            withReservation: true,
        });
        if (updateScenarios.isDateUpdate) {
            const datePolicy = await this.schedulePolicyService.일정_날짜수정이_가능한지_확인한다(schedule, reservation, {
                newStartDate: updateDto.date?.startDate ? new Date(updateDto.date.startDate) : undefined,
                newEndDate: updateDto.date?.endDate ? new Date(updateDto.date.endDate) : undefined,
            });
            this.schedulePolicyService.정책_체크_실패시_예외를_던진다(datePolicy);
        }
        if (updateScenarios.isInfoUpdate) {
            const infoPolicy = await this.schedulePolicyService.일정_정보수정이_가능한지_확인한다(schedule, updateDto.info);
            this.schedulePolicyService.정책_체크_실패시_예외를_던진다(infoPolicy);
        }
        if (updateScenarios.isResourceUpdate) {
            const resourcePolicy = await this.schedulePolicyService.일정_자원수정이_가능한지_확인한다(schedule, reservation, updateDto.resource.resourceId);
            this.schedulePolicyService.정책_체크_실패시_예외를_던진다(resourcePolicy);
        }
        const updateResult = await this.scheduleStateTransitionService.일정을_시나리오별로_수정한다(schedule, reservation, {
            dateChanges: updateScenarios.isDateUpdate
                ? {
                    startDate: updateDto.date?.startDate ? new Date(updateDto.date.startDate) : undefined,
                    endDate: updateDto.date?.endDate ? new Date(updateDto.date.endDate) : undefined,
                }
                : undefined,
            infoChanges: updateScenarios.isInfoUpdate
                ? {
                    title: updateDto.info?.title,
                    description: updateDto.info?.description,
                    notifyBeforeStart: updateDto.info?.notifyBeforeStart,
                    notifyMinutesBeforeStart: updateDto.info?.notifyMinutesBeforeStart,
                    location: updateDto.info?.location,
                    scheduleType: updateDto.info?.scheduleType,
                    projectId: updateDto.info?.projectId,
                    participants: updateDto.info?.participants,
                }
                : undefined,
            resourceChanges: updateScenarios.isResourceUpdate
                ? {
                    newResourceId: updateDto.resource.resourceId,
                }
                : undefined,
        });
        const { resource, participants } = await this.scheduleQueryContextService.일정과_관계정보들을_조회한다(scheduleId, {
            withReservation: true,
            withResource: true,
            withParticipants: true,
        });
        const employeeIds = updateScenarios.isInfoUpdate
            ? Array.from(new Set([
                ...updateResult.participantChanges.previousParticipants.map((participant) => participant.employeeId),
                ...updateResult.participantChanges.newParticipants.map((participant) => participant.employeeId),
            ]))
            : participants.map((participant) => participant.employeeId);
        await this.scheduleNotificationContextService.일정_수정_알림을_전송한다(updateScenarios, {
            schedule,
            reservation,
            resource,
        }, employeeIds);
        return true;
    }
};
exports.ScheduleManagementService = ScheduleManagementService;
exports.ScheduleManagementService = ScheduleManagementService = ScheduleManagementService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _a : Object, typeof (_b = typeof reservation_context_service_1.ReservationContextService !== "undefined" && reservation_context_service_1.ReservationContextService) === "function" ? _b : Object, typeof (_c = typeof resource_context_service_1.ResourceContextService !== "undefined" && resource_context_service_1.ResourceContextService) === "function" ? _c : Object, typeof (_d = typeof project_context_service_1.ProjectContextService !== "undefined" && project_context_service_1.ProjectContextService) === "function" ? _d : Object, typeof (_e = typeof vehicle_info_context_service_1.VehicleInfoContextService !== "undefined" && vehicle_info_context_service_1.VehicleInfoContextService) === "function" ? _e : Object, typeof (_f = typeof file_context_service_1.FileContextService !== "undefined" && file_context_service_1.FileContextService) === "function" ? _f : Object, typeof (_g = typeof employee_context_service_1.EmployeeContextService !== "undefined" && employee_context_service_1.EmployeeContextService) === "function" ? _g : Object, typeof (_h = typeof schedule_notification_context_service_1.ScheduleNotificationContextService !== "undefined" && schedule_notification_context_service_1.ScheduleNotificationContextService) === "function" ? _h : Object, typeof (_j = typeof schedule_authorization_service_1.ScheduleAuthorizationService !== "undefined" && schedule_authorization_service_1.ScheduleAuthorizationService) === "function" ? _j : Object, typeof (_k = typeof schedule_policy_service_1.SchedulePolicyService !== "undefined" && schedule_policy_service_1.SchedulePolicyService) === "function" ? _k : Object, typeof (_l = typeof schedule_query_context_service_1.ScheduleQueryContextService !== "undefined" && schedule_query_context_service_1.ScheduleQueryContextService) === "function" ? _l : Object, typeof (_m = typeof schedule_mutation_context_service_1.ScheduleMutationContextService !== "undefined" && schedule_mutation_context_service_1.ScheduleMutationContextService) === "function" ? _m : Object, typeof (_o = typeof schedule_state_transition_service_1.ScheduleStateTransitionService !== "undefined" && schedule_state_transition_service_1.ScheduleStateTransitionService) === "function" ? _o : Object, typeof (_p = typeof schedule_post_processing_service_1.SchedulePostProcessingService !== "undefined" && schedule_post_processing_service_1.SchedulePostProcessingService) === "function" ? _p : Object])
], ScheduleManagementService);


/***/ }),

/***/ "./src/business/statistics/dtos/base.dto.ts":
/*!**************************************************!*\
  !*** ./src/business/statistics/dtos/base.dto.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StatisticsResponseDto = exports.YearMonthFilterDto = exports.DateRangeFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class DateRangeFilterDto {
}
exports.DateRangeFilterDto = DateRangeFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '시작 날짜' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], DateRangeFilterDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '종료 날짜' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], DateRangeFilterDto.prototype, "endDate", void 0);
class YearMonthFilterDto {
}
exports.YearMonthFilterDto = YearMonthFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '연도' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], YearMonthFilterDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '월' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], YearMonthFilterDto.prototype, "month", void 0);
class StatisticsResponseDto {
}
exports.StatisticsResponseDto = StatisticsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 예약 통계', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "employeeReservationStats", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 사용 통계', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "resourceUsageStats", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 정비 이력', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "vehicleMaintenanceHistory", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 정비 통계', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "consumableMaintenanceStats", void 0);


/***/ }),

/***/ "./src/business/statistics/dtos/consumable-maintenance-stats.dto.ts":
/*!**************************************************************************!*\
  !*** ./src/business/statistics/dtos/consumable-maintenance-stats.dto.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStatsResponseDto = exports.ConsumableMaintenanceStatsFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const base_dto_1 = __webpack_require__(/*! ./base.dto */ "./src/business/statistics/dtos/base.dto.ts");
class ConsumableMaintenanceStatsFilterDto extends base_dto_1.YearMonthFilterDto {
}
exports.ConsumableMaintenanceStatsFilterDto = ConsumableMaintenanceStatsFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsFilterDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '차량 정보 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsFilterDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '소모품 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsFilterDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '최소 정비 횟수' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsFilterDto.prototype, "minMaintenanceCount", void 0);
class ConsumableMaintenanceStatsResponseDto {
}
exports.ConsumableMaintenanceStatsResponseDto = ConsumableMaintenanceStatsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 이름' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 유형' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 정보 ID' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 번호' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 ID' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기 알림 여부' }),
    __metadata("design:type", Boolean)
], ConsumableMaintenanceStatsResponseDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 횟수' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "maintenanceCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '첫 정비 날짜' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ConsumableMaintenanceStatsResponseDto.prototype, "firstMaintenanceDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '마지막 정비 날짜' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ConsumableMaintenanceStatsResponseDto.prototype, "lastMaintenanceDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 비용' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "totalCost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '평균 비용' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "averageCost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '최소 주행 거리' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "minMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '최대 주행 거리' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "maxMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '평균 주행 거리' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "averageMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 간 평균 일수' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "averageDaysBetweenMaintenances", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '현재 연도' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "currentYear", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '현재 월' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "currentMonth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '최근 3개월 정비 횟수' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "recentMaintenanceCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '통계 계산 시점' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ConsumableMaintenanceStatsResponseDto.prototype, "computedAt", void 0);


/***/ }),

/***/ "./src/business/statistics/dtos/employee-reservation-stats.dto.ts":
/*!************************************************************************!*\
  !*** ./src/business/statistics/dtos/employee-reservation-stats.dto.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeReservationStatsResponseDto = exports.EmployeeReservationStatsFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const base_dto_1 = __webpack_require__(/*! ./base.dto */ "./src/business/statistics/dtos/base.dto.ts");
class EmployeeReservationStatsFilterDto extends base_dto_1.YearMonthFilterDto {
}
exports.EmployeeReservationStatsFilterDto = EmployeeReservationStatsFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '직원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], EmployeeReservationStatsFilterDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '직원 이름' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], EmployeeReservationStatsFilterDto.prototype, "employeeName", void 0);
class EmployeeReservationStatsResponseDto {
}
exports.EmployeeReservationStatsResponseDto = EmployeeReservationStatsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연도' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '월' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "month", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연월 (YYYY-MM)' }),
    __metadata("design:type", String)
], EmployeeReservationStatsResponseDto.prototype, "yearMonth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID' }),
    __metadata("design:type", String)
], EmployeeReservationStatsResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 이름' }),
    __metadata("design:type", String)
], EmployeeReservationStatsResponseDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "reservationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 이용 시간 (시간)' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "totalHours", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약당 평균 이용 시간 (시간)' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "avgHoursPerReservation", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "vehicleCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '회의실 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "meetingRoomCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '숙소 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "accommodationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '취소 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "cancellationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '통계 계산 시점' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeReservationStatsResponseDto.prototype, "computedAt", void 0);


/***/ }),

/***/ "./src/business/statistics/dtos/index.ts":
/*!***********************************************!*\
  !*** ./src/business/statistics/dtos/index.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStatsResponseDto = exports.ConsumableMaintenanceStatsFilterDto = exports.VehicleMaintenanceHistoryResponseDto = exports.VehicleMaintenanceHistoryFilterDto = exports.ResourceUsageStatsResponseDto = exports.ResourceUsageStatsFilterDto = exports.EmployeeReservationStatsResponseDto = exports.EmployeeReservationStatsFilterDto = void 0;
var employee_reservation_stats_dto_1 = __webpack_require__(/*! ./employee-reservation-stats.dto */ "./src/business/statistics/dtos/employee-reservation-stats.dto.ts");
Object.defineProperty(exports, "EmployeeReservationStatsFilterDto", ({ enumerable: true, get: function () { return employee_reservation_stats_dto_1.EmployeeReservationStatsFilterDto; } }));
Object.defineProperty(exports, "EmployeeReservationStatsResponseDto", ({ enumerable: true, get: function () { return employee_reservation_stats_dto_1.EmployeeReservationStatsResponseDto; } }));
var resource_usage_stats_dto_1 = __webpack_require__(/*! ./resource-usage-stats.dto */ "./src/business/statistics/dtos/resource-usage-stats.dto.ts");
Object.defineProperty(exports, "ResourceUsageStatsFilterDto", ({ enumerable: true, get: function () { return resource_usage_stats_dto_1.ResourceUsageStatsFilterDto; } }));
Object.defineProperty(exports, "ResourceUsageStatsResponseDto", ({ enumerable: true, get: function () { return resource_usage_stats_dto_1.ResourceUsageStatsResponseDto; } }));
var vehicle_maintenance_history_dto_1 = __webpack_require__(/*! ./vehicle-maintenance-history.dto */ "./src/business/statistics/dtos/vehicle-maintenance-history.dto.ts");
Object.defineProperty(exports, "VehicleMaintenanceHistoryFilterDto", ({ enumerable: true, get: function () { return vehicle_maintenance_history_dto_1.VehicleMaintenanceHistoryFilterDto; } }));
Object.defineProperty(exports, "VehicleMaintenanceHistoryResponseDto", ({ enumerable: true, get: function () { return vehicle_maintenance_history_dto_1.VehicleMaintenanceHistoryResponseDto; } }));
var consumable_maintenance_stats_dto_1 = __webpack_require__(/*! ./consumable-maintenance-stats.dto */ "./src/business/statistics/dtos/consumable-maintenance-stats.dto.ts");
Object.defineProperty(exports, "ConsumableMaintenanceStatsFilterDto", ({ enumerable: true, get: function () { return consumable_maintenance_stats_dto_1.ConsumableMaintenanceStatsFilterDto; } }));
Object.defineProperty(exports, "ConsumableMaintenanceStatsResponseDto", ({ enumerable: true, get: function () { return consumable_maintenance_stats_dto_1.ConsumableMaintenanceStatsResponseDto; } }));
__exportStar(__webpack_require__(/*! ./base.dto */ "./src/business/statistics/dtos/base.dto.ts"), exports);


/***/ }),

/***/ "./src/business/statistics/dtos/resource-usage-stats.dto.ts":
/*!******************************************************************!*\
  !*** ./src/business/statistics/dtos/resource-usage-stats.dto.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceUsageStatsResponseDto = exports.ResourceUsageStatsFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const base_dto_1 = __webpack_require__(/*! ./base.dto */ "./src/business/statistics/dtos/base.dto.ts");
class ResourceUsageStatsFilterDto extends base_dto_1.YearMonthFilterDto {
}
exports.ResourceUsageStatsFilterDto = ResourceUsageStatsFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceUsageStatsFilterDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '직원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceUsageStatsFilterDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 유형' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceUsageStatsFilterDto.prototype, "resourceType", void 0);
class ResourceUsageStatsResponseDto {
}
exports.ResourceUsageStatsResponseDto = ResourceUsageStatsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 이름' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 유형' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 이름' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연도' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '월' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "month", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연월 (YYYY-MM)' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "yearMonth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 횟수' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "reservationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 이용 시간 (시간)' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "totalHours", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 횟수 순위' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "countRank", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이용 시간 순위' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "hoursRank", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '통계 계산 시점' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ResourceUsageStatsResponseDto.prototype, "computedAt", void 0);


/***/ }),

/***/ "./src/business/statistics/dtos/vehicle-maintenance-history.dto.ts":
/*!*************************************************************************!*\
  !*** ./src/business/statistics/dtos/vehicle-maintenance-history.dto.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleMaintenanceHistoryResponseDto = exports.VehicleMaintenanceHistoryFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const base_dto_1 = __webpack_require__(/*! ./base.dto */ "./src/business/statistics/dtos/base.dto.ts");
class VehicleMaintenanceHistoryFilterDto extends base_dto_1.DateRangeFilterDto {
}
exports.VehicleMaintenanceHistoryFilterDto = VehicleMaintenanceHistoryFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '차량 정보 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '소모품 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '담당자 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "responsibleEmployeeId", void 0);
class VehicleMaintenanceHistoryResponseDto {
}
exports.VehicleMaintenanceHistoryResponseDto = VehicleMaintenanceHistoryResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 이름' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 정보 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 번호' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기 알림 여부' }),
    __metadata("design:type", Boolean)
], VehicleMaintenanceHistoryResponseDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "maintenanceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 날짜' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "maintenanceDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '주행 거리' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '비용' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 담당자 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "maintananceBy", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 이미지' }),
    __metadata("design:type", Array)
], VehicleMaintenanceHistoryResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '생성 시간' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], VehicleMaintenanceHistoryResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '업데이트 시간' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], VehicleMaintenanceHistoryResponseDto.prototype, "updatedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '담당 직원 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "responsibleEmployeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '담당 직원 이름' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "responsibleEmployeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '부서' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직급' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연도' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '월' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "month", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '날짜 문자열' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "dateStr", void 0);


/***/ }),

/***/ "./src/business/statistics/statistics.controller.ts":
/*!**********************************************************!*\
  !*** ./src/business/statistics/statistics.controller.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StatisticsController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const statistics_service_1 = __webpack_require__(/*! ./statistics.service */ "./src/business/statistics/statistics.service.ts");
const dtos_1 = __webpack_require__(/*! ./dtos */ "./src/business/statistics/dtos/index.ts");
let StatisticsController = class StatisticsController {
    constructor(statisticsService) {
        this.statisticsService = statisticsService;
    }
    async getVersion() {
        return {
            version: '1.0.0',
            date: date_util_1.DateUtil.now().format(),
        };
    }
    async getResourceUsageStats(filter) {
        const stats = await this.statisticsService.getResourceUsageStats(filter);
        return stats;
    }
    async getVehicleMaintenanceHistory(filter) {
        const history = await this.statisticsService.getVehicleMaintenanceHistory(filter);
        return history;
    }
    async getConsumableMaintenanceStats(filter) {
        const stats = await this.statisticsService.getConsumableMaintenanceStats(filter);
        return stats;
    }
    async getEmployeeReservationStats(filter) {
        const stats = await this.statisticsService.getEmployeeReservationStats(filter);
        return stats;
    }
    async getAllStatistics() {
        const [employeeReservationStats, resourceUsageStats, vehicleMaintenanceHistory, consumableMaintenanceStats] = await Promise.all([
            this.statisticsService.getEmployeeReservationStats({}),
            this.statisticsService.getResourceUsageStats({}),
            this.statisticsService.getVehicleMaintenanceHistory({}),
            this.statisticsService.getConsumableMaintenanceStats({}),
        ]);
        return {
            employeeReservationStats: employeeReservationStats,
            resourceUsageStats: resourceUsageStats,
            vehicleMaintenanceHistory: vehicleMaintenanceHistory,
            consumableMaintenanceStats: consumableMaintenanceStats,
        };
    }
};
exports.StatisticsController = StatisticsController;
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('version'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], StatisticsController.prototype, "getVersion", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('resource-usage-stats'),
    (0, swagger_1.ApiOkResponse)({
        description: '자원 사용 통계 조회 성공',
        type: [dtos_1.ResourceUsageStatsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof dtos_1.ResourceUsageStatsFilterDto !== "undefined" && dtos_1.ResourceUsageStatsFilterDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], StatisticsController.prototype, "getResourceUsageStats", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('vehicle-maintenance-history'),
    (0, swagger_1.ApiOkResponse)({
        description: '차량 정비 이력 조회 성공',
        type: [dtos_1.VehicleMaintenanceHistoryResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof dtos_1.VehicleMaintenanceHistoryFilterDto !== "undefined" && dtos_1.VehicleMaintenanceHistoryFilterDto) === "function" ? _e : Object]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], StatisticsController.prototype, "getVehicleMaintenanceHistory", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('consumable-maintenance-stats'),
    (0, swagger_1.ApiOkResponse)({
        description: '소모품 정비 통계 조회 성공',
        type: [dtos_1.ConsumableMaintenanceStatsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof dtos_1.ConsumableMaintenanceStatsFilterDto !== "undefined" && dtos_1.ConsumableMaintenanceStatsFilterDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], StatisticsController.prototype, "getConsumableMaintenanceStats", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('employee-reservation-stats'),
    (0, swagger_1.ApiOkResponse)({
        description: '직원 예약 통계 조회 성공',
        type: [dtos_1.EmployeeReservationStatsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof dtos_1.EmployeeReservationStatsFilterDto !== "undefined" && dtos_1.EmployeeReservationStatsFilterDto) === "function" ? _j : Object]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], StatisticsController.prototype, "getEmployeeReservationStats", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('statistics'),
    (0, swagger_1.ApiOkResponse)({
        description: '모든 통계 데이터 조회 성공',
        type: dtos_1.StatisticsResponseDto,
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], StatisticsController.prototype, "getAllStatistics", null);
exports.StatisticsController = StatisticsController = __decorate([
    (0, swagger_1.ApiTags)('v2 통계'),
    (0, common_1.Controller)('v2/statistics'),
    (0, common_1.UseInterceptors)(response_interceptor_1.ResponseInterceptor, error_interceptor_1.ErrorInterceptor),
    __metadata("design:paramtypes", [typeof (_a = typeof statistics_service_1.StatisticsService !== "undefined" && statistics_service_1.StatisticsService) === "function" ? _a : Object])
], StatisticsController);


/***/ }),

/***/ "./src/business/statistics/statistics.module.ts":
/*!******************************************************!*\
  !*** ./src/business/statistics/statistics.module.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StatisticsModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const statistics_controller_1 = __webpack_require__(/*! ./statistics.controller */ "./src/business/statistics/statistics.controller.ts");
const statistics_service_1 = __webpack_require__(/*! ./statistics.service */ "./src/business/statistics/statistics.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let StatisticsModule = class StatisticsModule {
};
exports.StatisticsModule = StatisticsModule;
exports.StatisticsModule = StatisticsModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([
                entities_1.EmployeeReservationStats,
                entities_1.ResourceUsageStats,
                entities_1.VehicleMaintenanceHistory,
                entities_1.ConsumableMaintenanceStats,
            ]),
        ],
        controllers: [statistics_controller_1.StatisticsController],
        providers: [statistics_service_1.StatisticsService],
    })
], StatisticsModule);


/***/ }),

/***/ "./src/business/statistics/statistics.service.ts":
/*!*******************************************************!*\
  !*** ./src/business/statistics/statistics.service.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StatisticsService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const typeorm_2 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
let StatisticsService = class StatisticsService {
    constructor(resourceUsageStatsRepository, vehicleMaintenanceHistoryRepository, consumableMaintenanceStatsRepository, employeeReservationStatsRepository) {
        this.resourceUsageStatsRepository = resourceUsageStatsRepository;
        this.vehicleMaintenanceHistoryRepository = vehicleMaintenanceHistoryRepository;
        this.consumableMaintenanceStatsRepository = consumableMaintenanceStatsRepository;
        this.employeeReservationStatsRepository = employeeReservationStatsRepository;
    }
    async getResourceUsageStats(filter) {
        const where = {};
        if (filter?.year) {
            where.year = filter.year;
        }
        if (filter?.month) {
            where.month = filter.month;
        }
        if (filter?.resourceId) {
            where.resourceId = filter.resourceId;
        }
        if (filter?.employeeId) {
            where.employeeId = filter.employeeId;
        }
        if (filter?.resourceType) {
            where.resourceType = filter.resourceType;
        }
        return this.resourceUsageStatsRepository.find({ where });
    }
    async getVehicleMaintenanceHistory(filter) {
        const where = {};
        if (filter?.startDate && filter?.endDate) {
            where.maintenanceDate = (0, typeorm_1.Between)(filter.startDate, filter.endDate);
        }
        else if (filter?.startDate) {
            where.maintenanceDate = (0, typeorm_1.Between)(filter.startDate, new Date().toISOString());
        }
        if (filter?.resourceId) {
            where.resourceId = filter.resourceId;
        }
        if (filter?.vehicleInfoId) {
            where.vehicleInfoId = filter.vehicleInfoId;
        }
        if (filter?.consumableId) {
            where.consumableId = filter.consumableId;
        }
        if (filter?.responsibleEmployeeId) {
            where.responsibleEmployeeId = filter.responsibleEmployeeId;
        }
        return this.vehicleMaintenanceHistoryRepository.find({ where });
    }
    async getConsumableMaintenanceStats(filter) {
        const where = {};
        if (filter?.year) {
            where.currentYear = filter.year;
        }
        if (filter?.month) {
            where.currentMonth = filter.month;
        }
        if (filter?.resourceId) {
            where.resourceId = filter.resourceId;
        }
        if (filter?.vehicleInfoId) {
            where.vehicleInfoId = filter.vehicleInfoId;
        }
        if (filter?.consumableId) {
            where.consumableId = filter.consumableId;
        }
        if (filter?.minMaintenanceCount) {
            where.maintenanceCount = (0, typeorm_1.MoreThanOrEqual)(filter.minMaintenanceCount);
        }
        return this.consumableMaintenanceStatsRepository.find({ where });
    }
    async getEmployeeReservationStats(filter) {
        const where = {};
        if (filter?.year) {
            where.year = filter.year;
        }
        if (filter?.month) {
            where.month = filter.month;
        }
        if (filter?.employeeId) {
            where.employeeId = filter.employeeId;
        }
        if (filter?.employeeName) {
            where.employeeName = (0, typeorm_1.Like)(`%${filter.employeeName}%`);
        }
        return this.employeeReservationStatsRepository.find({ where });
    }
};
exports.StatisticsService = StatisticsService;
exports.StatisticsService = StatisticsService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_2.InjectRepository)(entities_1.ResourceUsageStats)),
    __param(1, (0, typeorm_2.InjectRepository)(entities_1.VehicleMaintenanceHistory)),
    __param(2, (0, typeorm_2.InjectRepository)(entities_1.ConsumableMaintenanceStats)),
    __param(3, (0, typeorm_2.InjectRepository)(entities_1.EmployeeReservationStats)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _a : Object, typeof (_b = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _b : Object, typeof (_c = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _c : Object, typeof (_d = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _d : Object])
], StatisticsService);


/***/ }),

/***/ "./src/business/task-management/controllers/task.controller.ts":
/*!*********************************************************************!*\
  !*** ./src/business/task-management/controllers/task.controller.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TaskController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const jwt_auth_guard_1 = __webpack_require__(/*! @libs/guards/jwt-auth.guard */ "./libs/guards/jwt-auth.guard.ts");
const role_guard_1 = __webpack_require__(/*! @libs/guards/role.guard */ "./libs/guards/role.guard.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const task_management_service_1 = __webpack_require__(/*! ../task-management.service */ "./src/business/task-management/task-management.service.ts");
const task_response_dto_1 = __webpack_require__(/*! ../dtos/task-response.dto */ "./src/business/task-management/dtos/task-response.dto.ts");
let TaskController = class TaskController {
    constructor(taskManagementService) {
        this.taskManagementService = taskManagementService;
    }
    async getUserTasks(user, type) {
        return this.taskManagementService.getTaskList(user, type);
    }
    async getAdminTasks(type) {
        return this.taskManagementService.getAdminTaskList(type);
    }
};
exports.TaskController = TaskController;
__decorate([
    (0, common_1.Get)(''),
    (0, swagger_1.ApiOperation)({ summary: '태스크 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '태스크 목록 조회 성공',
        type: task_response_dto_1.TaskResponseDto,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'type',
        type: String,
        required: false,
        description: '태스크 타입',
        enum: ['차량반납지연', '소모품교체'],
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _b : Object, String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], TaskController.prototype, "getUserTasks", null);
__decorate([
    (0, common_1.Get)('admin'),
    (0, swagger_1.ApiOperation)({ summary: '태스크 목록 조회 (관리자용)' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '태스크 목록 조회 성공',
        type: [task_response_dto_1.TaskResponseDto],
    }),
    (0, swagger_1.ApiQuery)({
        name: 'type',
        type: String,
        required: false,
        description: '태스크 타입',
        enum: ['차량반납지연', '소모품교체'],
    }),
    __param(0, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], TaskController.prototype, "getAdminTasks", null);
exports.TaskController = TaskController = __decorate([
    (0, swagger_1.ApiTags)('v2 태스크 관리'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('v2/tasks'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard, role_guard_1.RolesGuard),
    __metadata("design:paramtypes", [typeof (_a = typeof task_management_service_1.TaskManagementService !== "undefined" && task_management_service_1.TaskManagementService) === "function" ? _a : Object])
], TaskController);


/***/ }),

/***/ "./src/business/task-management/dtos/task-response.dto.ts":
/*!****************************************************************!*\
  !*** ./src/business/task-management/dtos/task-response.dto.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TaskListResponseDto = exports.TaskResponseDto = exports.ManagerResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class ManagerResponseDto {
}
exports.ManagerResponseDto = ManagerResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
    }),
    __metadata("design:type", String)
], ManagerResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ManagerResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ManagerResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ManagerResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ManagerResponseDto.prototype, "position", void 0);
class TaskResponseDto {
}
exports.TaskResponseDto = TaskResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '태스크 타입',
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '태스크 제목',
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '예약 ID',
        nullable: true,
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '자원 ID',
        nullable: true,
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '자원 이름',
        nullable: true,
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '소모품 ID',
        nullable: true,
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '소모품 이름',
        nullable: true,
        required: false,
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '시작 날짜',
        nullable: true,
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'string',
        description: '종료 날짜',
        nullable: true,
    }),
    __metadata("design:type", String)
], TaskResponseDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: ManagerResponseDto,
        description: '관리자',
        required: false,
    }),
    __metadata("design:type", ManagerResponseDto)
], TaskResponseDto.prototype, "manager", void 0);
class TaskListResponseDto {
}
exports.TaskListResponseDto = TaskListResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'number',
        description: '총 작업 수',
    }),
    __metadata("design:type", Number)
], TaskListResponseDto.prototype, "totalCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [TaskResponseDto],
        description: '작업 목록',
    }),
    __metadata("design:type", Array)
], TaskListResponseDto.prototype, "items", void 0);


/***/ }),

/***/ "./src/business/task-management/task-management.module.ts":
/*!****************************************************************!*\
  !*** ./src/business/task-management/task-management.module.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TaskManagementModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const task_controller_1 = __webpack_require__(/*! ./controllers/task.controller */ "./src/business/task-management/controllers/task.controller.ts");
const task_management_service_1 = __webpack_require__(/*! ./task-management.service */ "./src/business/task-management/task-management.service.ts");
const resource_context_module_1 = __webpack_require__(/*! @src/context/resource/resource.context.module */ "./src/context/resource/resource.context.module.ts");
const reservation_context_module_1 = __webpack_require__(/*! @src/context/reservation/reservation.context.module */ "./src/context/reservation/reservation.context.module.ts");
const notification_context_module_1 = __webpack_require__(/*! @src/context/notification/notification.context.module */ "./src/context/notification/notification.context.module.ts");
let TaskManagementModule = class TaskManagementModule {
};
exports.TaskManagementModule = TaskManagementModule;
exports.TaskManagementModule = TaskManagementModule = __decorate([
    (0, common_1.Module)({
        imports: [resource_context_module_1.ResourceContextModule, reservation_context_module_1.ReservationContextModule, notification_context_module_1.NotificationContextModule],
        controllers: [task_controller_1.TaskController],
        providers: [task_management_service_1.TaskManagementService],
        exports: [task_management_service_1.TaskManagementService],
    })
], TaskManagementModule);


/***/ }),

/***/ "./src/business/task-management/task-management.service.ts":
/*!*****************************************************************!*\
  !*** ./src/business/task-management/task-management.service.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.TaskManagementService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_context_service_1 = __webpack_require__(/*! @src/context/resource/services/resource.context.service */ "./src/context/resource/services/resource.context.service.ts");
const notification_context_service_1 = __webpack_require__(/*! @src/context/notification/services/notification.context.service */ "./src/context/notification/services/notification.context.service.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const reservation_context_service_1 = __webpack_require__(/*! @src/context/reservation/services/reservation.context.service */ "./src/context/reservation/services/reservation.context.service.ts");
let TaskManagementService = class TaskManagementService {
    constructor(resourceContextService, reservationContextService, notificationContextService) {
        this.resourceContextService = resourceContextService;
        this.reservationContextService = reservationContextService;
        this.notificationContextService = notificationContextService;
    }
    async getTaskList(user, type) {
        let delayedReturnTasks = [];
        let consumableReplaceTasks = [];
        if (type === '차량반납지연') {
            const delayedReturnReservations = await this.reservationContextService.지연반납_예약을_조회한다(user.employeeId);
            delayedReturnTasks = delayedReturnReservations.map((reservation) => ({
                type: '반납지연',
                title: `${reservation.resource.name} 반납 지연 중`,
                reservationId: reservation.reservationId,
                resourceId: reservation.resource.resourceId,
                resourceName: reservation.resource.name,
                startDate: reservation.startDate,
                endDate: reservation.endDate,
            }));
        }
        else if (type === '소모품교체') {
            const isResourceAdmin = user.roles.includes(role_type_enum_1.Role.RESOURCE_ADMIN);
            const isSystemAdmin = user.roles.includes(role_type_enum_1.Role.SYSTEM_ADMIN);
            let needReplaceConsumable = [];
            if (isResourceAdmin || isSystemAdmin) {
                needReplaceConsumable = await this.교체필요한_소모품을_조회한다(user, isSystemAdmin);
            }
            consumableReplaceTasks = needReplaceConsumable.map((item) => ({
                type: '소모품교체',
                title: item.title,
                reservationId: null,
                resourceId: item.resourceId,
                resourceName: item.resourceName,
                consumableId: item.consumableId,
                consumableName: item.consumableName,
                startDate: null,
                endDate: null,
            }));
        }
        const items = type === '차량반납지연' ? delayedReturnTasks : consumableReplaceTasks;
        return {
            totalCount: items.length,
            items,
        };
    }
    async getAdminTaskList(type) {
        if (type === '차량반납지연') {
            return this.reservationContextService.모든_지연반납_차량을_조회한다();
        }
        else if (type === '소모품교체') {
            return this.교체필요한_모든_소모품을_조회한다();
        }
        else {
            return [];
        }
    }
    async 교체필요한_모든_소모품을_조회한다() {
        const resources = await this.resourceContextService.소모품정보와_함께_모든자원을_조회한다();
        const needReplaceConsumables = [];
        for (const resource of resources) {
            for (const consumable of resource.vehicleInfo?.consumables || []) {
                const latestMaintenance = consumable.maintenances[consumable.maintenances.length - 1] || null;
                if (latestMaintenance) {
                    const maintenanceRequired = resource.vehicleInfo.totalMileage - Number(latestMaintenance.mileage) > consumable.replaceCycle;
                    if (maintenanceRequired) {
                        const notifications = await this.notificationContextService.소모품교체_알림을_조회한다(resource.resourceId, consumable.name);
                        needReplaceConsumables.push({
                            type: '소모품교체',
                            title: `${consumable.name} 교체 필요`,
                            reservationId: null,
                            resourceId: resource.resourceId,
                            resourceName: resource.name,
                            consumableId: consumable.consumableId,
                            consumableName: consumable.name,
                            startDate: null,
                            endDate: null,
                            manager: {
                                employeeId: resource.resourceManagers[0].employee.employeeId,
                                name: resource.resourceManagers[0].employee.name,
                                employeeNumber: resource.resourceManagers[0].employee.employeeNumber,
                                department: resource.resourceManagers[0].employee.department,
                                position: resource.resourceManagers[0].employee.position,
                            },
                            notifications: notifications,
                        });
                    }
                }
            }
        }
        return needReplaceConsumables;
    }
    async 교체필요한_소모품을_조회한다(user, isSystemAdmin) {
        const resources = await this.resourceContextService.관리자별_자원을_소모품정보와_함께_조회한다(user.employeeId, isSystemAdmin);
        const needReplaceConsumables = [];
        for (const resource of resources) {
            for (const consumable of resource.vehicleInfo?.consumables || []) {
                const latestMaintenance = consumable.maintenances[0] || null;
                if (latestMaintenance) {
                    const maintenanceRequired = resource.vehicleInfo.totalMileage - Number(latestMaintenance.mileage) > consumable.replaceCycle;
                    if (maintenanceRequired) {
                        needReplaceConsumables.push({
                            type: '소모품교체',
                            title: `${consumable.name} 교체 필요`,
                            reservationId: null,
                            resourceId: resource.resourceId,
                            resourceName: resource.name,
                            consumableId: consumable.consumableId,
                            consumableName: consumable.name,
                            startDate: null,
                            endDate: null,
                        });
                    }
                }
            }
        }
        return needReplaceConsumables;
    }
};
exports.TaskManagementService = TaskManagementService;
exports.TaskManagementService = TaskManagementService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_context_service_1.ResourceContextService !== "undefined" && resource_context_service_1.ResourceContextService) === "function" ? _a : Object, typeof (_b = typeof reservation_context_service_1.ReservationContextService !== "undefined" && reservation_context_service_1.ReservationContextService) === "function" ? _b : Object, typeof (_c = typeof notification_context_service_1.NotificationContextService !== "undefined" && notification_context_service_1.NotificationContextService) === "function" ? _c : Object])
], TaskManagementService);


/***/ }),

/***/ "./src/context/employee/employee.context.module.ts":
/*!*********************************************************!*\
  !*** ./src/context/employee/employee.context.module.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_context_service_1 = __webpack_require__(/*! ./employee.context.service */ "./src/context/employee/employee.context.service.ts");
const employee_module_1 = __webpack_require__(/*! @src/domain/employee/employee.module */ "./src/domain/employee/employee.module.ts");
let EmployeeContextModule = class EmployeeContextModule {
};
exports.EmployeeContextModule = EmployeeContextModule;
exports.EmployeeContextModule = EmployeeContextModule = __decorate([
    (0, common_1.Module)({
        imports: [employee_module_1.DomainEmployeeModule],
        providers: [employee_context_service_1.EmployeeContextService],
        exports: [employee_context_service_1.EmployeeContextService],
    })
], EmployeeContextModule);


/***/ }),

/***/ "./src/context/employee/employee.context.service.ts":
/*!**********************************************************!*\
  !*** ./src/context/employee/employee.context.service.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const mms_employee_response_dto_1 = __webpack_require__(/*! @src/business/employee-management/dtos/mms-employee-response.dto */ "./src/business/employee-management/dtos/mms-employee-response.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");
const axios_1 = __webpack_require__(/*! axios */ "axios");
let EmployeeContextService = class EmployeeContextService {
    constructor(domainEmployeeService) {
        this.domainEmployeeService = domainEmployeeService;
    }
    async 시스템관리자_목록을_조회한다() {
        const systemAdmins = await this.domainEmployeeService.findAll({
            where: {
                roles: (0, typeorm_1.Raw)(() => `'${role_type_enum_1.Role.SYSTEM_ADMIN}' = ANY("roles")`),
            },
        });
        return systemAdmins;
    }
    async 자원관리자_목록을_조회한다() {
        const resourceManagers = await this.domainEmployeeService.findAll({
            where: {
                roles: (0, typeorm_1.Raw)(() => `'${role_type_enum_1.Role.RESOURCE_ADMIN}' = ANY("roles")`),
                department: (0, typeorm_1.Not)((0, typeorm_1.In)(['퇴사', '관리자'])),
            },
            select: {
                employeeId: true,
                name: true,
                employeeNumber: true,
                department: true,
                position: true,
            },
        });
        return this.부서별로_그룹핑한다(resourceManagers);
    }
    async 관리자_후보_목록을_조회한다() {
        const candidates = await this.domainEmployeeService.findAll({
            where: {
                department: (0, typeorm_1.Not)((0, typeorm_1.In)(['퇴사', '관리자'])),
            },
            select: {
                employeeId: true,
                name: true,
                employeeNumber: true,
                department: true,
                position: true,
                roles: true,
            },
        });
        const candidatesWithRole = candidates.map((candidate) => ({
            ...candidate,
            isResourceAdmin: candidate.roles.includes(role_type_enum_1.Role.RESOURCE_ADMIN),
        }));
        return this.부서별로_그룹핑한다(candidatesWithRole);
    }
    async 직원_목록을_조회한다() {
        const employees = await this.domainEmployeeService.findAll({
            where: {
                department: (0, typeorm_1.Not)((0, typeorm_1.In)(['퇴사', '관리자'])),
            },
            select: {
                employeeId: true,
                name: true,
                employeeNumber: true,
                department: true,
                position: true,
            },
        });
        return this.부서별로_그룹핑한다(employees);
    }
    async 직원_상세정보를_조회한다(employeeId) {
        const employee = await this.domainEmployeeService.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        return {
            employeeId: employee.employeeId,
            email: employee.email,
            mobile: employee.mobile,
            name: employee.name,
            department: employee.department,
            position: employee.position,
            roles: employee.roles,
            isPushNotificationEnabled: employee.isPushNotificationEnabled,
        };
    }
    async 비밀번호를_확인한다(employeeId, password) {
        const employee = await this.domainEmployeeService.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        try {
            const ssoApiUrl = process.env.SSO_API_URL;
            const response = await axios_1.default.post(`${ssoApiUrl}/api/auth/check-password`, {
                currentPassword: password,
            }, {
                headers: {
                    Authorization: `Bearer ${employee.accessToken}`,
                },
            });
            const data = response.data;
            return data.isValid;
        }
        catch (error) {
            console.log(error);
            throw new common_1.UnauthorizedException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.SSO_LOGIN_FAILED);
        }
    }
    async 비밀번호를_변경한다(employeeId, password) {
        const employee = await this.domainEmployeeService.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        try {
            const ssoApiUrl = process.env.SSO_API_URL;
            const response = await axios_1.default.post(`${ssoApiUrl}/api/auth/change-password`, {
                newPassword: password,
            }, {
                headers: {
                    Authorization: `Bearer ${employee.accessToken}`,
                },
            });
            const data = response.data;
            console.log(data);
            employee.password = await bcrypt.hash(password, 10);
            await this.domainEmployeeService.update(employee.employeeId, employee);
        }
        catch (error) {
            console.log(error);
            throw new common_1.UnauthorizedException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.SSO_LOGIN_FAILED);
        }
    }
    async 직원_역할을_변경한다(changeRoleDto) {
        const employee = await this.domainEmployeeService.findByEmployeeId(changeRoleDto.employeeId);
        if (!employee) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        employee.roles = changeRoleDto.isResourceAdmin
            ? [...employee.roles, role_type_enum_1.Role.RESOURCE_ADMIN]
            : employee.roles.filter((role) => role !== role_type_enum_1.Role.RESOURCE_ADMIN);
        await this.domainEmployeeService.update(employee.employeeId, employee);
    }
    async 알림설정을_변경한다(employeeId, updateDto) {
        const employee = await this.domainEmployeeService.findByEmployeeId(employeeId);
        if (!employee) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        employee.isPushNotificationEnabled = updateDto.isPushNotificationEnabled;
        await this.domainEmployeeService.update(employee.employeeId, employee);
        return this.직원_상세정보를_조회한다(employeeId);
    }
    async 외부_직원정보를_조회한다(employeeNumber) {
        let url = `${process.env.METADATA_MANAGER_URL}/api/employees?detailed=true`;
        if (employeeNumber) {
            url += `&employeeNumber=${employeeNumber}`;
        }
        const result = await axios_1.default.get(url);
        if (employeeNumber) {
            return [new mms_employee_response_dto_1.MMSEmployeeResponseDto(result.data)];
        }
        return result.data.map((employee) => new mms_employee_response_dto_1.MMSEmployeeResponseDto(employee));
    }
    부서별로_그룹핑한다(employees) {
        const departments = new Map();
        employees.forEach((employee) => {
            if (!departments.has(employee.department)) {
                departments.set(employee.department, []);
            }
            departments.get(employee.department)?.push(employee);
        });
        return Array.from(departments.entries()).map(([department, employees]) => ({
            department,
            employees,
        }));
    }
};
exports.EmployeeContextService = EmployeeContextService;
exports.EmployeeContextService = EmployeeContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _a : Object])
], EmployeeContextService);


/***/ }),

/***/ "./src/context/file/adapter/s3.service.ts":
/*!************************************************!*\
  !*** ./src/context/file/adapter/s3.service.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.S3Service = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const client_s3_1 = __webpack_require__(/*! @aws-sdk/client-s3 */ "@aws-sdk/client-s3");
const s3_request_presigner_1 = __webpack_require__(/*! @aws-sdk/s3-request-presigner */ "@aws-sdk/s3-request-presigner");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const mime_type_enum_1 = __webpack_require__(/*! @libs/enums/mime-type.enum */ "./libs/enums/mime-type.enum.ts");
let S3Service = class S3Service {
    constructor(configService) {
        this.configService = configService;
        this.bucketName = this.configService.get('S3_BUCKET_NAME');
        this.s3Client = new client_s3_1.S3Client({
            region: this.configService.get('S3_REGION'),
            endpoint: this.configService.get('S3_ENDPOINT'),
            credentials: {
                accessKeyId: this.configService.get('S3_ACCESS_KEY'),
                secretAccessKey: this.configService.get('S3_SECRET_KEY'),
            },
            forcePathStyle: true,
        });
    }
    async uploadFile(file) {
        const fileExtension = file.originalname.split('.').pop();
        const fileName = `${date_util_1.DateUtil.now().format('YYYYMMDDHHmmssSSS')}.${fileExtension}`;
        try {
            await this.s3Client.send(new client_s3_1.PutObjectCommand({
                Bucket: this.bucketName,
                Key: fileName,
                Body: file.buffer,
                ContentType: file.mimetype,
            }));
            const newFile = {
                fileName: fileName,
                filePath: this.getFileUrl(fileName),
            };
            return newFile;
        }
        catch (error) {
            throw new Error(`Failed to upload file to S3: ${error.message}`);
        }
    }
    async deleteFile(file) {
        try {
            await this.s3Client.send(new client_s3_1.DeleteObjectCommand({
                Bucket: this.bucketName,
                Key: file.fileName,
            }));
        }
        catch (error) {
            throw new Error(`Failed to delete file from S3: ${error.message}`);
        }
    }
    getFileUrl(fileKey) {
        return `${this.configService.get('S3_ENDPOINT').replace('s3', 'object/public')}/${this.bucketName}/${fileKey}`;
    }
    async generatePresignedUrl(mime) {
        const extMap = {
            [mime_type_enum_1.MimeType.IMAGE_JPEG]: 'jpg',
            [mime_type_enum_1.MimeType.IMAGE_PNG]: 'png',
            [mime_type_enum_1.MimeType.IMAGE_WEBP]: 'webp',
        };
        const fileExtension = extMap[mime] || 'bin';
        const fileKey = `${date_util_1.DateUtil.now().format('YYYYMMDDHHmmssSSS')}.${fileExtension}`;
        const command = new client_s3_1.PutObjectCommand({
            Bucket: this.bucketName,
            Key: fileKey,
            ContentType: mime,
        });
        const url = await (0, s3_request_presigner_1.getSignedUrl)(this.s3Client, command, { expiresIn: 60 * 2 });
        return url;
    }
    async checkFileExists(fileKey) {
        try {
            const command = new client_s3_1.HeadObjectCommand({
                Bucket: this.bucketName,
                Key: fileKey,
            });
            const result = await this.s3Client.send(command);
            console.log(result);
            return result.ContentLength !== undefined && result.ContentLength > 0;
        }
        catch (error) {
            console.error(error);
            return false;
        }
    }
};
exports.S3Service = S3Service;
exports.S3Service = S3Service = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _a : Object])
], S3Service);


/***/ }),

/***/ "./src/context/file/controllers/cron.file.controller.ts":
/*!**************************************************************!*\
  !*** ./src/context/file/controllers/cron.file.controller.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CronFileController = void 0;
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const file_context_service_1 = __webpack_require__(/*! ../services/file.context.service */ "./src/context/file/services/file.context.service.ts");
let CronFileController = class CronFileController {
    constructor(fileContextService) {
        this.fileContextService = fileContextService;
    }
    async deleteTemporaryFile() {
        return this.fileContextService.임시_파일들을_삭제한다();
    }
};
exports.CronFileController = CronFileController;
__decorate([
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, common_1.Get)('cron-job/delete-temporary-file'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], CronFileController.prototype, "deleteTemporaryFile", null);
exports.CronFileController = CronFileController = __decorate([
    (0, swagger_1.ApiTags)('v2 파일 '),
    (0, public_decorator_1.Public)(),
    (0, common_1.Controller)('v2/files'),
    __metadata("design:paramtypes", [typeof (_a = typeof file_context_service_1.FileContextService !== "undefined" && file_context_service_1.FileContextService) === "function" ? _a : Object])
], CronFileController);


/***/ }),

/***/ "./src/context/file/controllers/file.controller.ts":
/*!*********************************************************!*\
  !*** ./src/context/file/controllers/file.controller.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const platform_express_1 = __webpack_require__(/*! @nestjs/platform-express */ "@nestjs/platform-express");
const file_context_service_1 = __webpack_require__(/*! ../services/file.context.service */ "./src/context/file/services/file.context.service.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const business_dto_index_1 = __webpack_require__(/*! @resource/business.dto.index */ "./src/business.dto.index.ts");
const mime_type_enum_1 = __webpack_require__(/*! @libs/enums/mime-type.enum */ "./libs/enums/mime-type.enum.ts");
const create_filedata_dto_1 = __webpack_require__(/*! ../dtos/create-filedata.dto */ "./src/context/file/dtos/create-filedata.dto.ts");
let FileController = class FileController {
    constructor(fileContextService) {
        this.fileContextService = fileContextService;
    }
    async uploadFile(file) {
        return this.fileContextService.파일을_업로드한다(file);
    }
    async uploadMultipleFiles(files) {
        return this.fileContextService.다중_파일을_업로드한다(files);
    }
    async deleteMultipleFiles(fileIds) {
        await this.fileContextService.다중_파일을_삭제한다(fileIds);
    }
    async getPresignedUrl(mime) {
        return this.fileContextService.프리사인드_URL을_생성한다(mime);
    }
    async createFileData(createFileDataDto) {
        return this.fileContextService.파일_데이터를_생성한다(createFileDataDto);
    }
    async deleteFile(fileId) {
        await this.fileContextService.파일을_삭제한다(fileId);
    }
};
exports.FileController = FileController;
__decorate([
    (0, common_1.Post)('upload'),
    (0, swagger_1.ApiConsumes)('multipart/form-data'),
    (0, swagger_1.ApiBody)({
        schema: {
            type: 'object',
            properties: {
                file: {
                    type: 'string',
                    format: 'binary',
                },
            },
        },
    }),
    (0, swagger_1.ApiOperation)({ summary: '파일 업로드' }),
    (0, swagger_1.ApiOkResponse)({ status: 200, description: '파일 업로드 성공', type: business_dto_index_1.FileResponseDto }),
    (0, common_1.UseInterceptors)((0, platform_express_1.FileInterceptor)('file')),
    __param(0, (0, common_1.UploadedFile)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof Express !== "undefined" && (_b = Express.Multer) !== void 0 && _b.File) === "function" ? _c : Object]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "uploadFile", null);
__decorate([
    (0, common_1.Post)('upload/multiple'),
    (0, swagger_1.ApiConsumes)('multipart/form-data'),
    (0, swagger_1.ApiBody)({
        schema: {
            type: 'object',
            properties: {
                files: {
                    type: 'array',
                    items: {
                        type: 'string',
                        format: 'binary',
                    },
                },
            },
        },
    }),
    (0, swagger_1.ApiOperation)({ summary: '여러 파일 업로드' }),
    (0, swagger_1.ApiOkResponse)({ status: 200, description: '여러 파일 업로드 성공', type: [business_dto_index_1.FileResponseDto] }),
    (0, common_1.UseInterceptors)((0, platform_express_1.FilesInterceptor)('files', 10)),
    __param(0, (0, common_1.UploadedFiles)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Array]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "uploadMultipleFiles", null);
__decorate([
    (0, common_1.Delete)('multiple'),
    (0, swagger_1.ApiOperation)({ summary: '여러 파일 삭제' }),
    (0, swagger_1.ApiBody)({
        schema: {
            type: 'object',
            properties: {
                fileIds: {
                    type: 'array',
                    items: {
                        type: 'string',
                    },
                },
            },
        },
    }),
    (0, swagger_1.ApiOkResponse)({ status: 200, description: '여러 파일 삭제 성공' }),
    __param(0, (0, common_1.Body)('fileIds')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Array]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "deleteMultipleFiles", null);
__decorate([
    (0, common_1.Get)('presigned-url'),
    (0, swagger_1.ApiOperation)({ summary: 'Presigned URL 생성' }),
    (0, swagger_1.ApiOkResponse)({ status: 200, description: 'Presigned URL 생성 성공' }),
    (0, swagger_1.ApiQuery)({ name: 'mime', enum: mime_type_enum_1.MimeType, example: mime_type_enum_1.MimeType.IMAGE_PNG, required: true }),
    __param(0, (0, common_1.Query)('mime')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof mime_type_enum_1.MimeType !== "undefined" && mime_type_enum_1.MimeType) === "function" ? _d : Object]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "getPresignedUrl", null);
__decorate([
    (0, common_1.Post)('data'),
    (0, swagger_1.ApiOperation)({ summary: '파일 데이터 생성' }),
    (0, swagger_1.ApiOkResponse)({ status: 200, description: '파일 데이터 생성 성공', type: business_dto_index_1.FileResponseDto }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof create_filedata_dto_1.CreateFileDataDto !== "undefined" && create_filedata_dto_1.CreateFileDataDto) === "function" ? _e : Object]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "createFileData", null);
__decorate([
    (0, common_1.Delete)(':fileId'),
    (0, swagger_1.ApiOperation)({ summary: '파일 삭제' }),
    (0, swagger_1.ApiOkResponse)({ status: 200, description: '파일 삭제 성공' }),
    __param(0, (0, common_1.Param)('fileId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], FileController.prototype, "deleteFile", null);
exports.FileController = FileController = __decorate([
    (0, swagger_1.ApiTags)('v2 파일 '),
    (0, common_1.Controller)('v2/files'),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof file_context_service_1.FileContextService !== "undefined" && file_context_service_1.FileContextService) === "function" ? _a : Object])
], FileController);


/***/ }),

/***/ "./src/context/file/dtos/create-filedata.dto.ts":
/*!******************************************************!*\
  !*** ./src/context/file/dtos/create-filedata.dto.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateFileDataDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class CreateFileDataDto {
}
exports.CreateFileDataDto = CreateFileDataDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '파일 경로' }),
    __metadata("design:type", String)
], CreateFileDataDto.prototype, "filePath", void 0);


/***/ }),

/***/ "./src/context/file/dtos/file-response.dto.ts":
/*!****************************************************!*\
  !*** ./src/context/file/dtos/file-response.dto.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FileResponseDto {
}
exports.FileResponseDto = FileResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: '123e4567-e89b-12d3-a456-426614174000' }),
    __metadata("design:type", String)
], FileResponseDto.prototype, "fileId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'image.jpg' }),
    __metadata("design:type", String)
], FileResponseDto.prototype, "fileName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'uploads/20250226123456-image.jpg' }),
    __metadata("design:type", String)
], FileResponseDto.prototype, "filePath", void 0);


/***/ }),

/***/ "./src/context/file/dtos/index.ts":
/*!****************************************!*\
  !*** ./src/context/file/dtos/index.ts ***!
  \****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./reservation-vehicle-file-response.dto */ "./src/context/file/dtos/reservation-vehicle-file-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./file-response.dto */ "./src/context/file/dtos/file-response.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./create-filedata.dto */ "./src/context/file/dtos/create-filedata.dto.ts"), exports);


/***/ }),

/***/ "./src/context/file/dtos/reservation-vehicle-file-response.dto.ts":
/*!************************************************************************!*\
  !*** ./src/context/file/dtos/reservation-vehicle-file-response.dto.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationVehicleFileResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class ReservationVehicleFileResponseDto {
}
exports.ReservationVehicleFileResponseDto = ReservationVehicleFileResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReservationVehicleFileResponseDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReservationVehicleFileResponseDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], ReservationVehicleFileResponseDto.prototype, "indoorImages", void 0);


/***/ }),

/***/ "./src/context/file/file.context.module.ts":
/*!*************************************************!*\
  !*** ./src/context/file/file.context.module.ts ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const file_module_1 = __webpack_require__(/*! @src/domain/file/file.module */ "./src/domain/file/file.module.ts");
const file_maintenance_module_1 = __webpack_require__(/*! @src/domain/file-maintenance/file-maintenance.module */ "./src/domain/file-maintenance/file-maintenance.module.ts");
const file_reservation_vehicle_module_1 = __webpack_require__(/*! @src/domain/file-reservation-vehicle/file-reservation-vehicle.module */ "./src/domain/file-reservation-vehicle/file-reservation-vehicle.module.ts");
const file_resource_module_1 = __webpack_require__(/*! @src/domain/file-resource/file-resource.module */ "./src/domain/file-resource/file-resource.module.ts");
const file_vehicle_info_module_1 = __webpack_require__(/*! @src/domain/file-vehicle-info/file-vehicle-info.module */ "./src/domain/file-vehicle-info/file-vehicle-info.module.ts");
const file_context_service_1 = __webpack_require__(/*! ./services/file.context.service */ "./src/context/file/services/file.context.service.ts");
const s3_service_1 = __webpack_require__(/*! ./adapter/s3.service */ "./src/context/file/adapter/s3.service.ts");
const file_controller_1 = __webpack_require__(/*! ./controllers/file.controller */ "./src/context/file/controllers/file.controller.ts");
const cron_file_controller_1 = __webpack_require__(/*! ./controllers/cron.file.controller */ "./src/context/file/controllers/cron.file.controller.ts");
let FileContextModule = class FileContextModule {
};
exports.FileContextModule = FileContextModule;
exports.FileContextModule = FileContextModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([entities_1.File, entities_1.FileMaintenance, entities_1.FileReservationVehicle, entities_1.FileResource, entities_1.FileVehicleInfo]),
            file_module_1.DomainFileModule,
            file_maintenance_module_1.DomainFileMaintenanceModule,
            file_reservation_vehicle_module_1.DomainFileReservationVehicleModule,
            file_resource_module_1.DomainFileResourceModule,
            file_vehicle_info_module_1.DomainFileVehicleInfoModule,
        ],
        controllers: [file_controller_1.FileController, cron_file_controller_1.CronFileController],
        providers: [
            file_context_service_1.FileContextService,
            s3_service_1.S3Service,
        ],
        exports: [
            file_context_service_1.FileContextService,
        ],
    })
], FileContextModule);


/***/ }),

/***/ "./src/context/file/services/file.context.service.ts":
/*!***********************************************************!*\
  !*** ./src/context/file/services/file.context.service.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const file_reservation_vehicle_service_1 = __webpack_require__(/*! @src/domain/file-reservation-vehicle/file-reservation-vehicle.service */ "./src/domain/file-reservation-vehicle/file-reservation-vehicle.service.ts");
const file_vehicle_info_service_1 = __webpack_require__(/*! @src/domain/file-vehicle-info/file-vehicle-info.service */ "./src/domain/file-vehicle-info/file-vehicle-info.service.ts");
const file_maintenance_service_1 = __webpack_require__(/*! @src/domain/file-maintenance/file-maintenance.service */ "./src/domain/file-maintenance/file-maintenance.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const s3_service_1 = __webpack_require__(/*! ../adapter/s3.service */ "./src/context/file/adapter/s3.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const file_resource_service_1 = __webpack_require__(/*! @src/domain/file-resource/file-resource.service */ "./src/domain/file-resource/file-resource.service.ts");
let FileContextService = class FileContextService {
    constructor(domainFileService, domainFileReservationVehicleService, domainFileVehicleInfoService, domainFileResourceService, domainFileMaintenanceService, s3Service) {
        this.domainFileService = domainFileService;
        this.domainFileReservationVehicleService = domainFileReservationVehicleService;
        this.domainFileVehicleInfoService = domainFileVehicleInfoService;
        this.domainFileResourceService = domainFileResourceService;
        this.domainFileMaintenanceService = domainFileMaintenanceService;
        this.s3Service = s3Service;
    }
    async 차량예약_파일을_조회한다(reservationVehicleId) {
        const fileReservationVehicles = await this.domainFileReservationVehicleService.findAll({
            where: { reservationVehicleId },
        });
        const result = {
            parkingLocationImages: [],
            odometerImages: [],
            indoorImages: [],
        };
        for (const fileReservationVehicle of fileReservationVehicles) {
            if (fileReservationVehicle.type === 'PARKING_LOCATION') {
                result.parkingLocationImages.push(fileReservationVehicle.fileId);
            }
            else if (fileReservationVehicle.type === 'ODOMETER') {
                result.odometerImages.push(fileReservationVehicle.fileId);
            }
            else if (fileReservationVehicle.type === 'INDOOR') {
                result.indoorImages.push(fileReservationVehicle.fileId);
            }
        }
        return {
            parkingLocationImages: await this.domainFileService.findAll({
                where: { fileId: (0, typeorm_1.In)(result.parkingLocationImages) },
            }),
            odometerImages: await this.domainFileService.findAll({
                where: { fileId: (0, typeorm_1.In)(result.odometerImages) },
            }),
            indoorImages: await this.domainFileService.findAll({
                where: { fileId: (0, typeorm_1.In)(result.indoorImages) },
            }),
        };
    }
    async 파일을_업로드한다(file) {
        const newFile = await this.s3Service.uploadFile(file);
        const savedFile = await this.domainFileService.save(newFile);
        return savedFile;
    }
    async 다중_파일을_업로드한다(files) {
        const uploadPromises = files.map((file) => this.파일을_업로드한다(file));
        return await Promise.all(uploadPromises);
    }
    async 파일을_삭제한다(fileId) {
        let file;
        if (fileId) {
            file = await this.domainFileService.findFileById(fileId);
            if (!file)
                throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.FILE.NOT_FOUND);
        }
        else {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.FILE.ID_OR_PATH_REQUIRED);
        }
        await this.s3Service.deleteFile(file);
        await this.domainFileService.delete(file.fileId);
    }
    async 다중_파일을_삭제한다(fileIds) {
        const deletePromises = fileIds.map((fileId) => this.파일을_삭제한다(fileId));
        await Promise.all(deletePromises);
    }
    async 임시_파일들을_삭제한다() {
        const files = await this.임시_파일들을_조회한다();
        const deletePromises = files.map((file) => this.파일을_삭제한다(file.fileId));
        await Promise.all(deletePromises);
    }
    async 임시_파일들을_조회한다() {
        return await this.domainFileService.findAll({
            where: { isTemporary: true, createdAt: (0, typeorm_1.LessThan)(date_util_1.DateUtil.now().addDays(-1).toDate()) },
        });
    }
    async 프리사인드_URL을_생성한다(mime) {
        if (!mime) {
            throw new common_1.BadRequestException('Mime type is required');
        }
        return this.s3Service.generatePresignedUrl(mime);
    }
    async 파일_데이터를_생성한다(createFileDataDto) {
        const fileName = createFileDataDto.filePath.split('/').pop();
        const fileExists = await this.s3Service.checkFileExists(fileName);
        if (!fileExists) {
            throw new common_1.BadRequestException('File not found in S3');
        }
        const file = await this.domainFileService.create({
            fileName,
            filePath: this.s3Service.getFileUrl(fileName),
        });
        return await this.domainFileService.save(file);
    }
    async 자원_파일을_조회한다(resourceId) {
        const resourceFiles = await this.domainFileResourceService.findAll({
            where: { resourceId },
        });
        const files = await this.domainFileService.findAll({
            where: { fileId: (0, typeorm_1.In)(resourceFiles.map((file) => file.fileId)) },
        });
        return {
            images: files,
        };
    }
    async 차량정보_파일을_조회한다(vehicleInfoId) {
        const fileVehicleInfos = await this.domainFileVehicleInfoService.findByVehicleInfoId(vehicleInfoId);
        const result = {
            parkingLocationImages: [],
            odometerImages: [],
            indoorImages: [],
        };
        for (const fileVehicleInfo of fileVehicleInfos) {
            if (fileVehicleInfo.type === 'PARKING_LOCATION') {
                result.parkingLocationImages.push(fileVehicleInfo.fileId);
            }
            else if (fileVehicleInfo.type === 'ODOMETER') {
                result.odometerImages.push(fileVehicleInfo.fileId);
            }
            else if (fileVehicleInfo.type === 'INDOOR') {
                result.indoorImages.push(fileVehicleInfo.fileId);
            }
        }
        return {
            parkingLocationImages: result.parkingLocationImages.length > 0
                ? await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_1.In)(result.parkingLocationImages) },
                })
                : [],
            odometerImages: result.odometerImages.length > 0
                ? await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_1.In)(result.odometerImages) },
                })
                : [],
            indoorImages: result.indoorImages.length > 0
                ? await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_1.In)(result.indoorImages) },
                })
                : [],
        };
    }
    async 차량예약에_파일들을_연결한다(reservationVehicleId, files, queryRunner) {
        const options = queryRunner ? { queryRunner } : {};
        const connections = [];
        if (files.parkingLocationImages?.length > 0) {
            connections.push(...files.parkingLocationImages.map((fileId) => ({
                reservationVehicleId,
                fileId,
                type: 'PARKING_LOCATION',
            })));
        }
        if (files.odometerImages?.length > 0) {
            connections.push(...files.odometerImages.map((fileId) => ({
                reservationVehicleId,
                fileId,
                type: 'ODOMETER',
            })));
        }
        if (files.indoorImages?.length > 0) {
            connections.push(...files.indoorImages.map((fileId) => ({
                reservationVehicleId,
                fileId,
                type: 'INDOOR',
            })));
        }
        if (connections.length > 0) {
            await this.domainFileReservationVehicleService.saveMultiple(connections, options);
        }
    }
    async 파일들을_영구로_변경한다(fileIds, queryRunner) {
        if (fileIds.length === 0)
            return;
        const options = queryRunner ? { queryRunner } : {};
        for (const fileId of fileIds) {
            await this.domainFileService.update(fileId, { isTemporary: false }, options);
        }
    }
    async 리소스에_파일들을_연결한다(resourceId, fileIds, queryRunner) {
        if (fileIds.length === 0)
            return;
        const options = queryRunner ? { queryRunner } : {};
        const existingConnections = await this.domainFileResourceService.findAll({
            where: { resourceId },
        });
        if (existingConnections.length > 0) {
            const existingFileIds = existingConnections.map((conn) => conn.fileId);
            for (const fileId of existingFileIds) {
                await this.domainFileService.update(fileId, { isTemporary: true }, options);
            }
        }
        await this.domainFileResourceService.deleteByResourceId(resourceId, options);
        const connections = fileIds.map((fileId) => ({
            resourceId,
            fileId,
        }));
        await this.domainFileResourceService.saveMultiple(connections, options);
    }
    async 차량정보에_파일들을_연결한다(vehicleInfoId, files, queryRunner) {
        const options = queryRunner ? { queryRunner } : {};
        const existingConnections = await this.domainFileVehicleInfoService.findByVehicleInfoId(vehicleInfoId);
        if (existingConnections.length > 0) {
            const existingFileIds = existingConnections.map((conn) => conn.fileId);
            for (const fileId of existingFileIds) {
                await this.domainFileService.update(fileId, { isTemporary: true }, options);
            }
        }
        await this.domainFileVehicleInfoService.deleteByVehicleInfoId(vehicleInfoId, options);
        const connections = [];
        if (files.parkingLocationImages?.length > 0) {
            connections.push(...files.parkingLocationImages.map((fileId) => ({
                vehicleInfoId,
                fileId,
                type: 'PARKING_LOCATION',
            })));
        }
        if (files.odometerImages?.length > 0) {
            connections.push(...files.odometerImages.map((fileId) => ({
                vehicleInfoId,
                fileId,
                type: 'ODOMETER',
            })));
        }
        if (files.indoorImages?.length > 0) {
            connections.push(...files.indoorImages.map((fileId) => ({
                vehicleInfoId,
                fileId,
                type: 'INDOOR',
            })));
        }
        if (connections.length > 0) {
            await this.domainFileVehicleInfoService.saveMultiple(connections, options);
        }
    }
    async 정비에_파일들을_연결한다(maintenanceId, fileIds, queryRunner) {
        const options = queryRunner ? { queryRunner } : {};
        const existingConnections = await this.domainFileMaintenanceService.findByMaintenanceId(maintenanceId);
        if (existingConnections.length > 0) {
            const existingFileIds = existingConnections.map((conn) => conn.fileId);
            for (const fileId of existingFileIds) {
                await this.domainFileService.update(fileId, { isTemporary: true }, options);
            }
        }
        await this.domainFileMaintenanceService.deleteByMaintenanceId(maintenanceId, options);
        const connections = fileIds.map((fileId) => ({
            maintenanceId,
            fileId,
        }));
        if (connections.length > 0) {
            await this.domainFileMaintenanceService.saveMultiple(connections, options);
        }
    }
    async 정비_파일을_조회한다(maintenanceId) {
        const fileMaintenances = await this.domainFileMaintenanceService.findByMaintenanceId(maintenanceId);
        return fileMaintenances.map((fm) => ({
            filePath: fm.file.filePath,
        }));
    }
};
exports.FileContextService = FileContextService;
exports.FileContextService = FileContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _a : Object, typeof (_b = typeof file_reservation_vehicle_service_1.DomainFileReservationVehicleService !== "undefined" && file_reservation_vehicle_service_1.DomainFileReservationVehicleService) === "function" ? _b : Object, typeof (_c = typeof file_vehicle_info_service_1.DomainFileVehicleInfoService !== "undefined" && file_vehicle_info_service_1.DomainFileVehicleInfoService) === "function" ? _c : Object, typeof (_d = typeof file_resource_service_1.DomainFileResourceService !== "undefined" && file_resource_service_1.DomainFileResourceService) === "function" ? _d : Object, typeof (_e = typeof file_maintenance_service_1.DomainFileMaintenanceService !== "undefined" && file_maintenance_service_1.DomainFileMaintenanceService) === "function" ? _e : Object, typeof (_f = typeof s3_service_1.S3Service !== "undefined" && s3_service_1.S3Service) === "function" ? _f : Object])
], FileContextService);


/***/ }),

/***/ "./src/context/notification/adapter/fcm-push.adapter.ts":
/*!**************************************************************!*\
  !*** ./src/context/notification/adapter/fcm-push.adapter.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FCMAdapter = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const app_1 = __webpack_require__(/*! firebase-admin/app */ "firebase-admin/app");
const messaging_1 = __webpack_require__(/*! firebase-admin/messaging */ "firebase-admin/messaging");
let FCMAdapter = class FCMAdapter {
    constructor(configService) {
        this.configService = configService;
        this.isProduction = process.env.NODE_ENV === 'production';
        try {
            if ((0, app_1.getApps)().length === 0) {
                (0, app_1.initializeApp)({
                    credential: (0, app_1.cert)({
                        clientEmail: this.configService.get('firebase.clientEmail'),
                        privateKey: this.configService.get('firebase.privateKey').replace(/\\n/g, '\n'),
                        projectId: this.configService.get('firebase.projectId'),
                    }),
                });
                console.log('✅ Firebase Admin initialized successfully');
            }
            else {
                console.log('⚡ Firebase Admin already initialized, skipping');
            }
        }
        catch (error) {
            console.error('Firebase initialization error:', error);
            throw error;
        }
        process.on('unhandledRejection', (reason, promise) => {
            console.error('🧨 Unhandled Rejection:', reason);
        });
    }
    async sendNotification(subscription, payload) {
        try {
            if (!subscription || !subscription.fcm || !subscription.fcm.token) {
                throw new common_1.BadRequestException('FCM token is missing');
            }
            const message = {
                token: subscription.fcm.token,
                notification: {
                    title: payload.title,
                    body: payload.body,
                },
                data: {
                    title: payload.title,
                    body: payload.body,
                },
            };
            const response = await (0, messaging_1.getMessaging)()
                .send(message)
                .then((response) => {
                console.log('FCM send successful. Message ID:', response);
                return { success: true, message: response, error: null };
            })
                .catch((error) => {
                console.error('FCM send error:', {
                    code: error.code,
                    message: error.message,
                    details: error.details,
                    stack: error.stack,
                });
                return { success: false, message: 'failed', error: error.message };
            });
            return response;
        }
        catch (error) {
            console.error('FCM send error:', {
                code: error.code,
                message: error.message,
                details: error.details,
                stack: error.stack,
            });
            return { success: false, message: 'failed', error: error.message };
        }
    }
    async sendBulkNotification(tokens, payload) {
        try {
            console.log('알림 전송 - tokens', tokens);
            console.log('알림 전송 - payload', payload);
            const response = await (0, messaging_1.getMessaging)()
                .sendEachForMulticast({
                tokens: tokens,
                data: {
                    title: this.isProduction ? payload.title : '[개발]' + payload.title,
                    body: payload.body,
                    notificationData: JSON.stringify(payload.notificationData),
                    notificationType: payload.notificationType,
                },
                android: {
                    priority: 'high',
                },
            })
                .then((response) => {
                console.log('FCM send successful.', response);
                return response;
            });
            return response;
        }
        catch (error) {
            console.error('FCM send error:', {
                code: error.code,
                message: error.message,
                details: error.details,
                stack: error.stack,
            });
            return { responses: [], successCount: -1, failureCount: -1 };
        }
    }
};
exports.FCMAdapter = FCMAdapter;
exports.FCMAdapter = FCMAdapter = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _a : Object])
], FCMAdapter);


/***/ }),

/***/ "./src/context/notification/dtos/create-notification.dto.ts":
/*!******************************************************************!*\
  !*** ./src/context/notification/dtos/create-notification.dto.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SendNotificationDto = exports.CreateEmployeeNotificationDto = exports.CreateNotificationDto = exports.CreateNotificationDataDto = exports.NotificationProjectDto = exports.NotificationScheduleDto = exports.NotificationReservationDto = exports.NotificationResourceDto = exports.NotificationVehicleInfoDto = exports.NotificationConsumableDto = void 0;
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class NotificationConsumableDto {
}
exports.NotificationConsumableDto = NotificationConsumableDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 ID' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationConsumableDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationConsumableDto.prototype, "consumableName", void 0);
class NotificationVehicleInfoDto {
}
exports.NotificationVehicleInfoDto = NotificationVehicleInfoDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ type: NotificationConsumableDto, description: '소모품 정보' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationConsumableDto),
    __metadata("design:type", NotificationConsumableDto)
], NotificationVehicleInfoDto.prototype, "consumable", void 0);
class NotificationResourceDto {
}
exports.NotificationResourceDto = NotificationResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationResourceDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 이름' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationResourceDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType, description: '자원 타입' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], NotificationResourceDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ type: NotificationVehicleInfoDto, description: '차량 정보 (차량 자원인 경우)' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationVehicleInfoDto),
    __metadata("design:type", NotificationVehicleInfoDto)
], NotificationResourceDto.prototype, "vehicleInfo", void 0);
class NotificationReservationDto {
}
exports.NotificationReservationDto = NotificationReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 ID' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationReservationDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 제목' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationReservationDto.prototype, "reservationTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 날짜' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationReservationDto.prototype, "reservationDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ enum: reservation_type_enum_1.ReservationStatus, description: '예약 상태' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(reservation_type_enum_1.ReservationStatus),
    __metadata("design:type", typeof (_b = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _b : Object)
], NotificationReservationDto.prototype, "status", void 0);
class NotificationScheduleDto {
}
exports.NotificationScheduleDto = NotificationScheduleDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 ID' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationScheduleDto.prototype, "scheduleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '일정 제목' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationScheduleDto.prototype, "scheduleTitle", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: '알림 전 분 수' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    __metadata("design:type", Number)
], NotificationScheduleDto.prototype, "beforeMinutes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '시작 날짜' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], NotificationScheduleDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '종료 날짜' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], NotificationScheduleDto.prototype, "endDate", void 0);
class NotificationProjectDto {
}
exports.NotificationProjectDto = NotificationProjectDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '프로젝트 ID' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationProjectDto.prototype, "projectId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: '프로젝트 이름' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationProjectDto.prototype, "projectName", void 0);
class CreateNotificationDataDto {
}
exports.CreateNotificationDataDto = CreateNotificationDataDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: NotificationScheduleDto,
        description: '일정 관련 정보 (일정 알림인 경우 필수)',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationScheduleDto),
    __metadata("design:type", NotificationScheduleDto)
], CreateNotificationDataDto.prototype, "schedule", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: NotificationReservationDto,
        description: '예약 관련 정보 (예약 알림인 경우 필수)',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationReservationDto),
    __metadata("design:type", NotificationReservationDto)
], CreateNotificationDataDto.prototype, "reservation", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: NotificationResourceDto,
        description: '자원 관련 정보 (자원/소모품 알림인 경우 필수)',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationResourceDto),
    __metadata("design:type", NotificationResourceDto)
], CreateNotificationDataDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: NotificationProjectDto,
        description: '프로젝트 관련 정보 (프로젝트 알림인 경우 필수)',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationProjectDto),
    __metadata("design:type", NotificationProjectDto)
], CreateNotificationDataDto.prototype, "project", void 0);
class CreateNotificationDto {
}
exports.CreateNotificationDto = CreateNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '알림 제목' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '알림 내용' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "body", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: CreateNotificationDataDto,
        description: '알림 데이터 (타입별 필수 정보)',
    }),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => CreateNotificationDataDto),
    __metadata("design:type", CreateNotificationDataDto)
], CreateNotificationDto.prototype, "notificationData", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: '생성 시간 (YYYY-MM-DD HH:mm 형식)' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: '발송 여부', default: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateNotificationDto.prototype, "isSent", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        enum: notification_type_enum_1.NotificationType,
        description: '알림 타입',
        example: notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED,
    }),
    (0, class_validator_1.IsEnum)(notification_type_enum_1.NotificationType),
    __metadata("design:type", typeof (_c = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _c : Object)
], CreateNotificationDto.prototype, "notificationType", void 0);
class CreateEmployeeNotificationDto {
}
exports.CreateEmployeeNotificationDto = CreateEmployeeNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeNotificationDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '알림 ID' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeNotificationDto.prototype, "notificationId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: '읽음 여부', default: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateEmployeeNotificationDto.prototype, "isRead", void 0);
class SendNotificationDto {
}
exports.SendNotificationDto = SendNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        enum: notification_type_enum_1.NotificationType,
        description: '알림 타입',
        example: notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED,
    }),
    (0, class_validator_1.IsEnum)(notification_type_enum_1.NotificationType),
    __metadata("design:type", typeof (_d = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _d : Object)
], SendNotificationDto.prototype, "notificationType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: CreateNotificationDataDto,
        description: '알림 데이터 (타입별 필수 정보)',
    }),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => CreateNotificationDataDto),
    __metadata("design:type", CreateNotificationDataDto)
], SendNotificationDto.prototype, "notificationData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [String],
        example: ['1256124-ef14-4124-9124-124124124124'],
        description: '알림 수신자 목록 (employeeId)',
    }),
    (0, class_validator_1.IsString)({ each: true }),
    __metadata("design:type", Array)
], SendNotificationDto.prototype, "notificationTarget", void 0);


/***/ }),

/***/ "./src/context/notification/dtos/notification-type-response.dto.ts":
/*!*************************************************************************!*\
  !*** ./src/context/notification/dtos/notification-type-response.dto.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationTypeResponseDto = exports.NotificationTypeRequirementsDto = exports.NotificationTypeProjectRequirementsDto = exports.NotificationTypeReservationRequirementsDto = exports.NotificationTypeScheduleRequirementsDto = exports.NotificationTypeResourceRequirementsDto = exports.NotificationTypeVehicleInfoRequirementsDto = exports.NotificationTypeConsumableRequirementsDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class NotificationTypeConsumableRequirementsDto {
}
exports.NotificationTypeConsumableRequirementsDto = NotificationTypeConsumableRequirementsDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '소모품 정보 객체 필요 여부',
        example: true,
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationTypeConsumableRequirementsDto.prototype, "required", void 0);
class NotificationTypeVehicleInfoRequirementsDto {
}
exports.NotificationTypeVehicleInfoRequirementsDto = NotificationTypeVehicleInfoRequirementsDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '차량 정보 객체 필요 여부',
        example: true,
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationTypeVehicleInfoRequirementsDto.prototype, "required", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: NotificationTypeConsumableRequirementsDto,
        description: '소모품 정보 중첩 요구사항',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationTypeConsumableRequirementsDto),
    __metadata("design:type", NotificationTypeConsumableRequirementsDto)
], NotificationTypeVehicleInfoRequirementsDto.prototype, "consumable", void 0);
class NotificationTypeResourceRequirementsDto {
}
exports.NotificationTypeResourceRequirementsDto = NotificationTypeResourceRequirementsDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 객체 전체 필요 여부',
        example: true,
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationTypeResourceRequirementsDto.prototype, "required", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: NotificationTypeVehicleInfoRequirementsDto,
        description: '차량 정보 중첩 요구사항',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationTypeVehicleInfoRequirementsDto),
    __metadata("design:type", NotificationTypeVehicleInfoRequirementsDto)
], NotificationTypeResourceRequirementsDto.prototype, "vehicleInfo", void 0);
class NotificationTypeScheduleRequirementsDto {
}
exports.NotificationTypeScheduleRequirementsDto = NotificationTypeScheduleRequirementsDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '일정 객체 전체 필요 여부',
        example: true,
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationTypeScheduleRequirementsDto.prototype, "required", void 0);
class NotificationTypeReservationRequirementsDto {
}
exports.NotificationTypeReservationRequirementsDto = NotificationTypeReservationRequirementsDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약 객체 전체 필요 여부',
        example: true,
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationTypeReservationRequirementsDto.prototype, "required", void 0);
class NotificationTypeProjectRequirementsDto {
}
exports.NotificationTypeProjectRequirementsDto = NotificationTypeProjectRequirementsDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '프로젝트 객체 전체 필요 여부',
        example: true,
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], NotificationTypeProjectRequirementsDto.prototype, "required", void 0);
class NotificationTypeRequirementsDto {
}
exports.NotificationTypeRequirementsDto = NotificationTypeRequirementsDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: NotificationTypeScheduleRequirementsDto,
        description: '일정 정보 관련 요구사항',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationTypeScheduleRequirementsDto),
    __metadata("design:type", NotificationTypeScheduleRequirementsDto)
], NotificationTypeRequirementsDto.prototype, "schedule", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: NotificationTypeReservationRequirementsDto,
        description: '예약 정보 관련 요구사항',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationTypeReservationRequirementsDto),
    __metadata("design:type", NotificationTypeReservationRequirementsDto)
], NotificationTypeRequirementsDto.prototype, "reservation", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: NotificationTypeResourceRequirementsDto,
        description: '자원 정보 관련 요구사항',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationTypeResourceRequirementsDto),
    __metadata("design:type", NotificationTypeResourceRequirementsDto)
], NotificationTypeRequirementsDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: NotificationTypeProjectRequirementsDto,
        description: '프로젝트 정보 관련 요구사항',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationTypeProjectRequirementsDto),
    __metadata("design:type", NotificationTypeProjectRequirementsDto)
], NotificationTypeRequirementsDto.prototype, "project", void 0);
class NotificationTypeResponseDto {
}
exports.NotificationTypeResponseDto = NotificationTypeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        enum: notification_type_enum_1.NotificationType,
        description: '알림 타입',
        example: notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED,
    }),
    (0, class_validator_1.IsEnum)(notification_type_enum_1.NotificationType),
    __metadata("design:type", typeof (_a = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _a : Object)
], NotificationTypeResponseDto.prototype, "notificationType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: NotificationTypeRequirementsDto,
        description: '알림 발송 시 필요한 정보 요구사항',
    }),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationTypeRequirementsDto),
    __metadata("design:type", NotificationTypeRequirementsDto)
], NotificationTypeResponseDto.prototype, "requirements", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '알림 타입 설명',
        example: '예약이 확정되었을 때 발송되는 알림',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], NotificationTypeResponseDto.prototype, "description", void 0);


/***/ }),

/***/ "./src/context/notification/dtos/push-subscription.dto.ts":
/*!****************************************************************!*\
  !*** ./src/context/notification/dtos/push-subscription.dto.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PushSubscriptionDto = exports.FCMDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FCMDto {
}
exports.FCMDto = FCMDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], FCMDto.prototype, "token", void 0);
class PushSubscriptionDto {
}
exports.PushSubscriptionDto = PushSubscriptionDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: FCMDto, required: false }),
    __metadata("design:type", FCMDto)
], PushSubscriptionDto.prototype, "fcm", void 0);


/***/ }),

/***/ "./src/context/notification/dtos/response-notification.dto.ts":
/*!********************************************************************!*\
  !*** ./src/context/notification/dtos/response-notification.dto.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PushNotificationSendResult = exports.ResponseNotificationDto = exports.NotificationDataDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const create_notification_dto_1 = __webpack_require__(/*! ./create-notification.dto */ "./src/context/notification/dtos/create-notification.dto.ts");
class NotificationDataDto {
}
exports.NotificationDataDto = NotificationDataDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: create_notification_dto_1.NotificationScheduleDto,
        description: '일정 관련 정보',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => create_notification_dto_1.NotificationScheduleDto),
    __metadata("design:type", typeof (_a = typeof create_notification_dto_1.NotificationScheduleDto !== "undefined" && create_notification_dto_1.NotificationScheduleDto) === "function" ? _a : Object)
], NotificationDataDto.prototype, "schedule", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: create_notification_dto_1.NotificationReservationDto,
        description: '예약 관련 정보',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => create_notification_dto_1.NotificationReservationDto),
    __metadata("design:type", typeof (_b = typeof create_notification_dto_1.NotificationReservationDto !== "undefined" && create_notification_dto_1.NotificationReservationDto) === "function" ? _b : Object)
], NotificationDataDto.prototype, "reservation", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: create_notification_dto_1.NotificationResourceDto,
        description: '자원 관련 정보',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => create_notification_dto_1.NotificationResourceDto),
    __metadata("design:type", typeof (_c = typeof create_notification_dto_1.NotificationResourceDto !== "undefined" && create_notification_dto_1.NotificationResourceDto) === "function" ? _c : Object)
], NotificationDataDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        type: create_notification_dto_1.NotificationProjectDto,
        description: '프로젝트 관련 정보',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => create_notification_dto_1.NotificationProjectDto),
    __metadata("design:type", typeof (_d = typeof create_notification_dto_1.NotificationProjectDto !== "undefined" && create_notification_dto_1.NotificationProjectDto) === "function" ? _d : Object)
], NotificationDataDto.prototype, "project", void 0);
class ResponseNotificationDto {
}
exports.ResponseNotificationDto = ResponseNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '알림 ID' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "notificationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '알림 제목' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '알림 내용' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "body", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: NotificationDataDto,
        description: '알림 데이터 (타입별 정보)',
    }),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => NotificationDataDto),
    __metadata("design:type", NotificationDataDto)
], ResponseNotificationDto.prototype, "notificationData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '생성 시간' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        enum: notification_type_enum_1.NotificationType,
        description: '알림 타입',
        example: notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED,
    }),
    (0, class_validator_1.IsEnum)(notification_type_enum_1.NotificationType),
    __metadata("design:type", typeof (_e = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _e : Object)
], ResponseNotificationDto.prototype, "notificationType", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: '읽음 여부', default: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], ResponseNotificationDto.prototype, "isRead", void 0);
class PushNotificationSendResult {
}
exports.PushNotificationSendResult = PushNotificationSendResult;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '전송 성공 여부' }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], PushNotificationSendResult.prototype, "success", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '응답 메시지' }),
    __metadata("design:type", Object)
], PushNotificationSendResult.prototype, "message", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({ description: '에러 메시지 (실패시)' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], PushNotificationSendResult.prototype, "error", void 0);


/***/ }),

/***/ "./src/context/notification/dtos/send-notification.dto.ts":
/*!****************************************************************!*\
  !*** ./src/context/notification/dtos/send-notification.dto.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PushNotificationDto = exports.PushNotificationPayload = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const push_subscription_dto_1 = __webpack_require__(/*! ./push-subscription.dto */ "./src/context/notification/dtos/push-subscription.dto.ts");
const notification_entity_1 = __webpack_require__(/*! @libs/entities/notification.entity */ "./libs/entities/notification.entity.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
class PushNotificationPayload {
}
exports.PushNotificationPayload = PushNotificationPayload;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], PushNotificationPayload.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], PushNotificationPayload.prototype, "body", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_a = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _a : Object)
], PushNotificationPayload.prototype, "notificationType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_b = typeof notification_entity_1.NotificationData !== "undefined" && notification_entity_1.NotificationData) === "function" ? _b : Object)
], PushNotificationPayload.prototype, "notificationData", void 0);
class PushNotificationDto {
}
exports.PushNotificationDto = PushNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: PushNotificationPayload }),
    __metadata("design:type", PushNotificationPayload)
], PushNotificationDto.prototype, "payload", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: push_subscription_dto_1.PushSubscriptionDto }),
    __metadata("design:type", typeof (_c = typeof push_subscription_dto_1.PushSubscriptionDto !== "undefined" && push_subscription_dto_1.PushSubscriptionDto) === "function" ? _c : Object)
], PushNotificationDto.prototype, "subscription", void 0);


/***/ }),

/***/ "./src/context/notification/notification.context.module.ts":
/*!*****************************************************************!*\
  !*** ./src/context/notification/notification.context.module.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const notification_module_1 = __webpack_require__(/*! @src/domain/notification/notification.module */ "./src/domain/notification/notification.module.ts");
const notification_type_module_1 = __webpack_require__(/*! @src/domain/notification-type/notification-type.module */ "./src/domain/notification-type/notification-type.module.ts");
const employee_notification_module_1 = __webpack_require__(/*! @src/domain/employee-notification/employee-notification.module */ "./src/domain/employee-notification/employee-notification.module.ts");
const notification_context_service_1 = __webpack_require__(/*! ./services/notification.context.service */ "./src/context/notification/services/notification.context.service.ts");
const employee_module_1 = __webpack_require__(/*! @src/domain/employee/employee.module */ "./src/domain/employee/employee.module.ts");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const env_config_1 = __webpack_require__(/*! @libs/configs/env.config */ "./libs/configs/env.config.ts");
const reservation_module_1 = __webpack_require__(/*! @src/domain/reservation/reservation.module */ "./src/domain/reservation/reservation.module.ts");
const fcm_push_adapter_1 = __webpack_require__(/*! ./adapter/fcm-push.adapter */ "./src/context/notification/adapter/fcm-push.adapter.ts");
const cron_notification_context_service_1 = __webpack_require__(/*! ./services/cron-notification.context.service */ "./src/context/notification/services/cron-notification.context.service.ts");
const schedule_notification_context_service_1 = __webpack_require__(/*! ./services/schedule-notification.context.service */ "./src/context/notification/services/schedule-notification.context.service.ts");
let NotificationContextModule = class NotificationContextModule {
};
exports.NotificationContextModule = NotificationContextModule;
exports.NotificationContextModule = NotificationContextModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([entities_1.Employee, entities_1.Notification, entities_1.EmployeeNotification, entities_1.Reservation, entities_1.NotificationTypeEntity]),
            config_1.ConfigModule.forFeature(env_config_1.FIREBASE_CONFIG),
            schedule_1.ScheduleModule.forRoot(),
            employee_module_1.DomainEmployeeModule,
            employee_notification_module_1.DomainEmployeeNotificationModule,
            notification_module_1.DomainNotificationModule,
            notification_type_module_1.DomainNotificationTypeModule,
            reservation_module_1.DomainReservationModule,
        ],
        controllers: [],
        providers: [
            notification_context_service_1.NotificationContextService,
            cron_notification_context_service_1.CronNotificationContextService,
            schedule_notification_context_service_1.ScheduleNotificationContextService,
            fcm_push_adapter_1.FCMAdapter,
        ],
        exports: [notification_context_service_1.NotificationContextService, cron_notification_context_service_1.CronNotificationContextService, schedule_notification_context_service_1.ScheduleNotificationContextService],
    })
], NotificationContextModule);


/***/ }),

/***/ "./src/context/notification/services/cron-notification.context.service.ts":
/*!********************************************************************************!*\
  !*** ./src/context/notification/services/cron-notification.context.service.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CronNotificationContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
const fcm_push_adapter_1 = __webpack_require__(/*! ../adapter/fcm-push.adapter */ "./src/context/notification/adapter/fcm-push.adapter.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
let CronNotificationContextService = class CronNotificationContextService {
    constructor(domainNotificationService, fcmAdapter, domainEmployeeService) {
        this.domainNotificationService = domainNotificationService;
        this.fcmAdapter = fcmAdapter;
        this.domainEmployeeService = domainEmployeeService;
    }
    async 다가오는_일정의_알림을_전송한다(schedules) {
        const now = date_util_1.DateUtil.now().format('YYYY-MM-DD HH:mm');
        const notifications = await this.domainNotificationService.findAll({
            where: {
                isSent: false,
                createdAt: (0, typeorm_1.LessThanOrEqual)(now),
            },
            relations: ['employees'],
        });
        for (const notification of notifications) {
            const notiTarget = notification.employees.map((employee) => employee.employeeId);
            const totalSubscriptions = [];
            for (const employeeId of notiTarget) {
                const subscriptions = await this.구독_목록을_조회한다(employeeId);
                totalSubscriptions.push(...subscriptions);
            }
            if (totalSubscriptions.length === 0) {
                continue;
            }
            try {
                await this.fcmAdapter.sendBulkNotification(totalSubscriptions.map((subscription) => subscription.fcm.token), {
                    title: notification.title,
                    body: notification.body,
                    notificationType: notification.notificationType,
                    notificationData: notification.notificationData,
                });
            }
            catch (error) {
                console.error(`Failed to send notification: ${error}`);
            }
            finally {
                await this.domainNotificationService.update(notification.notificationId, { isSent: true });
            }
        }
    }
    async 구독_목록을_조회한다(employeeId) {
        const employee = await this.domainEmployeeService.findOne({
            where: { employeeId },
            select: { subscriptions: true, isPushNotificationEnabled: true },
        });
        if (!employee ||
            !employee.subscriptions ||
            employee.subscriptions.length === 0 ||
            !employee.isPushNotificationEnabled) {
            return [];
        }
        return employee.subscriptions;
    }
};
exports.CronNotificationContextService = CronNotificationContextService;
exports.CronNotificationContextService = CronNotificationContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _a : Object, typeof (_b = typeof fcm_push_adapter_1.FCMAdapter !== "undefined" && fcm_push_adapter_1.FCMAdapter) === "function" ? _b : Object, typeof (_c = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _c : Object])
], CronNotificationContextService);


/***/ }),

/***/ "./src/context/notification/services/notification.context.service.ts":
/*!***************************************************************************!*\
  !*** ./src/context/notification/services/notification.context.service.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var NotificationContextService_1;
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_microservice_adapter_1 = __webpack_require__(/*! @src/domain/employee/adapters/employee-microservice.adapter */ "./src/domain/employee/adapters/employee-microservice.adapter.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const fcm_push_adapter_1 = __webpack_require__(/*! ../adapter/fcm-push.adapter */ "./src/context/notification/adapter/fcm-push.adapter.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
const notification_type_service_1 = __webpack_require__(/*! @src/domain/notification-type/notification-type.service */ "./src/domain/notification-type/notification-type.service.ts");
const employee_notification_service_1 = __webpack_require__(/*! @src/domain/employee-notification/employee-notification.service */ "./src/domain/employee-notification/employee-notification.service.ts");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let NotificationContextService = NotificationContextService_1 = class NotificationContextService {
    constructor(employeeMicroserviceAdapter, fcmAdapter, domainNotificationService, domainNotificationTypeService, domainEmployeeNotificationService, domainEmployeeService, dataSource) {
        this.employeeMicroserviceAdapter = employeeMicroserviceAdapter;
        this.fcmAdapter = fcmAdapter;
        this.domainNotificationService = domainNotificationService;
        this.domainNotificationTypeService = domainNotificationTypeService;
        this.domainEmployeeNotificationService = domainEmployeeNotificationService;
        this.domainEmployeeService = domainEmployeeService;
        this.dataSource = dataSource;
        this.logger = new common_1.Logger(NotificationContextService_1.name);
    }
    async 내_알림_목록을_조회한다(employeeId, query, resourceType) {
        const whereCondition = {
            employees: { employeeId },
            isSent: true,
        };
        if (resourceType) {
            whereCondition.notificationData = (0, typeorm_1.Raw)((alias) => `${alias} -> 'resource' ->> 'resourceType' = :resourceType`, {
                resourceType,
            });
        }
        const options = {
            where: whereCondition,
        };
        const total = await this.domainNotificationService.count({
            where: options.where,
        });
        if (query) {
            options.skip = query.getOffset();
            options.take = query.limit;
        }
        const notifications = await this.domainNotificationService.findAll({
            ...options,
            relations: ['employees'],
            order: {
                createdAt: 'DESC',
            },
        });
        return {
            items: notifications.map((notification) => {
                return {
                    notificationId: notification.notificationId,
                    title: notification.title,
                    body: notification.body,
                    notificationData: notification.notificationData,
                    notificationType: notification.notificationType,
                    createdAt: notification.createdAt,
                    isRead: notification.employees.find((employee) => employee.employeeId === employeeId).isRead,
                };
            }),
            meta: {
                total,
                page: query.page,
                limit: query.limit,
                hasNext: query.page * query.limit < total,
            },
        };
    }
    async 시스템_관리자들에게_알림을_발송한다() {
    }
    async 소모품교체_알림을_조회한다(resourceId, consumableName) {
        const notifications = await this.domainNotificationService.findAll({
            where: {
                notificationType: notification_type_enum_1.NotificationType.RESOURCE_CONSUMABLE_DELAYED_REPLACING,
                notificationData: (0, typeorm_1.Raw)((alias) => `${alias} -> 'resource' ->> 'resourceId' = '${resourceId}' AND ${alias} -> 'resource' -> 'vehicleInfo' -> 'consumable' ->> 'consumableName' = '${consumableName}'`),
            },
        });
        return notifications;
    }
    async 차량반납_알림을_조회한다(reservationId) {
        const notifications = await this.domainNotificationService.findAll({
            where: {
                notificationData: (0, typeorm_1.Raw)((alias) => `${alias} -> 'reservation' ->> 'reservationId' = '${reservationId}'`),
                notificationType: notification_type_enum_1.NotificationType.RESOURCE_VEHICLE_DELAYED_RETURNED,
            },
        });
        return notifications;
    }
    async 알림을_읽음_처리한다(employeeId, notificationId) {
        const employeeNotification = await this.domainEmployeeNotificationService.findOne({
            where: {
                employeeId,
                notificationId,
            },
        });
        if (!employeeNotification) {
            throw new common_1.BadRequestException('There is no data');
        }
        await this.domainEmployeeNotificationService.update(employeeNotification.employeeNotificationId, {
            isRead: true,
        });
    }
    async 모든_알림을_읽음_처리한다(employeeId) {
        try {
            this.logger.log(`모든 알림 읽음 처리 요청: ${employeeId}`);
            const employeeNotifications = await this.domainEmployeeNotificationService.findAll({
                where: {
                    employeeId,
                    isRead: false,
                },
            });
            if (employeeNotifications.length > 0) {
                const updatePromises = employeeNotifications.map((notification) => this.domainEmployeeNotificationService.update(notification.employeeNotificationId, {
                    isRead: true,
                }));
                await Promise.all(updatePromises);
                this.logger.log(`모든 알림 읽음 처리 완료: ${employeeId} - ${employeeNotifications.length}개 처리`);
            }
            else {
                this.logger.log(`읽지 않은 알림이 없습니다: ${employeeId}`);
            }
        }
        catch (error) {
            this.logger.error(`모든 알림 읽음 처리 실패: ${error.message}`, error.stack);
            throw new common_1.BadRequestException('모든 알림 읽음 처리 중 오류가 발생했습니다.');
        }
    }
    async PUSH_알림을_구독한다(employeeId, subscription) {
        const employee = await this.domainEmployeeService.findOne({
            where: { employeeId },
        });
        if (!employee) {
            throw new common_1.BadRequestException('Employee not found');
        }
        employee.subscriptions = [subscription];
        const updatedEmployee = await this.domainEmployeeService.save(employee);
        return updatedEmployee.subscriptions.length > 0;
    }
    async 구독_목록을_조회한다(employeeIds) {
        const employees = await this.domainEmployeeService.findAll({
            where: { employeeId: (0, typeorm_1.In)(employeeIds) },
            select: { subscriptions: true, isPushNotificationEnabled: true },
        });
        if (!employees || employees.length === 0) {
            return [];
        }
        return employees
            .filter((employee) => employee.isPushNotificationEnabled && employee.subscriptions && employee.subscriptions.length > 0)
            .flatMap((employee) => employee.subscriptions.map((subscription) => subscription.fcm.token));
    }
    async 알림_내용을_생성한다(notificationType, notificationData) {
        const createNotificationDto = {
            title: '',
            body: '',
            notificationType: notificationType,
            notificationData: notificationData,
            createdAt: date_util_1.DateUtil.now().format('YYYY-MM-DD HH:mm'),
            isSent: false,
        };
        try {
            const template = await this.domainNotificationTypeService.findTemplateByType(notificationType);
            if (template) {
                createNotificationDto.title =
                    notificationType === notification_type_enum_1.NotificationType.RESERVATION_DATE_REMINDING
                        ? this._생성_리마인더_알림(notificationData)
                        : this._템플릿_변수를_치환한다(template.defaultTitleTemplate, notificationData);
                createNotificationDto.body = this._템플릿_변수를_치환한다(template.defaultBodyTemplate, notificationData);
            }
            else {
                this.logger.warn(`알림 타입 템플릿을 찾을 수 없습니다: ${notificationType}`);
                createNotificationDto.title = `[알림] ${this._제목_추출(notificationData)}`;
                createNotificationDto.body = this._날짜_추출(notificationData);
            }
        }
        catch (error) {
            this.logger.error(`알림 템플릿 조회 중 오류 발생: ${error.message}`, error.stack);
            createNotificationDto.title = `[알림] ${this._제목_추출(notificationData)}`;
            createNotificationDto.body = this._날짜_추출(notificationData);
        }
        return createNotificationDto;
    }
    async 알림_타입_목록을_조회한다() {
        const notificationTypes = await this.domainNotificationTypeService.findAll();
        return notificationTypes.map((notificationType) => ({
            notificationType: notificationType.notificationType,
            requirements: notificationType.requirements,
            description: notificationType.description,
        }));
    }
    async 알림을_저장한다(notificationDto, employeeIds) {
        const notification = await this.domainNotificationService.save(notificationDto);
        for (const employeeId of employeeIds) {
            await this.domainEmployeeNotificationService.save({
                employeeId,
                notificationId: notification.notificationId,
                isRead: false,
            });
        }
        return notification;
    }
    async 알림을_전송한다(tokens, payload) {
        return await this.fcmAdapter.sendBulkNotification(tokens, payload);
    }
    async 알림_전송_프로세스를_진행한다(notificationType, notificationData, targetEmployeeIds) {
        const notificationContent = await this.알림_내용을_생성한다(notificationType, notificationData);
        const notification = await this.알림을_저장한다(notificationContent, targetEmployeeIds);
        const tokens = await this.구독_목록을_조회한다(targetEmployeeIds);
        if (tokens.length === 0) {
            return;
        }
        await this.알림을_전송한다(tokens, {
            title: notification.title,
            body: notification.body,
            notificationType: notification.notificationType,
            notificationData: notification.notificationData,
        });
        await this.domainNotificationService.setSentTrue([notification.notificationId]);
    }
    _템플릿_변수를_치환한다(template, data) {
        let result = template;
        result = result.replace(/\{title\}/g, this._제목_추출(data));
        result = result.replace(/\{dateRange\}/g, this._날짜_추출(data));
        result = result.replace(/\{resourceName\}/g, this._자원명_추출(data));
        const consumableName = data.resource?.vehicleInfo?.consumable?.consumableName || '소모품';
        result = result.replace(/\{consumableName\}/g, consumableName);
        const beforeMinutes = data.schedule?.beforeMinutes || 10;
        result = result.replace(/\{beforeMinutes\}/g, beforeMinutes.toString());
        return result;
    }
    _제목_추출(data) {
        return data.schedule?.scheduleTitle || data.reservation?.reservationTitle || '제목 없음';
    }
    _날짜_추출(data) {
        if (data.reservation?.reservationDate) {
            return data.reservation.reservationDate;
        }
        if (data.schedule?.startDate && data.schedule?.endDate) {
            return date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(data.schedule.startDate), date_util_1.DateUtil.format(data.schedule.endDate));
        }
        return '';
    }
    _자원명_추출(data) {
        return data.resource?.resourceName || '자원 정보 없음';
    }
    _생성_리마인더_알림(data) {
        const now = date_util_1.DateUtil.now().toDate();
        const diffInMilliseconds = date_util_1.DateUtil.parse(data.schedule.startDate).toDate().getTime() - now.getTime();
        const diffInMinutes = Math.floor(diffInMilliseconds / (1000 * 60));
        const days = Math.floor(diffInMinutes / (24 * 60));
        const hours = Math.floor((diffInMinutes % (24 * 60)) / 60);
        const minutes = diffInMinutes % 60;
        const parts = [];
        if (diffInMilliseconds > 0) {
            switch (data.resource.resourceType) {
                case resource_type_enum_1.ResourceType.MEETING_ROOM:
                    parts.push('회의 시작까지');
                    break;
                case resource_type_enum_1.ResourceType.VEHICLE:
                    parts.push('차량 이용 시작까지');
                    break;
                case resource_type_enum_1.ResourceType.ACCOMMODATION:
                    parts.push('입실 까지');
                    break;
                case resource_type_enum_1.ResourceType.EQUIPMENT:
                    parts.push('장비 이용 시작까지');
                    break;
            }
            if (days > 0) {
                parts.push(`${days}일`);
            }
            if (hours > 0) {
                parts.push(`${hours}시간`);
            }
            if (minutes > 0 || parts.length === 0) {
                parts.push(`${minutes}분`);
            }
            parts.push('남았습니다.');
        }
        else {
            switch (data.resource.resourceType) {
                case resource_type_enum_1.ResourceType.MEETING_ROOM:
                    parts.push('회의 참여 알림');
                    break;
                case resource_type_enum_1.ResourceType.VEHICLE:
                    parts.push('차량 탑승 알림');
                    break;
                case resource_type_enum_1.ResourceType.ACCOMMODATION:
                    parts.push('입실 알림');
                    break;
                case resource_type_enum_1.ResourceType.EQUIPMENT:
                    parts.push('장비 이용 알림');
                    break;
            }
        }
        const timeDifferencePhrase = parts.join(' ');
        return `[${data.reservation.reservationTitle}]\n${timeDifferencePhrase}`;
    }
};
exports.NotificationContextService = NotificationContextService;
exports.NotificationContextService = NotificationContextService = NotificationContextService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_microservice_adapter_1.EmployeeMicroserviceAdapter !== "undefined" && employee_microservice_adapter_1.EmployeeMicroserviceAdapter) === "function" ? _a : Object, typeof (_b = typeof fcm_push_adapter_1.FCMAdapter !== "undefined" && fcm_push_adapter_1.FCMAdapter) === "function" ? _b : Object, typeof (_c = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _c : Object, typeof (_d = typeof notification_type_service_1.DomainNotificationTypeService !== "undefined" && notification_type_service_1.DomainNotificationTypeService) === "function" ? _d : Object, typeof (_e = typeof employee_notification_service_1.DomainEmployeeNotificationService !== "undefined" && employee_notification_service_1.DomainEmployeeNotificationService) === "function" ? _e : Object, typeof (_f = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _f : Object, typeof (_g = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _g : Object])
], NotificationContextService);


/***/ }),

/***/ "./src/context/notification/services/schedule-notification.context.service.ts":
/*!************************************************************************************!*\
  !*** ./src/context/notification/services/schedule-notification.context.service.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var ScheduleNotificationContextService_1;
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleNotificationContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const notification_context_service_1 = __webpack_require__(/*! ./notification.context.service */ "./src/context/notification/services/notification.context.service.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
let ScheduleNotificationContextService = ScheduleNotificationContextService_1 = class ScheduleNotificationContextService {
    constructor(notificationContextService) {
        this.notificationContextService = notificationContextService;
        this.logger = new common_1.Logger(ScheduleNotificationContextService_1.name);
    }
    async 일정_생성_알림을_전송한다(data, targetEmployeeIds, adminEmployeeIds) {
        const notificationData = {
            schedule: {
                scheduleId: data.schedule.scheduleId,
                scheduleTitle: data.schedule.title,
                startDate: date_util_1.DateUtil.format(data.schedule.startDate, 'YYYY-MM-DD HH:mm'),
                endDate: date_util_1.DateUtil.format(data.schedule.endDate, 'YYYY-MM-DD HH:mm'),
            },
            reservation: {
                reservationId: data.reservation?.reservationId,
            },
            resource: {
                resourceId: data.resource?.resourceId,
                resourceName: data.resource?.name,
                resourceType: data.resource?.type,
            },
        };
        if (data.reservation?.status === reservation_type_enum_1.ReservationStatus.PENDING &&
            data.resource?.type === resource_type_enum_1.ResourceType.ACCOMMODATION) {
            await this.notificationContextService.알림_전송_프로세스를_진행한다(notification_type_enum_1.NotificationType.RESERVATION_STATUS_PENDING, notificationData, adminEmployeeIds);
        }
        else if (data.reservation?.status === reservation_type_enum_1.ReservationStatus.CONFIRMED) {
            await this.notificationContextService.알림_전송_프로세스를_진행한다(notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED, notificationData, targetEmployeeIds);
        }
    }
    async 일정_취소_알림을_전송한다(data, targetEmployeeIds) {
        const notificationData = {
            schedule: {
                scheduleId: data.schedule.scheduleId,
                scheduleTitle: data.schedule.title,
                startDate: date_util_1.DateUtil.format(data.schedule.startDate, 'YYYY-MM-DD HH:mm'),
                endDate: date_util_1.DateUtil.format(data.schedule.endDate, 'YYYY-MM-DD HH:mm'),
            },
            reservation: {
                reservationId: data.reservation?.reservationId,
            },
            resource: {
                resourceId: data.resource?.resourceId,
                resourceName: data.resource?.name,
                resourceType: data.resource?.type,
            },
        };
        await this.notificationContextService.알림_전송_프로세스를_진행한다(notification_type_enum_1.NotificationType.RESERVATION_STATUS_CANCELLED, notificationData, targetEmployeeIds);
    }
    async 일정_수정_알림을_전송한다(updateScenarios, data, targetEmployeeIds) {
        const notificationData = {
            schedule: {
                scheduleId: data.schedule.scheduleId,
                scheduleTitle: data.schedule.title,
                startDate: date_util_1.DateUtil.format(data.schedule.startDate, 'YYYY-MM-DD HH:mm'),
                endDate: date_util_1.DateUtil.format(data.schedule.endDate, 'YYYY-MM-DD HH:mm'),
            },
            reservation: {
                reservationId: data.reservation?.reservationId,
            },
            resource: {
                resourceId: data.resource?.resourceId,
                resourceName: data.resource?.name,
                resourceType: data.resource?.type,
            },
        };
        if (updateScenarios.isDateUpdate || updateScenarios.isResourceUpdate) {
            await this.notificationContextService.알림_전송_프로세스를_진행한다(notification_type_enum_1.NotificationType.RESERVATION_TIME_CHANGED, notificationData, targetEmployeeIds);
        }
        else if (updateScenarios.isInfoUpdate && targetEmployeeIds.length > 0) {
            await this.notificationContextService.알림_전송_프로세스를_진행한다(notification_type_enum_1.NotificationType.RESERVATION_PARTICIPANT_CHANGED, notificationData, targetEmployeeIds);
        }
    }
};
exports.ScheduleNotificationContextService = ScheduleNotificationContextService;
exports.ScheduleNotificationContextService = ScheduleNotificationContextService = ScheduleNotificationContextService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_context_service_1.NotificationContextService !== "undefined" && notification_context_service_1.NotificationContextService) === "function" ? _a : Object])
], ScheduleNotificationContextService);


/***/ }),

/***/ "./src/context/project/project.context.module.ts":
/*!*******************************************************!*\
  !*** ./src/context/project/project.context.module.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ProjectContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const project_context_service_1 = __webpack_require__(/*! ./project.context.service */ "./src/context/project/project.context.service.ts");
let ProjectContextModule = class ProjectContextModule {
};
exports.ProjectContextModule = ProjectContextModule;
exports.ProjectContextModule = ProjectContextModule = __decorate([
    (0, common_1.Module)({
        imports: [],
        providers: [project_context_service_1.ProjectContextService],
        exports: [project_context_service_1.ProjectContextService],
    })
], ProjectContextModule);


/***/ }),

/***/ "./src/context/project/project.context.service.ts":
/*!********************************************************!*\
  !*** ./src/context/project/project.context.service.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var ProjectContextService_1;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ProjectContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
let ProjectContextService = ProjectContextService_1 = class ProjectContextService {
    constructor() {
        this.logger = new common_1.Logger(ProjectContextService_1.name);
    }
    async 프로젝트_존재여부를_확인한다(projectId) {
        return true;
    }
};
exports.ProjectContextService = ProjectContextService;
exports.ProjectContextService = ProjectContextService = ProjectContextService_1 = __decorate([
    (0, common_1.Injectable)()
], ProjectContextService);


/***/ }),

/***/ "./src/context/reservation/reservation.context.module.ts":
/*!***************************************************************!*\
  !*** ./src/context/reservation/reservation.context.module.ts ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const reservation_module_1 = __webpack_require__(/*! @src/domain/reservation/reservation.module */ "./src/domain/reservation/reservation.module.ts");
const reservation_participant_module_1 = __webpack_require__(/*! @src/domain/reservation-participant/reservation-participant.module */ "./src/domain/reservation-participant/reservation-participant.module.ts");
const employee_module_1 = __webpack_require__(/*! @src/domain/employee/employee.module */ "./src/domain/employee/employee.module.ts");
const resource_module_1 = __webpack_require__(/*! @src/domain/resource/resource.module */ "./src/domain/resource/resource.module.ts");
const notification_module_1 = __webpack_require__(/*! @src/domain/notification/notification.module */ "./src/domain/notification/notification.module.ts");
const employee_notification_module_1 = __webpack_require__(/*! @src/domain/employee-notification/employee-notification.module */ "./src/domain/employee-notification/employee-notification.module.ts");
const reservation_vehicle_module_1 = __webpack_require__(/*! @src/domain/reservation-vehicle/reservation-vehicle.module */ "./src/domain/reservation-vehicle/reservation-vehicle.module.ts");
const vehicle_info_module_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.module */ "./src/domain/vehicle-info/vehicle-info.module.ts");
const file_module_1 = __webpack_require__(/*! @src/domain/file/file.module */ "./src/domain/file/file.module.ts");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
const file_context_module_1 = __webpack_require__(/*! ../file/file.context.module */ "./src/context/file/file.context.module.ts");
const reservation_context_service_1 = __webpack_require__(/*! ./services/reservation.context.service */ "./src/context/reservation/services/reservation.context.service.ts");
let ReservationContextModule = class ReservationContextModule {
};
exports.ReservationContextModule = ReservationContextModule;
exports.ReservationContextModule = ReservationContextModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([entities_1.Reservation, entities_1.ReservationParticipant, entities_1.Employee, entities_1.Resource, entities_1.ReservationVehicle]),
            reservation_module_1.DomainReservationModule,
            reservation_participant_module_1.DomainReservationParticipantModule,
            employee_module_1.DomainEmployeeModule,
            resource_module_1.DomainResourceModule,
            notification_module_1.DomainNotificationModule,
            employee_notification_module_1.DomainEmployeeNotificationModule,
            reservation_vehicle_module_1.DomainReservationVehicleModule,
            vehicle_info_module_1.DomainVehicleInfoModule,
            file_module_1.DomainFileModule,
            file_context_module_1.FileContextModule,
            schedule_1.ScheduleModule.forRoot(),
        ],
        controllers: [],
        providers: [
            reservation_context_service_1.ReservationContextService,
        ],
        exports: [
            reservation_context_service_1.ReservationContextService,
        ],
    })
], ReservationContextModule);


/***/ }),

/***/ "./src/context/reservation/services/reservation.context.service.ts":
/*!*************************************************************************!*\
  !*** ./src/context/reservation/services/reservation.context.service.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const notification_service_1 = __webpack_require__(/*! @src/domain/notification/notification.service */ "./src/domain/notification/notification.service.ts");
const employee_notification_service_1 = __webpack_require__(/*! @src/domain/employee-notification/employee-notification.service */ "./src/domain/employee-notification/employee-notification.service.ts");
const reservation_vehicle_service_1 = __webpack_require__(/*! @src/domain/reservation-vehicle/reservation-vehicle.service */ "./src/domain/reservation-vehicle/reservation-vehicle.service.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const file_context_service_1 = __webpack_require__(/*! ../../file/services/file.context.service */ "./src/context/file/services/file.context.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const business_dto_index_1 = __webpack_require__(/*! @src/business.dto.index */ "./src/business.dto.index.ts");
const business_dto_index_2 = __webpack_require__(/*! @src/business.dto.index */ "./src/business.dto.index.ts");
let ReservationContextService = class ReservationContextService {
    constructor(domainReservationService, domainResourceService, domainNotificationService, domainEmployeeNotificationService, domainReservationVehicleService, domainVehicleInfoService, domainFileService, fileContextService, dataSource) {
        this.domainReservationService = domainReservationService;
        this.domainResourceService = domainResourceService;
        this.domainNotificationService = domainNotificationService;
        this.domainEmployeeNotificationService = domainEmployeeNotificationService;
        this.domainReservationVehicleService = domainReservationVehicleService;
        this.domainVehicleInfoService = domainVehicleInfoService;
        this.domainFileService = domainFileService;
        this.fileContextService = fileContextService;
        this.dataSource = dataSource;
    }
    async 예약목록을_조회한다(startDate, endDate, resourceType, resourceId, status) {
        if (startDate && endDate && startDate > endDate) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_DATE_RANGE);
        }
        else if ((startDate && !endDate) || (!startDate && endDate)) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_DATE_REQUIRED);
        }
        if (status && status.filter((s) => reservation_type_enum_1.ReservationStatus[s]).length === 0) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.INVALID_STATUS);
        }
        const regex = /(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/;
        let where = {};
        if (status && status.length > 0) {
            where.status = (0, typeorm_2.In)(status);
        }
        if (resourceType) {
            where.resource = {
                type: resourceType,
            };
        }
        if (resourceId) {
            where.resource = {
                resourceId,
            };
        }
        if (startDate && endDate) {
            where = {
                ...where,
                startDate: (0, typeorm_2.LessThan)(date_util_1.DateUtil.date(regex.test(endDate) ? endDate : endDate + ' 23:59:59').toDate()),
                endDate: (0, typeorm_2.MoreThan)(date_util_1.DateUtil.date(regex.test(startDate) ? startDate : startDate + ' 00:00:00').toDate()),
            };
        }
        const reservations = await this.domainReservationService.findAll({
            where,
            relations: ['resource', 'participants', 'participants.employee'],
            withDeleted: true,
        });
        const reservationResponseDtos = reservations.map((reservation) => new business_dto_index_1.ReservationWithRelationsResponseDto(reservation));
        return reservationResponseDtos;
    }
    async 확인필요_예약목록을_조회한다(query) {
        const { page, limit } = query;
        const where = [
            {
                status: reservation_type_enum_1.ReservationStatus.PENDING,
                resource: {
                    type: resource_type_enum_1.ResourceType.ACCOMMODATION,
                },
            },
        ];
        const options = {
            where,
            relations: ['resource', 'reservationVehicles', 'participants', 'participants.employee'],
            withDeleted: true,
        };
        const reservations = await this.domainReservationService.findAll(options);
        const reservationResponseDtos = reservations.map((reservation) => new business_dto_index_1.ReservationWithRelationsResponseDto(reservation));
        return {
            items: reservationResponseDtos,
            meta: {
                total: reservations.length,
                page: 1,
                limit: reservations.length,
                hasNext: false,
            },
        };
    }
    async 예약_상세를_조회한다(user, reservationId) {
        const reservation = await this.domainReservationService.findOne({
            where: { reservationId },
            relations: [
                'resource',
                'resource.vehicleInfo',
                'resource.meetingRoomInfo',
                'resource.accommodationInfo',
                'participants',
                'participants.employee',
                'reservationVehicles',
            ],
            withDeleted: true,
        });
        console.log(reservation);
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        const reservationResponseDto = new business_dto_index_1.ReservationWithRelationsResponseDto(reservation);
        reservationResponseDto.isMine = reservationResponseDto.reservers.some((reserver) => reserver.employeeId === user.employeeId);
        reservationResponseDto.returnable =
            reservationResponseDto.resource.type === resource_type_enum_1.ResourceType.VEHICLE
                ? reservationResponseDto.isMine &&
                    reservationResponseDto.reservationVehicles.some((reservationVehicle) => !reservationVehicle.isReturned) &&
                    reservationResponseDto.startDate <= date_util_1.DateUtil.now().format()
                : null;
        reservationResponseDto.modifiable =
            [reservation_type_enum_1.ReservationStatus.PENDING, reservation_type_enum_1.ReservationStatus.CONFIRMED].includes(reservation.status) &&
                reservationResponseDto.isMine &&
                reservationResponseDto.endDate > date_util_1.DateUtil.now().format();
        const notifications = await this.domainNotificationService.findAll({
            where: {
                notificationData: (0, typeorm_2.Raw)((alias) => `${alias} -> 'reservation' ->> 'reservationId' = '${reservation.reservationId}'`),
                employees: {
                    employeeId: user.employeeId,
                    isRead: false,
                },
            },
            relations: ['employees'],
        });
        if (notifications.length > 0) {
            const employeeNotifications = notifications
                .map((notification) => notification.employees.map((employee) => employee.employeeNotificationId).flat())
                .flat();
            const updatedEmployeeNotifications = await Promise.all(employeeNotifications.map((employeeNotificationId) => this.domainEmployeeNotificationService.update(employeeNotificationId, {
                isRead: true,
            })));
        }
        return reservationResponseDto;
    }
    async 예약상태를_변경한다(reservationId, updateDto) {
        const reservation = await this.domainReservationService.findOne({
            where: { reservationId },
            withDeleted: true,
        });
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        if (reservation.status === reservation_type_enum_1.ReservationStatus.CLOSED) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.CANNOT_UPDATE_STATUS(reservation.status));
        }
        const updatedReservation = await this.domainReservationService.update(reservationId, updateDto, {
            relations: ['resource', 'resource.resourceManagers', 'participants', 'participants.employee'],
            withDeleted: true,
        });
        const notiTarget = [
            ...updatedReservation.resource.resourceManagers.map((manager) => manager.employeeId),
            ...updatedReservation.participants.map((reserver) => reserver.employeeId),
        ];
        const responseDto = new business_dto_index_2.ReservationResponseDto();
        Object.assign(responseDto, updatedReservation);
        return responseDto;
    }
    async 차량을_반납한다(user, reservationId, returnDto) {
        const reservation = await this.domainReservationService.findOne({
            where: { reservationId },
            relations: ['resource', 'resource.vehicleInfo', 'resource.resourceManagers'],
            withDeleted: true,
        });
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        if (reservation.resource.type !== resource_type_enum_1.ResourceType.VEHICLE) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_RESOURCE_TYPE);
        }
        if (reservation.status !== reservation_type_enum_1.ReservationStatus.CONFIRMED) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.CANNOT_RETURN_STATUS(reservation.status));
        }
        if (reservation.resource.vehicleInfo.totalMileage > returnDto.totalMileage) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_MILEAGE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const reservationVehicles = await this.domainReservationVehicleService.findAll({
                where: { reservationId },
                relations: ['reservation', 'vehicleInfo'],
            });
            if (!reservationVehicles || reservationVehicles.length === 0) {
                throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.VEHICLE_NOT_FOUND);
            }
            const reservationVehicle = reservationVehicles[0];
            if (reservationVehicle.isReturned) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.VEHICLE_ALREADY_RETURNED);
            }
            await this.domainReservationService.update(reservationId, {
                status: reservation_type_enum_1.ReservationStatus.CLOSED,
            }, { queryRunner });
            await this.domainReservationVehicleService.update(reservationVehicle.reservationVehicleId, {
                endOdometer: returnDto.totalMileage,
                isReturned: true,
                returnedAt: date_util_1.DateUtil.now().toDate(),
                location: returnDto.location,
                returnedBy: user.employeeId,
            }, { queryRunner });
            const vehicleInfoId = reservation.resource.vehicleInfo.vehicleInfoId;
            await this.domainResourceService.update(reservation.resource.resourceId, { location: returnDto.location }, { queryRunner });
            if (!returnDto.parkingLocationImages)
                returnDto.parkingLocationImages = [];
            if (!returnDto.odometerImages)
                returnDto.odometerImages = [];
            if (!returnDto.indoorImages)
                returnDto.indoorImages = [];
            const allFileIds = [
                ...returnDto.parkingLocationImages,
                ...returnDto.odometerImages,
                ...returnDto.indoorImages,
            ];
            if (allFileIds.length > 0) {
                await this.fileContextService.파일들을_영구로_변경한다(allFileIds, queryRunner);
            }
            await this.fileContextService.차량예약에_파일들을_연결한다(reservationVehicle.reservationVehicleId, {
                parkingLocationImages: returnDto.parkingLocationImages,
                odometerImages: returnDto.odometerImages,
                indoorImages: returnDto.indoorImages,
            }, queryRunner);
            let parkingLocationFilePaths = [];
            let odometerFilePaths = [];
            let indoorFilePaths = [];
            if (returnDto.parkingLocationImages.length > 0) {
                const files = await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_2.In)(returnDto.parkingLocationImages) },
                });
                parkingLocationFilePaths = files.map((file) => file.filePath);
            }
            if (returnDto.odometerImages.length > 0) {
                const files = await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_2.In)(returnDto.odometerImages) },
                });
                odometerFilePaths = files.map((file) => file.filePath);
            }
            if (returnDto.indoorImages.length > 0) {
                const files = await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_2.In)(returnDto.indoorImages) },
                });
                indoorFilePaths = files.map((file) => file.filePath);
            }
            await this.domainVehicleInfoService.update(vehicleInfoId, {
                totalMileage: returnDto.totalMileage,
                leftMileage: returnDto.leftMileage,
                parkingLocationImages: parkingLocationFilePaths,
                odometerImages: odometerFilePaths,
                indoorImages: indoorFilePaths,
            }, { queryRunner });
            await this.fileContextService.차량정보에_파일들을_연결한다(vehicleInfoId, {
                parkingLocationImages: returnDto.parkingLocationImages,
                odometerImages: returnDto.odometerImages,
                indoorImages: returnDto.indoorImages,
            }, queryRunner);
            const notiTarget = [user.employeeId];
            await queryRunner.commitTransaction();
            return true;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            console.error('Error in returnVehicle:', error);
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async 예약을_종료한다() {
        const now = date_util_1.DateUtil.now().format();
        const notClosedReservations = await this.domainReservationService.findAll({
            where: {
                status: (0, typeorm_2.In)([reservation_type_enum_1.ReservationStatus.CONFIRMED, reservation_type_enum_1.ReservationStatus.PENDING]),
                resource: {
                    type: (0, typeorm_2.Not)(resource_type_enum_1.ResourceType.VEHICLE),
                },
                endDate: (0, typeorm_2.LessThanOrEqual)(date_util_1.DateUtil.date(now).toDate()),
            },
        });
        for (const reservation of notClosedReservations) {
            await this.domainReservationService.update(reservation.reservationId, { status: reservation_type_enum_1.ReservationStatus.CLOSED });
        }
    }
    async 시작주행거리를_처리한다() {
        const now = date_util_1.DateUtil.now().format();
        const vehicleReservations = await this.domainReservationService.findAll({
            where: {
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                resource: {
                    type: resource_type_enum_1.ResourceType.VEHICLE,
                },
                startDate: (0, typeorm_2.Between)(date_util_1.DateUtil.date(now).addMinutes(-2).toDate(), date_util_1.DateUtil.date(now).addMinutes(2).toDate()),
            },
            relations: ['reservationVehicles', 'resource', 'resource.vehicleInfo'],
        });
        for (const reservation of vehicleReservations) {
            const reservationVehicle = reservation.reservationVehicles[0];
            const vehicleInfo = reservation.resource.vehicleInfo;
            await this.domainReservationVehicleService.update(reservationVehicle.reservationVehicleId, {
                startOdometer: vehicleInfo.totalMileage,
            });
        }
    }
    async 지연반납_예약을_조회한다(employeeId) {
        const delayedReturnReservations = await this.domainReservationService.findAll({
            where: {
                participants: {
                    employeeId: employeeId,
                    type: reservation_type_enum_1.ParticipantsType.RESERVER,
                },
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                endDate: (0, typeorm_2.LessThan)(date_util_1.DateUtil.now().toDate()),
                reservationVehicles: {
                    isReturned: false,
                },
            },
            relations: ['participants', 'resource', 'reservationVehicles'],
        });
        return delayedReturnReservations;
    }
    async 모든_지연반납_차량을_조회한다() {
        const delayedReturnVehicles = await this.domainReservationService.findAll({
            where: {
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                endDate: (0, typeorm_2.LessThan)(date_util_1.DateUtil.now().toDate()),
                reservationVehicles: {
                    isReturned: false,
                },
            },
            relations: ['resource', 'reservationVehicles', 'participants', 'participants.employee'],
        });
        return delayedReturnVehicles.map((reservation) => {
            const manager = reservation.participants.find((participant) => participant.type === reservation_type_enum_1.ParticipantsType.RESERVER);
            return {
                type: '차량반납지연',
                title: `${reservation.resource.name} 반납 지연 중`,
                reservationId: reservation.reservationId,
                resourceId: reservation.resource.resourceId,
                resourceName: reservation.resource.name,
                startDate: reservation.startDate,
                endDate: reservation.endDate,
                manager: manager
                    ? {
                        employeeId: manager.employee.employeeId,
                        name: manager.employee.name,
                        employeeNumber: manager.employee.employeeNumber,
                        department: manager.employee.department,
                        position: manager.employee.position,
                    }
                    : null,
            };
        });
    }
    async 자원예약이_가능한지_확인한다(resourceId, startDate, endDate) {
        return await this.domainReservationService.checkReservationConflicts(resourceId, startDate, endDate);
    }
    async 자원예약을_생성한다(reservationData, queryRunner) {
        const reservationEntity = {
            title: reservationData.title,
            description: reservationData.description,
            resourceId: reservationData.resourceId,
            startDate: reservationData.startDate,
            endDate: reservationData.endDate,
            status: reservationData.status,
        };
        const savedReservation = await this.domainReservationService.save(reservationEntity, {
            queryRunner: queryRunner,
        });
        if (reservationData.resourceType === resource_type_enum_1.ResourceType.VEHICLE) {
            const resource = await this.domainResourceService.findOne({
                where: { resourceId: reservationData.resourceId },
            });
            const vehicleInfo = await this.domainVehicleInfoService.findByResourceId(reservationData.resourceId);
            if (!vehicleInfo) {
                throw new common_1.NotFoundException('차량 정보를 찾을 수 없습니다.');
            }
            const reservationVehicleEntity = {
                reservationId: savedReservation.reservationId,
                vehicleInfoId: vehicleInfo.vehicleInfoId,
                startOdometer: vehicleInfo.totalMileage,
                isReturned: false,
                returnedAt: null,
                location: resource.location,
            };
            await this.domainReservationVehicleService.save(reservationVehicleEntity, {
                queryRunner,
            });
        }
        return savedReservation;
    }
    async 자원의_날짜범위_예약을_조회한다(resourceId, startDate, endDate, excludeReservationId) {
        return await this.domainReservationService.findAll({
            where: {
                resourceId,
                ...(excludeReservationId && { reservationId: (0, typeorm_2.Not)(excludeReservationId) }),
                startDate: (0, typeorm_2.LessThan)(endDate),
                endDate: (0, typeorm_2.MoreThan)(startDate),
                status: (0, typeorm_2.In)([reservation_type_enum_1.ReservationStatus.PENDING, reservation_type_enum_1.ReservationStatus.CONFIRMED, reservation_type_enum_1.ReservationStatus.CLOSED]),
            },
            order: { startDate: 'ASC' },
        });
    }
    시간슬롯별_예약가능여부를_계산한다(reservations, slotStartTime, slotEndTime) {
        return !reservations.some((reservation) => {
            const reservationStart = new Date(reservation.startDate);
            const reservationEnd = new Date(reservation.endDate);
            return ((slotStartTime >= reservationStart && slotStartTime < reservationEnd) ||
                (slotEndTime > reservationStart && slotEndTime <= reservationEnd) ||
                (slotStartTime < reservationStart && slotEndTime > reservationEnd));
        });
    }
};
exports.ReservationContextService = ReservationContextService;
exports.ReservationContextService = ReservationContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object, typeof (_b = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _b : Object, typeof (_c = typeof notification_service_1.DomainNotificationService !== "undefined" && notification_service_1.DomainNotificationService) === "function" ? _c : Object, typeof (_d = typeof employee_notification_service_1.DomainEmployeeNotificationService !== "undefined" && employee_notification_service_1.DomainEmployeeNotificationService) === "function" ? _d : Object, typeof (_e = typeof reservation_vehicle_service_1.DomainReservationVehicleService !== "undefined" && reservation_vehicle_service_1.DomainReservationVehicleService) === "function" ? _e : Object, typeof (_f = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _f : Object, typeof (_g = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _g : Object, typeof (_h = typeof file_context_service_1.FileContextService !== "undefined" && file_context_service_1.FileContextService) === "function" ? _h : Object, typeof (_j = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _j : Object])
], ReservationContextService);


/***/ }),

/***/ "./src/context/resource/resource.context.module.ts":
/*!*********************************************************!*\
  !*** ./src/context/resource/resource.context.module.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_module_1 = __webpack_require__(/*! @src/domain/resource/resource.module */ "./src/domain/resource/resource.module.ts");
const resource_group_module_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.module */ "./src/domain/resource-group/resource-group.module.ts");
const resource_manager_module_1 = __webpack_require__(/*! @src/domain/resource-manager/resource-manager.module */ "./src/domain/resource-manager/resource-manager.module.ts");
const vehicle_info_module_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.module */ "./src/domain/vehicle-info/vehicle-info.module.ts");
const meeting_room_info_module_1 = __webpack_require__(/*! @src/domain/meeting-room-info/meeting-room-info.module */ "./src/domain/meeting-room-info/meeting-room-info.module.ts");
const accommodation_info_module_1 = __webpack_require__(/*! @src/domain/accommodation-info/accommodation-info.module */ "./src/domain/accommodation-info/accommodation-info.module.ts");
const equipment_info_module_1 = __webpack_require__(/*! @src/domain/equipment-info/equipment-info.module */ "./src/domain/equipment-info/equipment-info.module.ts");
const file_module_1 = __webpack_require__(/*! @src/domain/file/file.module */ "./src/domain/file/file.module.ts");
const consumable_module_1 = __webpack_require__(/*! @src/domain/consumable/consumable.module */ "./src/domain/consumable/consumable.module.ts");
const maintenance_module_1 = __webpack_require__(/*! @src/domain/maintenance/maintenance.module */ "./src/domain/maintenance/maintenance.module.ts");
const reservation_vehicle_module_1 = __webpack_require__(/*! @src/domain/reservation-vehicle/reservation-vehicle.module */ "./src/domain/reservation-vehicle/reservation-vehicle.module.ts");
const employee_module_1 = __webpack_require__(/*! @src/domain/employee/employee.module */ "./src/domain/employee/employee.module.ts");
const file_context_module_1 = __webpack_require__(/*! ../file/file.context.module */ "./src/context/file/file.context.module.ts");
const resource_context_service_1 = __webpack_require__(/*! ./services/resource.context.service */ "./src/context/resource/services/resource.context.service.ts");
const resource_group_context_service_1 = __webpack_require__(/*! ./services/resource-group.context.service */ "./src/context/resource/services/resource-group.context.service.ts");
const vehicle_info_context_service_1 = __webpack_require__(/*! ./services/vehicle-info.context.service */ "./src/context/resource/services/vehicle-info.context.service.ts");
const meeting_room_info_context_service_1 = __webpack_require__(/*! ./services/meeting-room-info.context.service */ "./src/context/resource/services/meeting-room-info.context.service.ts");
const accommodation_info_context_service_1 = __webpack_require__(/*! ./services/accommodation-info.context.service */ "./src/context/resource/services/accommodation-info.context.service.ts");
const equipment_info_context_service_1 = __webpack_require__(/*! ./services/equipment-info.context.service */ "./src/context/resource/services/equipment-info.context.service.ts");
const consumable_context_service_1 = __webpack_require__(/*! ./services/consumable.context.service */ "./src/context/resource/services/consumable.context.service.ts");
const maintenance_context_service_1 = __webpack_require__(/*! ./services/maintenance.context.service */ "./src/context/resource/services/maintenance.context.service.ts");
let ResourceContextModule = class ResourceContextModule {
};
exports.ResourceContextModule = ResourceContextModule;
exports.ResourceContextModule = ResourceContextModule = __decorate([
    (0, common_1.Module)({
        imports: [
            resource_module_1.DomainResourceModule,
            resource_group_module_1.DomainResourceGroupModule,
            resource_manager_module_1.DomainResourceManagerModule,
            vehicle_info_module_1.DomainVehicleInfoModule,
            meeting_room_info_module_1.DomainMeetingRoomInfoModule,
            accommodation_info_module_1.DomainAccommodationInfoModule,
            equipment_info_module_1.DomainEquipmentInfoModule,
            file_module_1.DomainFileModule,
            consumable_module_1.DomainConsumableModule,
            maintenance_module_1.DomainMaintenanceModule,
            reservation_vehicle_module_1.DomainReservationVehicleModule,
            employee_module_1.DomainEmployeeModule,
            file_context_module_1.FileContextModule,
        ],
        providers: [
            resource_context_service_1.ResourceContextService,
            resource_group_context_service_1.ResourceGroupContextService,
            vehicle_info_context_service_1.VehicleInfoContextService,
            meeting_room_info_context_service_1.MeetingRoomInfoContextService,
            accommodation_info_context_service_1.AccommodationInfoContextService,
            equipment_info_context_service_1.EquipmentInfoContextService,
            consumable_context_service_1.ConsumableContextService,
            maintenance_context_service_1.MaintenanceContextService,
        ],
        exports: [
            resource_context_service_1.ResourceContextService,
            resource_group_context_service_1.ResourceGroupContextService,
            vehicle_info_context_service_1.VehicleInfoContextService,
            meeting_room_info_context_service_1.MeetingRoomInfoContextService,
            accommodation_info_context_service_1.AccommodationInfoContextService,
            equipment_info_context_service_1.EquipmentInfoContextService,
            consumable_context_service_1.ConsumableContextService,
            maintenance_context_service_1.MaintenanceContextService,
        ],
    })
], ResourceContextModule);


/***/ }),

/***/ "./src/context/resource/services/accommodation-info.context.service.ts":
/*!*****************************************************************************!*\
  !*** ./src/context/resource/services/accommodation-info.context.service.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationInfoContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const accommodation_info_service_1 = __webpack_require__(/*! @src/domain/accommodation-info/accommodation-info.service */ "./src/domain/accommodation-info/accommodation-info.service.ts");
let AccommodationInfoContextService = class AccommodationInfoContextService {
    constructor(domainAccommodationInfoService) {
        this.domainAccommodationInfoService = domainAccommodationInfoService;
    }
    async 숙소정보만_조회한다(resourceId) {
        const accommodationInfo = await this.domainAccommodationInfoService.findOne({
            where: { resourceId },
        });
        return accommodationInfo;
    }
};
exports.AccommodationInfoContextService = AccommodationInfoContextService;
exports.AccommodationInfoContextService = AccommodationInfoContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof accommodation_info_service_1.DomainAccommodationInfoService !== "undefined" && accommodation_info_service_1.DomainAccommodationInfoService) === "function" ? _a : Object])
], AccommodationInfoContextService);


/***/ }),

/***/ "./src/context/resource/services/consumable.context.service.ts":
/*!*********************************************************************!*\
  !*** ./src/context/resource/services/consumable.context.service.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
let ConsumableContextService = class ConsumableContextService {
    constructor(domainConsumableService, domainVehicleInfoService) {
        this.domainConsumableService = domainConsumableService;
        this.domainVehicleInfoService = domainVehicleInfoService;
    }
    async 소모품을_저장한다(createConsumableDto) {
        const vehicleInfo = await this.domainVehicleInfoService.findOne({
            where: {
                vehicleInfoId: createConsumableDto.vehicleInfoId,
            },
            relations: ['consumables'],
        });
        if (!vehicleInfo) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.NOT_FOUND);
        }
        createConsumableDto.initMileage = vehicleInfo.totalMileage;
        if (vehicleInfo.consumables.length > 0) {
            const hasSameName = vehicleInfo.consumables.some((consumable) => consumable.name === createConsumableDto.name);
            if (hasSameName) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.ALREADY_EXISTS);
            }
        }
        const savedConsumable = await this.domainConsumableService.save(createConsumableDto);
        return {
            consumableId: savedConsumable.consumableId,
            vehicleInfoId: savedConsumable.vehicleInfoId,
            name: savedConsumable.name,
            replaceCycle: savedConsumable.replaceCycle,
            notifyReplacementCycle: savedConsumable.notifyReplacementCycle,
        };
    }
    async 차량별_소모품목록을_조회한다(vehicleInfoId) {
        const consumables = await this.domainConsumableService.findAll({
            where: { vehicleInfoId },
            relations: ['maintenances'],
            order: { name: 'ASC' },
        });
        return consumables.map((consumable) => ({
            consumableId: consumable.consumableId,
            vehicleInfoId: consumable.vehicleInfoId,
            name: consumable.name,
            replaceCycle: consumable.replaceCycle,
            notifyReplacementCycle: consumable.notifyReplacementCycle,
            maintenances: consumable.maintenances,
        }));
    }
    async 소모품을_조회한다(consumableId) {
        const consumable = await this.domainConsumableService.findOne({
            where: { consumableId },
            relations: ['maintenances'],
        });
        if (!consumable) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.NOT_FOUND);
        }
        return {
            consumableId: consumable.consumableId,
            vehicleInfoId: consumable.vehicleInfoId,
            name: consumable.name,
            replaceCycle: consumable.replaceCycle,
            notifyReplacementCycle: consumable.notifyReplacementCycle,
            maintenances: consumable.maintenances,
        };
    }
    async 소모품을_수정한다(consumableId, updateConsumableDto) {
        const existingConsumable = await this.domainConsumableService.findOne({
            where: { consumableId },
        });
        if (!existingConsumable) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.NOT_FOUND);
        }
        const vehicleConsumables = await this.domainConsumableService.findAll({
            where: { vehicleInfoId: updateConsumableDto.vehicleInfoId },
        });
        const hasSameName = vehicleConsumables.some((consumable) => consumable.name === updateConsumableDto.name && consumable.consumableId !== consumableId);
        if (hasSameName) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.ALREADY_EXISTS);
        }
        await this.domainConsumableService.update(consumableId, updateConsumableDto);
        const updatedConsumable = await this.domainConsumableService.findOne({
            where: { consumableId },
            relations: ['maintenances'],
        });
        return {
            consumableId: updatedConsumable.consumableId,
            vehicleInfoId: updatedConsumable.vehicleInfoId,
            name: updatedConsumable.name,
            replaceCycle: updatedConsumable.replaceCycle,
            notifyReplacementCycle: updatedConsumable.notifyReplacementCycle,
            maintenances: updatedConsumable.maintenances,
        };
    }
    async 소모품을_삭제한다(consumableId) {
        const consumable = await this.domainConsumableService.findOne({
            where: { consumableId },
            relations: ['maintenances'],
        });
        if (!consumable) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.NOT_FOUND);
        }
        if (consumable.maintenances && consumable.maintenances.length > 0) {
            throw new common_1.BadRequestException('정비 이력이 있는 소모품은 삭제할 수 없습니다.');
        }
        await this.domainConsumableService.delete(consumableId);
    }
};
exports.ConsumableContextService = ConsumableContextService;
exports.ConsumableContextService = ConsumableContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _a : Object, typeof (_b = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _b : Object])
], ConsumableContextService);


/***/ }),

/***/ "./src/context/resource/services/equipment-info.context.service.ts":
/*!*************************************************************************!*\
  !*** ./src/context/resource/services/equipment-info.context.service.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EquipmentInfoContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const equipment_info_service_1 = __webpack_require__(/*! @src/domain/equipment-info/equipment-info.service */ "./src/domain/equipment-info/equipment-info.service.ts");
let EquipmentInfoContextService = class EquipmentInfoContextService {
    constructor(domainEquipmentInfoService) {
        this.domainEquipmentInfoService = domainEquipmentInfoService;
    }
    async 장비정보만_조회한다(resourceId) {
        const equipmentInfo = await this.domainEquipmentInfoService.findOne({
            where: { resourceId },
        });
        return equipmentInfo;
    }
};
exports.EquipmentInfoContextService = EquipmentInfoContextService;
exports.EquipmentInfoContextService = EquipmentInfoContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof equipment_info_service_1.DomainEquipmentInfoService !== "undefined" && equipment_info_service_1.DomainEquipmentInfoService) === "function" ? _a : Object])
], EquipmentInfoContextService);


/***/ }),

/***/ "./src/context/resource/services/maintenance.context.service.ts":
/*!**********************************************************************!*\
  !*** ./src/context/resource/services/maintenance.context.service.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MaintenanceContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const maintenance_service_1 = __webpack_require__(/*! @src/domain/maintenance/maintenance.service */ "./src/domain/maintenance/maintenance.service.ts");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const file_context_service_1 = __webpack_require__(/*! ../../file/services/file.context.service */ "./src/context/file/services/file.context.service.ts");
let MaintenanceContextService = class MaintenanceContextService {
    constructor(domainMaintenanceService, domainConsumableService, domainVehicleInfoService, domainEmployeeService, domainFileService, fileContextService, dataSource) {
        this.domainMaintenanceService = domainMaintenanceService;
        this.domainConsumableService = domainConsumableService;
        this.domainVehicleInfoService = domainVehicleInfoService;
        this.domainEmployeeService = domainEmployeeService;
        this.domainFileService = domainFileService;
        this.fileContextService = fileContextService;
        this.dataSource = dataSource;
    }
    async 정비이력을_저장한다(createMaintenanceDto) {
        const existingMaintenance = await this.domainMaintenanceService.findOne({
            where: {
                consumableId: createMaintenanceDto.consumableId,
                date: (0, typeorm_1.MoreThanOrEqual)(createMaintenanceDto.date),
            },
        });
        if (existingMaintenance) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.INVALID_DATE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            if (!createMaintenanceDto.images)
                createMaintenanceDto.images = [];
            const fileIds = createMaintenanceDto.images;
            let filePaths = [];
            if (fileIds.length > 0) {
                const files = await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_1.In)(fileIds) },
                });
                filePaths = files.map((file) => file.filePath);
            }
            if (fileIds.length > 0) {
                await this.fileContextService.파일들을_영구로_변경한다(fileIds, queryRunner);
            }
            const { images, ...maintenanceData } = createMaintenanceDto;
            const maintenance = await this.domainMaintenanceService.save({ ...maintenanceData, images: filePaths }, { queryRunner });
            await this.fileContextService.정비에_파일들을_연결한다(maintenance.maintenanceId, fileIds, queryRunner);
            if (createMaintenanceDto.mileage) {
                const consumable = await this.domainConsumableService.findOne({
                    where: { consumableId: maintenance.consumableId },
                    relations: ['vehicleInfo'],
                });
                if (consumable.vehicleInfo.totalMileage < createMaintenanceDto.mileage) {
                    await this.domainVehicleInfoService.update(consumable.vehicleInfo.vehicleInfoId, {
                        totalMileage: createMaintenanceDto.mileage,
                    }, { queryRunner });
                }
            }
            await queryRunner.commitTransaction();
            const systemAdmins = await this.domainEmployeeService.findAll({
                where: {
                    roles: (0, typeorm_1.Raw)(() => `'${role_type_enum_1.Role.SYSTEM_ADMIN}' = ANY("roles")`),
                },
            });
            const consumable = await this.domainConsumableService.findOne({
                where: { consumableId: maintenance.consumableId },
                relations: ['vehicleInfo', 'vehicleInfo.resource'],
                withDeleted: true,
            });
            return {
                maintenanceId: maintenance.maintenanceId,
                consumableId: maintenance.consumableId,
                date: maintenance.date,
                mileage: maintenance.mileage,
                cost: maintenance.cost,
                images: maintenance.images || [],
            };
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async 모든_정비이력을_조회한다(user) {
        const maintenances = await this.domainMaintenanceService.findAll({
            relations: ['consumable', 'consumable.vehicleInfo', 'consumable.vehicleInfo.resource'],
            order: { date: 'DESC' },
        });
        return maintenances.map((maintenance) => {
            return {
                maintenanceId: maintenance.maintenanceId,
                consumableId: maintenance.consumableId,
                resourceName: maintenance.consumable?.vehicleInfo?.resource?.name,
                consumableName: maintenance.consumable?.name,
                date: maintenance.date,
                mileage: maintenance.mileage,
                cost: maintenance.cost,
                images: maintenance.images || [],
            };
        });
    }
    async 차량별_정비이력을_조회한다(vehicleInfoId, page = 1, limit = 10) {
        const vehicleInfo = await this.domainVehicleInfoService.findOne({
            where: { vehicleInfoId },
            relations: ['resource', 'consumables', 'consumables.maintenances'],
            withDeleted: true,
        });
        const options = {
            where: {
                maintenanceId: (0, typeorm_1.In)(vehicleInfo.consumables.flatMap((consumable) => consumable.maintenances.map((maintenance) => maintenance.maintenanceId))),
            },
            withDeleted: true,
        };
        const count = await this.domainMaintenanceService.count(options);
        if (page && limit) {
            options.skip = (page - 1) * limit;
            options.take = limit;
        }
        options.relations = ['consumable'];
        options.order = { createdAt: 'DESC' };
        const maintenances = await this.domainMaintenanceService.findAll(options);
        const items = maintenances.map((maintenance, index, array) => {
            return {
                maintenanceId: maintenance.maintenanceId,
                consumableId: maintenance.consumableId,
                date: maintenance.date,
                mileage: maintenance.mileage,
                cost: maintenance.cost,
                images: maintenance.images || [],
                consumableName: maintenance.consumable.name,
                resourceName: vehicleInfo.resource.name,
                previousMileage: index !== array.length - 1 ? array[index + 1].mileage : 0,
                isLatest: index === 0,
            };
        });
        return {
            items,
            meta: {
                total: count,
                page,
                limit,
                hasNext: page * limit < count,
            },
        };
    }
    async 정비이력을_조회한다(maintenanceId) {
        const maintenance = await this.domainMaintenanceService.findOne({
            where: { maintenanceId },
            relations: ['consumable', 'consumable.vehicleInfo', 'consumable.vehicleInfo.resource'],
        });
        if (!maintenance) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.NOT_FOUND);
        }
        return {
            maintenanceId: maintenance.maintenanceId,
            consumableId: maintenance.consumableId,
            resourceName: maintenance.consumable?.vehicleInfo?.resource?.name,
            consumableName: maintenance.consumable?.name,
            date: maintenance.date,
            mileage: maintenance.mileage,
            cost: maintenance.cost,
            images: maintenance.images || [],
        };
    }
    async 정비이력을_수정한다(maintenanceId, updateMaintenanceDto) {
        const existingMaintenance = await this.domainMaintenanceService.findOne({
            where: { maintenanceId },
        });
        if (!existingMaintenance) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.NOT_FOUND);
        }
        if (updateMaintenanceDto.date && updateMaintenanceDto.date !== existingMaintenance.date) {
            const conflictingMaintenance = await this.domainMaintenanceService.findOne({
                where: {
                    consumableId: existingMaintenance.consumableId,
                    date: (0, typeorm_1.MoreThanOrEqual)(updateMaintenanceDto.date),
                    maintenanceId: (0, typeorm_1.Not)(maintenanceId),
                },
            });
            if (conflictingMaintenance) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.INVALID_DATE);
            }
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            let filePaths = [];
            if (updateMaintenanceDto.images !== undefined) {
                const fileIds = updateMaintenanceDto.images || [];
                if (fileIds.length > 0) {
                    const files = await this.domainFileService.findAll({
                        where: { fileId: (0, typeorm_1.In)(fileIds) },
                    });
                    filePaths = files.map((file) => file.filePath);
                }
                if (fileIds.length > 0) {
                    await this.fileContextService.파일들을_영구로_변경한다(fileIds, queryRunner);
                }
                await this.fileContextService.정비에_파일들을_연결한다(maintenanceId, fileIds, queryRunner);
            }
            const { images, ...maintenanceData } = updateMaintenanceDto;
            const updateData = updateMaintenanceDto.images !== undefined ? { ...maintenanceData, images: filePaths } : maintenanceData;
            await this.domainMaintenanceService.update(maintenanceId, updateData, { queryRunner });
            await queryRunner.commitTransaction();
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
        const updatedMaintenance = await this.domainMaintenanceService.findOne({
            where: { maintenanceId },
            relations: ['consumable', 'consumable.vehicleInfo', 'consumable.vehicleInfo.resource'],
        });
        return {
            maintenanceId: updatedMaintenance.maintenanceId,
            consumableId: updatedMaintenance.consumableId,
            resourceName: updatedMaintenance.consumable?.vehicleInfo?.resource?.name,
            consumableName: updatedMaintenance.consumable?.name,
            date: updatedMaintenance.date,
            mileage: updatedMaintenance.mileage,
            cost: updatedMaintenance.cost,
            images: updatedMaintenance.images || [],
        };
    }
    async 정비이력을_삭제한다(maintenanceId) {
        const maintenance = await this.domainMaintenanceService.findOne({
            where: { maintenanceId },
        });
        if (!maintenance) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.NOT_FOUND);
        }
        await this.domainMaintenanceService.delete(maintenanceId);
    }
};
exports.MaintenanceContextService = MaintenanceContextService;
exports.MaintenanceContextService = MaintenanceContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.DomainMaintenanceService !== "undefined" && maintenance_service_1.DomainMaintenanceService) === "function" ? _a : Object, typeof (_b = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _b : Object, typeof (_c = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _c : Object, typeof (_d = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _d : Object, typeof (_e = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _e : Object, typeof (_f = typeof file_context_service_1.FileContextService !== "undefined" && file_context_service_1.FileContextService) === "function" ? _f : Object, typeof (_g = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _g : Object])
], MaintenanceContextService);


/***/ }),

/***/ "./src/context/resource/services/meeting-room-info.context.service.ts":
/*!****************************************************************************!*\
  !*** ./src/context/resource/services/meeting-room-info.context.service.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomInfoContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const meeting_room_info_service_1 = __webpack_require__(/*! @src/domain/meeting-room-info/meeting-room-info.service */ "./src/domain/meeting-room-info/meeting-room-info.service.ts");
let MeetingRoomInfoContextService = class MeetingRoomInfoContextService {
    constructor(domainMeetingRoomInfoService) {
        this.domainMeetingRoomInfoService = domainMeetingRoomInfoService;
    }
    async 회의실정보만_조회한다(resourceId) {
        const meetingRoomInfo = await this.domainMeetingRoomInfoService.findOne({
            where: { resourceId },
        });
        return meetingRoomInfo;
    }
};
exports.MeetingRoomInfoContextService = MeetingRoomInfoContextService;
exports.MeetingRoomInfoContextService = MeetingRoomInfoContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof meeting_room_info_service_1.DomainMeetingRoomInfoService !== "undefined" && meeting_room_info_service_1.DomainMeetingRoomInfoService) === "function" ? _a : Object])
], MeetingRoomInfoContextService);


/***/ }),

/***/ "./src/context/resource/services/resource-group.context.service.ts":
/*!*************************************************************************!*\
  !*** ./src/context/resource/services/resource-group.context.service.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroupContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
let ResourceGroupContextService = class ResourceGroupContextService {
    constructor(domainResourceGroupService, domainResourceService, dataSource) {
        this.domainResourceGroupService = domainResourceGroupService;
        this.domainResourceService = domainResourceService;
        this.dataSource = dataSource;
    }
    async 상위_자원그룹을_조회한다() {
        const resourceGroups = await this.domainResourceGroupService.findAll({
            where: {
                parentResourceGroupId: (0, typeorm_1.IsNull)(),
            },
            order: {
                order: 'ASC',
            },
        });
        return resourceGroups;
    }
    async 자원데이터포함_그룹목록을_조회한다(type) {
        const whereCondition = {
            parentResourceGroupId: (0, typeorm_1.IsNull)(),
        };
        if (type) {
            whereCondition.type = type;
        }
        const parentGroups = await this.domainResourceGroupService.findAll({
            where: whereCondition,
            order: { order: 'ASC' },
        });
        const result = [];
        for (const parentGroup of parentGroups) {
            const childGroups = await this.domainResourceGroupService.findAll({
                where: { parentResourceGroupId: parentGroup.resourceGroupId },
                order: { order: 'ASC' },
            });
            const childGroupsWithResources = await Promise.all(childGroups.map(async (childGroup) => {
                const resources = await this.domainResourceService.findAll({
                    where: { resourceGroupId: childGroup.resourceGroupId },
                    order: { order: 'ASC' },
                });
                const resourceSelectDtos = resources.map((resource) => ({
                    resourceId: resource.resourceId,
                    name: resource.name,
                    images: resource.images,
                    isAvailable: resource.isAvailable,
                    unavailableReason: resource.unavailableReason,
                    resourceGroupId: resource.resourceGroupId,
                    order: resource.order,
                }));
                return {
                    ...childGroup,
                    resources: resourceSelectDtos,
                };
            }));
            result.push({
                ...parentGroup,
                children: childGroupsWithResources,
            });
        }
        return result;
    }
    async 자원그룹을_생성한다(createResourceGroupDto) {
        const groups = await this.domainResourceGroupService.findAll({
            where: { parentResourceGroupId: createResourceGroupDto.parentResourceGroupId },
        });
        const order = groups.length;
        const savedGroup = await this.domainResourceGroupService.save({
            ...createResourceGroupDto,
            order,
        });
        return savedGroup;
    }
    async 자원그룹을_수정한다(resourceGroupId, updateResourceGroupDto) {
        const existingGroup = await this.domainResourceGroupService.findOne({
            where: { resourceGroupId },
        });
        if (!existingGroup) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE_GROUP.NOT_FOUND);
        }
        await this.domainResourceGroupService.update(resourceGroupId, updateResourceGroupDto);
        const updatedGroup = await this.domainResourceGroupService.findOne({
            where: { resourceGroupId },
        });
        return updatedGroup;
    }
    async 자원그룹_순서를_변경한다(updateResourceGroupOrdersDto) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await Promise.all(updateResourceGroupOrdersDto.orders.map((order) => this.domainResourceGroupService.update(order.resourceGroupId, { order: order.newOrder }, { queryRunner })));
            await queryRunner.commitTransaction();
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw err;
        }
        finally {
            await queryRunner.release();
        }
    }
    async 자원그룹을_삭제한다(resourceGroupId) {
        const group = await this.domainResourceGroupService.findOne({
            where: { resourceGroupId },
        });
        if (!group) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE_GROUP.NOT_FOUND);
        }
        const childGroups = await this.domainResourceGroupService.findAll({
            where: { parentResourceGroupId: resourceGroupId },
        });
        if (childGroups.length > 0) {
            throw new Error('하위 그룹이 있는 그룹은 삭제할 수 없습니다.');
        }
        const resources = await this.domainResourceService.findAll({
            where: { resourceGroupId },
        });
        if (resources.length > 0) {
            throw new Error('자원이 있는 그룹은 삭제할 수 없습니다.');
        }
        await this.domainResourceGroupService.delete(resourceGroupId);
    }
};
exports.ResourceGroupContextService = ResourceGroupContextService;
exports.ResourceGroupContextService = ResourceGroupContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _a : Object, typeof (_b = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _b : Object, typeof (_c = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _c : Object])
], ResourceGroupContextService);


/***/ }),

/***/ "./src/context/resource/services/resource.context.service.ts":
/*!*******************************************************************!*\
  !*** ./src/context/resource/services/resource.context.service.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
const resource_manager_service_1 = __webpack_require__(/*! @src/domain/resource-manager/resource-manager.service */ "./src/domain/resource-manager/resource-manager.service.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const meeting_room_info_service_1 = __webpack_require__(/*! @src/domain/meeting-room-info/meeting-room-info.service */ "./src/domain/meeting-room-info/meeting-room-info.service.ts");
const accommodation_info_service_1 = __webpack_require__(/*! @src/domain/accommodation-info/accommodation-info.service */ "./src/domain/accommodation-info/accommodation-info.service.ts");
const equipment_info_service_1 = __webpack_require__(/*! @src/domain/equipment-info/equipment-info.service */ "./src/domain/equipment-info/equipment-info.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const file_context_service_1 = __webpack_require__(/*! ../../file/services/file.context.service */ "./src/context/file/services/file.context.service.ts");
const resource_response_dto_1 = __webpack_require__(/*! @src/business/resource-management/dtos/resource/resource-response.dto */ "./src/business/resource-management/dtos/resource/resource-response.dto.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
let ResourceContextService = class ResourceContextService {
    constructor(domainResourceService, domainResourceGroupService, domainResourceManagerService, domainVehicleInfoService, domainMeetingRoomInfoService, domainAccommodationInfoService, domainEquipmentInfoService, domainFileService, fileContextService, dataSource) {
        this.domainResourceService = domainResourceService;
        this.domainResourceGroupService = domainResourceGroupService;
        this.domainResourceManagerService = domainResourceManagerService;
        this.domainVehicleInfoService = domainVehicleInfoService;
        this.domainMeetingRoomInfoService = domainMeetingRoomInfoService;
        this.domainAccommodationInfoService = domainAccommodationInfoService;
        this.domainEquipmentInfoService = domainEquipmentInfoService;
        this.domainFileService = domainFileService;
        this.fileContextService = fileContextService;
        this.dataSource = dataSource;
    }
    async 자원_목록을_조회한다(type) {
        let relations = [];
        if (type === resource_type_enum_1.ResourceType.VEHICLE) {
            relations = ['vehicleInfo', 'vehicleInfo.consumables'];
        }
        else if (type === resource_type_enum_1.ResourceType.MEETING_ROOM) {
            relations = ['meetingRoomInfo'];
        }
        else if (type === resource_type_enum_1.ResourceType.ACCOMMODATION) {
            relations = ['accommodationInfo'];
        }
        else if (type === resource_type_enum_1.ResourceType.EQUIPMENT) {
            relations = ['equipmentInfo'];
        }
        const resources = await this.domainResourceService.findAll({
            where: { type: type },
            relations: relations,
        });
        const resourcesWithFiles = await Promise.all(resources.map(async (resource) => {
            const resourceFiles = await this.fileContextService.자원_파일을_조회한다(resource.resourceId);
            resource.imageFiles = resourceFiles.images;
            return resource;
        }));
        return resourcesWithFiles.map((resource) => new resource_response_dto_1.ResourceResponseDto(resource));
    }
    async 자원과_상세정보를_생성한다(createResourceInfo) {
        const { resource, typeInfo, managers } = createResourceInfo;
        if (!resource.resourceGroupId) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.GROUP_ID_REQUIRED);
        }
        if (!managers || managers.length === 0) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.MANAGERS_REQUIRED);
        }
        const group = await this.domainResourceGroupService.findOne({
            where: { resourceGroupId: resource.resourceGroupId },
        });
        if (!group) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE_GROUP.NOT_FOUND);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const resources = await this.domainResourceService.findAll({
                where: { resourceGroupId: group.resourceGroupId },
            });
            const resourceOrder = resources.length;
            if (!resource.images)
                resource.images = [];
            const fileIds = resource.images;
            let filePaths = [];
            if (fileIds.length > 0) {
                const files = await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_1.In)(fileIds) },
                });
                filePaths = files.map((file) => file.filePath);
            }
            const savedResource = await this.domainResourceService.save({ ...resource, images: filePaths, order: resourceOrder }, { queryRunner });
            if (fileIds.length > 0) {
                await this.fileContextService.파일들을_영구로_변경한다(fileIds, queryRunner);
            }
            await this.fileContextService.리소스에_파일들을_연결한다(savedResource.resourceId, fileIds, queryRunner);
            switch (group.type) {
                case resource_type_enum_1.ResourceType.VEHICLE:
                    const vehicleTypeInfo = typeInfo;
                    const vehicleFilePaths = {
                        parkingLocationImages: [],
                        odometerImages: [],
                        indoorImages: [],
                    };
                    if (vehicleTypeInfo.parkingLocationImages?.length > 0) {
                        const files = await this.domainFileService.findAll({
                            where: { fileId: (0, typeorm_1.In)(vehicleTypeInfo.parkingLocationImages) },
                        });
                        vehicleFilePaths.parkingLocationImages = files.map((file) => file.filePath);
                    }
                    if (vehicleTypeInfo.odometerImages?.length > 0) {
                        const files = await this.domainFileService.findAll({
                            where: { fileId: (0, typeorm_1.In)(vehicleTypeInfo.odometerImages) },
                        });
                        vehicleFilePaths.odometerImages = files.map((file) => file.filePath);
                    }
                    if (vehicleTypeInfo.indoorImages?.length > 0) {
                        const files = await this.domainFileService.findAll({
                            where: { fileId: (0, typeorm_1.In)(vehicleTypeInfo.indoorImages) },
                        });
                        vehicleFilePaths.indoorImages = files.map((file) => file.filePath);
                    }
                    const savedVehicleInfo = await this.domainVehicleInfoService.save({
                        ...typeInfo,
                        ...vehicleFilePaths,
                        resourceId: savedResource.resourceId,
                    }, { queryRunner });
                    if (vehicleTypeInfo.parkingLocationImages?.length > 0 ||
                        vehicleTypeInfo.odometerImages?.length > 0 ||
                        vehicleTypeInfo.indoorImages?.length > 0) {
                        await this.fileContextService.차량정보에_파일들을_연결한다(savedVehicleInfo.vehicleInfoId, {
                            parkingLocationImages: vehicleTypeInfo.parkingLocationImages || [],
                            odometerImages: vehicleTypeInfo.odometerImages || [],
                            indoorImages: vehicleTypeInfo.indoorImages || [],
                        }, queryRunner);
                    }
                    break;
                case resource_type_enum_1.ResourceType.MEETING_ROOM:
                    await this.domainMeetingRoomInfoService.save({ ...typeInfo, resourceId: savedResource.resourceId }, { queryRunner });
                    break;
                case resource_type_enum_1.ResourceType.ACCOMMODATION:
                    await this.domainAccommodationInfoService.save({ ...typeInfo, resourceId: savedResource.resourceId }, { queryRunner });
                    break;
                case resource_type_enum_1.ResourceType.EQUIPMENT:
                    await this.domainEquipmentInfoService.save({ ...typeInfo, resourceId: savedResource.resourceId }, { queryRunner });
                    break;
            }
            await Promise.all([
                ...managers.map((manager) => {
                    return this.domainResourceManagerService.save({
                        resourceId: savedResource.resourceId,
                        employeeId: manager.employeeId,
                    }, { queryRunner });
                }),
            ]);
            await queryRunner.commitTransaction();
            const resourceWithTypeInfo = await this.domainResourceService.findOne({
                where: { resourceId: savedResource.resourceId },
                relations: ['vehicleInfo', 'meetingRoomInfo', 'accommodationInfo', 'equipmentInfo'],
            });
            return {
                resourceId: resourceWithTypeInfo.resourceId,
                type: resourceWithTypeInfo.type,
                typeInfoId: resourceWithTypeInfo.vehicleInfo?.vehicleInfoId ||
                    resourceWithTypeInfo.meetingRoomInfo?.meetingRoomInfoId ||
                    resourceWithTypeInfo.accommodationInfo?.accommodationInfoId ||
                    resourceWithTypeInfo.equipmentInfo?.equipmentInfoId,
            };
        }
        catch (err) {
            console.error(err);
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_CREATE);
        }
        finally {
            await queryRunner.release();
        }
    }
    async 자원정보를_조회한다(resourceId) {
        return this.자원_상세정보를_조회한다(resourceId);
    }
    async 자원_상세정보를_조회한다(resourceId) {
        const resource = await this.domainResourceService.findOne({
            where: { resourceId },
            relations: [
                'vehicleInfo',
                'meetingRoomInfo',
                'accommodationInfo',
                'equipmentInfo',
                'resourceManagers',
                'resourceManagers.employee',
                'resourceGroup',
            ],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        const resourceFiles = await this.fileContextService.자원_파일을_조회한다(resourceId);
        resource.images = resourceFiles.images.map((file) => file.filePath);
        return new resource_response_dto_1.ResourceResponseDto(resource);
    }
    async 그룹별_자원_목록을_조회한다(resourceGroupId) {
        const resources = await this.domainResourceService.findAll({
            where: { resourceGroupId },
            relations: ['vehicleInfo', 'meetingRoomInfo', 'accommodationInfo', 'equipmentInfo'],
            order: { order: 'ASC' },
        });
        const resourcesWithFiles = await Promise.all(resources.map(async (resource) => {
            const resourceFiles = await this.fileContextService.자원_파일을_조회한다(resource.resourceId);
            resource.images = resourceFiles.images.map((file) => file.filePath);
            return resource;
        }));
        return resourcesWithFiles.map((resource) => new resource_response_dto_1.ResourceResponseDto(resource));
    }
    async 자원을_수정한다(resourceId, updateResourceInfoDto) {
        const resource = await this.domainResourceService.findOne({
            where: {
                resourceId: resourceId,
            },
            relations: ['resourceGroup'],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            if (updateResourceInfoDto.resource) {
                const { images } = updateResourceInfoDto.resource;
                if (images !== undefined) {
                    const fileIds = images || [];
                    let filePaths = [];
                    if (fileIds.length > 0) {
                        const files = await this.domainFileService.findAll({
                            where: { fileId: (0, typeorm_1.In)(fileIds) },
                        });
                        filePaths = files.map((file) => file.filePath);
                        updateResourceInfoDto.resource.images = filePaths;
                    }
                    if (fileIds.length > 0) {
                        await this.fileContextService.파일들을_영구로_변경한다(fileIds, queryRunner);
                    }
                    await this.fileContextService.리소스에_파일들을_연결한다(resourceId, fileIds, queryRunner);
                }
            }
            console.log('updateResourceInfoDto.resource', updateResourceInfoDto.resource);
            await this.domainResourceService.update(resourceId, updateResourceInfoDto.resource, { queryRunner });
            if (updateResourceInfoDto.typeInfo) {
                switch (resource.type) {
                    case resource_type_enum_1.ResourceType.VEHICLE:
                        const vehicleInfo = updateResourceInfoDto.typeInfo;
                        await this.domainVehicleInfoService.update(vehicleInfo.vehicleInfoId, vehicleInfo, {
                            queryRunner,
                        });
                        break;
                    case resource_type_enum_1.ResourceType.MEETING_ROOM:
                        const meetingRoomInfo = updateResourceInfoDto.typeInfo;
                        await this.domainMeetingRoomInfoService.update(meetingRoomInfo.meetingRoomInfoId, meetingRoomInfo, {
                            queryRunner,
                        });
                        break;
                    case resource_type_enum_1.ResourceType.ACCOMMODATION:
                        const accommodationInfo = updateResourceInfoDto.typeInfo;
                        await this.domainAccommodationInfoService.update(accommodationInfo.accommodationInfoId, accommodationInfo, {
                            queryRunner,
                        });
                        break;
                    case resource_type_enum_1.ResourceType.EQUIPMENT:
                        const equipmentInfo = updateResourceInfoDto.typeInfo;
                        await this.domainEquipmentInfoService.update(equipmentInfo.equipmentInfoId, equipmentInfo, {
                            queryRunner,
                        });
                        break;
                }
            }
            if (updateResourceInfoDto.managers) {
                const newManagerIds = updateResourceInfoDto.managers.map((m) => m.employeeId);
                const currentManagers = await this.domainResourceManagerService.findAll({
                    where: {
                        resourceId: resourceId,
                    },
                });
                const currentManagerIds = currentManagers.map((m) => m.employeeId);
                const managersToRemove = currentManagers.filter((manager) => !newManagerIds.includes(manager.employeeId));
                await Promise.all(managersToRemove.map((manager) => this.domainResourceManagerService.delete(manager.resourceManagerId, { queryRunner })));
                const managersToAdd = newManagerIds.filter((employeeId) => !currentManagerIds.includes(employeeId));
                await Promise.all(managersToAdd.map((employeeId) => this.domainResourceManagerService.save({ resourceId, employeeId }, { queryRunner })));
            }
            await queryRunner.commitTransaction();
            return this.자원_상세정보를_조회한다(resourceId);
        }
        catch (err) {
            console.error(err);
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_UPDATE);
        }
        finally {
            await queryRunner.release();
        }
    }
    async 자원_순서를_변경한다(updateResourceOrdersDto) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await Promise.all(updateResourceOrdersDto.orders.map((order) => this.domainResourceService.update(order.resourceId, { order: order.newOrder }, { queryRunner })));
            await queryRunner.commitTransaction();
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw err;
        }
        finally {
            await queryRunner.release();
        }
    }
    async 자원을_삭제한다(resourceId) {
        const resource = await this.domainResourceService.findOne({
            where: {
                resourceId: resourceId,
            },
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        if (resource.isAvailable) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.IS_AVAILABLE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await this.domainResourceService.update(resourceId, { resourceGroupId: null }, { queryRunner });
            const resourceManagers = await this.domainResourceManagerService.findAll({
                where: {
                    resourceId: resourceId,
                },
            });
            for (const manager of resourceManagers) {
                await this.domainResourceManagerService.delete(manager.resourceManagerId, { queryRunner });
            }
            await this.domainResourceService.softDelete(resourceId, { queryRunner });
            const resources = await this.domainResourceService.findAll({
                where: {
                    resourceId: (0, typeorm_1.Not)(resourceId),
                    resourceGroupId: resource.resourceGroupId,
                    deletedAt: (0, typeorm_1.IsNull)(),
                },
                order: {
                    order: 'ASC',
                },
            });
            for (let i = 0; i < resources.length; i++) {
                await this.domainResourceService.update(resources[i].resourceId, { order: i }, { queryRunner });
            }
            await queryRunner.commitTransaction();
        }
        catch (err) {
            console.error(err);
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_DELETE);
        }
        finally {
            await queryRunner.release();
        }
    }
    자원타입_라벨을_가져온다(type) {
        switch (type) {
            case 'MEETING_ROOM':
                return '회의실';
            case 'VEHICLE':
                return '차량';
            case 'ACCOMMODATION':
                return '숙소';
            case 'EQUIPMENT':
                return '장비';
            default:
                return type;
        }
    }
    async 관리자별_자원을_소모품정보와_함께_조회한다(employeeId, isSystemAdmin) {
        const resources = await this.domainResourceService.findAll({
            where: {
                ...(isSystemAdmin ? {} : { resourceManagers: { employeeId: employeeId } }),
            },
            relations: [
                'resourceManagers',
                'vehicleInfo',
                'vehicleInfo.consumables',
                'vehicleInfo.consumables.maintenances',
            ],
            order: {
                vehicleInfo: {
                    consumables: {
                        maintenances: {
                            date: 'DESC',
                        },
                    },
                },
            },
        });
        return resources;
    }
    async 소모품정보와_함께_모든자원을_조회한다() {
        const resources = await this.domainResourceService.findAll({
            relations: [
                'resourceManagers',
                'resourceManagers.employee',
                'vehicleInfo',
                'vehicleInfo.consumables',
                'vehicleInfo.consumables.maintenances',
            ],
        });
        return resources;
    }
    async 자원의_타입별_상세정보를_조회한다(resource) {
        switch (resource.type) {
            case resource_type_enum_1.ResourceType.VEHICLE:
                const vehicleInfo = await this.domainVehicleInfoService.findOne({
                    where: { resourceId: resource.resourceId },
                });
                return vehicleInfo;
            case resource_type_enum_1.ResourceType.MEETING_ROOM:
                return await this.domainMeetingRoomInfoService.findOne({
                    where: { resourceId: resource.resourceId },
                });
            case resource_type_enum_1.ResourceType.ACCOMMODATION:
                return await this.domainAccommodationInfoService.findOne({
                    where: { resourceId: resource.resourceId },
                });
            case resource_type_enum_1.ResourceType.EQUIPMENT:
                return await this.domainEquipmentInfoService.findOne({
                    where: { resourceId: resource.resourceId },
                });
            default:
                return null;
        }
    }
    자원_타입별_운영시간_규칙을_가져온다(resourceType) {
        switch (resourceType) {
            case resource_type_enum_1.ResourceType.VEHICLE:
                return { startTime: '00:00:00', endTime: '24:00:00', is24Hour: true };
            case resource_type_enum_1.ResourceType.MEETING_ROOM:
            case resource_type_enum_1.ResourceType.EQUIPMENT:
                return { startTime: '09:00:00', endTime: '18:00:00', is24Hour: false };
            case resource_type_enum_1.ResourceType.ACCOMMODATION:
                return { startTime: '00:00:00', endTime: '24:00:00', is24Hour: true };
            default:
                return { startTime: '09:00:00', endTime: '18:00:00', is24Hour: false };
        }
    }
    async 그룹별_사용가능한_자원_목록을_조회한다(resourceGroupId, resourceType) {
        const whereCondition = {
            isAvailable: true,
        };
        if (resourceGroupId) {
            whereCondition.resourceGroupId = resourceGroupId;
        }
        if (resourceType) {
            whereCondition.type = resourceType;
        }
        return await this.domainResourceService.findAll({
            where: whereCondition,
            order: { order: 'ASC' },
        });
    }
    현재시간_기준_가용시간대를_계산한다(resourceType, targetDate, isToday) {
        const operatingHours = this.자원_타입별_운영시간_규칙을_가져온다(resourceType);
        if (!isToday) {
            return operatingHours;
        }
        const now = new Date();
        const currentMinutes = now.getMinutes();
        const roundedStartTime = new Date(now);
        if (currentMinutes < 30) {
            roundedStartTime.setMinutes(0, 0, 0);
        }
        else {
            roundedStartTime.setMinutes(30, 0, 0);
        }
        let calculatedStartTime;
        if (resourceType === resource_type_enum_1.ResourceType.VEHICLE) {
            calculatedStartTime = roundedStartTime.toTimeString().slice(0, 8);
        }
        else {
            const operatingStartTime = new Date(`${targetDate} ${operatingHours.startTime}`);
            calculatedStartTime =
                roundedStartTime > operatingStartTime
                    ? roundedStartTime.toTimeString().slice(0, 8)
                    : operatingHours.startTime;
        }
        return {
            startTime: calculatedStartTime,
            endTime: operatingHours.endTime,
        };
    }
    async 자원의_해당시간_예약을_확인한다(resourceId, startDate, endDate, reservationId) {
        const startDateObj = new Date(startDate);
        const endDateObj = new Date(endDate);
        const resource = await this.domainResourceService.findOne({
            where: {
                resourceId: resourceId,
                reservations: {
                    reservationId: reservationId ? (0, typeorm_1.Not)(reservationId) : undefined,
                    status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                    startDate: (0, typeorm_1.LessThan)(endDateObj),
                    endDate: (0, typeorm_1.MoreThan)(startDateObj),
                },
            },
            relations: ['reservations'],
        });
        return !!resource;
    }
};
exports.ResourceContextService = ResourceContextService;
exports.ResourceContextService = ResourceContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _a : Object, typeof (_b = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _b : Object, typeof (_c = typeof resource_manager_service_1.DomainResourceManagerService !== "undefined" && resource_manager_service_1.DomainResourceManagerService) === "function" ? _c : Object, typeof (_d = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _d : Object, typeof (_e = typeof meeting_room_info_service_1.DomainMeetingRoomInfoService !== "undefined" && meeting_room_info_service_1.DomainMeetingRoomInfoService) === "function" ? _e : Object, typeof (_f = typeof accommodation_info_service_1.DomainAccommodationInfoService !== "undefined" && accommodation_info_service_1.DomainAccommodationInfoService) === "function" ? _f : Object, typeof (_g = typeof equipment_info_service_1.DomainEquipmentInfoService !== "undefined" && equipment_info_service_1.DomainEquipmentInfoService) === "function" ? _g : Object, typeof (_h = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _h : Object, typeof (_j = typeof file_context_service_1.FileContextService !== "undefined" && file_context_service_1.FileContextService) === "function" ? _j : Object, typeof (_k = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _k : Object])
], ResourceContextService);


/***/ }),

/***/ "./src/context/resource/services/vehicle-info.context.service.ts":
/*!***********************************************************************!*\
  !*** ./src/context/resource/services/vehicle-info.context.service.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfoContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const vehicle_info_service_1 = __webpack_require__(/*! @src/domain/vehicle-info/vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const reservation_vehicle_service_1 = __webpack_require__(/*! @src/domain/reservation-vehicle/reservation-vehicle.service */ "./src/domain/reservation-vehicle/reservation-vehicle.service.ts");
const file_service_1 = __webpack_require__(/*! @src/domain/file/file.service */ "./src/domain/file/file.service.ts");
const consumable_service_1 = __webpack_require__(/*! @src/domain/consumable/consumable.service */ "./src/domain/consumable/consumable.service.ts");
const consumable_entity_1 = __webpack_require__(/*! @libs/entities/consumable.entity */ "./libs/entities/consumable.entity.ts");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const file_context_service_1 = __webpack_require__(/*! ../../file/services/file.context.service */ "./src/context/file/services/file.context.service.ts");
let VehicleInfoContextService = class VehicleInfoContextService {
    constructor(domainVehicleInfoService, domainReservationVehicleService, domainFileService, domainConsumableService, domainEmployeeService, fileContextService, dataSource) {
        this.domainVehicleInfoService = domainVehicleInfoService;
        this.domainReservationVehicleService = domainReservationVehicleService;
        this.domainFileService = domainFileService;
        this.domainConsumableService = domainConsumableService;
        this.domainEmployeeService = domainEmployeeService;
        this.fileContextService = fileContextService;
        this.dataSource = dataSource;
    }
    async 차량정보를_조회한다(vehicleInfoId) {
        const vehicleInfo = await this.domainVehicleInfoService.findOne({
            where: { vehicleInfoId },
        });
        if (!vehicleInfo) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.NOT_FOUND);
        }
        return {
            vehicleInfoId: vehicleInfo.vehicleInfoId,
            resourceId: vehicleInfo.resourceId,
            totalMileage: Number(vehicleInfo.totalMileage),
            leftMileage: Number(vehicleInfo.leftMileage),
            insuranceName: vehicleInfo.insuranceName,
            insuranceNumber: vehicleInfo.insuranceNumber,
            parkingLocationImages: vehicleInfo.parkingLocationImages || [],
            odometerImages: vehicleInfo.odometerImages || [],
            indoorImages: vehicleInfo.indoorImages || [],
        };
    }
    async 차량정보를_수정한다(vehicleInfoId, updateVehicleInfoDto) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            if (!updateVehicleInfoDto.parkingLocationImages)
                updateVehicleInfoDto.parkingLocationImages = [];
            if (!updateVehicleInfoDto.odometerImages)
                updateVehicleInfoDto.odometerImages = [];
            if (!updateVehicleInfoDto.indoorImages)
                updateVehicleInfoDto.indoorImages = [];
            const { parkingLocationImages, odometerImages, indoorImages, ...vehicleData } = updateVehicleInfoDto;
            let parkingLocationFilePaths = [];
            let odometerFilePaths = [];
            let indoorFilePaths = [];
            if (parkingLocationImages.length > 0) {
                const files = await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_1.In)(parkingLocationImages) },
                });
                parkingLocationFilePaths = files.map((file) => file.filePath);
            }
            if (odometerImages.length > 0) {
                const files = await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_1.In)(odometerImages) },
                });
                odometerFilePaths = files.map((file) => file.filePath);
            }
            if (indoorImages.length > 0) {
                const files = await this.domainFileService.findAll({
                    where: { fileId: (0, typeorm_1.In)(indoorImages) },
                });
                indoorFilePaths = files.map((file) => file.filePath);
            }
            const vehicleInfo = await this.domainVehicleInfoService.update(vehicleInfoId, {
                ...vehicleData,
                parkingLocationImages: parkingLocationFilePaths,
                odometerImages: odometerFilePaths,
                indoorImages: indoorFilePaths,
            }, {
                queryRunner,
            });
            const allFileIds = [...parkingLocationImages, ...odometerImages, ...indoorImages];
            if (allFileIds.length > 0) {
                await this.fileContextService.파일들을_영구로_변경한다(allFileIds, queryRunner);
            }
            await this.fileContextService.차량정보에_파일들을_연결한다(vehicleInfoId, {
                parkingLocationImages,
                odometerImages,
                indoorImages,
            }, queryRunner);
            const hasConsumables = await this.domainConsumableService.count({
                where: {
                    vehicleInfoId: vehicleInfoId,
                },
            });
            if (hasConsumables === 0) {
                const sourceConsumables = await queryRunner.manager
                    .createQueryBuilder(consumable_entity_1.Consumable, 'consumable')
                    .select('DISTINCT ON (consumable.name) consumable.name, consumable.notifyReplacementCycle, consumable.replaceCycle')
                    .where('consumable.vehicleInfoId != :vehicleInfoId', { vehicleInfoId })
                    .orderBy('consumable.name', 'ASC')
                    .getRawMany();
                const newConsumables = sourceConsumables.map((consumable) => {
                    const newConsumable = new consumable_entity_1.Consumable();
                    newConsumable.vehicleInfoId = vehicleInfoId;
                    newConsumable.name = consumable.name;
                    newConsumable.notifyReplacementCycle = consumable.notifyReplacementCycle;
                    newConsumable.replaceCycle = consumable.replaceCycle;
                    newConsumable.initMileage = updateVehicleInfoDto.totalMileage || 0;
                    return newConsumable;
                });
                await this.domainConsumableService.bulkCreate(newConsumables, {
                    queryRunner,
                });
            }
            await queryRunner.commitTransaction();
            const updatedVehicleInfo = await this.domainVehicleInfoService.findOne({
                where: { vehicleInfoId },
            });
            return {
                vehicleInfoId: updatedVehicleInfo.vehicleInfoId,
                resourceId: updatedVehicleInfo.resourceId,
                totalMileage: Number(updatedVehicleInfo.totalMileage),
                leftMileage: Number(updatedVehicleInfo.leftMileage),
                insuranceName: updatedVehicleInfo.insuranceName,
                insuranceNumber: updatedVehicleInfo.insuranceNumber,
                parkingLocationImages: updatedVehicleInfo.parkingLocationImages || [],
                odometerImages: updatedVehicleInfo.odometerImages || [],
                indoorImages: updatedVehicleInfo.indoorImages || [],
            };
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async 반납_리스트를_조회한다(vehicleInfoId) {
        const reservationVehicles = await this.domainReservationVehicleService.findAll({
            where: { isReturned: true, vehicleInfoId },
            order: {
                returnedAt: 'DESC',
            },
        });
        const employees = await this.domainEmployeeService.findAll({
            where: { employeeId: (0, typeorm_1.In)(reservationVehicles.map((reservationVehicle) => reservationVehicle.returnedBy)) },
        });
        const employeeMap = new Map(employees.map((employee) => [employee.employeeId, employee]));
        for (const reservationVehicle of reservationVehicles) {
            reservationVehicle.returnedBy = employeeMap.get(reservationVehicle.returnedBy)?.name;
            const returnFiles = await this.fileContextService.차량예약_파일을_조회한다(reservationVehicle.reservationVehicleId);
            reservationVehicle.parkingLocationImages = returnFiles.parkingLocationImages.map((file) => file.filePath);
            reservationVehicle.odometerImages = returnFiles.odometerImages.map((file) => file.filePath);
            reservationVehicle.indoorImages = returnFiles.indoorImages.map((file) => file.filePath);
        }
        return reservationVehicles;
    }
    async 반납_상세정보를_조회한다(reservationVehicleId) {
        const reservationVehicle = await this.domainReservationVehicleService.findByReservationVehicleId(reservationVehicleId);
        const employee = await this.domainEmployeeService.findOne({
            where: { employeeId: reservationVehicle.returnedBy },
        });
        reservationVehicle.returnedBy = employee.name;
        return reservationVehicle;
    }
    async 차량정보만_조회한다(resourceId) {
        const vehicleInfo = await this.domainVehicleInfoService.findOne({
            where: { resourceId },
        });
        return vehicleInfo;
    }
};
exports.VehicleInfoContextService = VehicleInfoContextService;
exports.VehicleInfoContextService = VehicleInfoContextService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_service_1.DomainVehicleInfoService !== "undefined" && vehicle_info_service_1.DomainVehicleInfoService) === "function" ? _a : Object, typeof (_b = typeof reservation_vehicle_service_1.DomainReservationVehicleService !== "undefined" && reservation_vehicle_service_1.DomainReservationVehicleService) === "function" ? _b : Object, typeof (_c = typeof file_service_1.DomainFileService !== "undefined" && file_service_1.DomainFileService) === "function" ? _c : Object, typeof (_d = typeof consumable_service_1.DomainConsumableService !== "undefined" && consumable_service_1.DomainConsumableService) === "function" ? _d : Object, typeof (_e = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _e : Object, typeof (_f = typeof file_context_service_1.FileContextService !== "undefined" && file_context_service_1.FileContextService) === "function" ? _f : Object, typeof (_g = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _g : Object])
], VehicleInfoContextService);


/***/ }),

/***/ "./src/context/schedule/schedule.context.module.ts":
/*!*********************************************************!*\
  !*** ./src/context/schedule/schedule.context.module.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleContextModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_module_1 = __webpack_require__(/*! @src/domain/schedule/schedule.module */ "./src/domain/schedule/schedule.module.ts");
const schedule_participant_module_1 = __webpack_require__(/*! @src/domain/schedule-participant/schedule-participant.module */ "./src/domain/schedule-participant/schedule-participant.module.ts");
const schedule_relation_module_1 = __webpack_require__(/*! @src/domain/schedule-relation/schedule-relation.module */ "./src/domain/schedule-relation/schedule-relation.module.ts");
const schedule_query_context_service_1 = __webpack_require__(/*! ./services/schedule-query.context.service */ "./src/context/schedule/services/schedule-query.context.service.ts");
const schedule_mutation_context_service_1 = __webpack_require__(/*! ./services/schedule-mutation.context.service */ "./src/context/schedule/services/schedule-mutation.context.service.ts");
const schedule_authorization_service_1 = __webpack_require__(/*! ./services/schedule-authorization.service */ "./src/context/schedule/services/schedule-authorization.service.ts");
const schedule_policy_service_1 = __webpack_require__(/*! ./services/schedule-policy.service */ "./src/context/schedule/services/schedule-policy.service.ts");
const schedule_state_transition_service_1 = __webpack_require__(/*! ./services/schedule-state-transition.service */ "./src/context/schedule/services/schedule-state-transition.service.ts");
const schedule_post_processing_service_1 = __webpack_require__(/*! ./services/schedule-post-processing.service */ "./src/context/schedule/services/schedule-post-processing.service.ts");
const employee_module_1 = __webpack_require__(/*! @src/domain/employee/employee.module */ "./src/domain/employee/employee.module.ts");
const reservation_module_1 = __webpack_require__(/*! @src/domain/reservation/reservation.module */ "./src/domain/reservation/reservation.module.ts");
const resource_module_1 = __webpack_require__(/*! @src/domain/resource/resource.module */ "./src/domain/resource/resource.module.ts");
const resource_group_module_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.module */ "./src/domain/resource-group/resource-group.module.ts");
const reservation_context_module_1 = __webpack_require__(/*! ../reservation/reservation.context.module */ "./src/context/reservation/reservation.context.module.ts");
let ScheduleContextModule = class ScheduleContextModule {
};
exports.ScheduleContextModule = ScheduleContextModule;
exports.ScheduleContextModule = ScheduleContextModule = __decorate([
    (0, common_1.Module)({
        imports: [
            schedule_module_1.DomainScheduleModule,
            schedule_participant_module_1.DomainScheduleParticipantModule,
            schedule_relation_module_1.DomainScheduleRelationModule,
            employee_module_1.DomainEmployeeModule,
            reservation_module_1.DomainReservationModule,
            resource_module_1.DomainResourceModule,
            resource_group_module_1.DomainResourceGroupModule,
            reservation_context_module_1.ReservationContextModule,
        ],
        providers: [
            schedule_query_context_service_1.ScheduleQueryContextService,
            schedule_mutation_context_service_1.ScheduleMutationContextService,
            schedule_authorization_service_1.ScheduleAuthorizationService,
            schedule_policy_service_1.SchedulePolicyService,
            schedule_state_transition_service_1.ScheduleStateTransitionService,
            schedule_post_processing_service_1.SchedulePostProcessingService,
        ],
        exports: [
            schedule_query_context_service_1.ScheduleQueryContextService,
            schedule_mutation_context_service_1.ScheduleMutationContextService,
            schedule_authorization_service_1.ScheduleAuthorizationService,
            schedule_policy_service_1.SchedulePolicyService,
            schedule_state_transition_service_1.ScheduleStateTransitionService,
            schedule_post_processing_service_1.SchedulePostProcessingService,
        ],
    })
], ScheduleContextModule);


/***/ }),

/***/ "./src/context/schedule/services/schedule-authorization.service.ts":
/*!*************************************************************************!*\
  !*** ./src/context/schedule/services/schedule-authorization.service.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleAuthorizationService = exports.ScheduleAction = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const schedule_service_1 = __webpack_require__(/*! @src/domain/schedule/schedule.service */ "./src/domain/schedule/schedule.service.ts");
const schedule_participant_service_1 = __webpack_require__(/*! @src/domain/schedule-participant/schedule-participant.service */ "./src/domain/schedule-participant/schedule-participant.service.ts");
var ScheduleAction;
(function (ScheduleAction) {
    ScheduleAction["VIEW"] = "VIEW";
    ScheduleAction["CREATE"] = "CREATE";
    ScheduleAction["CANCEL"] = "CANCEL";
    ScheduleAction["COMPLETE"] = "COMPLETE";
    ScheduleAction["EXTEND"] = "EXTEND";
    ScheduleAction["UPDATE"] = "UPDATE";
})(ScheduleAction || (exports.ScheduleAction = ScheduleAction = {}));
let ScheduleAuthorizationService = class ScheduleAuthorizationService {
    constructor(domainScheduleService, domainScheduleParticipantService) {
        this.domainScheduleService = domainScheduleService;
        this.domainScheduleParticipantService = domainScheduleParticipantService;
    }
    async 일정_권한을_확인한다(user, scheduleId, action) {
        const schedule = await this.domainScheduleService.findByScheduleId(scheduleId);
        if (!schedule) {
            throw new common_1.NotFoundException(`일정을 찾을 수 없습니다. ID: ${scheduleId}`);
        }
        const reserver = await this.domainScheduleParticipantService.findReserverByScheduleId(user.employeeId, scheduleId);
        if (!reserver) {
            return {
                isAuthorized: false,
                reason: '해당 일정의 예약자가 아닙니다.',
            };
        }
        const userRole = reserver.type;
        const authResult = this._액션별_권한을_체크한다(userRole, action, schedule);
        return {
            ...authResult,
            userRole,
        };
    }
    async 예약자인지_확인한다(user, scheduleId) {
        return await this.domainScheduleParticipantService.checkReserverByScheduleId(user.employeeId, scheduleId);
    }
    async 참가자인지_확인한다(user, scheduleId) {
        const participants = await this.domainScheduleParticipantService.findByEmployeeIdAndScheduleIds(user.employeeId, [scheduleId]);
        return participants.length > 0;
    }
    async 일정_생성_권한을_확인한다(user) {
        return {
            isAuthorized: true,
        };
    }
    시스템관리자인지_확인한다(user) {
        return user.email?.includes('admin') || false;
    }
    _액션별_권한을_체크한다(userRole, action, schedule) {
        switch (action) {
            case ScheduleAction.VIEW:
                return { isAuthorized: true };
            case ScheduleAction.CREATE:
                return { isAuthorized: true };
            case ScheduleAction.CANCEL:
                if (userRole !== reservation_type_enum_1.ParticipantsType.RESERVER) {
                    return {
                        isAuthorized: false,
                        reason: '일정 취소는 예약자만 가능합니다.',
                    };
                }
                return { isAuthorized: true };
            case ScheduleAction.COMPLETE:
                if (userRole !== reservation_type_enum_1.ParticipantsType.RESERVER) {
                    return {
                        isAuthorized: false,
                        reason: '일정 완료는 예약자만 가능합니다.',
                    };
                }
                return { isAuthorized: true };
            case ScheduleAction.EXTEND:
                if (userRole !== reservation_type_enum_1.ParticipantsType.RESERVER) {
                    return {
                        isAuthorized: false,
                        reason: '일정 연장은 예약자만 가능합니다.',
                    };
                }
                return { isAuthorized: true };
            case ScheduleAction.UPDATE:
                if (userRole !== reservation_type_enum_1.ParticipantsType.RESERVER) {
                    return {
                        isAuthorized: false,
                        reason: '일정 수정은 예약자만 가능합니다.',
                    };
                }
                return { isAuthorized: true };
            default:
                return {
                    isAuthorized: false,
                    reason: '알 수 없는 액션입니다.',
                };
        }
    }
    권한_체크_실패시_예외를_던진다(authResult) {
        if (!authResult.isAuthorized) {
            throw new common_1.UnauthorizedException(authResult.reason || '권한이 없습니다.');
        }
    }
};
exports.ScheduleAuthorizationService = ScheduleAuthorizationService;
exports.ScheduleAuthorizationService = ScheduleAuthorizationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_service_1.DomainScheduleService !== "undefined" && schedule_service_1.DomainScheduleService) === "function" ? _a : Object, typeof (_b = typeof schedule_participant_service_1.DomainScheduleParticipantService !== "undefined" && schedule_participant_service_1.DomainScheduleParticipantService) === "function" ? _b : Object])
], ScheduleAuthorizationService);


/***/ }),

/***/ "./src/context/schedule/services/schedule-mutation.context.service.ts":
/*!****************************************************************************!*\
  !*** ./src/context/schedule/services/schedule-mutation.context.service.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var ScheduleMutationContextService_1;
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleMutationContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const schedule_service_1 = __webpack_require__(/*! @src/domain/schedule/schedule.service */ "./src/domain/schedule/schedule.service.ts");
const schedule_participant_service_1 = __webpack_require__(/*! @src/domain/schedule-participant/schedule-participant.service */ "./src/domain/schedule-participant/schedule-participant.service.ts");
const schedule_relation_service_1 = __webpack_require__(/*! @src/domain/schedule-relation/schedule-relation.service */ "./src/domain/schedule-relation/schedule-relation.service.ts");
const reservation_context_service_1 = __webpack_require__(/*! ../../reservation/services/reservation.context.service */ "./src/context/reservation/services/reservation.context.service.ts");
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
let ScheduleMutationContextService = ScheduleMutationContextService_1 = class ScheduleMutationContextService {
    constructor(dataSource, domainScheduleService, domainScheduleParticipantService, domainScheduleRelationService, reservationContextService) {
        this.dataSource = dataSource;
        this.domainScheduleService = domainScheduleService;
        this.domainScheduleParticipantService = domainScheduleParticipantService;
        this.domainScheduleRelationService = domainScheduleRelationService;
        this.reservationContextService = reservationContextService;
        this.logger = new common_1.Logger(ScheduleMutationContextService_1.name);
    }
    async 일정을_생성한다(scheduleData, queryRunner) {
        const scheduleEntity = {
            title: scheduleData.title,
            description: scheduleData.description,
            startDate: scheduleData.startDate,
            endDate: scheduleData.endDate,
            notifyBeforeStart: scheduleData.notifyBeforeStart || false,
            notifyMinutesBeforeStart: scheduleData.notifyMinutesBeforeStart || [],
            scheduleType: scheduleData.scheduleType,
            status: scheduleData.startDate < new Date() ? schedule_type_enum_1.ScheduleStatus.PROCESSING : schedule_type_enum_1.ScheduleStatus.PENDING,
        };
        const savedSchedule = await this.domainScheduleService.save(scheduleEntity, {
            queryRunner: queryRunner,
        });
        return savedSchedule;
    }
    async 일정_참가자를_추가한다(scheduleId, employeeId, type, queryRunner) {
        const participantDto = {
            scheduleId,
            employeeId,
            type,
        };
        const participantEntity = {
            scheduleId: participantDto.scheduleId,
            employeeId: participantDto.employeeId,
            type: participantDto.type,
        };
        await this.domainScheduleParticipantService.save(participantEntity, {
            queryRunner: queryRunner,
        });
    }
    async 일정관계정보를_생성한다(relationData, queryRunner) {
        const relationEntity = {
            scheduleId: relationData.scheduleId,
            projectId: relationData.projectId,
            reservationId: relationData.reservationId,
        };
        return await this.domainScheduleRelationService.save(relationEntity, {
            queryRunner: queryRunner,
        });
    }
    async 일정_상태를_변경한다(scheduleId, status, completionReason, queryRunner) {
        const updateData = { status };
        if (completionReason) {
            updateData.completionReason = completionReason;
        }
        await this.domainScheduleService.update(scheduleId, updateData, { queryRunner });
    }
    async 일정생성_예약생성_트랜잭션을_실행한다(user, data) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            let reservationId = null;
            if (data.resourceSelection) {
                const isAvailable = await this.reservationContextService.자원예약이_가능한지_확인한다(data.resourceSelection.resourceId, new Date(data.dateRange.startDate), new Date(data.dateRange.endDate));
                if (!isAvailable) {
                    await queryRunner.rollbackTransaction();
                    return {
                        success: false,
                        reason: '선택한 시간대에 자원이 이미 예약되어 있습니다.',
                    };
                }
                const reservationData = {
                    title: data.title,
                    description: data.description || '',
                    resourceId: data.resourceSelection.resourceId,
                    resourceType: data.resourceSelection.resourceType,
                    status: data.resourceSelection.resourceType === resource_type_enum_1.ResourceType.ACCOMMODATION
                        ? reservation_type_enum_1.ReservationStatus.PENDING
                        : reservation_type_enum_1.ReservationStatus.CONFIRMED,
                    startDate: new Date(data.dateRange.startDate),
                    endDate: new Date(data.dateRange.endDate),
                };
                const createdReservation = await this.reservationContextService.자원예약을_생성한다(reservationData, queryRunner);
                reservationId = createdReservation.reservationId;
            }
            const scheduleData = {
                title: data.title,
                description: data.location
                    ? `${data.description || ''}\n장소: ${data.location}`.trim()
                    : data.description,
                startDate: new Date(data.dateRange.startDate),
                endDate: new Date(data.dateRange.endDate),
                scheduleType: data.scheduleType,
                notifyBeforeStart: data.notifyBeforeStart || false,
                notifyMinutesBeforeStart: data.notifyMinutesBeforeStart || [],
            };
            const createdSchedule = await this.일정을_생성한다(scheduleData, queryRunner);
            await this.일정_참가자를_추가한다(createdSchedule.scheduleId, user.employeeId, 'RESERVER', queryRunner);
            for (const participant of data.participants) {
                if (participant.employeeId !== user.employeeId) {
                    await this.일정_참가자를_추가한다(createdSchedule.scheduleId, participant.employeeId, 'PARTICIPANT', queryRunner);
                }
            }
            const relationData = {
                scheduleId: createdSchedule.scheduleId,
                projectId: data.projectSelection?.projectId || null,
                reservationId: reservationId,
            };
            await this.일정관계정보를_생성한다(relationData, queryRunner);
            await queryRunner.commitTransaction();
            return {
                success: true,
                schedule: createdSchedule,
            };
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            return {
                success: false,
                reason: `일정 생성 실패: ${error.message}`,
            };
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.ScheduleMutationContextService = ScheduleMutationContextService;
exports.ScheduleMutationContextService = ScheduleMutationContextService = ScheduleMutationContextService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _a : Object, typeof (_b = typeof schedule_service_1.DomainScheduleService !== "undefined" && schedule_service_1.DomainScheduleService) === "function" ? _b : Object, typeof (_c = typeof schedule_participant_service_1.DomainScheduleParticipantService !== "undefined" && schedule_participant_service_1.DomainScheduleParticipantService) === "function" ? _c : Object, typeof (_d = typeof schedule_relation_service_1.DomainScheduleRelationService !== "undefined" && schedule_relation_service_1.DomainScheduleRelationService) === "function" ? _d : Object, typeof (_e = typeof reservation_context_service_1.ReservationContextService !== "undefined" && reservation_context_service_1.ReservationContextService) === "function" ? _e : Object])
], ScheduleMutationContextService);


/***/ }),

/***/ "./src/context/schedule/services/schedule-policy.service.ts":
/*!******************************************************************!*\
  !*** ./src/context/schedule/services/schedule-policy.service.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SchedulePolicyService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
let SchedulePolicyService = class SchedulePolicyService {
    constructor(domainReservationService) {
        this.domainReservationService = domainReservationService;
    }
    async 일정_취소가_가능한지_확인한다(schedule, reservation) {
        const now = date_util_1.DateUtil.now().toDate();
        if (schedule.startDate <= now || schedule.status === schedule_type_enum_1.ScheduleStatus.PROCESSING) {
            return {
                isAllowed: false,
                reason: '이미 시작된 일정은 취소할 수 없습니다.',
                reasonCode: 'SCHEDULE_ALREADY_STARTED',
            };
        }
        if (reservation) {
            if (reservation.status === reservation_type_enum_1.ReservationStatus.CANCELLED) {
                return {
                    isAllowed: false,
                    reason: '이미 취소된 예약입니다.',
                    reasonCode: 'RESERVATION_ALREADY_CANCELLED',
                };
            }
            if (reservation.status === reservation_type_enum_1.ReservationStatus.CLOSED) {
                return {
                    isAllowed: false,
                    reason: '이미 완료된 예약은 취소할 수 없습니다.',
                    reasonCode: 'RESERVATION_ALREADY_COMPLETED',
                };
            }
        }
        return { isAllowed: true };
    }
    async 일정_완료가_가능한지_확인한다(schedule, reservation) {
        const now = date_util_1.DateUtil.now().toDate();
        if (schedule.startDate > now || schedule.status === schedule_type_enum_1.ScheduleStatus.PENDING) {
            return {
                isAllowed: false,
                reason: '아직 시작되지 않은 일정은 완료할 수 없습니다.',
                reasonCode: 'SCHEDULE_NOT_STARTED',
            };
        }
        if (reservation) {
            if (reservation.status === reservation_type_enum_1.ReservationStatus.CANCELLED) {
                return {
                    isAllowed: false,
                    reason: '취소된 예약은 완료할 수 없습니다.',
                    reasonCode: 'RESERVATION_CANCELLED',
                };
            }
            if (reservation.status === reservation_type_enum_1.ReservationStatus.CLOSED) {
                return {
                    isAllowed: false,
                    reason: '이미 완료된 예약입니다.',
                    reasonCode: 'RESERVATION_ALREADY_COMPLETED',
                };
            }
            if (reservation.status !== reservation_type_enum_1.ReservationStatus.CONFIRMED) {
                return {
                    isAllowed: false,
                    reason: '확정된 예약만 완료할 수 있습니다.',
                    reasonCode: 'INVALID_RESERVATION_STATUS',
                };
            }
        }
        return { isAllowed: true };
    }
    async 일정_연장이_가능한지_확인한다(schedule, extendRequest, reservation) {
        const now = date_util_1.DateUtil.now().toDate();
        if (extendRequest.newEndDate <= now) {
            return {
                isAllowed: false,
                reason: '연장 시간은 현재 시간 이후여야 합니다.',
                reasonCode: 'INVALID_EXTEND_TIME',
            };
        }
        if (extendRequest.newEndDate <= schedule.endDate) {
            return {
                isAllowed: false,
                reason: '연장 시간은 기존 종료 시간보다 늦어야 합니다.',
                reasonCode: 'EXTEND_TIME_TOO_EARLY',
            };
        }
        const maxExtensionHours = 4;
        const maxExtendTime = new Date(schedule.endDate);
        maxExtendTime.setHours(maxExtendTime.getHours() + maxExtensionHours);
        if (extendRequest.newEndDate > maxExtendTime) {
            return {
                isAllowed: false,
                reason: `최대 ${maxExtensionHours}시간까지만 연장 가능합니다.`,
                reasonCode: 'EXCEED_MAX_EXTENSION',
            };
        }
        if (reservation) {
            const isAvailable = await this.domainReservationService.checkReservationConflicts(reservation.resourceId, schedule.endDate, extendRequest.newEndDate);
            if (!isAvailable) {
                return {
                    isAllowed: false,
                    reason: '연장하려는 시간대에 다른 예약이 있습니다.',
                    reasonCode: 'RESOURCE_CONFLICT',
                };
            }
        }
        return { isAllowed: true };
    }
    async 다중_일정_생성이_가능한지_확인한다(createRequest) {
        const now = date_util_1.DateUtil.now().toDate();
        if (!createRequest.datesSelection || createRequest.datesSelection.length === 0) {
            return {
                isAllowed: false,
                reason: '날짜 선택이 필요합니다.',
                reasonCode: 'NO_DATES_SELECTED',
            };
        }
        for (const dateRange of createRequest.datesSelection) {
            const startDate = new Date(dateRange.startDate);
            const endDate = new Date(dateRange.endDate);
            const current30MinStart = new Date(now);
            const currentMinutes = current30MinStart.getMinutes();
            if (currentMinutes < 30) {
                current30MinStart.setMinutes(0, 0, 0);
            }
            else {
                current30MinStart.setMinutes(30, 0, 0);
            }
            if (startDate < current30MinStart) {
                return {
                    isAllowed: false,
                    reason: '현재 30분 단위 시간대 이전으로는 일정을 생성할 수 없습니다.',
                    reasonCode: 'PAST_30MIN_SLOT_NOT_ALLOWED',
                };
            }
            if (startDate >= endDate) {
                return {
                    isAllowed: false,
                    reason: '시작 시간은 종료 시간보다 빨라야 합니다.',
                    reasonCode: 'INVALID_TIME_RANGE',
                };
            }
        }
        return { isAllowed: true };
    }
    async 일정_30분_연장이_가능한지_확인한다(schedule, reservation) {
        if (!reservation) {
            return {
                isAllowed: false,
                reason: '자원예약이 포함된 일정만 연장할 수 있습니다.',
                reasonCode: 'NO_RESOURCE_RESERVATION',
            };
        }
        if (schedule.status !== schedule_type_enum_1.ScheduleStatus.PROCESSING && reservation.status !== reservation_type_enum_1.ReservationStatus.CONFIRMED) {
            return {
                isAllowed: false,
                reason: '활성 상태인 예약만 연장할 수 있습니다.',
                reasonCode: 'RESERVATION_INACTIVE',
            };
        }
        const extendedEndTime = new Date(schedule.endDate);
        extendedEndTime.setMinutes(extendedEndTime.getMinutes() + 30);
        try {
            const isAvailable = await this.domainReservationService.checkReservationConflicts(reservation.resourceId, schedule.endDate, extendedEndTime, reservation.reservationId);
            if (!isAvailable) {
                return {
                    isAllowed: false,
                    reason: '연장하려는 시간에 다른 예약이 있습니다.',
                    reasonCode: 'RESERVATION_CONFLICT',
                };
            }
        }
        catch (error) {
            return {
                isAllowed: false,
                reason: '예약 충돌 확인 중 오류가 발생했습니다.',
                reasonCode: 'CONFLICT_CHECK_ERROR',
            };
        }
        return {
            isAllowed: true,
            reason: '일정 연장이 가능합니다.',
        };
    }
    정책_체크_실패시_예외를_던진다(policyResult) {
        if (!policyResult.isAllowed) {
            throw new common_1.BadRequestException({
                message: policyResult.reason || '정책 위반',
                code: policyResult.reasonCode || 'POLICY_VIOLATION',
            });
        }
    }
    async 일정_날짜수정이_가능한지_확인한다(schedule, reservation, dateChanges) {
        if (schedule.status === schedule_type_enum_1.ScheduleStatus.COMPLETED || schedule.status === schedule_type_enum_1.ScheduleStatus.CANCELLED) {
            return {
                isAllowed: false,
                reason: '완료되거나 취소된 일정은 수정할 수 없습니다.',
                reasonCode: 'SCHEDULE_STATUS_NOT_MODIFIABLE',
            };
        }
        const newStartDate = dateChanges.newStartDate || schedule.startDate;
        const newEndDate = dateChanges.newEndDate || schedule.endDate;
        if (newStartDate >= newEndDate) {
            return {
                isAllowed: false,
                reason: '시작 시간이 종료 시간보다 늦을 수 없습니다.',
                reasonCode: 'INVALID_DATE_RANGE',
            };
        }
        if (reservation) {
            const isAvailable = await this.domainReservationService.checkReservationConflicts(reservation.resourceId, newStartDate, newEndDate, reservation.reservationId);
            if (!isAvailable) {
                return {
                    isAllowed: false,
                    reason: '해당 시간대에 다른 예약이 있습니다.',
                    reasonCode: 'RESERVATION_CONFLICT',
                };
            }
        }
        return { isAllowed: true, reason: '일정 날짜 수정이 가능합니다.' };
    }
    async 일정_정보수정이_가능한지_확인한다(schedule, infoChanges) {
        return { isAllowed: true, reason: '일정 정보 수정이 가능합니다.' };
    }
    async 일정_자원수정이_가능한지_확인한다(schedule, reservation, newResourceId) {
        if (schedule.status === schedule_type_enum_1.ScheduleStatus.COMPLETED || schedule.status === schedule_type_enum_1.ScheduleStatus.CANCELLED) {
            return {
                isAllowed: false,
                reason: '완료되거나 취소된 일정은 수정할 수 없습니다.',
                reasonCode: 'SCHEDULE_STATUS_NOT_MODIFIABLE',
            };
        }
        if (reservation) {
            const isAvailable = await this.domainReservationService.checkReservationConflicts(newResourceId, schedule.startDate, schedule.endDate, reservation.reservationId);
            if (!isAvailable) {
                return {
                    isAllowed: false,
                    reason: '새로운 자원의 해당 시간대에 다른 예약이 있습니다.',
                    reasonCode: 'NEW_RESOURCE_CONFLICT',
                };
            }
        }
        return { isAllowed: true, reason: '일정 자원 수정이 가능합니다.' };
    }
    수정_시나리오를_분석한다(updateDto) {
        return {
            isDateUpdate: !!(updateDto.date?.startDate || updateDto.date?.endDate),
            isInfoUpdate: !!(updateDto.info?.title ||
                updateDto.info?.description ||
                updateDto.info?.notifyBeforeStart !== undefined ||
                updateDto.info?.notifyMinutesBeforeStart ||
                updateDto.info?.location ||
                updateDto.info?.scheduleType ||
                updateDto.info?.projectId ||
                updateDto.info?.participants),
            isResourceUpdate: !!updateDto.resource?.resourceId,
        };
    }
    수정요청을_기본검증한다(updateDto, scenarios) {
        if (!scenarios.isDateUpdate && !scenarios.isInfoUpdate && !scenarios.isResourceUpdate) {
            throw new common_1.BadRequestException('수정할 항목이 없습니다.');
        }
        const activeScenarios = [scenarios.isDateUpdate, scenarios.isInfoUpdate, scenarios.isResourceUpdate].filter(Boolean);
        if (activeScenarios.length > 1) {
            throw new common_1.BadRequestException('한 번에 하나의 수정 유형만 가능합니다.');
        }
        if (scenarios.isDateUpdate) {
            if (!updateDto.date?.startDate || !updateDto.date?.endDate) {
                throw new common_1.BadRequestException('날짜 수정 시 시작일과 종료일이 모두 필요합니다.');
            }
        }
        if (scenarios.isResourceUpdate) {
            if (!updateDto.resource?.resourceId) {
                throw new common_1.BadRequestException('자원 수정 시 자원 ID가 필요합니다.');
            }
        }
    }
};
exports.SchedulePolicyService = SchedulePolicyService;
exports.SchedulePolicyService = SchedulePolicyService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _a : Object])
], SchedulePolicyService);


/***/ }),

/***/ "./src/context/schedule/services/schedule-post-processing.service.ts":
/*!***************************************************************************!*\
  !*** ./src/context/schedule/services/schedule-post-processing.service.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var SchedulePostProcessingService_1;
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SchedulePostProcessingService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const schedule_service_1 = __webpack_require__(/*! @src/domain/schedule/schedule.service */ "./src/domain/schedule/schedule.service.ts");
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
let SchedulePostProcessingService = SchedulePostProcessingService_1 = class SchedulePostProcessingService {
    constructor(domainScheduleService, domainReservationService) {
        this.domainScheduleService = domainScheduleService;
        this.domainReservationService = domainReservationService;
        this.logger = new common_1.Logger(SchedulePostProcessingService_1.name);
    }
    async 일정관련_배치_작업을_처리한다() {
        const now = date_util_1.DateUtil.now().format();
        const pendingToChangeProcessing = await this.domainScheduleService.findByPendingToChangeProcessing();
        for (const schedule of pendingToChangeProcessing) {
            await this.domainScheduleService.update(schedule.scheduleId, { status: schedule_type_enum_1.ScheduleStatus.PROCESSING });
        }
        const processingToChangeCompleted = await this.domainScheduleService.findByProcessingToChangeCompleted();
        for (const schedule of processingToChangeCompleted) {
            await this.domainScheduleService.update(schedule.scheduleId, { status: schedule_type_enum_1.ScheduleStatus.COMPLETED });
        }
    }
};
exports.SchedulePostProcessingService = SchedulePostProcessingService;
exports.SchedulePostProcessingService = SchedulePostProcessingService = SchedulePostProcessingService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_service_1.DomainScheduleService !== "undefined" && schedule_service_1.DomainScheduleService) === "function" ? _a : Object, typeof (_b = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _b : Object])
], SchedulePostProcessingService);


/***/ }),

/***/ "./src/context/schedule/services/schedule-query.context.service.ts":
/*!*************************************************************************!*\
  !*** ./src/context/schedule/services/schedule-query.context.service.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var ScheduleQueryContextService_1;
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleQueryContextService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_service_1 = __webpack_require__(/*! @src/domain/schedule/schedule.service */ "./src/domain/schedule/schedule.service.ts");
const schedule_participant_service_1 = __webpack_require__(/*! @src/domain/schedule-participant/schedule-participant.service */ "./src/domain/schedule-participant/schedule-participant.service.ts");
const schedule_relation_service_1 = __webpack_require__(/*! @src/domain/schedule-relation/schedule-relation.service */ "./src/domain/schedule-relation/schedule-relation.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const employee_service_1 = __webpack_require__(/*! @src/domain/employee/employee.service */ "./src/domain/employee/employee.service.ts");
const reservation_service_1 = __webpack_require__(/*! @src/domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
const resource_service_1 = __webpack_require__(/*! @src/domain/resource/resource.service */ "./src/domain/resource/resource.service.ts");
const resource_group_service_1 = __webpack_require__(/*! @src/domain/resource-group/resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let ScheduleQueryContextService = ScheduleQueryContextService_1 = class ScheduleQueryContextService {
    constructor(domainScheduleService, domainScheduleParticipantService, domainScheduleRelationService, domainEmployeeService, domainReservationService, domainResourceService, domainResourceGroupService) {
        this.domainScheduleService = domainScheduleService;
        this.domainScheduleParticipantService = domainScheduleParticipantService;
        this.domainScheduleRelationService = domainScheduleRelationService;
        this.domainEmployeeService = domainEmployeeService;
        this.domainReservationService = domainReservationService;
        this.domainResourceService = domainResourceService;
        this.domainResourceGroupService = domainResourceGroupService;
        this.logger = new common_1.Logger(ScheduleQueryContextService_1.name);
    }
    async 다가오는_일정을_조회한다() {
        const now = date_util_1.DateUtil.now().toDate();
        const endOfDay = date_util_1.DateUtil.now().addMinutes(90).toDate();
        const candidateSchedules = await this.domainScheduleService.findAll({
            where: {
                notifyBeforeStart: true,
                startDate: (0, typeorm_1.Between)(now, endOfDay),
            },
        });
        const currentMinute = new Date(now.getFullYear(), now.getMonth(), now.getDate(), now.getHours(), now.getMinutes(), 0, 0);
        return candidateSchedules.filter((schedule) => {
            const notifyTimes = schedule.notifyMinutesBeforeStart.map((minutes) => {
                const notifyTime = new Date(schedule.startDate);
                notifyTime.setMinutes(notifyTime.getMinutes() - minutes);
                return {
                    minutes,
                    notifyTime: new Date(notifyTime.getFullYear(), notifyTime.getMonth(), notifyTime.getDate(), notifyTime.getHours(), notifyTime.getMinutes(), 0, 0),
                };
            });
            const isMatch = notifyTimes.some((notifyTime) => notifyTime.notifyTime.getTime() === currentMinute.getTime());
            if (isMatch) {
                schedule.notifyMinutesBeforeStart = [
                    notifyTimes.find((notifyTime) => notifyTime.notifyTime.getTime() === currentMinute.getTime())
                        ?.minutes,
                ];
            }
            return isMatch;
        });
    }
    async 일정과_관계정보들을_조회한다(scheduleId, option) {
        const schedule = await this.domainScheduleService.findOne({
            where: { scheduleId },
        });
        if (!schedule) {
            throw new common_1.NotFoundException('일정을 찾을 수 없습니다.');
        }
        const scheduleRelation = await this.domainScheduleRelationService.findByScheduleId(scheduleId);
        let project = null, reservation = null, resource = null;
        let participants = [];
        if (option?.withProject && scheduleRelation.projectId) {
            project = null;
        }
        if (option?.withReservation && scheduleRelation.reservationId) {
            reservation = await this.domainReservationService.findByReservationId(scheduleRelation.reservationId);
            reservation.status =
                reservation.startDate < new Date() && reservation.endDate > new Date()
                    ? reservation_type_enum_1.ReservationStatus.USING
                    : reservation.status;
            resource = option?.withResource
                ? reservation
                    ? await this.domainResourceService.findByResourceId(reservation.resourceId)
                    : null
                : null;
        }
        if (option?.withParticipants) {
            const scheduleParticipants = await this.domainScheduleParticipantService.findByScheduleId(scheduleId);
            const employeeIds = [...new Set(scheduleParticipants.map((participant) => participant.employeeId))];
            const employees = await this.domainEmployeeService.findByEmployeeIds(employeeIds);
            participants = scheduleParticipants.map((participant) => ({
                participantId: participant.participantId,
                scheduleId: participant.scheduleId,
                employeeId: participant.employeeId,
                type: participant.type,
                employee: employees.find((employee) => employee.employeeId === participant.employeeId),
            }));
        }
        return {
            schedule,
            project,
            reservation,
            resource,
            participants,
        };
    }
    async 복수_일정과_관계정보들을_조회한다(scheduleIds, option) {
        if (scheduleIds.length === 0) {
            return [];
        }
        const schedules = await this.domainScheduleService.findByScheduleIds(scheduleIds);
        const scheduleMap = new Map(schedules.map((schedule) => [schedule.scheduleId, schedule]));
        const scheduleRelations = await this.domainScheduleRelationService.findByScheduleIds(scheduleIds);
        const relationMap = new Map(scheduleRelations.map((relation) => [relation.scheduleId, relation]));
        let projectMap = new Map();
        let reservationMap = new Map();
        let resourceMap = new Map();
        let participantsMap = new Map();
        if (option?.withProject) {
            const projectIds = scheduleRelations
                .filter((relation) => relation.projectId)
                .map((relation) => relation.projectId);
            if (projectIds.length > 0) {
                projectMap = new Map(projectIds.map((id) => [id, { projectId: id, projectName: '프로젝트' }]));
            }
        }
        if (option?.withReservation) {
            const reservationIds = scheduleRelations
                .filter((relation) => relation.reservationId)
                .map((relation) => relation.reservationId);
            if (reservationIds.length > 0) {
                const reservations = await Promise.all(reservationIds.map((id) => this.domainReservationService.findByReservationId(id)));
                reservations.forEach((reservation) => {
                    reservation.status =
                        reservation.startDate < new Date() && reservation.endDate > new Date()
                            ? reservation_type_enum_1.ReservationStatus.USING
                            : reservation.status;
                });
                reservationMap = new Map(reservations.filter(Boolean).map((reservation) => [reservation.reservationId, reservation]));
                if (option?.withResource) {
                    const resourceIds = reservations.filter(Boolean).map((reservation) => reservation.resourceId);
                    if (resourceIds.length > 0) {
                        const resources = await Promise.all(resourceIds.map((id) => this.domainResourceService.findByResourceId(id)));
                        resourceMap = new Map(resources.filter(Boolean).map((resource) => [resource.resourceId, resource]));
                    }
                }
            }
        }
        if (option?.withParticipants) {
            const allParticipantsArrays = await Promise.all(scheduleIds.map((scheduleId) => this.domainScheduleParticipantService.findByScheduleId(scheduleId)));
            const allParticipants = allParticipantsArrays.flat();
            const employeeIds = [
                ...new Set(allParticipants.map((participant) => participant.employeeId)),
            ];
            const employees = await this.domainEmployeeService.findByEmployeeIds(employeeIds);
            const employeeMap = new Map(employees.map((employee) => [employee.employeeId, employee]));
            const participantGroups = allParticipants.reduce((groups, participant) => {
                if (!groups[participant.scheduleId]) {
                    groups[participant.scheduleId] = [];
                }
                groups[participant.scheduleId].push({
                    participantId: participant.participantId,
                    scheduleId: participant.scheduleId,
                    employeeId: participant.employeeId,
                    type: participant.type,
                    employee: employeeMap.get(participant.employeeId),
                });
                return groups;
            }, {});
            participantsMap = new Map(Object.entries(participantGroups));
        }
        const results = [];
        for (const scheduleId of scheduleIds) {
            const schedule = scheduleMap.get(scheduleId);
            if (!schedule) {
                continue;
            }
            const relation = relationMap.get(scheduleId);
            let project = null;
            let reservation = null;
            let resource = null;
            let participants = [];
            if (option?.withProject && relation?.projectId) {
                project = projectMap.get(relation.projectId) || null;
            }
            if (option?.withReservation && relation?.reservationId) {
                reservation = reservationMap.get(relation.reservationId) || null;
                if (option?.withResource && reservation?.resourceId) {
                    resource = resourceMap.get(reservation.resourceId) || null;
                }
            }
            if (option?.withParticipants) {
                participants = participantsMap.get(scheduleId) || [];
            }
            results.push({
                schedule,
                project,
                reservation,
                resource,
                participants,
            });
        }
        return results;
    }
    async 캘린더용_일정을_조회한다(date, category, employeeId) {
        const startDateOfMonth = new Date(`${date}-01`);
        const endDateOfMonth = new Date(`${date}-01`);
        endDateOfMonth.setMonth(endDateOfMonth.getMonth() + 1);
        endDateOfMonth.setDate(0);
        endDateOfMonth.setHours(23, 59, 59);
        const monthlySchedules = await this.domainScheduleService.findByDateRange(startDateOfMonth, endDateOfMonth);
        let scheduleIds = monthlySchedules.map((schedule) => schedule.scheduleId);
        if (employeeId) {
            const myParticipants = await this.domainScheduleParticipantService.findByEmployeeIdAndScheduleIds(employeeId, scheduleIds);
            scheduleIds = myParticipants.map((participant) => participant.scheduleId);
        }
        if (category && category !== 'ALL') {
            const scheduleRelations = await this.domainScheduleRelationService.findByScheduleIds(scheduleIds);
            switch (category) {
                case 'SCHEDULE':
                    const pureScheduleRelations = scheduleRelations.filter((relation) => !relation.projectId && !relation.reservationId);
                    const pureScheduleIds = pureScheduleRelations.map((r) => r.scheduleId);
                    const schedulesWithoutRelation = scheduleIds.filter((id) => !scheduleRelations.some((r) => r.scheduleId === id));
                    scheduleIds = [...pureScheduleIds, ...schedulesWithoutRelation];
                    break;
                case 'PROJECT':
                    const projectRelations = scheduleRelations.filter((relation) => relation.projectId);
                    scheduleIds = projectRelations.map((r) => r.scheduleId);
                    break;
                case 'RESOURCE':
                    const resourceRelations = scheduleRelations.filter((relation) => relation.reservationId);
                    scheduleIds = resourceRelations.map((r) => r.scheduleId);
                    break;
            }
        }
        return [...new Set(scheduleIds)];
    }
    async 직원의_역할별_일정ID들을_조회한다(employeeId, role, fromDate) {
        const conditions = { employeeId };
        if (role)
            conditions.type = role;
        const participants = await this.domainScheduleParticipantService.findAll({
            where: conditions,
            select: {
                scheduleId: true,
            },
        });
        let scheduleIds = participants.map((p) => p.scheduleId);
        if (fromDate && scheduleIds.length > 0) {
            const validSchedules = await this.domainScheduleService.findAll({
                where: {
                    scheduleId: (0, typeorm_1.In)(scheduleIds),
                    startDate: (0, typeorm_1.MoreThanOrEqual)(fromDate),
                },
                select: {
                    scheduleId: true,
                },
            });
            scheduleIds = validSchedules.map((s) => s.scheduleId);
        }
        return scheduleIds;
    }
    async 카테고리별_일정ID들을_조회한다(baseScheduleIds, category) {
        if (baseScheduleIds.length === 0)
            return [];
        const scheduleRelations = await this.domainScheduleRelationService.findAll({
            where: { scheduleId: (0, typeorm_1.In)(baseScheduleIds) },
            select: {
                scheduleId: true,
                projectId: true,
                reservationId: true,
            },
        });
        switch (category) {
            case 'SCHEDULE':
                const relationScheduleIds = new Set(scheduleRelations.map((r) => r.scheduleId));
                const pureScheduleIds = baseScheduleIds.filter((id) => !relationScheduleIds.has(id));
                const pureRelationIds = scheduleRelations
                    .filter((r) => !r.projectId && !r.reservationId)
                    .map((r) => r.scheduleId);
                return [...pureScheduleIds, ...pureRelationIds];
            case 'PROJECT':
                return scheduleRelations.filter((r) => r.projectId).map((r) => r.scheduleId);
            case 'RESOURCE':
                return scheduleRelations.filter((r) => r.reservationId).map((r) => r.scheduleId);
            default:
                return baseScheduleIds;
        }
    }
    async 일정ID들로_카테고리별_통계를_계산한다(scheduleIds, category) {
        if (scheduleIds.length === 0) {
            return [];
        }
        const statistics = [];
        if (!category || category === 'ALL') {
            const totalScheduleCount = await this.domainScheduleService.count({
                where: { scheduleId: (0, typeorm_1.In)(scheduleIds) },
            });
            const projectCount = await this.domainScheduleRelationService.count({
                where: {
                    scheduleId: (0, typeorm_1.In)(scheduleIds),
                    projectId: (0, typeorm_1.Not)((0, typeorm_1.IsNull)()),
                },
            });
            const resourceCount = await this.domainScheduleRelationService.count({
                where: {
                    scheduleId: (0, typeorm_1.In)(scheduleIds),
                    reservationId: (0, typeorm_1.Not)((0, typeorm_1.IsNull)()),
                },
            });
            statistics.push({ label: '일정', count: totalScheduleCount }, { label: '프로젝트', count: projectCount }, { label: '자원', count: resourceCount });
        }
        else if (category === 'SCHEDULE') {
            const scheduleTypes = [schedule_type_enum_1.ScheduleType.COMPANY, schedule_type_enum_1.ScheduleType.DEPARTMENT, schedule_type_enum_1.ScheduleType.PERSONAL];
            for (const scheduleType of scheduleTypes) {
                const count = await this.domainScheduleService.count({
                    where: {
                        scheduleId: (0, typeorm_1.In)(scheduleIds),
                        scheduleType: scheduleType,
                    },
                });
                statistics.push({
                    label: this.일정타입_라벨을_가져온다(scheduleType),
                    count: count,
                });
            }
        }
        else if (category === 'PROJECT') {
            const projectCount = await this.domainScheduleRelationService.count({
                where: {
                    scheduleId: (0, typeorm_1.In)(scheduleIds),
                    projectId: (0, typeorm_1.Not)((0, typeorm_1.IsNull)()),
                },
            });
            statistics.push({
                label: '프로젝트',
                count: projectCount,
            });
        }
        else if (category === 'RESOURCE') {
            const resourceTypes = [
                resource_type_enum_1.ResourceType.MEETING_ROOM,
                resource_type_enum_1.ResourceType.VEHICLE,
                resource_type_enum_1.ResourceType.ACCOMMODATION,
                resource_type_enum_1.ResourceType.EQUIPMENT,
            ];
            for (const resourceType of resourceTypes) {
                const resourceRelations = await this.domainScheduleRelationService.findAll({
                    where: {
                        scheduleId: (0, typeorm_1.In)(scheduleIds),
                        reservationId: (0, typeorm_1.Not)((0, typeorm_1.IsNull)()),
                    },
                    select: { reservationId: true },
                });
                if (resourceRelations.length === 0) {
                    statistics.push({
                        label: this.자원타입_라벨을_가져온다(resourceType),
                        count: 0,
                    });
                    continue;
                }
                const reservationIds = resourceRelations.map((r) => r.reservationId);
                const resources = await this.domainResourceService.findAll({
                    where: { type: resourceType },
                    select: { resourceId: true },
                });
                const resourceIds = resources.map((r) => r.resourceId);
                const count = resourceIds.length > 0
                    ? await this.domainReservationService.count({
                        where: {
                            reservationId: (0, typeorm_1.In)(reservationIds),
                            resourceId: (0, typeorm_1.In)(resourceIds),
                        },
                    })
                    : 0;
                statistics.push({
                    label: this.자원타입_라벨을_가져온다(resourceType),
                    count: count,
                });
            }
        }
        return statistics;
    }
    async 키워드로_일정ID들을_조회한다(baseScheduleIds, keyword) {
        if (!keyword || keyword.trim() === '' || baseScheduleIds.length === 0) {
            return baseScheduleIds;
        }
        const searchKeyword = `%${keyword.trim()}%`;
        const matchingSchedules = await this.domainScheduleService.findAll({
            where: [
                {
                    scheduleId: (0, typeorm_1.In)(baseScheduleIds),
                    title: (0, typeorm_1.Like)(searchKeyword),
                },
                {
                    scheduleId: (0, typeorm_1.In)(baseScheduleIds),
                    description: (0, typeorm_1.Like)(searchKeyword),
                },
            ],
            select: {
                scheduleId: true,
            },
        });
        return matchingSchedules.map((s) => s.scheduleId);
    }
    페이지네이션_일정ID들을_계산한다(scheduleIds, page = 1, limit = 20) {
        const totalCount = scheduleIds.length;
        const filteredCount = totalCount;
        const totalPages = Math.ceil(totalCount / limit);
        const startIndex = (page - 1) * limit;
        const endIndex = startIndex + limit;
        return {
            paginatedIds: scheduleIds.slice(startIndex, endIndex),
            totalCount,
            filteredCount,
            totalPages,
            hasNext: page < totalPages,
            hasPrevious: page > 1,
        };
    }
    async 내_일정을_조회한다(employeeId, query) {
        const now = new Date();
        now.setHours(0, 0, 0, 0);
        let scheduleIds = await this.직원의_역할별_일정ID들을_조회한다(employeeId, query.role, now);
        if (query.category && query.category !== 'ALL') {
            scheduleIds = await this.카테고리별_일정ID들을_조회한다(scheduleIds, query.category);
        }
        const statistics = await this.일정ID들로_카테고리별_통계를_계산한다(scheduleIds, query.category);
        const totalCount = scheduleIds.length;
        const filteredScheduleIds = await this.키워드로_일정ID들을_조회한다(scheduleIds, query.keyword);
        const paginationResult = this.페이지네이션_일정ID들을_계산한다(filteredScheduleIds, query.page, query.limit);
        return {
            scheduleIds: paginationResult.paginatedIds,
            statistics,
            totalCount,
            filteredCount: paginationResult.filteredCount,
            totalPages: paginationResult.totalPages,
            hasNext: paginationResult.hasNext,
            hasPrevious: paginationResult.hasPrevious,
        };
    }
    async 내_일정_내역을_조회한다(employeeId, query) {
        const scheduleIds = await this.직원의_역할별_일정ID들을_조회한다(employeeId, reservation_type_enum_1.ParticipantsType.RESERVER);
        const filteredScheduleIds = await this.키워드로_일정ID들을_조회한다(scheduleIds, query.keyword);
        const paginationResult = this.페이지네이션_일정ID들을_계산한다(filteredScheduleIds, query.page, query.limit);
        return {
            scheduleIds: paginationResult.paginatedIds,
            filteredCount: paginationResult.filteredCount,
            totalPages: paginationResult.totalPages,
            hasNext: paginationResult.hasNext,
            hasPrevious: paginationResult.hasPrevious,
        };
    }
    async 일정들의_예약자정보를_조회한다(scheduleIds) {
        const reservers = await this.domainScheduleParticipantService.findReserversByScheduleIds(scheduleIds);
        const employeeIds = [...new Set(reservers.map((reserver) => reserver.employeeId))];
        const employees = await this.domainEmployeeService.findByEmployeeIds(employeeIds);
        const employeeMap = new Map();
        employees.forEach((employee) => {
            employeeMap.set(employee.employeeId, employee);
        });
        const result = new Map();
        reservers.forEach((reserver) => {
            const employee = employeeMap.get(reserver.employeeId);
            result.set(reserver.scheduleId, {
                participant: reserver,
                employee,
            });
        });
        return result;
    }
    async 일정들의_모든참가자정보를_조회한다(scheduleIds) {
        const allParticipants = await this.domainScheduleParticipantService.findAllByScheduleIds(scheduleIds);
        const employeeIds = [...new Set(allParticipants.map((participant) => participant.employeeId))];
        const employees = await this.domainEmployeeService.findByEmployeeIds(employeeIds);
        const employeeMap = new Map();
        employees.forEach((employee) => {
            employeeMap.set(employee.employeeId, employee);
        });
        const result = new Map();
        allParticipants.forEach((participant) => {
            const employee = employeeMap.get(participant.employeeId);
            if (employee) {
                const scheduleId = participant.scheduleId;
                if (!result.has(scheduleId)) {
                    result.set(scheduleId, []);
                }
                result.get(scheduleId).push({
                    participant,
                    employee,
                });
            }
        });
        return result;
    }
    async 일정들의_프로젝트정보를_조회한다(scheduleRelations) {
        const validRelations = scheduleRelations.filter((relation) => relation.projectId);
        const scheduleProjectMap = new Map();
        validRelations.forEach((relation) => {
            scheduleProjectMap.set(relation.scheduleId, { projectId: relation.projectId });
        });
        return scheduleProjectMap;
    }
    async 일정들의_예약정보를_조회한다(scheduleRelations) {
        const validRelations = scheduleRelations.filter((relation) => relation.reservationId);
        const reservationIds = validRelations.map((scheduleRelation) => scheduleRelation.reservationId);
        const reservations = await this.domainReservationService.findByReservationIds(reservationIds);
        const reservationByIdMap = new Map();
        reservations.forEach((reservation) => {
            reservationByIdMap.set(reservation.reservationId, reservation);
        });
        const scheduleReservationMap = new Map();
        validRelations.forEach((relation) => {
            const reservation = reservationByIdMap.get(relation.reservationId);
            if (reservation) {
                scheduleReservationMap.set(relation.scheduleId, reservation);
            }
        });
        return scheduleReservationMap;
    }
    async 일정들을_역할별로_필터링한다(schedules, employeeId, role) {
        if (!role) {
            return schedules;
        }
        const scheduleIds = schedules.map((schedule) => schedule.scheduleId);
        const participants = await this.domainScheduleParticipantService.findByEmployeeIdAndScheduleIds(employeeId, scheduleIds);
        const filteredParticipants = participants.filter((participant) => participant.type === role);
        const filteredScheduleIds = new Set(filteredParticipants.map((p) => p.scheduleId));
        return schedules.filter((schedule) => filteredScheduleIds.has(schedule.scheduleId));
    }
    async 일정들의_자원정보를_조회한다(scheduleRelations) {
        const validRelations = scheduleRelations.filter((relation) => relation.reservationId);
        const reservationIds = validRelations.map((relation) => relation.reservationId);
        const reservations = await this.domainReservationService.findByReservationIds(reservationIds);
        const resourceIds = [...new Set(reservations.map((reservation) => reservation.resourceId))];
        const resources = await this.domainResourceService.findAll({
            where: resourceIds.map((resourceId) => ({ resourceId })),
        });
        const resourceMap = new Map();
        resources.forEach((resource) => {
            resourceMap.set(resource.resourceId, resource);
        });
        const scheduleResourceMap = new Map();
        validRelations.forEach((relation) => {
            const reservation = reservations.find((r) => r.reservationId === relation.reservationId);
            if (reservation) {
                const resource = resourceMap.get(reservation.resourceId);
                if (resource) {
                    const resourceInfo = {
                        resourceId: resource.resourceId,
                        resourceName: resource.name,
                        resourceType: resource.type,
                    };
                    if (!scheduleResourceMap.has(relation.scheduleId)) {
                        scheduleResourceMap.set(relation.scheduleId, resourceInfo);
                    }
                }
            }
        });
        return scheduleResourceMap;
    }
    async 일정들을_카테고리별로_분류한다(schedules, scheduleRelations) {
        const scheduleTypeStats = new Map();
        const projectStats = [];
        const resourceStats = new Map();
        const relationMap = new Map();
        scheduleRelations.forEach((relation) => {
            if (!relationMap.has(relation.scheduleId)) {
                relationMap.set(relation.scheduleId, []);
            }
            relationMap.get(relation.scheduleId).push(relation);
        });
        const reservationRelations = scheduleRelations.filter((relation) => relation.reservationId);
        let scheduleResourceMap = new Map();
        if (reservationRelations.length > 0) {
            scheduleResourceMap = await this.일정들의_자원정보를_조회한다(reservationRelations);
        }
        schedules.forEach((schedule) => {
            const relations = relationMap.get(schedule.scheduleId) || [];
            if (!scheduleTypeStats.has(schedule.scheduleType)) {
                scheduleTypeStats.set(schedule.scheduleType, []);
            }
            scheduleTypeStats.get(schedule.scheduleType).push(schedule);
            if (relations.some((r) => r.projectId)) {
                projectStats.push(schedule);
            }
            if (relations.some((r) => r.reservationId)) {
                const scheduleResources = scheduleResourceMap.get(schedule.scheduleId);
                if (scheduleResources) {
                    const resourceType = scheduleResources.resourceType;
                    if (!resourceStats.has(resourceType)) {
                        resourceStats.set(resourceType, []);
                    }
                    resourceStats.get(resourceType).push(schedule);
                }
            }
        });
        return { scheduleTypeStats, projectStats, resourceStats };
    }
    일정들을_키워드로_필터링한다(schedules, keyword) {
        if (!keyword || keyword.trim() === '') {
            return schedules;
        }
        const searchKeyword = keyword.trim().toLowerCase();
        return schedules.filter((schedule) => {
            const titleMatch = schedule.title.toLowerCase().includes(searchKeyword);
            const descriptionMatch = schedule.description?.toLowerCase().includes(searchKeyword) || false;
            return titleMatch || descriptionMatch;
        });
    }
    일정들을_페이지네이션_적용한다(schedules, page = 1, limit = 20) {
        const totalPages = Math.ceil(schedules.length / limit);
        const startIndex = (page - 1) * limit;
        const endIndex = startIndex + limit;
        const paginatedSchedules = schedules.slice(startIndex, endIndex);
        return {
            paginatedSchedules,
            totalPages,
            hasNext: page < totalPages,
            hasPrevious: page > 1,
        };
    }
    async 자원유형별_일정을_조회한다(resourceType, resourceIds, date, month) {
        try {
            let startDate;
            let endDate;
            if (resourceType === resource_type_enum_1.ResourceType.ACCOMMODATION && month) {
                startDate = date_util_1.DateUtil.date(`${month}-01`).toDate();
                endDate = date_util_1.DateUtil.date(`${month}-01`).addMonth(1).toDate();
            }
            else if (date) {
                startDate = date_util_1.DateUtil.date(date).toDate();
                endDate = date_util_1.DateUtil.date(date).addDays(1).toDate();
            }
            const reservations = await this.domainReservationService.findByResourceIdsAndDateRange(resourceIds, startDate, endDate);
            if (reservations.length === 0) {
                return [];
            }
            const reservationIds = reservations.map((r) => r.reservationId);
            const scheduleRelations = await this.domainScheduleRelationService.findByReservationIds(reservationIds);
            if (scheduleRelations.length === 0) {
                return [];
            }
            const scheduleIds = scheduleRelations.map((sr) => sr.scheduleId);
            const schedules = await this.domainScheduleService.findByScheduleIds(scheduleIds);
            return schedules;
        }
        catch (error) {
            this.logger.error(`자원유형별 일정 조회 실패: ${error.message}`, error.stack);
            return [];
        }
    }
    filterSchedulesByDate(schedules, resourceType, date, month) {
        if (resourceType === resource_type_enum_1.ResourceType.ACCOMMODATION && month) {
            const startOfMonth = new Date(`${month}-01T00:00:00Z`);
            const endOfMonth = new Date(startOfMonth);
            endOfMonth.setMonth(endOfMonth.getMonth() + 1);
            endOfMonth.setDate(0);
            endOfMonth.setHours(23, 59, 59, 999);
            return schedules.filter((schedule) => {
                const scheduleStart = new Date(schedule.startDate);
                const scheduleEnd = new Date(schedule.endDate);
                return scheduleStart <= endOfMonth && scheduleEnd >= startOfMonth;
            });
        }
        else if (date) {
            const targetDate = new Date(`${date}T00:00:00Z`);
            const nextDay = new Date(targetDate);
            nextDay.setDate(nextDay.getDate() + 1);
            return schedules.filter((schedule) => {
                const scheduleStart = new Date(schedule.startDate);
                const scheduleEnd = new Date(schedule.endDate);
                return scheduleStart < nextDay && scheduleEnd >= targetDate;
            });
        }
        return schedules;
    }
    async 자원그룹별_자원정보를_조회한다(resourceType) {
        const allResourceGroups = await this.domainResourceGroupService.findByType(resourceType);
        const resourceGroups = allResourceGroups.filter((group) => group.parentResourceGroupId);
        const resources = await this.domainResourceService.findByResourceGroupIds(resourceGroups.map((group) => group.resourceGroupId));
        const resourceMap = new Map();
        for (const resource of resources) {
            if (!resourceMap.has(resource.resourceGroupId)) {
                resourceMap.set(resource.resourceGroupId, []);
            }
            resourceMap.get(resource.resourceGroupId).push(resource);
        }
        return { resourceGroups, resources, resourceMap };
    }
    async 자원별_일정정보를_맵핑한다(schedules) {
        if (schedules.length === 0) {
            return new Map();
        }
        const scheduleIds = schedules.map((s) => s.scheduleId);
        const scheduleRelations = await this.domainScheduleRelationService.findByScheduleIds(scheduleIds);
        if (scheduleRelations.length === 0) {
            return new Map();
        }
        const reservationIds = scheduleRelations.filter((r) => r.reservationId).map((r) => r.reservationId);
        if (reservationIds.length === 0) {
            return new Map();
        }
        const reservations = await this.domainReservationService.findByReservationIds(reservationIds);
        const reservationToResourceMap = new Map();
        reservations.forEach((reservation) => {
            if (reservation.resourceId) {
                reservationToResourceMap.set(reservation.reservationId, reservation.resourceId);
            }
        });
        const resourceScheduleMap = new Map();
        schedules.forEach((schedule) => {
            const relation = scheduleRelations.find((r) => r.scheduleId === schedule.scheduleId);
            if (relation && relation.reservationId) {
                const resourceId = reservationToResourceMap.get(relation.reservationId);
                if (resourceId) {
                    if (!resourceScheduleMap.has(resourceId)) {
                        resourceScheduleMap.set(resourceId, []);
                    }
                    resourceScheduleMap.get(resourceId).push(schedule);
                }
            }
        });
        return resourceScheduleMap;
    }
    async 일정의_참가자들을_분리하여_조회한다(scheduleId) {
        const allParticipantsMap = await this.일정들의_모든참가자정보를_조회한다([scheduleId]);
        const allParticipants = allParticipantsMap.get(scheduleId) || [];
        let reserver = undefined;
        const participants = [];
        allParticipants.forEach(({ participant, employee }) => {
            const participantDto = {
                participantId: participant.participantId,
                employeeId: employee.employeeId,
                employeeName: employee.name,
                participantType: participant.type,
            };
            if (participant.type === reservation_type_enum_1.ParticipantsType.RESERVER) {
                reserver = participantDto;
            }
            else {
                participants.push(participantDto);
            }
        });
        return {
            reserver,
            participants,
        };
    }
    async 프로젝트_존재여부를_확인한다(projectId) {
        this.logger.log(`프로젝트 존재 여부 확인: ${projectId}`);
        return true;
    }
    async 자원정보를_조회한다(resourceId) {
        try {
            const resource = await this.domainResourceService.findOne({
                where: { resourceId },
            });
            return resource;
        }
        catch (error) {
            this.logger.error(`자원 정보 조회 실패: ${error.message}`, error.stack);
            return null;
        }
    }
    카테고리별_통계를_생성한다(scheduleTypeStats, projectStats, resourceStats, category) {
        const statistics = [];
        if (!category || category === 'ALL') {
            statistics.push({
                label: '일정',
                count: Array.from(scheduleTypeStats.values()).reduce((sum, arr) => sum + arr.length, 0),
            });
            statistics.push({
                label: '프로젝트',
                count: projectStats.length,
            });
            statistics.push({
                label: '자원',
                count: Array.from(resourceStats.values()).reduce((sum, arr) => sum + arr.length, 0),
            });
        }
        else if (category === 'SCHEDULE') {
            const scheduleTypes = ['COMPANY', 'DEPARTMENT', 'PERSONAL'];
            scheduleTypes.forEach((scheduleType) => {
                const scheduleList = scheduleTypeStats.get(scheduleType) || [];
                statistics.push({
                    label: this.일정타입_라벨을_가져온다(scheduleType),
                    count: scheduleList.length,
                });
            });
        }
        else if (category === 'PROJECT') {
            statistics.push({
                label: '프로젝트',
                count: projectStats.length,
            });
        }
        else if (category === 'RESOURCE') {
            const resourceTypes = ['MEETING_ROOM', 'VEHICLE', 'ACCOMMODATION', 'EQUIPMENT'];
            resourceTypes.forEach((resourceType) => {
                const scheduleList = resourceStats.get(resourceType) || [];
                statistics.push({
                    label: this.자원타입_라벨을_가져온다(resourceType),
                    count: scheduleList.length,
                });
            });
        }
        return statistics;
    }
    카테고리별로_필터링한다(scheduleTypeStats, projectStats, resourceStats, category) {
        switch (category) {
            case 'SCHEDULE':
                return Array.from(scheduleTypeStats.values()).flat();
            case 'PROJECT':
                return projectStats;
            case 'RESOURCE':
                return Array.from(resourceStats.values()).flat();
            default:
                return [];
        }
    }
    자원타입_라벨을_가져온다(resourceType) {
        switch (resourceType) {
            case 'MEETING_ROOM':
                return '회의실';
            case 'VEHICLE':
                return '차량';
            case 'ACCOMMODATION':
                return '숙소';
            case 'EQUIPMENT':
                return '장비';
            default:
                return resourceType;
        }
    }
    일정타입_라벨을_가져온다(type) {
        switch (type) {
            case 'COMPANY':
                return '회사전체일정';
            case 'DEPARTMENT':
                return '부서일정';
            case 'PERSONAL':
                return '개인일정';
            default:
                return type;
        }
    }
    async 자원별_일정_조회_데이터를_조회한다(resourceType, date, month) {
        const { resourceGroups, resources, resourceMap } = await this.자원그룹별_자원정보를_조회한다(resourceType);
        const schedules = await this.자원유형별_일정을_조회한다(resourceType, resources.map((r) => r.resourceId), date, month);
        if (schedules.length === 0) {
            return {
                scheduleDataList: [],
                resourceGroups,
                resourceMap,
            };
        }
        const scheduleIds = schedules.map((s) => s.scheduleId);
        const scheduleDataList = await this.복수_일정과_관계정보들을_조회한다(scheduleIds, {
            withReservation: true,
            withResource: true,
            withParticipants: true,
        });
        return {
            scheduleDataList,
            resourceGroups,
            resourceMap,
        };
    }
};
exports.ScheduleQueryContextService = ScheduleQueryContextService;
exports.ScheduleQueryContextService = ScheduleQueryContextService = ScheduleQueryContextService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_service_1.DomainScheduleService !== "undefined" && schedule_service_1.DomainScheduleService) === "function" ? _a : Object, typeof (_b = typeof schedule_participant_service_1.DomainScheduleParticipantService !== "undefined" && schedule_participant_service_1.DomainScheduleParticipantService) === "function" ? _b : Object, typeof (_c = typeof schedule_relation_service_1.DomainScheduleRelationService !== "undefined" && schedule_relation_service_1.DomainScheduleRelationService) === "function" ? _c : Object, typeof (_d = typeof employee_service_1.DomainEmployeeService !== "undefined" && employee_service_1.DomainEmployeeService) === "function" ? _d : Object, typeof (_e = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _e : Object, typeof (_f = typeof resource_service_1.DomainResourceService !== "undefined" && resource_service_1.DomainResourceService) === "function" ? _f : Object, typeof (_g = typeof resource_group_service_1.DomainResourceGroupService !== "undefined" && resource_group_service_1.DomainResourceGroupService) === "function" ? _g : Object])
], ScheduleQueryContextService);


/***/ }),

/***/ "./src/context/schedule/services/schedule-state-transition.service.ts":
/*!****************************************************************************!*\
  !*** ./src/context/schedule/services/schedule-state-transition.service.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ScheduleStateTransitionService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
const schedule_service_1 = __webpack_require__(/*! ../../../domain/schedule/schedule.service */ "./src/domain/schedule/schedule.service.ts");
const reservation_service_1 = __webpack_require__(/*! ../../../domain/reservation/reservation.service */ "./src/domain/reservation/reservation.service.ts");
const schedule_relation_service_1 = __webpack_require__(/*! ../../../domain/schedule-relation/schedule-relation.service */ "./src/domain/schedule-relation/schedule-relation.service.ts");
const schedule_participant_service_1 = __webpack_require__(/*! ../../../domain/schedule-participant/schedule-participant.service */ "./src/domain/schedule-participant/schedule-participant.service.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let ScheduleStateTransitionService = class ScheduleStateTransitionService {
    constructor(dataSource, domainScheduleService, domainReservationService, domainScheduleRelationService, domainScheduleParticipantService) {
        this.dataSource = dataSource;
        this.domainScheduleService = domainScheduleService;
        this.domainReservationService = domainReservationService;
        this.domainScheduleRelationService = domainScheduleRelationService;
        this.domainScheduleParticipantService = domainScheduleParticipantService;
    }
    async 일정을_취소한다(schedule, reservation, cancelReason, queryRunner) {
        const shouldManageTransaction = !queryRunner;
        if (shouldManageTransaction) {
            queryRunner = this.dataSource.createQueryRunner();
            await queryRunner.connect();
            await queryRunner.startTransaction();
        }
        try {
            if (reservation) {
                await this.domainReservationService.update(reservation.reservationId, { status: reservation_type_enum_1.ReservationStatus.CANCELLED }, { queryRunner });
            }
            await this.domainScheduleService.softDelete(schedule.scheduleId, { queryRunner });
            if (shouldManageTransaction) {
                await queryRunner.commitTransaction();
            }
            return true;
        }
        catch (error) {
            if (shouldManageTransaction) {
                await queryRunner.rollbackTransaction();
            }
            return false;
        }
        finally {
            if (shouldManageTransaction) {
                await queryRunner.release();
            }
        }
    }
    async 일정을_완료한다(schedule, reservation, completionNotes, queryRunner) {
        const shouldManageTransaction = !queryRunner;
        if (shouldManageTransaction) {
            queryRunner = this.dataSource.createQueryRunner();
            await queryRunner.connect();
            await queryRunner.startTransaction();
        }
        try {
            const completedAt = new Date();
            const newEndTime = new Date(completedAt);
            const minutes = newEndTime.getMinutes();
            if (minutes === 0) {
                newEndTime.setSeconds(0, 0);
            }
            else if (minutes <= 30) {
                newEndTime.setMinutes(30, 0, 0);
            }
            else {
                newEndTime.setHours(newEndTime.getHours() + 1, 0, 0, 0);
            }
            const shouldUpdateEndTime = newEndTime < schedule.endDate;
            const actualEndTime = shouldUpdateEndTime ? newEndTime : schedule.endDate;
            if (reservation && shouldUpdateEndTime) {
                await this.domainReservationService.update(reservation.reservationId, {
                    status: reservation_type_enum_1.ReservationStatus.CLOSED,
                    endDate: actualEndTime,
                }, { queryRunner });
                reservation = await this.domainReservationService.findOne({
                    where: { reservationId: reservation.reservationId },
                });
            }
            else if (reservation) {
                await this.domainReservationService.update(reservation.reservationId, { status: reservation_type_enum_1.ReservationStatus.CLOSED }, { queryRunner });
                reservation = await this.domainReservationService.findOne({
                    where: { reservationId: reservation.reservationId },
                });
            }
            await this.domainScheduleService.update(schedule.scheduleId, {
                status: schedule_type_enum_1.ScheduleStatus.COMPLETED,
            }, { queryRunner });
            if (shouldManageTransaction) {
                await queryRunner.commitTransaction();
            }
            const updatedSchedule = await this.domainScheduleService.findOne({
                where: { scheduleId: schedule.scheduleId },
            });
            return true;
        }
        catch (error) {
            if (shouldManageTransaction) {
                await queryRunner.rollbackTransaction();
            }
            return false;
        }
        finally {
            if (shouldManageTransaction) {
                await queryRunner.release();
            }
        }
    }
    async 일정을_연장한다(schedule, reservation, newEndDate, extendReason, queryRunner) {
        const shouldManageTransaction = !queryRunner;
        if (shouldManageTransaction) {
            queryRunner = this.dataSource.createQueryRunner();
            await queryRunner.connect();
            await queryRunner.startTransaction();
        }
        try {
            const originalEndDate = schedule.endDate;
            if (reservation) {
                await this.domainReservationService.update(reservation.reservationId, { endDate: newEndDate }, { queryRunner });
                reservation = await this.domainReservationService.findOne({
                    where: { reservationId: reservation.reservationId },
                });
            }
            await this.domainScheduleService.update(schedule.scheduleId, { endDate: newEndDate }, { queryRunner });
            if (shouldManageTransaction) {
                await queryRunner.commitTransaction();
            }
            const updatedSchedule = await this.domainScheduleService.findOne({
                where: { scheduleId: schedule.scheduleId },
            });
            return { schedule: updatedSchedule, reservation, originalEndDate, newEndDate };
        }
        catch (error) {
            if (shouldManageTransaction) {
                await queryRunner.rollbackTransaction();
            }
            throw error;
        }
        finally {
            if (shouldManageTransaction) {
                await queryRunner.release();
            }
        }
    }
    async 일정을_수정한다(schedule, reservation, updateData, updateReason, queryRunner) {
        const shouldManageTransaction = !queryRunner;
        if (shouldManageTransaction) {
            queryRunner = this.dataSource.createQueryRunner();
            await queryRunner.connect();
            await queryRunner.startTransaction();
        }
        try {
            const changes = {};
            const scheduleUpdates = {};
            if (updateData.title !== undefined && updateData.title !== schedule.title) {
                changes.title = { from: schedule.title, to: updateData.title };
                scheduleUpdates.title = updateData.title;
            }
            if (updateData.startDate !== undefined && updateData.startDate.getTime() !== schedule.startDate.getTime()) {
                changes.startDate = { from: schedule.startDate, to: updateData.startDate };
                scheduleUpdates.startDate = updateData.startDate;
            }
            if (updateData.endDate !== undefined && updateData.endDate.getTime() !== schedule.endDate.getTime()) {
                changes.endDate = { from: schedule.endDate, to: updateData.endDate };
                scheduleUpdates.endDate = updateData.endDate;
            }
            if (updateData.description !== undefined) {
                scheduleUpdates.description = updateData.description;
            }
            if (Object.keys(changes).length > 0) {
                const changeLog = `[${date_util_1.DateUtil.format(date_util_1.DateUtil.now().toDate(), 'YYYY-MM-DD HH:mm')}] 일정이 수정되었습니다.${updateReason ? ` 사유: ${updateReason}` : ''}`;
                const currentDescription = scheduleUpdates.description !== undefined ? scheduleUpdates.description : schedule.description;
                scheduleUpdates.description = currentDescription ? `${currentDescription}\n\n${changeLog}` : changeLog;
            }
            if (Object.keys(scheduleUpdates).length > 0) {
                await this.domainScheduleService.update(schedule.scheduleId, scheduleUpdates, { queryRunner });
            }
            if (shouldManageTransaction) {
                await queryRunner.commitTransaction();
            }
            const updatedSchedule = await this.domainScheduleService.findOne({
                where: { scheduleId: schedule.scheduleId },
            });
            return {
                schedule: updatedSchedule,
                reservation,
                changes: Object.keys(changes).map((key) => `${key}: ${changes[key].from} → ${changes[key].to}`),
            };
        }
        catch (error) {
            if (shouldManageTransaction) {
                await queryRunner.rollbackTransaction();
            }
            throw error;
        }
        finally {
            if (shouldManageTransaction) {
                await queryRunner.release();
            }
        }
    }
    async 일정을_시나리오별로_수정한다(schedule, reservation, changes, queryRunner) {
        const shouldManageTransaction = !queryRunner;
        queryRunner = queryRunner || this.dataSource.createQueryRunner();
        if (shouldManageTransaction) {
            await queryRunner.connect();
            await queryRunner.startTransaction();
        }
        try {
            const updateResult = {
                schedule,
                reservation,
                changes: [],
            };
            if (changes.dateChanges) {
                await this.일정_날짜를_수정한다(schedule, reservation, changes.dateChanges, queryRunner);
                updateResult.changes.push('날짜 수정');
            }
            if (changes.infoChanges) {
                const infoUpdateResult = await this.일정_정보를_수정한다(schedule, changes.infoChanges, queryRunner);
                updateResult.changes.push('정보 수정');
                if (infoUpdateResult.participantChanges) {
                    updateResult.participantChanges = infoUpdateResult.participantChanges;
                }
            }
            if (changes.resourceChanges) {
                await this.일정_자원을_수정한다(schedule, reservation, changes.resourceChanges, queryRunner);
                updateResult.changes.push('자원 수정');
            }
            if (shouldManageTransaction) {
                await queryRunner.commitTransaction();
            }
            return updateResult;
        }
        catch (error) {
            if (shouldManageTransaction) {
                await queryRunner.rollbackTransaction();
            }
            throw error;
        }
        finally {
            if (shouldManageTransaction) {
                await queryRunner.release();
            }
        }
    }
    async 일정_날짜를_수정한다(schedule, reservation, dateChanges, queryRunner) {
        const newStartDate = dateChanges.startDate || schedule.startDate;
        const newEndDate = dateChanges.endDate || schedule.endDate;
        await this.domainScheduleService.update(schedule.scheduleId, {
            startDate: newStartDate,
            endDate: newEndDate,
        }, { queryRunner });
        if (reservation) {
            await this.domainReservationService.update(reservation.reservationId, {
                startDate: newStartDate,
                endDate: newEndDate,
            }, { queryRunner });
        }
        schedule.startDate = newStartDate;
        schedule.endDate = newEndDate;
        if (reservation) {
            reservation.startDate = newStartDate;
            reservation.endDate = newEndDate;
        }
    }
    async 일정_정보를_수정한다(schedule, infoChanges, queryRunner) {
        const updateData = {};
        let participantChanges;
        if (infoChanges.title !== undefined)
            updateData.title = infoChanges.title;
        if (infoChanges.description !== undefined)
            updateData.description = infoChanges.description;
        if (infoChanges.notifyBeforeStart !== undefined)
            updateData.notifyBeforeStart = infoChanges.notifyBeforeStart;
        if (infoChanges.notifyMinutesBeforeStart !== undefined)
            updateData.notifyMinutesBeforeStart = infoChanges.notifyMinutesBeforeStart;
        if (infoChanges.location !== undefined)
            updateData.location = infoChanges.location;
        if (infoChanges.scheduleType !== undefined)
            updateData.scheduleType = infoChanges.scheduleType;
        if (infoChanges.projectId !== undefined) {
            await this.프로젝트_관계를_업데이트한다(schedule.scheduleId, infoChanges.projectId, queryRunner);
        }
        if (Object.keys(updateData).length > 0) {
            await this.domainScheduleService.update(schedule.scheduleId, updateData, { queryRunner });
            Object.assign(schedule, updateData);
        }
        if (infoChanges.participants && infoChanges.participants.length > 0) {
            participantChanges = await this.참여자를_업데이트한다(schedule.scheduleId, infoChanges.participants, queryRunner);
        }
        return {
            schedule,
            participantChanges,
        };
    }
    async 프로젝트_관계를_업데이트한다(scheduleId, newProjectId, queryRunner) {
        const existingRelation = await this.domainScheduleRelationService.findByScheduleId(scheduleId);
        await this.domainScheduleRelationService.update(existingRelation.scheduleRelationId, { projectId: newProjectId }, { queryRunner });
    }
    async 참여자를_업데이트한다(scheduleId, newParticipants, queryRunner) {
        const previousParticipants = await this.domainScheduleParticipantService.findByScheduleId(scheduleId);
        if (previousParticipants.length > 0) {
            for (const participant of previousParticipants) {
                if (participant.type === reservation_type_enum_1.ParticipantsType.PARTICIPANT) {
                    await this.domainScheduleParticipantService.delete(participant.participantId, { queryRunner });
                }
            }
        }
        const createdParticipants = [];
        for (const participant of newParticipants) {
            const newParticipant = await this.domainScheduleParticipantService.save({
                scheduleId,
                employeeId: participant,
                type: reservation_type_enum_1.ParticipantsType.PARTICIPANT,
            }, { queryRunner });
            createdParticipants.push(newParticipant);
        }
        return {
            previousParticipants,
            newParticipants: createdParticipants,
        };
    }
    async 일정_자원을_수정한다(schedule, reservation, resourceChanges, queryRunner) {
        if (!reservation) {
            throw new Error('자원 수정을 위해서는 기존 예약이 있어야 합니다.');
        }
        await this.domainReservationService.update(reservation.reservationId, {
            resourceId: resourceChanges.newResourceId,
        }, { queryRunner });
        reservation.resourceId = resourceChanges.newResourceId;
    }
};
exports.ScheduleStateTransitionService = ScheduleStateTransitionService;
exports.ScheduleStateTransitionService = ScheduleStateTransitionService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _a : Object, typeof (_b = typeof schedule_service_1.DomainScheduleService !== "undefined" && schedule_service_1.DomainScheduleService) === "function" ? _b : Object, typeof (_c = typeof reservation_service_1.DomainReservationService !== "undefined" && reservation_service_1.DomainReservationService) === "function" ? _c : Object, typeof (_d = typeof schedule_relation_service_1.DomainScheduleRelationService !== "undefined" && schedule_relation_service_1.DomainScheduleRelationService) === "function" ? _d : Object, typeof (_e = typeof schedule_participant_service_1.DomainScheduleParticipantService !== "undefined" && schedule_participant_service_1.DomainScheduleParticipantService) === "function" ? _e : Object])
], ScheduleStateTransitionService);


/***/ }),

/***/ "./src/domain/accommodation-info/accommodation-info.module.ts":
/*!********************************************************************!*\
  !*** ./src/domain/accommodation-info/accommodation-info.module.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainAccommodationInfoModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const accommodation_info_service_1 = __webpack_require__(/*! ./accommodation-info.service */ "./src/domain/accommodation-info/accommodation-info.service.ts");
const accommodation_info_repository_1 = __webpack_require__(/*! ./accommodation-info.repository */ "./src/domain/accommodation-info/accommodation-info.repository.ts");
const accommodation_info_entity_1 = __webpack_require__(/*! @libs/entities/accommodation-info.entity */ "./libs/entities/accommodation-info.entity.ts");
let DomainAccommodationInfoModule = class DomainAccommodationInfoModule {
};
exports.DomainAccommodationInfoModule = DomainAccommodationInfoModule;
exports.DomainAccommodationInfoModule = DomainAccommodationInfoModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([accommodation_info_entity_1.AccommodationInfo])],
        providers: [accommodation_info_service_1.DomainAccommodationInfoService, accommodation_info_repository_1.DomainAccommodationInfoRepository],
        exports: [accommodation_info_service_1.DomainAccommodationInfoService],
    })
], DomainAccommodationInfoModule);


/***/ }),

/***/ "./src/domain/accommodation-info/accommodation-info.repository.ts":
/*!************************************************************************!*\
  !*** ./src/domain/accommodation-info/accommodation-info.repository.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainAccommodationInfoRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const accommodation_info_entity_1 = __webpack_require__(/*! @libs/entities/accommodation-info.entity */ "./libs/entities/accommodation-info.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainAccommodationInfoRepository = class DomainAccommodationInfoRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainAccommodationInfoRepository = DomainAccommodationInfoRepository;
exports.DomainAccommodationInfoRepository = DomainAccommodationInfoRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(accommodation_info_entity_1.AccommodationInfo)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainAccommodationInfoRepository);


/***/ }),

/***/ "./src/domain/accommodation-info/accommodation-info.service.ts":
/*!*********************************************************************!*\
  !*** ./src/domain/accommodation-info/accommodation-info.service.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainAccommodationInfoService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const accommodation_info_repository_1 = __webpack_require__(/*! ./accommodation-info.repository */ "./src/domain/accommodation-info/accommodation-info.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainAccommodationInfoService = class DomainAccommodationInfoService extends base_service_1.BaseService {
    constructor(accommodationInfoRepository) {
        super(accommodationInfoRepository);
        this.accommodationInfoRepository = accommodationInfoRepository;
    }
    async findByAccommodationInfoId(accommodationInfoId) {
        const accommodationInfo = await this.accommodationInfoRepository.findOne({
            where: { accommodationInfoId },
        });
        if (!accommodationInfo) {
            throw new common_1.NotFoundException('숙소 정보를 찾을 수 없습니다.');
        }
        return accommodationInfo;
    }
    async findByResourceId(resourceId) {
        const accommodationInfo = await this.accommodationInfoRepository.findOne({
            where: { resourceId },
            relations: ['resource'],
        });
        if (!accommodationInfo) {
            throw new common_1.NotFoundException('숙소 정보를 찾을 수 없습니다.');
        }
        return accommodationInfo;
    }
};
exports.DomainAccommodationInfoService = DomainAccommodationInfoService;
exports.DomainAccommodationInfoService = DomainAccommodationInfoService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof accommodation_info_repository_1.DomainAccommodationInfoRepository !== "undefined" && accommodation_info_repository_1.DomainAccommodationInfoRepository) === "function" ? _a : Object])
], DomainAccommodationInfoService);


/***/ }),

/***/ "./src/domain/consumable/consumable.module.ts":
/*!****************************************************!*\
  !*** ./src/domain/consumable/consumable.module.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainConsumableModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const consumable_service_1 = __webpack_require__(/*! ./consumable.service */ "./src/domain/consumable/consumable.service.ts");
const consumable_repository_1 = __webpack_require__(/*! ./consumable.repository */ "./src/domain/consumable/consumable.repository.ts");
const consumable_entity_1 = __webpack_require__(/*! @libs/entities/consumable.entity */ "./libs/entities/consumable.entity.ts");
let DomainConsumableModule = class DomainConsumableModule {
};
exports.DomainConsumableModule = DomainConsumableModule;
exports.DomainConsumableModule = DomainConsumableModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([consumable_entity_1.Consumable])],
        providers: [consumable_service_1.DomainConsumableService, consumable_repository_1.DomainConsumableRepository],
        exports: [consumable_service_1.DomainConsumableService],
    })
], DomainConsumableModule);


/***/ }),

/***/ "./src/domain/consumable/consumable.repository.ts":
/*!********************************************************!*\
  !*** ./src/domain/consumable/consumable.repository.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainConsumableRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const consumable_entity_1 = __webpack_require__(/*! @libs/entities/consumable.entity */ "./libs/entities/consumable.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainConsumableRepository = class DomainConsumableRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
    async bulkCreate(consumables, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.save(consumables);
    }
};
exports.DomainConsumableRepository = DomainConsumableRepository;
exports.DomainConsumableRepository = DomainConsumableRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(consumable_entity_1.Consumable)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainConsumableRepository);


/***/ }),

/***/ "./src/domain/consumable/consumable.service.ts":
/*!*****************************************************!*\
  !*** ./src/domain/consumable/consumable.service.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainConsumableService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const consumable_repository_1 = __webpack_require__(/*! ./consumable.repository */ "./src/domain/consumable/consumable.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainConsumableService = class DomainConsumableService extends base_service_1.BaseService {
    constructor(consumableRepository) {
        super(consumableRepository);
        this.consumableRepository = consumableRepository;
    }
    async findOneByConsumableId(consumableId) {
        const consumable = await this.consumableRepository.findOne({
            where: { consumableId },
        });
        return consumable;
    }
    async findAllByVehicleInfoId(vehicleInfoId) {
        return this.consumableRepository.findAll({
            where: { vehicleInfoId },
        });
    }
    async bulkCreate(consumables, repositoryOptions) {
        return this.consumableRepository.bulkCreate(consumables, repositoryOptions);
    }
};
exports.DomainConsumableService = DomainConsumableService;
exports.DomainConsumableService = DomainConsumableService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_repository_1.DomainConsumableRepository !== "undefined" && consumable_repository_1.DomainConsumableRepository) === "function" ? _a : Object])
], DomainConsumableService);


/***/ }),

/***/ "./src/domain/employee-notification/employee-notification.module.ts":
/*!**************************************************************************!*\
  !*** ./src/domain/employee-notification/employee-notification.module.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeNotificationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const employee_notification_entity_1 = __webpack_require__(/*! @libs/entities/employee-notification.entity */ "./libs/entities/employee-notification.entity.ts");
const employee_notification_service_1 = __webpack_require__(/*! ./employee-notification.service */ "./src/domain/employee-notification/employee-notification.service.ts");
const employee_notification_repository_1 = __webpack_require__(/*! ./employee-notification.repository */ "./src/domain/employee-notification/employee-notification.repository.ts");
let DomainEmployeeNotificationModule = class DomainEmployeeNotificationModule {
};
exports.DomainEmployeeNotificationModule = DomainEmployeeNotificationModule;
exports.DomainEmployeeNotificationModule = DomainEmployeeNotificationModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([employee_notification_entity_1.EmployeeNotification])],
        providers: [employee_notification_service_1.DomainEmployeeNotificationService, employee_notification_repository_1.DomainEmployeeNotificationRepository],
        exports: [employee_notification_service_1.DomainEmployeeNotificationService],
    })
], DomainEmployeeNotificationModule);


/***/ }),

/***/ "./src/domain/employee-notification/employee-notification.repository.ts":
/*!******************************************************************************!*\
  !*** ./src/domain/employee-notification/employee-notification.repository.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeNotificationRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_notification_entity_1 = __webpack_require__(/*! @libs/entities/employee-notification.entity */ "./libs/entities/employee-notification.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainEmployeeNotificationRepository = class DomainEmployeeNotificationRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
    async deleteByNotificationId(notificationId) {
        await this.repository.delete({ notificationId });
    }
};
exports.DomainEmployeeNotificationRepository = DomainEmployeeNotificationRepository;
exports.DomainEmployeeNotificationRepository = DomainEmployeeNotificationRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(employee_notification_entity_1.EmployeeNotification)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainEmployeeNotificationRepository);


/***/ }),

/***/ "./src/domain/employee-notification/employee-notification.service.ts":
/*!***************************************************************************!*\
  !*** ./src/domain/employee-notification/employee-notification.service.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeNotificationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
const employee_notification_repository_1 = __webpack_require__(/*! ./employee-notification.repository */ "./src/domain/employee-notification/employee-notification.repository.ts");
let DomainEmployeeNotificationService = class DomainEmployeeNotificationService extends base_service_1.BaseService {
    constructor(employeeNotificationRepository) {
        super(employeeNotificationRepository);
        this.employeeNotificationRepository = employeeNotificationRepository;
    }
    async findByEmployeeId(employeeId) {
        return await this.employeeNotificationRepository.findAll({
            where: { employeeId },
            relations: ['notification'],
            order: { notification: { createdAt: 'DESC' } },
        });
    }
    async markAsRead(employeeNotificationId) {
        const notification = await this.findOne({ where: { employeeNotificationId } });
        if (!notification) {
            throw new common_1.NotFoundException('알림을 찾을 수 없습니다.');
        }
        return await this.update(employeeNotificationId, { isRead: true });
    }
    async deleteByNotificationId(notificationId) {
        await this.employeeNotificationRepository.deleteByNotificationId(notificationId);
    }
};
exports.DomainEmployeeNotificationService = DomainEmployeeNotificationService;
exports.DomainEmployeeNotificationService = DomainEmployeeNotificationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_notification_repository_1.DomainEmployeeNotificationRepository !== "undefined" && employee_notification_repository_1.DomainEmployeeNotificationRepository) === "function" ? _a : Object])
], DomainEmployeeNotificationService);


/***/ }),

/***/ "./src/domain/employee/adapters/employee-microservice.adapter.ts":
/*!***********************************************************************!*\
  !*** ./src/domain/employee/adapters/employee-microservice.adapter.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var EmployeeMicroserviceAdapter_1;
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeMicroserviceAdapter = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const axios_1 = __webpack_require__(/*! @nestjs/axios */ "@nestjs/axios");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const rxjs_1 = __webpack_require__(/*! rxjs */ "rxjs");
let EmployeeMicroserviceAdapter = EmployeeMicroserviceAdapter_1 = class EmployeeMicroserviceAdapter {
    constructor(httpService, configService) {
        this.httpService = httpService;
        this.configService = configService;
        this.logger = new common_1.Logger(EmployeeMicroserviceAdapter_1.name);
        this.employeeServiceUrl = this.configService.get('SSO_API_URL') || 'https://lsso.vercel.app';
    }
    getHeaders(authorization) {
        const headers = {
            'Content-Type': 'application/json',
        };
        if (authorization) {
            headers['Authorization'] = authorization;
        }
        return headers;
    }
    async getEmployee(authorization, employeeId, withDetail = false) {
        try {
            this.logger.log(`직원 정보 조회 요청: employeeId=${employeeId}, withDetail=${withDetail}`);
            const params = new URLSearchParams();
            params.append('employeeId', employeeId);
            if (withDetail) {
                params.append('withDetail', 'true');
            }
            const url = `${this.employeeServiceUrl}/api/organization/employee?${params.toString()}`;
            const response = await (0, rxjs_1.firstValueFrom)(this.httpService.get(url, { headers: this.getHeaders(authorization) }).pipe((0, rxjs_1.map)((res) => res.data), (0, rxjs_1.catchError)((error) => {
                this.logger.error(`직원 정보 조회 실패: ${error.message}`, error.stack);
                if (error.response?.status === 404) {
                    throw new common_1.NotFoundException('직원을 찾을 수 없습니다.');
                }
                throw new common_1.BadRequestException('직원 정보 조회 중 오류가 발생했습니다.');
            })));
            this.logger.log(`직원 정보 조회 성공: employeeId=${employeeId}`);
            return response;
        }
        catch (error) {
            this.logger.error(`직원 정보 조회 중 예외 발생: ${error.message}`, error.stack);
            throw error;
        }
    }
    async getEmployeeByNumber(authorization, employeeNumber, withDetail = false) {
        try {
            this.logger.log(`사번으로 직원 정보 조회 요청: employeeNumber=${employeeNumber}, withDetail=${withDetail}`);
            const params = new URLSearchParams();
            params.append('employeeNumber', employeeNumber);
            if (withDetail) {
                params.append('withDetail', 'true');
            }
            const url = `${this.employeeServiceUrl}/api/organization/employee?${params.toString()}`;
            const response = await (0, rxjs_1.firstValueFrom)(this.httpService.get(url, { headers: this.getHeaders(authorization) }).pipe((0, rxjs_1.map)((res) => res.data), (0, rxjs_1.catchError)((error) => {
                this.logger.error(`사번으로 직원 정보 조회 실패: ${error.message}`, error.stack);
                if (error.response?.status === 404) {
                    throw new common_1.NotFoundException('해당 사번의 직원을 찾을 수 없습니다.');
                }
                throw new common_1.BadRequestException('직원 정보 조회 중 오류가 발생했습니다.');
            })));
            this.logger.log(`사번으로 직원 정보 조회 성공: employeeNumber=${employeeNumber}`);
            return response;
        }
        catch (error) {
            this.logger.error(`사번으로 직원 정보 조회 중 예외 발생: ${error.message}`, error.stack);
            throw error;
        }
    }
    async getEmployees(authorization, requestDto) {
        try {
            this.logger.log(`직원 목록 조회 요청:`, requestDto);
            const params = new URLSearchParams();
            if (requestDto.employeeId) {
                params.append('employeeIds', requestDto.employeeId);
            }
            if (requestDto.employeeNumber) {
                params.append('employeeNumbers', requestDto.employeeNumber);
            }
            if (requestDto.withDetail !== undefined) {
                params.append('withDetail', requestDto.withDetail.toString());
            }
            params.append('includeTerminated', 'false');
            const url = `${this.employeeServiceUrl}/api/organization/employees?${params.toString()}`;
            const response = await (0, rxjs_1.firstValueFrom)(this.httpService.get(url, { headers: this.getHeaders(authorization) }).pipe((0, rxjs_1.map)((res) => res.data), (0, rxjs_1.catchError)((error) => {
                this.logger.error(`직원 목록 조회 실패: ${error.message}`, error.stack);
                throw new common_1.BadRequestException('직원 목록 조회 중 오류가 발생했습니다.');
            })));
            this.logger.log(`직원 목록 조회 성공: 총 ${response.total}명`);
            return response;
        }
        catch (error) {
            this.logger.error(`직원 목록 조회 중 예외 발생: ${error.message}`, error.stack);
            throw error;
        }
    }
    async getEmployeesByIds(authorization, employeeIds, withDetail = false) {
        try {
            this.logger.log(`직원 ID 목록으로 조회 요청: ${employeeIds.length}개, withDetail=${withDetail}`);
            const params = new URLSearchParams();
            params.append('employeeIds', employeeIds.join(','));
            if (withDetail) {
                params.append('withDetail', 'true');
            }
            params.append('includeTerminated', 'false');
            const url = `${this.employeeServiceUrl}/api/organization/employees?${params.toString()}`;
            const response = await (0, rxjs_1.firstValueFrom)(this.httpService.get(url, { headers: this.getHeaders(authorization) }).pipe((0, rxjs_1.map)((res) => res.data), (0, rxjs_1.catchError)((error) => {
                this.logger.error(`직원 ID 목록 조회 실패: ${error.message}`, error.stack);
                throw new common_1.BadRequestException('직원 목록 조회 중 오류가 발생했습니다.');
            })));
            this.logger.log(`직원 ID 목록 조회 성공: ${response.employees.length}명 조회됨`);
            return response.employees;
        }
        catch (error) {
            this.logger.error(`직원 ID 목록 조회 중 예외 발생: ${error.message}`, error.stack);
            throw error;
        }
    }
    async getEmployeesByNumbers(authorization, employeeNumbers, withDetail = false) {
        try {
            this.logger.log(`사번 목록으로 조회 요청: ${employeeNumbers.length}개, withDetail=${withDetail}`);
            const params = new URLSearchParams();
            params.append('employeeNumbers', employeeNumbers.join(','));
            if (withDetail) {
                params.append('withDetail', 'true');
            }
            params.append('includeTerminated', 'false');
            const url = `${this.employeeServiceUrl}/api/organization/employees?${params.toString()}`;
            const response = await (0, rxjs_1.firstValueFrom)(this.httpService.get(url, { headers: this.getHeaders(authorization) }).pipe((0, rxjs_1.map)((res) => res.data), (0, rxjs_1.catchError)((error) => {
                this.logger.error(`사번 목록 조회 실패: ${error.message}`, error.stack);
                throw new common_1.BadRequestException('직원 목록 조회 중 오류가 발생했습니다.');
            })));
            this.logger.log(`사번 목록 조회 성공: ${response.employees.length}명 조회됨`);
            return response.employees;
        }
        catch (error) {
            this.logger.error(`사번 목록 조회 중 예외 발생: ${error.message}`, error.stack);
            throw error;
        }
    }
    async getAllEmployees(authorization, withDetail = false, includeTerminated = false) {
        try {
            this.logger.log(`전체 직원 목록 조회 요청: withDetail=${withDetail}, includeTerminated=${includeTerminated}`);
            const params = new URLSearchParams();
            if (withDetail) {
                params.append('withDetail', 'true');
            }
            params.append('includeTerminated', includeTerminated.toString());
            const url = `${this.employeeServiceUrl}/api/organization/employees?${params.toString()}`;
            const response = await (0, rxjs_1.firstValueFrom)(this.httpService.get(url, { headers: this.getHeaders(authorization) }).pipe((0, rxjs_1.map)((res) => res.data), (0, rxjs_1.catchError)((error) => {
                this.logger.error(`전체 직원 목록 조회 실패: ${error.message}`, error.stack);
                throw new common_1.BadRequestException('전체 직원 목록 조회 중 오류가 발생했습니다.');
            })));
            this.logger.log(`전체 직원 목록 조회 성공: 총 ${response.total}명`);
            return response;
        }
        catch (error) {
            this.logger.error(`전체 직원 목록 조회 중 예외 발생: ${error.message}`, error.stack);
            throw error;
        }
    }
    async checkEmployeeExists(authorization, employeeId) {
        try {
            this.logger.log(`직원 존재 여부 확인: employeeId=${employeeId}`);
            await this.getEmployee(authorization, employeeId, false);
            this.logger.log(`직원 존재 여부 확인 완료: employeeId=${employeeId}, exists=true`);
            return true;
        }
        catch (error) {
            if (error instanceof common_1.NotFoundException) {
                this.logger.log(`직원 존재 여부 확인 완료: employeeId=${employeeId}, exists=false`);
                return false;
            }
            this.logger.error(`직원 존재 여부 확인 중 예외 발생: ${error.message}`, error.stack);
            throw error;
        }
    }
    async subscribeFcm(authorization, employeeId, fcmSubscribeDto) {
        try {
            this.logger.log(`FCM 토큰 구독 요청: employeeId=${employeeId}`);
            const url = `${this.employeeServiceUrl}/api/fcm/subscribe`;
            const response = await (0, rxjs_1.firstValueFrom)(this.httpService
                .post(url, fcmSubscribeDto, {
                headers: this.getHeaders(authorization),
            })
                .pipe((0, rxjs_1.map)((res) => res.data), (0, rxjs_1.catchError)((error) => {
                this.logger.error(`FCM 토큰 구독 실패: ${error.message}`, error.stack);
                if (error.response?.status === 404) {
                    throw new common_1.NotFoundException('직원을 찾을 수 없습니다.');
                }
                if (error.response?.status === 400) {
                    throw new common_1.BadRequestException('FCM 토큰 형식이 올바르지 않습니다.');
                }
                throw new common_1.BadRequestException('FCM 토큰 구독 중 오류가 발생했습니다.');
            })));
            this.logger.log(`FCM 토큰 구독 성공: employeeId=${employeeId}`);
            return response;
        }
        catch (error) {
            this.logger.error(`FCM 토큰 구독 중 예외 발생: ${error.message}`, error.stack);
            throw error;
        }
    }
    async getFcmToken(authorization) {
        try {
            this.logger.log('본인의 FCM 토큰 조회 요청');
            const url = `${this.employeeServiceUrl}/api/fcm/token`;
            const response = await (0, rxjs_1.firstValueFrom)(this.httpService.get(url, { headers: this.getHeaders(authorization) }).pipe((0, rxjs_1.map)((res) => res.data), (0, rxjs_1.catchError)((error) => {
                this.logger.error(`FCM 토큰 조회 실패: ${error.message}`, error.stack);
                if (error.response?.status === 404) {
                    throw new common_1.NotFoundException('직원을 찾을 수 없습니다.');
                }
                throw new common_1.BadRequestException('FCM 토큰 조회 중 오류가 발생했습니다.');
            })));
            this.logger.log('본인의 FCM 토큰 조회 성공');
            return response;
        }
        catch (error) {
            this.logger.error(`FCM 토큰 조회 중 예외 발생: ${error.message}`, error.stack);
            throw error;
        }
    }
    async getFcmTokens(authorization, employeeIds) {
        try {
            this.logger.log(`FCM 토큰 일괄 조회 요청: employeeIds=${employeeIds}`);
            const params = new URLSearchParams();
            params.append('employeeIds', employeeIds.join(','));
            const url = `${this.employeeServiceUrl}/api/fcm/tokens?${params.toString()}`;
            const response = await (0, rxjs_1.firstValueFrom)(this.httpService.get(url, { headers: this.getHeaders(authorization) }).pipe((0, rxjs_1.map)((res) => res.data), (0, rxjs_1.catchError)((error) => {
                this.logger.error(`FCM 토큰 일괄 조회 실패: ${error.message}`, error.stack);
                throw new common_1.BadRequestException('FCM 토큰 일괄 조회 중 오류가 발생했습니다.');
            })));
            this.logger.log(`FCM 토큰 일괄 조회 성공: ${response.length}개 조회됨`);
            return response;
        }
        catch (error) {
            this.logger.error(`FCM 토큰 일괄 조회 중 예외 발생: ${error.message}`, error.stack);
            throw error;
        }
    }
};
exports.EmployeeMicroserviceAdapter = EmployeeMicroserviceAdapter;
exports.EmployeeMicroserviceAdapter = EmployeeMicroserviceAdapter = EmployeeMicroserviceAdapter_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof axios_1.HttpService !== "undefined" && axios_1.HttpService) === "function" ? _a : Object, typeof (_b = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _b : Object])
], EmployeeMicroserviceAdapter);


/***/ }),

/***/ "./src/domain/employee/adapters/index.ts":
/*!***********************************************!*\
  !*** ./src/domain/employee/adapters/index.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./employee-microservice.adapter */ "./src/domain/employee/adapters/employee-microservice.adapter.ts"), exports);


/***/ }),

/***/ "./src/domain/employee/employee.module.ts":
/*!************************************************!*\
  !*** ./src/domain/employee/employee.module.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const axios_1 = __webpack_require__(/*! @nestjs/axios */ "@nestjs/axios");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const employee_service_1 = __webpack_require__(/*! ./employee.service */ "./src/domain/employee/employee.service.ts");
const employee_repository_1 = __webpack_require__(/*! ./employee.repository */ "./src/domain/employee/employee.repository.ts");
const employee_entity_1 = __webpack_require__(/*! @libs/entities/employee.entity */ "./libs/entities/employee.entity.ts");
const adapters_1 = __webpack_require__(/*! ./adapters */ "./src/domain/employee/adapters/index.ts");
let DomainEmployeeModule = class DomainEmployeeModule {
};
exports.DomainEmployeeModule = DomainEmployeeModule;
exports.DomainEmployeeModule = DomainEmployeeModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([employee_entity_1.Employee]),
            axios_1.HttpModule.register({
                timeout: 10000,
                maxRedirects: 5,
            }),
            config_1.ConfigModule,
        ],
        providers: [employee_service_1.DomainEmployeeService, employee_repository_1.DomainEmployeeRepository, adapters_1.EmployeeMicroserviceAdapter],
        exports: [employee_service_1.DomainEmployeeService, adapters_1.EmployeeMicroserviceAdapter],
    })
], DomainEmployeeModule);


/***/ }),

/***/ "./src/domain/employee/employee.repository.ts":
/*!****************************************************!*\
  !*** ./src/domain/employee/employee.repository.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! @libs/entities/employee.entity */ "./libs/entities/employee.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainEmployeeRepository = class DomainEmployeeRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainEmployeeRepository = DomainEmployeeRepository;
exports.DomainEmployeeRepository = DomainEmployeeRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(employee_entity_1.Employee)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainEmployeeRepository);


/***/ }),

/***/ "./src/domain/employee/employee.service.ts":
/*!*************************************************!*\
  !*** ./src/domain/employee/employee.service.ts ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEmployeeService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_repository_1 = __webpack_require__(/*! ./employee.repository */ "./src/domain/employee/employee.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainEmployeeService = class DomainEmployeeService extends base_service_1.BaseService {
    constructor(employeeRepository) {
        super(employeeRepository);
        this.employeeRepository = employeeRepository;
    }
    async findByEmployeeId(employeeId) {
        const employee = await this.employeeRepository.findOne({ where: { employeeId } });
        return employee;
    }
    async findByEmployeeIds(employeeIds) {
        return this.employeeRepository.findAll({ where: { employeeId: (0, typeorm_1.In)(employeeIds) } });
    }
    async findByEmail(email) {
        const employee = await this.employeeRepository.findOne({
            where: { email },
        });
        return employee;
    }
    async findByEmployeeNumber(employeeNumber) {
        const employee = await this.employeeRepository.findOne({ where: { employeeNumber } });
        return employee;
    }
};
exports.DomainEmployeeService = DomainEmployeeService;
exports.DomainEmployeeService = DomainEmployeeService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_repository_1.DomainEmployeeRepository !== "undefined" && employee_repository_1.DomainEmployeeRepository) === "function" ? _a : Object])
], DomainEmployeeService);


/***/ }),

/***/ "./src/domain/equipment-info/equipment-info.module.ts":
/*!************************************************************!*\
  !*** ./src/domain/equipment-info/equipment-info.module.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEquipmentInfoModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const equipment_info_service_1 = __webpack_require__(/*! ./equipment-info.service */ "./src/domain/equipment-info/equipment-info.service.ts");
const equipment_info_repository_1 = __webpack_require__(/*! ./equipment-info.repository */ "./src/domain/equipment-info/equipment-info.repository.ts");
const equipment_info_entity_1 = __webpack_require__(/*! @libs/entities/equipment-info.entity */ "./libs/entities/equipment-info.entity.ts");
let DomainEquipmentInfoModule = class DomainEquipmentInfoModule {
};
exports.DomainEquipmentInfoModule = DomainEquipmentInfoModule;
exports.DomainEquipmentInfoModule = DomainEquipmentInfoModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([equipment_info_entity_1.EquipmentInfo])],
        providers: [equipment_info_service_1.DomainEquipmentInfoService, equipment_info_repository_1.DomainEquipmentInfoRepository],
        exports: [equipment_info_service_1.DomainEquipmentInfoService],
    })
], DomainEquipmentInfoModule);


/***/ }),

/***/ "./src/domain/equipment-info/equipment-info.repository.ts":
/*!****************************************************************!*\
  !*** ./src/domain/equipment-info/equipment-info.repository.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEquipmentInfoRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const equipment_info_entity_1 = __webpack_require__(/*! @libs/entities/equipment-info.entity */ "./libs/entities/equipment-info.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainEquipmentInfoRepository = class DomainEquipmentInfoRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainEquipmentInfoRepository = DomainEquipmentInfoRepository;
exports.DomainEquipmentInfoRepository = DomainEquipmentInfoRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(equipment_info_entity_1.EquipmentInfo)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainEquipmentInfoRepository);


/***/ }),

/***/ "./src/domain/equipment-info/equipment-info.service.ts":
/*!*************************************************************!*\
  !*** ./src/domain/equipment-info/equipment-info.service.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainEquipmentInfoService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const equipment_info_repository_1 = __webpack_require__(/*! ./equipment-info.repository */ "./src/domain/equipment-info/equipment-info.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainEquipmentInfoService = class DomainEquipmentInfoService extends base_service_1.BaseService {
    constructor(equipmentInfoRepository) {
        super(equipmentInfoRepository);
        this.equipmentInfoRepository = equipmentInfoRepository;
    }
};
exports.DomainEquipmentInfoService = DomainEquipmentInfoService;
exports.DomainEquipmentInfoService = DomainEquipmentInfoService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof equipment_info_repository_1.DomainEquipmentInfoRepository !== "undefined" && equipment_info_repository_1.DomainEquipmentInfoRepository) === "function" ? _a : Object])
], DomainEquipmentInfoService);


/***/ }),

/***/ "./src/domain/file-maintenance/file-maintenance.module.ts":
/*!****************************************************************!*\
  !*** ./src/domain/file-maintenance/file-maintenance.module.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileMaintenanceModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const file_maintenance_service_1 = __webpack_require__(/*! ./file-maintenance.service */ "./src/domain/file-maintenance/file-maintenance.service.ts");
const file_maintenance_repository_1 = __webpack_require__(/*! ./file-maintenance.repository */ "./src/domain/file-maintenance/file-maintenance.repository.ts");
const file_maintenance_entity_1 = __webpack_require__(/*! @libs/entities/file-maintenance.entity */ "./libs/entities/file-maintenance.entity.ts");
let DomainFileMaintenanceModule = class DomainFileMaintenanceModule {
};
exports.DomainFileMaintenanceModule = DomainFileMaintenanceModule;
exports.DomainFileMaintenanceModule = DomainFileMaintenanceModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([file_maintenance_entity_1.FileMaintenance])],
        providers: [file_maintenance_service_1.DomainFileMaintenanceService, file_maintenance_repository_1.DomainFileMaintenanceRepository],
        exports: [file_maintenance_service_1.DomainFileMaintenanceService],
    })
], DomainFileMaintenanceModule);


/***/ }),

/***/ "./src/domain/file-maintenance/file-maintenance.repository.ts":
/*!********************************************************************!*\
  !*** ./src/domain/file-maintenance/file-maintenance.repository.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileMaintenanceRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const file_maintenance_entity_1 = __webpack_require__(/*! @libs/entities/file-maintenance.entity */ "./libs/entities/file-maintenance.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainFileMaintenanceRepository = class DomainFileMaintenanceRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainFileMaintenanceRepository = DomainFileMaintenanceRepository;
exports.DomainFileMaintenanceRepository = DomainFileMaintenanceRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(file_maintenance_entity_1.FileMaintenance)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainFileMaintenanceRepository);


/***/ }),

/***/ "./src/domain/file-maintenance/file-maintenance.service.ts":
/*!*****************************************************************!*\
  !*** ./src/domain/file-maintenance/file-maintenance.service.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileMaintenanceService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const file_maintenance_repository_1 = __webpack_require__(/*! ./file-maintenance.repository */ "./src/domain/file-maintenance/file-maintenance.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainFileMaintenanceService = class DomainFileMaintenanceService extends base_service_1.BaseService {
    constructor(fileMaintenanceRepository) {
        super(fileMaintenanceRepository);
        this.fileMaintenanceRepository = fileMaintenanceRepository;
    }
    async findByFileMaintenanceId(fileMaintenanceId) {
        const fileMaintenance = await this.fileMaintenanceRepository.findOne({
            where: { fileMaintenanceId },
        });
        return fileMaintenance;
    }
    async findByMaintenanceId(maintenanceId) {
        return this.fileMaintenanceRepository.findAll({
            where: { maintenanceId },
            relations: ['maintenance', 'file'],
        });
    }
    async findByFileId(fileId) {
        return this.fileMaintenanceRepository.findAll({
            where: { fileId },
            relations: ['maintenance', 'file'],
        });
    }
    async deleteByMaintenanceId(maintenanceId, options) {
        const existingConnections = await this.fileMaintenanceRepository.findAll({
            where: { maintenanceId },
        });
        if (existingConnections.length > 0) {
            for (const connection of existingConnections) {
                await this.fileMaintenanceRepository.delete(connection.fileMaintenanceId, options);
            }
        }
    }
    async saveMultiple(connections, options) {
        const results = [];
        for (const connection of connections) {
            const entity = await this.fileMaintenanceRepository.save(connection, options);
            results.push(entity);
        }
        return results;
    }
};
exports.DomainFileMaintenanceService = DomainFileMaintenanceService;
exports.DomainFileMaintenanceService = DomainFileMaintenanceService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof file_maintenance_repository_1.DomainFileMaintenanceRepository !== "undefined" && file_maintenance_repository_1.DomainFileMaintenanceRepository) === "function" ? _a : Object])
], DomainFileMaintenanceService);


/***/ }),

/***/ "./src/domain/file-reservation-vehicle/file-reservation-vehicle.module.ts":
/*!********************************************************************************!*\
  !*** ./src/domain/file-reservation-vehicle/file-reservation-vehicle.module.ts ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileReservationVehicleModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const file_reservation_vehicle_service_1 = __webpack_require__(/*! ./file-reservation-vehicle.service */ "./src/domain/file-reservation-vehicle/file-reservation-vehicle.service.ts");
const file_reservation_vehicle_repository_1 = __webpack_require__(/*! ./file-reservation-vehicle.repository */ "./src/domain/file-reservation-vehicle/file-reservation-vehicle.repository.ts");
const file_reservation_vehicle_entity_1 = __webpack_require__(/*! @libs/entities/file-reservation-vehicle.entity */ "./libs/entities/file-reservation-vehicle.entity.ts");
let DomainFileReservationVehicleModule = class DomainFileReservationVehicleModule {
};
exports.DomainFileReservationVehicleModule = DomainFileReservationVehicleModule;
exports.DomainFileReservationVehicleModule = DomainFileReservationVehicleModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([file_reservation_vehicle_entity_1.FileReservationVehicle])],
        providers: [file_reservation_vehicle_service_1.DomainFileReservationVehicleService, file_reservation_vehicle_repository_1.DomainFileReservationVehicleRepository],
        exports: [file_reservation_vehicle_service_1.DomainFileReservationVehicleService],
    })
], DomainFileReservationVehicleModule);


/***/ }),

/***/ "./src/domain/file-reservation-vehicle/file-reservation-vehicle.repository.ts":
/*!************************************************************************************!*\
  !*** ./src/domain/file-reservation-vehicle/file-reservation-vehicle.repository.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileReservationVehicleRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const file_reservation_vehicle_entity_1 = __webpack_require__(/*! @libs/entities/file-reservation-vehicle.entity */ "./libs/entities/file-reservation-vehicle.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainFileReservationVehicleRepository = class DomainFileReservationVehicleRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainFileReservationVehicleRepository = DomainFileReservationVehicleRepository;
exports.DomainFileReservationVehicleRepository = DomainFileReservationVehicleRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(file_reservation_vehicle_entity_1.FileReservationVehicle)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainFileReservationVehicleRepository);


/***/ }),

/***/ "./src/domain/file-reservation-vehicle/file-reservation-vehicle.service.ts":
/*!*********************************************************************************!*\
  !*** ./src/domain/file-reservation-vehicle/file-reservation-vehicle.service.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileReservationVehicleService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const file_reservation_vehicle_repository_1 = __webpack_require__(/*! ./file-reservation-vehicle.repository */ "./src/domain/file-reservation-vehicle/file-reservation-vehicle.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainFileReservationVehicleService = class DomainFileReservationVehicleService extends base_service_1.BaseService {
    constructor(fileReservationVehicleRepository) {
        super(fileReservationVehicleRepository);
        this.fileReservationVehicleRepository = fileReservationVehicleRepository;
    }
    async findByFileReservationVehicleId(fileReservationVehicleId) {
        const fileReservationVehicle = await this.fileReservationVehicleRepository.findOne({
            where: { fileReservationVehicleId },
        });
        return fileReservationVehicle;
    }
    async findByReservationVehicleId(reservationVehicleId) {
        return this.fileReservationVehicleRepository.findAll({
            where: { reservationVehicleId },
            relations: ['reservationVehicle', 'file'],
        });
    }
    async findByFileId(fileId) {
        return this.fileReservationVehicleRepository.findAll({
            where: { fileId },
            relations: ['reservationVehicle', 'file'],
        });
    }
    async findByType(type) {
        return this.fileReservationVehicleRepository.findAll({
            where: { type },
            relations: ['reservationVehicle', 'file'],
        });
    }
    async deleteByReservationVehicleId(reservationVehicleId, options) {
        const existingConnections = await this.fileReservationVehicleRepository.findAll({
            where: { reservationVehicleId },
        });
        if (existingConnections.length > 0) {
            for (const connection of existingConnections) {
                await this.fileReservationVehicleRepository.delete(connection.fileReservationVehicleId, options);
            }
        }
    }
    async saveMultiple(connections, options) {
        const results = [];
        for (const connection of connections) {
            const entity = await this.fileReservationVehicleRepository.save(connection, options);
            results.push(entity);
        }
        return results;
    }
};
exports.DomainFileReservationVehicleService = DomainFileReservationVehicleService;
exports.DomainFileReservationVehicleService = DomainFileReservationVehicleService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof file_reservation_vehicle_repository_1.DomainFileReservationVehicleRepository !== "undefined" && file_reservation_vehicle_repository_1.DomainFileReservationVehicleRepository) === "function" ? _a : Object])
], DomainFileReservationVehicleService);


/***/ }),

/***/ "./src/domain/file-resource/file-resource.module.ts":
/*!**********************************************************!*\
  !*** ./src/domain/file-resource/file-resource.module.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileResourceModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const file_resource_service_1 = __webpack_require__(/*! ./file-resource.service */ "./src/domain/file-resource/file-resource.service.ts");
const file_resource_repository_1 = __webpack_require__(/*! ./file-resource.repository */ "./src/domain/file-resource/file-resource.repository.ts");
const file_resource_entity_1 = __webpack_require__(/*! @libs/entities/file-resource.entity */ "./libs/entities/file-resource.entity.ts");
let DomainFileResourceModule = class DomainFileResourceModule {
};
exports.DomainFileResourceModule = DomainFileResourceModule;
exports.DomainFileResourceModule = DomainFileResourceModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([file_resource_entity_1.FileResource])],
        providers: [file_resource_service_1.DomainFileResourceService, file_resource_repository_1.DomainFileResourceRepository],
        exports: [file_resource_service_1.DomainFileResourceService],
    })
], DomainFileResourceModule);


/***/ }),

/***/ "./src/domain/file-resource/file-resource.repository.ts":
/*!**************************************************************!*\
  !*** ./src/domain/file-resource/file-resource.repository.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileResourceRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const file_resource_entity_1 = __webpack_require__(/*! @libs/entities/file-resource.entity */ "./libs/entities/file-resource.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainFileResourceRepository = class DomainFileResourceRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainFileResourceRepository = DomainFileResourceRepository;
exports.DomainFileResourceRepository = DomainFileResourceRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(file_resource_entity_1.FileResource)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainFileResourceRepository);


/***/ }),

/***/ "./src/domain/file-resource/file-resource.service.ts":
/*!***********************************************************!*\
  !*** ./src/domain/file-resource/file-resource.service.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileResourceService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const file_resource_repository_1 = __webpack_require__(/*! ./file-resource.repository */ "./src/domain/file-resource/file-resource.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainFileResourceService = class DomainFileResourceService extends base_service_1.BaseService {
    constructor(fileResourceRepository) {
        super(fileResourceRepository);
        this.fileResourceRepository = fileResourceRepository;
    }
    async findByFileResourceId(fileResourceId) {
        const fileResource = await this.fileResourceRepository.findOne({
            where: { fileResourceId },
        });
        return fileResource;
    }
    async findByResourceId(resourceId) {
        return this.fileResourceRepository.findAll({
            where: { resourceId },
            relations: ['resource', 'file'],
        });
    }
    async findByFileId(fileId) {
        return this.fileResourceRepository.findAll({
            where: { fileId },
            relations: ['resource', 'file'],
        });
    }
    async deleteByResourceId(resourceId, options) {
        const existingConnections = await this.fileResourceRepository.findAll({
            where: { resourceId },
        });
        if (existingConnections.length > 0) {
            for (const connection of existingConnections) {
                await this.fileResourceRepository.delete(connection.fileResourceId, options);
            }
        }
    }
    async saveMultiple(connections, options) {
        const results = [];
        for (const connection of connections) {
            const entity = await this.fileResourceRepository.save(connection, options);
            results.push(entity);
        }
        return results;
    }
};
exports.DomainFileResourceService = DomainFileResourceService;
exports.DomainFileResourceService = DomainFileResourceService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof file_resource_repository_1.DomainFileResourceRepository !== "undefined" && file_resource_repository_1.DomainFileResourceRepository) === "function" ? _a : Object])
], DomainFileResourceService);


/***/ }),

/***/ "./src/domain/file-vehicle-info/file-vehicle-info.module.ts":
/*!******************************************************************!*\
  !*** ./src/domain/file-vehicle-info/file-vehicle-info.module.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileVehicleInfoModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const file_vehicle_info_service_1 = __webpack_require__(/*! ./file-vehicle-info.service */ "./src/domain/file-vehicle-info/file-vehicle-info.service.ts");
const file_vehicle_info_repository_1 = __webpack_require__(/*! ./file-vehicle-info.repository */ "./src/domain/file-vehicle-info/file-vehicle-info.repository.ts");
const file_vehicle_info_entity_1 = __webpack_require__(/*! @libs/entities/file-vehicle-info.entity */ "./libs/entities/file-vehicle-info.entity.ts");
let DomainFileVehicleInfoModule = class DomainFileVehicleInfoModule {
};
exports.DomainFileVehicleInfoModule = DomainFileVehicleInfoModule;
exports.DomainFileVehicleInfoModule = DomainFileVehicleInfoModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([file_vehicle_info_entity_1.FileVehicleInfo])],
        providers: [file_vehicle_info_service_1.DomainFileVehicleInfoService, file_vehicle_info_repository_1.DomainFileVehicleInfoRepository],
        exports: [file_vehicle_info_service_1.DomainFileVehicleInfoService],
    })
], DomainFileVehicleInfoModule);


/***/ }),

/***/ "./src/domain/file-vehicle-info/file-vehicle-info.repository.ts":
/*!**********************************************************************!*\
  !*** ./src/domain/file-vehicle-info/file-vehicle-info.repository.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileVehicleInfoRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const file_vehicle_info_entity_1 = __webpack_require__(/*! @libs/entities/file-vehicle-info.entity */ "./libs/entities/file-vehicle-info.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainFileVehicleInfoRepository = class DomainFileVehicleInfoRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainFileVehicleInfoRepository = DomainFileVehicleInfoRepository;
exports.DomainFileVehicleInfoRepository = DomainFileVehicleInfoRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(file_vehicle_info_entity_1.FileVehicleInfo)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainFileVehicleInfoRepository);


/***/ }),

/***/ "./src/domain/file-vehicle-info/file-vehicle-info.service.ts":
/*!*******************************************************************!*\
  !*** ./src/domain/file-vehicle-info/file-vehicle-info.service.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileVehicleInfoService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const file_vehicle_info_repository_1 = __webpack_require__(/*! ./file-vehicle-info.repository */ "./src/domain/file-vehicle-info/file-vehicle-info.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainFileVehicleInfoService = class DomainFileVehicleInfoService extends base_service_1.BaseService {
    constructor(fileVehicleInfoRepository) {
        super(fileVehicleInfoRepository);
        this.fileVehicleInfoRepository = fileVehicleInfoRepository;
    }
    async findByFileVehicleInfoId(fileVehicleInfoId) {
        const fileVehicleInfo = await this.fileVehicleInfoRepository.findOne({
            where: { fileVehicleInfoId },
        });
        return fileVehicleInfo;
    }
    async findByVehicleInfoId(vehicleInfoId) {
        return this.fileVehicleInfoRepository.findAll({
            where: { vehicleInfoId },
            relations: ['vehicleInfo', 'file'],
        });
    }
    async findByFileId(fileId) {
        return this.fileVehicleInfoRepository.findAll({
            where: { fileId },
            relations: ['vehicleInfo', 'file'],
        });
    }
    async findByType(type) {
        return this.fileVehicleInfoRepository.findAll({
            where: { type },
            relations: ['vehicleInfo', 'file'],
        });
    }
    async deleteByVehicleInfoId(vehicleInfoId, options) {
        const existingConnections = await this.fileVehicleInfoRepository.findAll({
            where: { vehicleInfoId },
        });
        if (existingConnections.length > 0) {
            for (const connection of existingConnections) {
                await this.fileVehicleInfoRepository.delete(connection.fileVehicleInfoId, options);
            }
        }
    }
    async saveMultiple(connections, options) {
        const results = [];
        for (const connection of connections) {
            const entity = await this.fileVehicleInfoRepository.save(connection, options);
            results.push(entity);
        }
        return results;
    }
};
exports.DomainFileVehicleInfoService = DomainFileVehicleInfoService;
exports.DomainFileVehicleInfoService = DomainFileVehicleInfoService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof file_vehicle_info_repository_1.DomainFileVehicleInfoRepository !== "undefined" && file_vehicle_info_repository_1.DomainFileVehicleInfoRepository) === "function" ? _a : Object])
], DomainFileVehicleInfoService);


/***/ }),

/***/ "./src/domain/file/file.module.ts":
/*!****************************************!*\
  !*** ./src/domain/file/file.module.ts ***!
  \****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const file_entity_1 = __webpack_require__(/*! @libs/entities/file.entity */ "./libs/entities/file.entity.ts");
const file_service_1 = __webpack_require__(/*! ./file.service */ "./src/domain/file/file.service.ts");
const file_repository_1 = __webpack_require__(/*! ./file.repository */ "./src/domain/file/file.repository.ts");
let DomainFileModule = class DomainFileModule {
};
exports.DomainFileModule = DomainFileModule;
exports.DomainFileModule = DomainFileModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([file_entity_1.File])],
        providers: [file_service_1.DomainFileService, file_repository_1.DomainFileRepository],
        exports: [file_service_1.DomainFileService],
    })
], DomainFileModule);


/***/ }),

/***/ "./src/domain/file/file.repository.ts":
/*!********************************************!*\
  !*** ./src/domain/file/file.repository.ts ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const file_entity_1 = __webpack_require__(/*! @libs/entities/file.entity */ "./libs/entities/file.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainFileRepository = class DomainFileRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainFileRepository = DomainFileRepository;
exports.DomainFileRepository = DomainFileRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(file_entity_1.File)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainFileRepository);


/***/ }),

/***/ "./src/domain/file/file.service.ts":
/*!*****************************************!*\
  !*** ./src/domain/file/file.service.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainFileService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
const file_repository_1 = __webpack_require__(/*! ./file.repository */ "./src/domain/file/file.repository.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
let DomainFileService = class DomainFileService extends base_service_1.BaseService {
    constructor(fileRepository, configService) {
        super(fileRepository);
        this.fileRepository = fileRepository;
        this.configService = configService;
    }
    async findFileById(fileId) {
        const file = await this.fileRepository.findOne({ where: { fileId } });
        return file;
    }
    async findFileByFilePath(filePath) {
        const file = await this.fileRepository.findOne({ where: { filePath } });
        return file;
    }
    async findAllFilesByFilePath(filePath) {
        if (!filePath || filePath.length === 0) {
            return [];
        }
        const files = await this.fileRepository.findAll({ where: { filePath: (0, typeorm_1.In)(filePath) } });
        return files;
    }
    async updateTemporaryFiles(filePaths, isTemporary, repositoryOptions) {
        await Promise.all(filePaths.map(async (filePath) => {
            const fileName = filePath.split('/').pop();
            const fileExists = await this.fileRepository.findOne({ where: { filePath } });
            if (fileExists) {
                await this.fileRepository.update(fileExists.fileId, { isTemporary }, repositoryOptions);
                return;
            }
            const file = await this.create({
                fileName,
                filePath,
                isTemporary,
            });
            await this.fileRepository.save(file, repositoryOptions);
        }));
    }
    async deleteFilesByFilePath(filePaths, repositoryOptions) {
        const files = await this.fileRepository.findAll({ where: { filePath: (0, typeorm_1.In)(filePaths) } });
        await Promise.all(files.map((file) => this.fileRepository.delete(file.fileId, repositoryOptions)));
    }
    getFileUrl(filePath) {
        const fileKey = filePath.split('/').pop();
        return `${this.configService.get('S3_ENDPOINT').replace('s3', 'object/public')}/${this.configService.get('S3_BUCKET_NAME')}/${fileKey}`;
    }
};
exports.DomainFileService = DomainFileService;
exports.DomainFileService = DomainFileService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof file_repository_1.DomainFileRepository !== "undefined" && file_repository_1.DomainFileRepository) === "function" ? _a : Object, typeof (_b = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _b : Object])
], DomainFileService);


/***/ }),

/***/ "./src/domain/maintenance/maintenance.module.ts":
/*!******************************************************!*\
  !*** ./src/domain/maintenance/maintenance.module.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainMaintenanceModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const maintenance_service_1 = __webpack_require__(/*! ./maintenance.service */ "./src/domain/maintenance/maintenance.service.ts");
const maintenance_repository_1 = __webpack_require__(/*! ./maintenance.repository */ "./src/domain/maintenance/maintenance.repository.ts");
const maintenance_entity_1 = __webpack_require__(/*! @libs/entities/maintenance.entity */ "./libs/entities/maintenance.entity.ts");
let DomainMaintenanceModule = class DomainMaintenanceModule {
};
exports.DomainMaintenanceModule = DomainMaintenanceModule;
exports.DomainMaintenanceModule = DomainMaintenanceModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([maintenance_entity_1.Maintenance])],
        providers: [maintenance_service_1.DomainMaintenanceService, maintenance_repository_1.DomainMaintenanceRepository],
        exports: [maintenance_service_1.DomainMaintenanceService],
    })
], DomainMaintenanceModule);


/***/ }),

/***/ "./src/domain/maintenance/maintenance.repository.ts":
/*!**********************************************************!*\
  !*** ./src/domain/maintenance/maintenance.repository.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainMaintenanceRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const maintenance_entity_1 = __webpack_require__(/*! @libs/entities/maintenance.entity */ "./libs/entities/maintenance.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainMaintenanceRepository = class DomainMaintenanceRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
    async count(options) {
        return await this.repository.count(options);
    }
};
exports.DomainMaintenanceRepository = DomainMaintenanceRepository;
exports.DomainMaintenanceRepository = DomainMaintenanceRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(maintenance_entity_1.Maintenance)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainMaintenanceRepository);


/***/ }),

/***/ "./src/domain/maintenance/maintenance.service.ts":
/*!*******************************************************!*\
  !*** ./src/domain/maintenance/maintenance.service.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainMaintenanceService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const maintenance_repository_1 = __webpack_require__(/*! ./maintenance.repository */ "./src/domain/maintenance/maintenance.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainMaintenanceService = class DomainMaintenanceService extends base_service_1.BaseService {
    constructor(maintenanceRepository) {
        super(maintenanceRepository);
        this.maintenanceRepository = maintenanceRepository;
    }
};
exports.DomainMaintenanceService = DomainMaintenanceService;
exports.DomainMaintenanceService = DomainMaintenanceService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_repository_1.DomainMaintenanceRepository !== "undefined" && maintenance_repository_1.DomainMaintenanceRepository) === "function" ? _a : Object])
], DomainMaintenanceService);


/***/ }),

/***/ "./src/domain/meeting-room-info/meeting-room-info.module.ts":
/*!******************************************************************!*\
  !*** ./src/domain/meeting-room-info/meeting-room-info.module.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainMeetingRoomInfoModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const meeting_room_info_service_1 = __webpack_require__(/*! ./meeting-room-info.service */ "./src/domain/meeting-room-info/meeting-room-info.service.ts");
const meeting_room_info_repository_1 = __webpack_require__(/*! ./meeting-room-info.repository */ "./src/domain/meeting-room-info/meeting-room-info.repository.ts");
const meeting_room_info_entity_1 = __webpack_require__(/*! @libs/entities/meeting-room-info.entity */ "./libs/entities/meeting-room-info.entity.ts");
let DomainMeetingRoomInfoModule = class DomainMeetingRoomInfoModule {
};
exports.DomainMeetingRoomInfoModule = DomainMeetingRoomInfoModule;
exports.DomainMeetingRoomInfoModule = DomainMeetingRoomInfoModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([meeting_room_info_entity_1.MeetingRoomInfo])],
        providers: [meeting_room_info_service_1.DomainMeetingRoomInfoService, meeting_room_info_repository_1.DomainMeetingRoomInfoRepository],
        exports: [meeting_room_info_service_1.DomainMeetingRoomInfoService],
    })
], DomainMeetingRoomInfoModule);


/***/ }),

/***/ "./src/domain/meeting-room-info/meeting-room-info.repository.ts":
/*!**********************************************************************!*\
  !*** ./src/domain/meeting-room-info/meeting-room-info.repository.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainMeetingRoomInfoRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const meeting_room_info_entity_1 = __webpack_require__(/*! @libs/entities/meeting-room-info.entity */ "./libs/entities/meeting-room-info.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainMeetingRoomInfoRepository = class DomainMeetingRoomInfoRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainMeetingRoomInfoRepository = DomainMeetingRoomInfoRepository;
exports.DomainMeetingRoomInfoRepository = DomainMeetingRoomInfoRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(meeting_room_info_entity_1.MeetingRoomInfo)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainMeetingRoomInfoRepository);


/***/ }),

/***/ "./src/domain/meeting-room-info/meeting-room-info.service.ts":
/*!*******************************************************************!*\
  !*** ./src/domain/meeting-room-info/meeting-room-info.service.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainMeetingRoomInfoService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const meeting_room_info_repository_1 = __webpack_require__(/*! ./meeting-room-info.repository */ "./src/domain/meeting-room-info/meeting-room-info.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainMeetingRoomInfoService = class DomainMeetingRoomInfoService extends base_service_1.BaseService {
    constructor(meetingRoomInfoRepository) {
        super(meetingRoomInfoRepository);
        this.meetingRoomInfoRepository = meetingRoomInfoRepository;
    }
    async findByMeetingRoomInfoId(meetingRoomInfoId) {
        const meetingRoomInfo = await this.meetingRoomInfoRepository.findOne({
            where: { meetingRoomInfoId },
        });
        if (!meetingRoomInfo) {
            throw new common_1.NotFoundException('회의실 정보를 찾을 수 없습니다.');
        }
        return meetingRoomInfo;
    }
    async findByResourceId(resourceId) {
        const meetingRoomInfo = await this.meetingRoomInfoRepository.findOne({
            where: { resourceId },
        });
        if (!meetingRoomInfo) {
            throw new common_1.NotFoundException('회의실 정보를 찾을 수 없습니다.');
        }
        return meetingRoomInfo;
    }
};
exports.DomainMeetingRoomInfoService = DomainMeetingRoomInfoService;
exports.DomainMeetingRoomInfoService = DomainMeetingRoomInfoService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof meeting_room_info_repository_1.DomainMeetingRoomInfoRepository !== "undefined" && meeting_room_info_repository_1.DomainMeetingRoomInfoRepository) === "function" ? _a : Object])
], DomainMeetingRoomInfoService);


/***/ }),

/***/ "./src/domain/notification-type/notification-type.module.ts":
/*!******************************************************************!*\
  !*** ./src/domain/notification-type/notification-type.module.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainNotificationTypeModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const notification_type_entity_1 = __webpack_require__(/*! @libs/entities/notification-type.entity */ "./libs/entities/notification-type.entity.ts");
const notification_type_service_1 = __webpack_require__(/*! ./notification-type.service */ "./src/domain/notification-type/notification-type.service.ts");
let DomainNotificationTypeModule = class DomainNotificationTypeModule {
};
exports.DomainNotificationTypeModule = DomainNotificationTypeModule;
exports.DomainNotificationTypeModule = DomainNotificationTypeModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([notification_type_entity_1.NotificationTypeEntity])],
        providers: [notification_type_service_1.DomainNotificationTypeService],
        exports: [notification_type_service_1.DomainNotificationTypeService],
    })
], DomainNotificationTypeModule);


/***/ }),

/***/ "./src/domain/notification-type/notification-type.service.ts":
/*!*******************************************************************!*\
  !*** ./src/domain/notification-type/notification-type.service.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainNotificationTypeService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const notification_type_entity_1 = __webpack_require__(/*! @libs/entities/notification-type.entity */ "./libs/entities/notification-type.entity.ts");
let DomainNotificationTypeService = class DomainNotificationTypeService {
    constructor(notificationTypeRepository) {
        this.notificationTypeRepository = notificationTypeRepository;
    }
    async findAll() {
        return await this.notificationTypeRepository.find();
    }
    async findByType(notificationType) {
        return await this.notificationTypeRepository.findOne({
            where: { notificationType },
        });
    }
    async create(notificationTypeEntity) {
        const entity = this.notificationTypeRepository.create(notificationTypeEntity);
        return await this.notificationTypeRepository.save(entity);
    }
    async update(notificationType, updateData) {
        await this.notificationTypeRepository.update({ notificationType }, updateData);
        return await this.findByType(notificationType);
    }
    async delete(notificationType) {
        await this.notificationTypeRepository.delete({ notificationType });
    }
    async findTemplateByType(notificationType) {
        const result = await this.notificationTypeRepository.findOne({
            where: { notificationType },
            select: ['defaultTitleTemplate', 'defaultBodyTemplate', 'description'],
        });
        return result || null;
    }
    async findRequirementsByType(notificationType) {
        const result = await this.notificationTypeRepository.findOne({
            where: { notificationType },
            select: ['requirements'],
        });
        return result?.requirements || null;
    }
};
exports.DomainNotificationTypeService = DomainNotificationTypeService;
exports.DomainNotificationTypeService = DomainNotificationTypeService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(notification_type_entity_1.NotificationTypeEntity)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainNotificationTypeService);


/***/ }),

/***/ "./src/domain/notification/notification.module.ts":
/*!********************************************************!*\
  !*** ./src/domain/notification/notification.module.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainNotificationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const notification_entity_1 = __webpack_require__(/*! @libs/entities/notification.entity */ "./libs/entities/notification.entity.ts");
const notification_service_1 = __webpack_require__(/*! ./notification.service */ "./src/domain/notification/notification.service.ts");
const notification_repository_1 = __webpack_require__(/*! ./notification.repository */ "./src/domain/notification/notification.repository.ts");
let DomainNotificationModule = class DomainNotificationModule {
};
exports.DomainNotificationModule = DomainNotificationModule;
exports.DomainNotificationModule = DomainNotificationModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([notification_entity_1.Notification])],
        providers: [notification_service_1.DomainNotificationService, notification_repository_1.DomainNotificationRepository],
        exports: [notification_service_1.DomainNotificationService, notification_repository_1.DomainNotificationRepository],
    })
], DomainNotificationModule);


/***/ }),

/***/ "./src/domain/notification/notification.repository.ts":
/*!************************************************************!*\
  !*** ./src/domain/notification/notification.repository.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainNotificationRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const notification_entity_1 = __webpack_require__(/*! @libs/entities/notification.entity */ "./libs/entities/notification.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainNotificationRepository = class DomainNotificationRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
    async count(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return repository.count({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            select: repositoryOptions?.select,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
    }
    async bulkUpdate(entityIds, entityData, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        return await repository.update(entityIds, entityData);
    }
};
exports.DomainNotificationRepository = DomainNotificationRepository;
exports.DomainNotificationRepository = DomainNotificationRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(notification_entity_1.Notification)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainNotificationRepository);


/***/ }),

/***/ "./src/domain/notification/notification.service.ts":
/*!*********************************************************!*\
  !*** ./src/domain/notification/notification.service.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainNotificationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
const notification_repository_1 = __webpack_require__(/*! ./notification.repository */ "./src/domain/notification/notification.repository.ts");
let DomainNotificationService = class DomainNotificationService extends base_service_1.BaseService {
    constructor(notificationRepository) {
        super(notificationRepository);
        this.notificationRepository = notificationRepository;
    }
    async count(repositoryOptions) {
        return await this.notificationRepository.count(repositoryOptions);
    }
    async setSentTrue(notificationIds) {
        const result = await this.notificationRepository.bulkUpdate(notificationIds, { isSent: true });
        return result.affected === notificationIds.length;
    }
};
exports.DomainNotificationService = DomainNotificationService;
exports.DomainNotificationService = DomainNotificationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_repository_1.DomainNotificationRepository !== "undefined" && notification_repository_1.DomainNotificationRepository) === "function" ? _a : Object])
], DomainNotificationService);


/***/ }),

/***/ "./src/domain/reservation-participant/reservation-participant.module.ts":
/*!******************************************************************************!*\
  !*** ./src/domain/reservation-participant/reservation-participant.module.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainReservationParticipantModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const reservation_participant_service_1 = __webpack_require__(/*! ./reservation-participant.service */ "./src/domain/reservation-participant/reservation-participant.service.ts");
const reservation_participant_repository_1 = __webpack_require__(/*! ./reservation-participant.repository */ "./src/domain/reservation-participant/reservation-participant.repository.ts");
const reservation_participant_entity_1 = __webpack_require__(/*! @libs/entities/reservation-participant.entity */ "./libs/entities/reservation-participant.entity.ts");
let DomainReservationParticipantModule = class DomainReservationParticipantModule {
};
exports.DomainReservationParticipantModule = DomainReservationParticipantModule;
exports.DomainReservationParticipantModule = DomainReservationParticipantModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([reservation_participant_entity_1.ReservationParticipant])],
        providers: [reservation_participant_service_1.DomainReservationParticipantService, reservation_participant_repository_1.DomainReservationParticipantRepository],
        exports: [reservation_participant_service_1.DomainReservationParticipantService],
    })
], DomainReservationParticipantModule);


/***/ }),

/***/ "./src/domain/reservation-participant/reservation-participant.repository.ts":
/*!**********************************************************************************!*\
  !*** ./src/domain/reservation-participant/reservation-participant.repository.ts ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainReservationParticipantRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_participant_entity_1 = __webpack_require__(/*! @libs/entities/reservation-participant.entity */ "./libs/entities/reservation-participant.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainReservationParticipantRepository = class DomainReservationParticipantRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainReservationParticipantRepository = DomainReservationParticipantRepository;
exports.DomainReservationParticipantRepository = DomainReservationParticipantRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(reservation_participant_entity_1.ReservationParticipant)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainReservationParticipantRepository);


/***/ }),

/***/ "./src/domain/reservation-participant/reservation-participant.service.ts":
/*!*******************************************************************************!*\
  !*** ./src/domain/reservation-participant/reservation-participant.service.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainReservationParticipantService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_participant_repository_1 = __webpack_require__(/*! ./reservation-participant.repository */ "./src/domain/reservation-participant/reservation-participant.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainReservationParticipantService = class DomainReservationParticipantService extends base_service_1.BaseService {
    constructor(reservationParticipantRepository) {
        super(reservationParticipantRepository);
        this.reservationParticipantRepository = reservationParticipantRepository;
    }
    async findByParticipantId(participantId) {
        const participant = await this.reservationParticipantRepository.findOne({
            where: { participantId },
            relations: ['reservation', 'employee'],
        });
        if (!participant) {
            throw new common_1.NotFoundException('참가자를 찾을 수 없습니다.');
        }
        return participant;
    }
    async findByReservationId(reservationId) {
        return this.reservationParticipantRepository.findAll({
            where: { reservationId },
            relations: ['reservation', 'employee'],
        });
    }
    async findByEmployeeId(employeeId) {
        return this.reservationParticipantRepository.findAll({
            where: { employeeId },
            relations: ['reservation', 'employee'],
        });
    }
    async findByType(type) {
        return this.reservationParticipantRepository.findAll({
            where: { type },
            relations: ['reservation', 'employee'],
        });
    }
};
exports.DomainReservationParticipantService = DomainReservationParticipantService;
exports.DomainReservationParticipantService = DomainReservationParticipantService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_participant_repository_1.DomainReservationParticipantRepository !== "undefined" && reservation_participant_repository_1.DomainReservationParticipantRepository) === "function" ? _a : Object])
], DomainReservationParticipantService);


/***/ }),

/***/ "./src/domain/reservation-vehicle/reservation-vehicle.module.ts":
/*!**********************************************************************!*\
  !*** ./src/domain/reservation-vehicle/reservation-vehicle.module.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainReservationVehicleModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const reservation_vehicle_service_1 = __webpack_require__(/*! ./reservation-vehicle.service */ "./src/domain/reservation-vehicle/reservation-vehicle.service.ts");
const reservation_vehicle_repository_1 = __webpack_require__(/*! ./reservation-vehicle.repository */ "./src/domain/reservation-vehicle/reservation-vehicle.repository.ts");
const reservation_vehicle_entity_1 = __webpack_require__(/*! @libs/entities/reservation-vehicle.entity */ "./libs/entities/reservation-vehicle.entity.ts");
let DomainReservationVehicleModule = class DomainReservationVehicleModule {
};
exports.DomainReservationVehicleModule = DomainReservationVehicleModule;
exports.DomainReservationVehicleModule = DomainReservationVehicleModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([reservation_vehicle_entity_1.ReservationVehicle])],
        providers: [reservation_vehicle_service_1.DomainReservationVehicleService, reservation_vehicle_repository_1.DomainReservationVehicleRepository],
        exports: [reservation_vehicle_service_1.DomainReservationVehicleService],
    })
], DomainReservationVehicleModule);


/***/ }),

/***/ "./src/domain/reservation-vehicle/reservation-vehicle.repository.ts":
/*!**************************************************************************!*\
  !*** ./src/domain/reservation-vehicle/reservation-vehicle.repository.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainReservationVehicleRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_vehicle_entity_1 = __webpack_require__(/*! @libs/entities/reservation-vehicle.entity */ "./libs/entities/reservation-vehicle.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainReservationVehicleRepository = class DomainReservationVehicleRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainReservationVehicleRepository = DomainReservationVehicleRepository;
exports.DomainReservationVehicleRepository = DomainReservationVehicleRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(reservation_vehicle_entity_1.ReservationVehicle)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainReservationVehicleRepository);


/***/ }),

/***/ "./src/domain/reservation-vehicle/reservation-vehicle.service.ts":
/*!***********************************************************************!*\
  !*** ./src/domain/reservation-vehicle/reservation-vehicle.service.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainReservationVehicleService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_vehicle_repository_1 = __webpack_require__(/*! ./reservation-vehicle.repository */ "./src/domain/reservation-vehicle/reservation-vehicle.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainReservationVehicleService = class DomainReservationVehicleService extends base_service_1.BaseService {
    constructor(reservationVehicleRepository) {
        super(reservationVehicleRepository);
        this.reservationVehicleRepository = reservationVehicleRepository;
    }
    async findByReservationVehicleId(reservationVehicleId) {
        const reservationVehicle = await this.reservationVehicleRepository.findOne({
            where: { reservationVehicleId },
        });
        return reservationVehicle;
    }
    async findByReservationId(reservationId) {
        return this.reservationVehicleRepository.findAll({
            where: { reservationId },
            relations: ['reservation', 'vehicleInfo'],
        });
    }
    async findByVehicleInfoId(vehicleInfoId) {
        return this.reservationVehicleRepository.findAll({
            where: { vehicleInfoId },
            relations: ['reservation', 'vehicleInfo'],
        });
    }
    async findByIsReturned(isReturned) {
        return this.reservationVehicleRepository.findAll({
            where: { isReturned },
            relations: ['reservation', 'vehicleInfo'],
        });
    }
};
exports.DomainReservationVehicleService = DomainReservationVehicleService;
exports.DomainReservationVehicleService = DomainReservationVehicleService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_vehicle_repository_1.DomainReservationVehicleRepository !== "undefined" && reservation_vehicle_repository_1.DomainReservationVehicleRepository) === "function" ? _a : Object])
], DomainReservationVehicleService);


/***/ }),

/***/ "./src/domain/reservation/reservation.module.ts":
/*!******************************************************!*\
  !*** ./src/domain/reservation/reservation.module.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainReservationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const reservation_service_1 = __webpack_require__(/*! ./reservation.service */ "./src/domain/reservation/reservation.service.ts");
const reservation_repository_1 = __webpack_require__(/*! ./reservation.repository */ "./src/domain/reservation/reservation.repository.ts");
const reservation_entity_1 = __webpack_require__(/*! @libs/entities/reservation.entity */ "./libs/entities/reservation.entity.ts");
let DomainReservationModule = class DomainReservationModule {
};
exports.DomainReservationModule = DomainReservationModule;
exports.DomainReservationModule = DomainReservationModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([reservation_entity_1.Reservation])],
        providers: [reservation_service_1.DomainReservationService, reservation_repository_1.DomainReservationRepository],
        exports: [reservation_service_1.DomainReservationService],
    })
], DomainReservationModule);


/***/ }),

/***/ "./src/domain/reservation/reservation.repository.ts":
/*!**********************************************************!*\
  !*** ./src/domain/reservation/reservation.repository.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainReservationRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_entity_1 = __webpack_require__(/*! @libs/entities/reservation.entity */ "./libs/entities/reservation.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainReservationRepository = class DomainReservationRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainReservationRepository = DomainReservationRepository;
exports.DomainReservationRepository = DomainReservationRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(reservation_entity_1.Reservation)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainReservationRepository);


/***/ }),

/***/ "./src/domain/reservation/reservation.service.ts":
/*!*******************************************************!*\
  !*** ./src/domain/reservation/reservation.service.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainReservationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_repository_1 = __webpack_require__(/*! ./reservation.repository */ "./src/domain/reservation/reservation.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
let DomainReservationService = class DomainReservationService extends base_service_1.BaseService {
    constructor(reservationRepository) {
        super(reservationRepository);
        this.reservationRepository = reservationRepository;
    }
    async findByReservationId(reservationId) {
        return this.reservationRepository.findOne({
            where: { reservationId },
        });
    }
    async findByReservationIds(reservationIds) {
        return this.reservationRepository.findAll({
            where: { reservationId: (0, typeorm_1.In)(reservationIds) },
            relations: ['resource'],
        });
    }
    async findByResourceIds(resourceIds) {
        return this.reservationRepository.findAll({
            where: { resourceId: (0, typeorm_1.In)(resourceIds) },
            relations: ['resource'],
        });
    }
    async findByResourceIdsAndDateRange(resourceIds, startDate, endDate) {
        return this.reservationRepository.findAll({
            where: {
                resource: { resourceId: (0, typeorm_1.In)(resourceIds) },
                startDate: (0, typeorm_1.LessThanOrEqual)(endDate),
                endDate: (0, typeorm_1.MoreThanOrEqual)(startDate),
            },
        });
    }
    async checkReservationConflicts(resourceId, startDate, endDate, reservationId) {
        const conflicts = await this.reservationRepository.findAll({
            where: {
                resourceId,
                status: (0, typeorm_1.In)([reservation_type_enum_1.ReservationStatus.PENDING, reservation_type_enum_1.ReservationStatus.CONFIRMED, reservation_type_enum_1.ReservationStatus.CLOSED]),
                startDate: (0, typeorm_1.LessThan)(endDate),
                endDate: (0, typeorm_1.MoreThan)(startDate),
                ...(reservationId && { reservationId: (0, typeorm_1.Not)(reservationId) }),
            },
        });
        return conflicts.length === 0;
    }
};
exports.DomainReservationService = DomainReservationService;
exports.DomainReservationService = DomainReservationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_repository_1.DomainReservationRepository !== "undefined" && reservation_repository_1.DomainReservationRepository) === "function" ? _a : Object])
], DomainReservationService);


/***/ }),

/***/ "./src/domain/resource-group/resource-group.module.ts":
/*!************************************************************!*\
  !*** ./src/domain/resource-group/resource-group.module.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainResourceGroupModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const resource_group_service_1 = __webpack_require__(/*! ./resource-group.service */ "./src/domain/resource-group/resource-group.service.ts");
const resource_group_repository_1 = __webpack_require__(/*! ./resource-group.repository */ "./src/domain/resource-group/resource-group.repository.ts");
const resource_group_entity_1 = __webpack_require__(/*! @libs/entities/resource-group.entity */ "./libs/entities/resource-group.entity.ts");
let DomainResourceGroupModule = class DomainResourceGroupModule {
};
exports.DomainResourceGroupModule = DomainResourceGroupModule;
exports.DomainResourceGroupModule = DomainResourceGroupModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([resource_group_entity_1.ResourceGroup])],
        providers: [resource_group_service_1.DomainResourceGroupService, resource_group_repository_1.DomainResourceGroupRepository],
        exports: [resource_group_service_1.DomainResourceGroupService],
    })
], DomainResourceGroupModule);


/***/ }),

/***/ "./src/domain/resource-group/resource-group.repository.ts":
/*!****************************************************************!*\
  !*** ./src/domain/resource-group/resource-group.repository.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainResourceGroupRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_group_entity_1 = __webpack_require__(/*! @libs/entities/resource-group.entity */ "./libs/entities/resource-group.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainResourceGroupRepository = class DomainResourceGroupRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainResourceGroupRepository = DomainResourceGroupRepository;
exports.DomainResourceGroupRepository = DomainResourceGroupRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(resource_group_entity_1.ResourceGroup)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainResourceGroupRepository);


/***/ }),

/***/ "./src/domain/resource-group/resource-group.service.ts":
/*!*************************************************************!*\
  !*** ./src/domain/resource-group/resource-group.service.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainResourceGroupService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_group_repository_1 = __webpack_require__(/*! ./resource-group.repository */ "./src/domain/resource-group/resource-group.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainResourceGroupService = class DomainResourceGroupService extends base_service_1.BaseService {
    constructor(resourceGroupRepository) {
        super(resourceGroupRepository);
        this.resourceGroupRepository = resourceGroupRepository;
    }
    async findByResourceGroupId(resourceGroupId) {
        const resourceGroup = await this.resourceGroupRepository.findOne({
            where: { resourceGroupId },
        });
        return resourceGroup;
    }
    async findByType(type) {
        return this.resourceGroupRepository.findAll({
            where: { type },
            relations: ['parent', 'children'],
            order: { order: 'ASC' },
        });
    }
    async findByParentId(parentResourceGroupId) {
        return this.resourceGroupRepository.findAll({
            where: { parentResourceGroupId },
            relations: ['children'],
            order: { order: 'ASC' },
        });
    }
    async findRootGroups() {
        return this.resourceGroupRepository.findAll({
            where: { parentResourceGroupId: null },
            relations: ['children'],
            order: { order: 'ASC' },
        });
    }
};
exports.DomainResourceGroupService = DomainResourceGroupService;
exports.DomainResourceGroupService = DomainResourceGroupService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_repository_1.DomainResourceGroupRepository !== "undefined" && resource_group_repository_1.DomainResourceGroupRepository) === "function" ? _a : Object])
], DomainResourceGroupService);


/***/ }),

/***/ "./src/domain/resource-manager/resource-manager.module.ts":
/*!****************************************************************!*\
  !*** ./src/domain/resource-manager/resource-manager.module.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainResourceManagerModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const resource_manager_service_1 = __webpack_require__(/*! ./resource-manager.service */ "./src/domain/resource-manager/resource-manager.service.ts");
const resource_manager_repository_1 = __webpack_require__(/*! ./resource-manager.repository */ "./src/domain/resource-manager/resource-manager.repository.ts");
const resource_manager_entity_1 = __webpack_require__(/*! @libs/entities/resource-manager.entity */ "./libs/entities/resource-manager.entity.ts");
let DomainResourceManagerModule = class DomainResourceManagerModule {
};
exports.DomainResourceManagerModule = DomainResourceManagerModule;
exports.DomainResourceManagerModule = DomainResourceManagerModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([resource_manager_entity_1.ResourceManager])],
        providers: [resource_manager_service_1.DomainResourceManagerService, resource_manager_repository_1.DomainResourceManagerRepository],
        exports: [resource_manager_service_1.DomainResourceManagerService],
    })
], DomainResourceManagerModule);


/***/ }),

/***/ "./src/domain/resource-manager/resource-manager.repository.ts":
/*!********************************************************************!*\
  !*** ./src/domain/resource-manager/resource-manager.repository.ts ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainResourceManagerRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_manager_entity_1 = __webpack_require__(/*! @libs/entities/resource-manager.entity */ "./libs/entities/resource-manager.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainResourceManagerRepository = class DomainResourceManagerRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainResourceManagerRepository = DomainResourceManagerRepository;
exports.DomainResourceManagerRepository = DomainResourceManagerRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(resource_manager_entity_1.ResourceManager)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainResourceManagerRepository);


/***/ }),

/***/ "./src/domain/resource-manager/resource-manager.service.ts":
/*!*****************************************************************!*\
  !*** ./src/domain/resource-manager/resource-manager.service.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainResourceManagerService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_manager_repository_1 = __webpack_require__(/*! ./resource-manager.repository */ "./src/domain/resource-manager/resource-manager.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainResourceManagerService = class DomainResourceManagerService extends base_service_1.BaseService {
    constructor(resourceManagerRepository) {
        super(resourceManagerRepository);
        this.resourceManagerRepository = resourceManagerRepository;
    }
};
exports.DomainResourceManagerService = DomainResourceManagerService;
exports.DomainResourceManagerService = DomainResourceManagerService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_manager_repository_1.DomainResourceManagerRepository !== "undefined" && resource_manager_repository_1.DomainResourceManagerRepository) === "function" ? _a : Object])
], DomainResourceManagerService);


/***/ }),

/***/ "./src/domain/resource/resource.module.ts":
/*!************************************************!*\
  !*** ./src/domain/resource/resource.module.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainResourceModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const resource_service_1 = __webpack_require__(/*! ./resource.service */ "./src/domain/resource/resource.service.ts");
const resource_repository_1 = __webpack_require__(/*! ./resource.repository */ "./src/domain/resource/resource.repository.ts");
const resource_entity_1 = __webpack_require__(/*! @libs/entities/resource.entity */ "./libs/entities/resource.entity.ts");
let DomainResourceModule = class DomainResourceModule {
};
exports.DomainResourceModule = DomainResourceModule;
exports.DomainResourceModule = DomainResourceModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([resource_entity_1.Resource])],
        providers: [resource_service_1.DomainResourceService, resource_repository_1.DomainResourceRepository],
        exports: [resource_service_1.DomainResourceService],
    })
], DomainResourceModule);


/***/ }),

/***/ "./src/domain/resource/resource.repository.ts":
/*!****************************************************!*\
  !*** ./src/domain/resource/resource.repository.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainResourceRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! @libs/entities/resource.entity */ "./libs/entities/resource.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainResourceRepository = class DomainResourceRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
    async softDelete(resourceId, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        await repository.softDelete(resourceId);
    }
};
exports.DomainResourceRepository = DomainResourceRepository;
exports.DomainResourceRepository = DomainResourceRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(resource_entity_1.Resource)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainResourceRepository);


/***/ }),

/***/ "./src/domain/resource/resource.service.ts":
/*!*************************************************!*\
  !*** ./src/domain/resource/resource.service.ts ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainResourceService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_repository_1 = __webpack_require__(/*! ./resource.repository */ "./src/domain/resource/resource.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainResourceService = class DomainResourceService extends base_service_1.BaseService {
    constructor(resourceRepository) {
        super(resourceRepository);
        this.resourceRepository = resourceRepository;
    }
    async softDelete(resourceId, options) {
        await this.resourceRepository.softDelete(resourceId, options);
    }
    async findByResourceId(resourceId) {
        return this.resourceRepository.findOne({
            where: { resourceId },
        });
    }
    async findByResourceGroupIds(resourceGroupIds) {
        return this.resourceRepository.findAll({
            where: { resourceGroupId: (0, typeorm_1.In)(resourceGroupIds) },
            order: { resourceGroup: { order: 'ASC' }, order: 'ASC' },
        });
    }
};
exports.DomainResourceService = DomainResourceService;
exports.DomainResourceService = DomainResourceService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_repository_1.DomainResourceRepository !== "undefined" && resource_repository_1.DomainResourceRepository) === "function" ? _a : Object])
], DomainResourceService);


/***/ }),

/***/ "./src/domain/schedule-participant/schedule-participant.module.ts":
/*!************************************************************************!*\
  !*** ./src/domain/schedule-participant/schedule-participant.module.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainScheduleParticipantModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const schedule_participant_service_1 = __webpack_require__(/*! ./schedule-participant.service */ "./src/domain/schedule-participant/schedule-participant.service.ts");
const schedule_participant_repository_1 = __webpack_require__(/*! ./schedule-participant.repository */ "./src/domain/schedule-participant/schedule-participant.repository.ts");
const schedule_participant_entity_1 = __webpack_require__(/*! @libs/entities/schedule-participant.entity */ "./libs/entities/schedule-participant.entity.ts");
let DomainScheduleParticipantModule = class DomainScheduleParticipantModule {
};
exports.DomainScheduleParticipantModule = DomainScheduleParticipantModule;
exports.DomainScheduleParticipantModule = DomainScheduleParticipantModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([schedule_participant_entity_1.ScheduleParticipant])],
        providers: [schedule_participant_service_1.DomainScheduleParticipantService, schedule_participant_repository_1.DomainScheduleParticipantRepository],
        exports: [schedule_participant_service_1.DomainScheduleParticipantService],
    })
], DomainScheduleParticipantModule);


/***/ }),

/***/ "./src/domain/schedule-participant/schedule-participant.repository.ts":
/*!****************************************************************************!*\
  !*** ./src/domain/schedule-participant/schedule-participant.repository.ts ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainScheduleParticipantRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const schedule_participant_entity_1 = __webpack_require__(/*! @libs/entities/schedule-participant.entity */ "./libs/entities/schedule-participant.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainScheduleParticipantRepository = class DomainScheduleParticipantRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainScheduleParticipantRepository = DomainScheduleParticipantRepository;
exports.DomainScheduleParticipantRepository = DomainScheduleParticipantRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(schedule_participant_entity_1.ScheduleParticipant)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainScheduleParticipantRepository);


/***/ }),

/***/ "./src/domain/schedule-participant/schedule-participant.service.ts":
/*!*************************************************************************!*\
  !*** ./src/domain/schedule-participant/schedule-participant.service.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainScheduleParticipantService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_participant_repository_1 = __webpack_require__(/*! ./schedule-participant.repository */ "./src/domain/schedule-participant/schedule-participant.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainScheduleParticipantService = class DomainScheduleParticipantService extends base_service_1.BaseService {
    constructor(scheduleParticipantRepository) {
        super(scheduleParticipantRepository);
        this.scheduleParticipantRepository = scheduleParticipantRepository;
    }
    async findByScheduleId(scheduleId) {
        return this.scheduleParticipantRepository.findAll({
            where: { scheduleId },
        });
    }
    async findReserversByScheduleIds(scheduleIds) {
        return this.scheduleParticipantRepository.findAll({
            where: { scheduleId: (0, typeorm_1.In)(scheduleIds), type: reservation_type_enum_1.ParticipantsType.RESERVER },
        });
    }
    async findByEmployeeIdAndScheduleIds(employeeId, scheduleIds) {
        return this.scheduleParticipantRepository.findAll({
            where: { employeeId, scheduleId: (0, typeorm_1.In)(scheduleIds) },
        });
    }
    async findAllByScheduleIds(scheduleIds) {
        return this.scheduleParticipantRepository.findAll({
            where: { scheduleId: (0, typeorm_1.In)(scheduleIds) },
        });
    }
    async findReserverByScheduleId(employeeId, scheduleId) {
        return this.scheduleParticipantRepository.findOne({
            where: { scheduleId, employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER },
        });
    }
    async checkReserverByScheduleId(employeeId, scheduleId) {
        const reserver = await this.scheduleParticipantRepository.findOne({
            where: { scheduleId, employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER },
        });
        return reserver !== null;
    }
};
exports.DomainScheduleParticipantService = DomainScheduleParticipantService;
exports.DomainScheduleParticipantService = DomainScheduleParticipantService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_participant_repository_1.DomainScheduleParticipantRepository !== "undefined" && schedule_participant_repository_1.DomainScheduleParticipantRepository) === "function" ? _a : Object])
], DomainScheduleParticipantService);


/***/ }),

/***/ "./src/domain/schedule-relation/schedule-relation.module.ts":
/*!******************************************************************!*\
  !*** ./src/domain/schedule-relation/schedule-relation.module.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainScheduleRelationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const schedule_relation_service_1 = __webpack_require__(/*! ./schedule-relation.service */ "./src/domain/schedule-relation/schedule-relation.service.ts");
const schedule_relation_repository_1 = __webpack_require__(/*! ./schedule-relation.repository */ "./src/domain/schedule-relation/schedule-relation.repository.ts");
const schedule_relations_entity_1 = __webpack_require__(/*! @libs/entities/schedule-relations.entity */ "./libs/entities/schedule-relations.entity.ts");
let DomainScheduleRelationModule = class DomainScheduleRelationModule {
};
exports.DomainScheduleRelationModule = DomainScheduleRelationModule;
exports.DomainScheduleRelationModule = DomainScheduleRelationModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([schedule_relations_entity_1.ScheduleRelation])],
        providers: [schedule_relation_service_1.DomainScheduleRelationService, schedule_relation_repository_1.DomainScheduleRelationRepository],
        exports: [schedule_relation_service_1.DomainScheduleRelationService],
    })
], DomainScheduleRelationModule);


/***/ }),

/***/ "./src/domain/schedule-relation/schedule-relation.repository.ts":
/*!**********************************************************************!*\
  !*** ./src/domain/schedule-relation/schedule-relation.repository.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainScheduleRelationRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const schedule_relations_entity_1 = __webpack_require__(/*! @libs/entities/schedule-relations.entity */ "./libs/entities/schedule-relations.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainScheduleRelationRepository = class DomainScheduleRelationRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainScheduleRelationRepository = DomainScheduleRelationRepository;
exports.DomainScheduleRelationRepository = DomainScheduleRelationRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(schedule_relations_entity_1.ScheduleRelation)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainScheduleRelationRepository);


/***/ }),

/***/ "./src/domain/schedule-relation/schedule-relation.service.ts":
/*!*******************************************************************!*\
  !*** ./src/domain/schedule-relation/schedule-relation.service.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainScheduleRelationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_relation_repository_1 = __webpack_require__(/*! ./schedule-relation.repository */ "./src/domain/schedule-relation/schedule-relation.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let DomainScheduleRelationService = class DomainScheduleRelationService extends base_service_1.BaseService {
    constructor(scheduleRelationRepository) {
        super(scheduleRelationRepository);
        this.scheduleRelationRepository = scheduleRelationRepository;
    }
    async findByScheduleId(scheduleId) {
        return this.scheduleRelationRepository.findOne({
            where: { scheduleId },
        });
    }
    async findByScheduleIds(scheduleIds) {
        return this.scheduleRelationRepository.findAll({
            where: { scheduleId: (0, typeorm_1.In)(scheduleIds) },
        });
    }
    async findByReservationIds(reservationIds) {
        return this.scheduleRelationRepository.findAll({
            where: { reservationId: (0, typeorm_1.In)(reservationIds) },
        });
    }
};
exports.DomainScheduleRelationService = DomainScheduleRelationService;
exports.DomainScheduleRelationService = DomainScheduleRelationService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_relation_repository_1.DomainScheduleRelationRepository !== "undefined" && schedule_relation_repository_1.DomainScheduleRelationRepository) === "function" ? _a : Object])
], DomainScheduleRelationService);


/***/ }),

/***/ "./src/domain/schedule/schedule.module.ts":
/*!************************************************!*\
  !*** ./src/domain/schedule/schedule.module.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainScheduleModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const schedule_service_1 = __webpack_require__(/*! ./schedule.service */ "./src/domain/schedule/schedule.service.ts");
const schedule_repository_1 = __webpack_require__(/*! ./schedule.repository */ "./src/domain/schedule/schedule.repository.ts");
const schedule_entity_1 = __webpack_require__(/*! @libs/entities/schedule.entity */ "./libs/entities/schedule.entity.ts");
let DomainScheduleModule = class DomainScheduleModule {
};
exports.DomainScheduleModule = DomainScheduleModule;
exports.DomainScheduleModule = DomainScheduleModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([schedule_entity_1.Schedule])],
        providers: [schedule_service_1.DomainScheduleService, schedule_repository_1.DomainScheduleRepository],
        exports: [schedule_service_1.DomainScheduleService],
    })
], DomainScheduleModule);


/***/ }),

/***/ "./src/domain/schedule/schedule.repository.ts":
/*!****************************************************!*\
  !*** ./src/domain/schedule/schedule.repository.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainScheduleRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const schedule_entity_1 = __webpack_require__(/*! @libs/entities/schedule.entity */ "./libs/entities/schedule.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainScheduleRepository = class DomainScheduleRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
    async softDelete(scheduleId, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(this.repository.target)
            : this.repository;
        await repository.softDelete(scheduleId);
    }
};
exports.DomainScheduleRepository = DomainScheduleRepository;
exports.DomainScheduleRepository = DomainScheduleRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(schedule_entity_1.Schedule)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainScheduleRepository);


/***/ }),

/***/ "./src/domain/schedule/schedule.service.ts":
/*!*************************************************!*\
  !*** ./src/domain/schedule/schedule.service.ts ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainScheduleService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const schedule_repository_1 = __webpack_require__(/*! ./schedule.repository */ "./src/domain/schedule/schedule.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const schedule_type_enum_1 = __webpack_require__(/*! @libs/enums/schedule-type.enum */ "./libs/enums/schedule-type.enum.ts");
let DomainScheduleService = class DomainScheduleService extends base_service_1.BaseService {
    constructor(scheduleRepository) {
        super(scheduleRepository);
        this.scheduleRepository = scheduleRepository;
    }
    async findByScheduleId(scheduleId) {
        return this.scheduleRepository.findOne({
            where: { scheduleId },
        });
    }
    async findByScheduleIds(scheduleIds) {
        return this.scheduleRepository.findAll({
            where: { scheduleId: (0, typeorm_1.In)(scheduleIds) },
        });
    }
    async findByDateRange(startDate, endDate) {
        return this.scheduleRepository.findAll({
            where: {
                startDate: (0, typeorm_1.LessThanOrEqual)(endDate),
                endDate: (0, typeorm_1.MoreThanOrEqual)(startDate),
            },
        });
    }
    async findByEmployeeId(employeeId) {
        return this.scheduleRepository.findAll({
            where: { participants: { employeeId } },
        });
    }
    async findByEmployeeIdFromNow(employeeId) {
        const now = new Date();
        now.setHours(now.getHours() + 9);
        const stringDate = now.toISOString().split('T')[0];
        const date = new Date(stringDate);
        return this.scheduleRepository.findAll({
            where: { participants: { employeeId }, endDate: (0, typeorm_1.MoreThanOrEqual)(date) },
        });
    }
    async findByMonth(date) {
        try {
            const startDateOfMonth = new Date(`${date}-01`);
            const endDateOfMonth = new Date(`${date}-01`);
            endDateOfMonth.setMonth(endDateOfMonth.getMonth() + 1);
            endDateOfMonth.setDate(0);
            endDateOfMonth.setHours(23, 59, 59);
            return this.findByDateRange(startDateOfMonth, endDateOfMonth);
        }
        catch (error) {
            throw new common_1.BadRequestException(`잘못된 날짜 형식입니다: ${date}. YYYY-MM 형식으로 입력해주세요.`);
        }
    }
    async findByPendingToChangeProcessing() {
        const now = date_util_1.DateUtil.now().toDate();
        return this.scheduleRepository.findAll({
            where: {
                status: schedule_type_enum_1.ScheduleStatus.PENDING,
                startDate: (0, typeorm_1.LessThanOrEqual)(now),
            },
        });
    }
    async findByProcessingToChangeCompleted() {
        const now = date_util_1.DateUtil.now().toDate();
        return this.scheduleRepository.findAll({
            where: {
                status: schedule_type_enum_1.ScheduleStatus.PROCESSING,
                endDate: (0, typeorm_1.LessThanOrEqual)(now),
            },
        });
    }
    async softDelete(scheduleId, options) {
        this.scheduleRepository.update(scheduleId, { status: schedule_type_enum_1.ScheduleStatus.CANCELLED }, options);
        return this.scheduleRepository.softDelete(scheduleId, options);
    }
};
exports.DomainScheduleService = DomainScheduleService;
exports.DomainScheduleService = DomainScheduleService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof schedule_repository_1.DomainScheduleRepository !== "undefined" && schedule_repository_1.DomainScheduleRepository) === "function" ? _a : Object])
], DomainScheduleService);


/***/ }),

/***/ "./src/domain/vehicle-info/vehicle-info.module.ts":
/*!********************************************************!*\
  !*** ./src/domain/vehicle-info/vehicle-info.module.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainVehicleInfoModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const vehicle_info_service_1 = __webpack_require__(/*! ./vehicle-info.service */ "./src/domain/vehicle-info/vehicle-info.service.ts");
const vehicle_info_repository_1 = __webpack_require__(/*! ./vehicle-info.repository */ "./src/domain/vehicle-info/vehicle-info.repository.ts");
const vehicle_info_entity_1 = __webpack_require__(/*! @libs/entities/vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
let DomainVehicleInfoModule = class DomainVehicleInfoModule {
};
exports.DomainVehicleInfoModule = DomainVehicleInfoModule;
exports.DomainVehicleInfoModule = DomainVehicleInfoModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([vehicle_info_entity_1.VehicleInfo])],
        providers: [vehicle_info_service_1.DomainVehicleInfoService, vehicle_info_repository_1.DomainVehicleInfoRepository],
        exports: [vehicle_info_service_1.DomainVehicleInfoService],
    })
], DomainVehicleInfoModule);


/***/ }),

/***/ "./src/domain/vehicle-info/vehicle-info.repository.ts":
/*!************************************************************!*\
  !*** ./src/domain/vehicle-info/vehicle-info.repository.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainVehicleInfoRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const vehicle_info_entity_1 = __webpack_require__(/*! @libs/entities/vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
const base_repository_1 = __webpack_require__(/*! @libs/repositories/base.repository */ "./libs/repositories/base.repository.ts");
let DomainVehicleInfoRepository = class DomainVehicleInfoRepository extends base_repository_1.BaseRepository {
    constructor(repository) {
        super(repository);
    }
};
exports.DomainVehicleInfoRepository = DomainVehicleInfoRepository;
exports.DomainVehicleInfoRepository = DomainVehicleInfoRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(vehicle_info_entity_1.VehicleInfo)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], DomainVehicleInfoRepository);


/***/ }),

/***/ "./src/domain/vehicle-info/vehicle-info.service.ts":
/*!*********************************************************!*\
  !*** ./src/domain/vehicle-info/vehicle-info.service.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DomainVehicleInfoService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const vehicle_info_repository_1 = __webpack_require__(/*! ./vehicle-info.repository */ "./src/domain/vehicle-info/vehicle-info.repository.ts");
const base_service_1 = __webpack_require__(/*! @libs/services/base.service */ "./libs/services/base.service.ts");
let DomainVehicleInfoService = class DomainVehicleInfoService extends base_service_1.BaseService {
    constructor(vehicleInfoRepository) {
        super(vehicleInfoRepository);
        this.vehicleInfoRepository = vehicleInfoRepository;
    }
    async findByVehicleInfoId(vehicleInfoId) {
        const vehicleInfo = await this.vehicleInfoRepository.findOne({
            where: { vehicleInfoId },
        });
        if (!vehicleInfo) {
            throw new common_1.NotFoundException('차량 정보를 찾을 수 없습니다.');
        }
        return vehicleInfo;
    }
    async findByResourceId(resourceId) {
        const vehicleInfo = await this.vehicleInfoRepository.findOne({
            where: { resourceId },
        });
        if (!vehicleInfo) {
            throw new common_1.NotFoundException('차량 정보를 찾을 수 없습니다.');
        }
        return vehicleInfo;
    }
};
exports.DomainVehicleInfoService = DomainVehicleInfoService;
exports.DomainVehicleInfoService = DomainVehicleInfoService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_repository_1.DomainVehicleInfoRepository !== "undefined" && vehicle_info_repository_1.DomainVehicleInfoRepository) === "function" ? _a : Object])
], DomainVehicleInfoService);


/***/ }),

/***/ "./src/dtos.index.ts":
/*!***************************!*\
  !*** ./src/dtos.index.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateMeetingRoomInfoDto = exports.VehicleInfoResponseDto = exports.ConsumableResponseDto = exports.MaintenanceResponseDto = exports.UpdateVehicleInfoDto = exports.UpdateConsumableDto = exports.UpdateMaintenanceDto = exports.CreateMaintenanceDto = exports.CreateConsumableDto = exports.CreateVehicleInfoDto = exports.ResourceAvailabilityDto = exports.TimeSlotDto = exports.CheckAvailabilityResponseDto = exports.CheckAvailabilityQueryDto = exports.CreateResourceInfoDto = exports.CreateResourceDto = exports.ResourceLocationURL = exports.ResourceLocation = exports.CreateResourceManagerDto = exports.CreateResourceGroupDto = exports.UpdateResourceGroupOrdersDto = exports.NewOrderResourceGroupDto = exports.UpdateResourceOrdersDto = exports.NewOrderResourceDto = exports.UpdateResourceInfoDto = exports.UpdateResourceDto = exports.UpdateResourceGroupDto = exports.ResourceGroupWithResourcesAndReservationsResponseDto = exports.ResourceGroupWithResourcesResponseDto = exports.ChildResourceGroupResponseDto = exports.ResourceWithReservationsResponseDto = exports.ResourceSelectResponseDto = exports.ResourceResponseDto = exports.ResourceGroupResponseDto = exports.ResourceManagerResponseDto = exports.CreateResourceResponseDto = exports.ResourceQueryDto = exports.TaskResponseDto = exports.ManagerResponseDto = exports.EmplyeesByDepartmentResponseDto = exports.EmployeeResponseDto = exports.UpdateEmployeeDto = exports.CreateEmployeeDto = exports.UpdateNotificationSettingsDto = exports.CheckPasswordDto = exports.ChangePasswordDto = exports.ChangeRoleDto = exports.UserResponseDto = exports.LoginResponseDto = exports.LoginDto = void 0;
exports.UpdateReservationDto = exports.UpdateReservationCcReceipientDto = exports.UpdateReservationParticipantsDto = exports.UpdateReservationStatusDto = exports.UpdateReservationTimeDto = exports.UpdateReservationTitleDto = exports.CreateReservationDto = exports.ReservationQueryDto = exports.CalendarResponseDto = exports.GroupedReservationWithResourceResponseDto = exports.GroupedReservationResponseDto = exports.CreateReservationResponseDto = exports.ReservationWithRelationsResponseDto = exports.ReservationWithResourceResponseDto = exports.ReservationVehicleResponseDto = exports.ReservationParticipantResponseDto = exports.ReservationResponseDto = exports.ReturnVehicleDetailResponseDto = exports.ReturnVehicleResponseDto = exports.StatisticsResponseDto = exports.YearMonthFilterDto = exports.DateRangeFilterDto = exports.ConsumableMaintenanceStatsResponseDto = exports.ConsumableMaintenanceStatsFilterDto = exports.EmployeeReservationStatsResponseDto = exports.EmployeeReservationStatsFilterDto = exports.ResourceUsageStatsResponseDto = exports.ResourceUsageStatsFilterDto = exports.VehicleMaintenanceHistoryResponseDto = exports.VehicleMaintenanceHistoryFilterDto = exports.PushSubscriptionDto = exports.WebPushDto = exports.FCMDto = exports.PushNotificationDto = exports.PushNotificationPayload = exports.SendNotificationDto = exports.CreateEmployeeNotificationDto = exports.CreateNotificationDto = exports.CreateNotificationDataDto = exports.PushNotificationSendResult = exports.ResponseNotificationDto = exports.NotificationDataDto = exports.EquipmentInfoResponseDto = exports.UpdateEquipmentInfoDto = exports.CreateEquipmentInfoDto = exports.AccommodationInfoResponseDto = exports.UpdateAccommodationInfoDto = exports.CreateAccommodationInfoDto = exports.MeetingRoomInfoResponseDto = exports.UpdateMeetingRoomInfoDto = void 0;
exports.FileResponseDto = exports.CreateFileDataDto = exports.ReservationSnapshotResponseDto = exports.SelectedResourceResponseDto = exports.TimeRangeResponseDto = exports.TimeInfoResponseDto = exports.DateRangeResponseDto = exports.UpdateReservationSnapshotDto = exports.CreateReservationSnapshotDto = exports.ReminderTimeDto = exports.SelectedResourceDto = exports.TimeRangeDto = exports.TimeInfoDto = exports.DateRangeDto = exports.DroppableGroupDataDto = exports.DroppableGroupItemDto = exports.AttendeeDto = exports.ReturnVehicleDto = void 0;
var login_dto_1 = __webpack_require__(/*! ./application/auth/dto/login.dto */ "./src/application/auth/dto/login.dto.ts");
Object.defineProperty(exports, "LoginDto", ({ enumerable: true, get: function () { return login_dto_1.LoginDto; } }));
var login_response_dto_1 = __webpack_require__(/*! ./application/auth/dto/login-response.dto */ "./src/application/auth/dto/login-response.dto.ts");
Object.defineProperty(exports, "LoginResponseDto", ({ enumerable: true, get: function () { return login_response_dto_1.LoginResponseDto; } }));
var user_response_dto_1 = __webpack_require__(/*! ./application/auth/dto/user-response.dto */ "./src/application/auth/dto/user-response.dto.ts");
Object.defineProperty(exports, "UserResponseDto", ({ enumerable: true, get: function () { return user_response_dto_1.UserResponseDto; } }));
var change_role_dto_1 = __webpack_require__(/*! ./application/auth/dto/change-role.dto */ "./src/application/auth/dto/change-role.dto.ts");
Object.defineProperty(exports, "ChangeRoleDto", ({ enumerable: true, get: function () { return change_role_dto_1.ChangeRoleDto; } }));
var change_password_dto_1 = __webpack_require__(/*! ./application/auth/dto/change-password.dto */ "./src/application/auth/dto/change-password.dto.ts");
Object.defineProperty(exports, "ChangePasswordDto", ({ enumerable: true, get: function () { return change_password_dto_1.ChangePasswordDto; } }));
var check_password_dto_1 = __webpack_require__(/*! ./application/auth/dto/check-password.dto */ "./src/application/auth/dto/check-password.dto.ts");
Object.defineProperty(exports, "CheckPasswordDto", ({ enumerable: true, get: function () { return check_password_dto_1.CheckPasswordDto; } }));
var notification_settings_dto_1 = __webpack_require__(/*! ./application/auth/dto/notification-settings.dto */ "./src/application/auth/dto/notification-settings.dto.ts");
Object.defineProperty(exports, "UpdateNotificationSettingsDto", ({ enumerable: true, get: function () { return notification_settings_dto_1.UpdateNotificationSettingsDto; } }));
var create_employee_dto_1 = __webpack_require__(/*! ./application/employee/dtos/create-employee.dto */ "./src/application/employee/dtos/create-employee.dto.ts");
Object.defineProperty(exports, "CreateEmployeeDto", ({ enumerable: true, get: function () { return create_employee_dto_1.CreateEmployeeDto; } }));
var update_employee_dto_1 = __webpack_require__(/*! ./application/employee/dtos/update-employee.dto */ "./src/application/employee/dtos/update-employee.dto.ts");
Object.defineProperty(exports, "UpdateEmployeeDto", ({ enumerable: true, get: function () { return update_employee_dto_1.UpdateEmployeeDto; } }));
var employee_response_dto_1 = __webpack_require__(/*! ./application/employee/dtos/employee-response.dto */ "./src/application/employee/dtos/employee-response.dto.ts");
Object.defineProperty(exports, "EmployeeResponseDto", ({ enumerable: true, get: function () { return employee_response_dto_1.EmployeeResponseDto; } }));
var employees_by_department_response_dto_1 = __webpack_require__(/*! ./application/employee/dtos/employees-by-department-response.dto */ "./src/application/employee/dtos/employees-by-department-response.dto.ts");
Object.defineProperty(exports, "EmplyeesByDepartmentResponseDto", ({ enumerable: true, get: function () { return employees_by_department_response_dto_1.EmplyeesByDepartmentResponseDto; } }));
var task_response_dto_1 = __webpack_require__(/*! ./application/task/dtos/task-response.dto */ "./src/application/task/dtos/task-response.dto.ts");
Object.defineProperty(exports, "ManagerResponseDto", ({ enumerable: true, get: function () { return task_response_dto_1.ManagerResponseDto; } }));
Object.defineProperty(exports, "TaskResponseDto", ({ enumerable: true, get: function () { return task_response_dto_1.TaskResponseDto; } }));
var resource_query_dto_1 = __webpack_require__(/*! ./application/resource/core/dtos/resource-query.dto */ "./src/application/resource/core/dtos/resource-query.dto.ts");
Object.defineProperty(exports, "ResourceQueryDto", ({ enumerable: true, get: function () { return resource_query_dto_1.ResourceQueryDto; } }));
var resource_response_dto_1 = __webpack_require__(/*! ./application/resource/core/dtos/resource-response.dto */ "./src/application/resource/core/dtos/resource-response.dto.ts");
Object.defineProperty(exports, "CreateResourceResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.CreateResourceResponseDto; } }));
Object.defineProperty(exports, "ResourceManagerResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceManagerResponseDto; } }));
Object.defineProperty(exports, "ResourceGroupResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceGroupResponseDto; } }));
Object.defineProperty(exports, "ResourceResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceResponseDto; } }));
Object.defineProperty(exports, "ResourceSelectResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceSelectResponseDto; } }));
Object.defineProperty(exports, "ResourceWithReservationsResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceWithReservationsResponseDto; } }));
Object.defineProperty(exports, "ChildResourceGroupResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ChildResourceGroupResponseDto; } }));
Object.defineProperty(exports, "ResourceGroupWithResourcesResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceGroupWithResourcesResponseDto; } }));
Object.defineProperty(exports, "ResourceGroupWithResourcesAndReservationsResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceGroupWithResourcesAndReservationsResponseDto; } }));
var update_resource_dto_1 = __webpack_require__(/*! ./application/resource/core/dtos/update-resource.dto */ "./src/application/resource/core/dtos/update-resource.dto.ts");
Object.defineProperty(exports, "UpdateResourceGroupDto", ({ enumerable: true, get: function () { return update_resource_dto_1.UpdateResourceGroupDto; } }));
Object.defineProperty(exports, "UpdateResourceDto", ({ enumerable: true, get: function () { return update_resource_dto_1.UpdateResourceDto; } }));
Object.defineProperty(exports, "UpdateResourceInfoDto", ({ enumerable: true, get: function () { return update_resource_dto_1.UpdateResourceInfoDto; } }));
Object.defineProperty(exports, "NewOrderResourceDto", ({ enumerable: true, get: function () { return update_resource_dto_1.NewOrderResourceDto; } }));
Object.defineProperty(exports, "UpdateResourceOrdersDto", ({ enumerable: true, get: function () { return update_resource_dto_1.UpdateResourceOrdersDto; } }));
Object.defineProperty(exports, "NewOrderResourceGroupDto", ({ enumerable: true, get: function () { return update_resource_dto_1.NewOrderResourceGroupDto; } }));
Object.defineProperty(exports, "UpdateResourceGroupOrdersDto", ({ enumerable: true, get: function () { return update_resource_dto_1.UpdateResourceGroupOrdersDto; } }));
var create_resource_dto_1 = __webpack_require__(/*! ./application/resource/core/dtos/create-resource.dto */ "./src/application/resource/core/dtos/create-resource.dto.ts");
Object.defineProperty(exports, "CreateResourceGroupDto", ({ enumerable: true, get: function () { return create_resource_dto_1.CreateResourceGroupDto; } }));
Object.defineProperty(exports, "CreateResourceManagerDto", ({ enumerable: true, get: function () { return create_resource_dto_1.CreateResourceManagerDto; } }));
Object.defineProperty(exports, "ResourceLocation", ({ enumerable: true, get: function () { return create_resource_dto_1.ResourceLocation; } }));
Object.defineProperty(exports, "ResourceLocationURL", ({ enumerable: true, get: function () { return create_resource_dto_1.ResourceLocationURL; } }));
Object.defineProperty(exports, "CreateResourceDto", ({ enumerable: true, get: function () { return create_resource_dto_1.CreateResourceDto; } }));
Object.defineProperty(exports, "CreateResourceInfoDto", ({ enumerable: true, get: function () { return create_resource_dto_1.CreateResourceInfoDto; } }));
var check_availability_dto_1 = __webpack_require__(/*! ./application/resource/core/dtos/check-availability.dto */ "./src/application/resource/core/dtos/check-availability.dto.ts");
Object.defineProperty(exports, "CheckAvailabilityQueryDto", ({ enumerable: true, get: function () { return check_availability_dto_1.CheckAvailabilityQueryDto; } }));
Object.defineProperty(exports, "CheckAvailabilityResponseDto", ({ enumerable: true, get: function () { return check_availability_dto_1.CheckAvailabilityResponseDto; } }));
var available_time_response_dto_1 = __webpack_require__(/*! ./application/resource/core/dtos/available-time-response.dto */ "./src/application/resource/core/dtos/available-time-response.dto.ts");
Object.defineProperty(exports, "TimeSlotDto", ({ enumerable: true, get: function () { return available_time_response_dto_1.TimeSlotDto; } }));
Object.defineProperty(exports, "ResourceAvailabilityDto", ({ enumerable: true, get: function () { return available_time_response_dto_1.ResourceAvailabilityDto; } }));
var create_vehicle_info_dto_1 = __webpack_require__(/*! ./application/resource/vehicle/dtos/create-vehicle-info.dto */ "./src/application/resource/vehicle/dtos/create-vehicle-info.dto.ts");
Object.defineProperty(exports, "CreateVehicleInfoDto", ({ enumerable: true, get: function () { return create_vehicle_info_dto_1.CreateVehicleInfoDto; } }));
Object.defineProperty(exports, "CreateConsumableDto", ({ enumerable: true, get: function () { return create_vehicle_info_dto_1.CreateConsumableDto; } }));
Object.defineProperty(exports, "CreateMaintenanceDto", ({ enumerable: true, get: function () { return create_vehicle_info_dto_1.CreateMaintenanceDto; } }));
var update_vehicle_info_dto_1 = __webpack_require__(/*! ./application/resource/vehicle/dtos/update-vehicle-info.dto */ "./src/application/resource/vehicle/dtos/update-vehicle-info.dto.ts");
Object.defineProperty(exports, "UpdateMaintenanceDto", ({ enumerable: true, get: function () { return update_vehicle_info_dto_1.UpdateMaintenanceDto; } }));
Object.defineProperty(exports, "UpdateConsumableDto", ({ enumerable: true, get: function () { return update_vehicle_info_dto_1.UpdateConsumableDto; } }));
Object.defineProperty(exports, "UpdateVehicleInfoDto", ({ enumerable: true, get: function () { return update_vehicle_info_dto_1.UpdateVehicleInfoDto; } }));
var vehicle_response_dto_1 = __webpack_require__(/*! ./application/resource/vehicle/dtos/vehicle-response.dto */ "./src/application/resource/vehicle/dtos/vehicle-response.dto.ts");
Object.defineProperty(exports, "MaintenanceResponseDto", ({ enumerable: true, get: function () { return vehicle_response_dto_1.MaintenanceResponseDto; } }));
Object.defineProperty(exports, "ConsumableResponseDto", ({ enumerable: true, get: function () { return vehicle_response_dto_1.ConsumableResponseDto; } }));
Object.defineProperty(exports, "VehicleInfoResponseDto", ({ enumerable: true, get: function () { return vehicle_response_dto_1.VehicleInfoResponseDto; } }));
var create_meeting_room_info_dto_1 = __webpack_require__(/*! ./application/resource/meeting-room/dtos/create-meeting-room-info.dto */ "./src/application/resource/meeting-room/dtos/create-meeting-room-info.dto.ts");
Object.defineProperty(exports, "CreateMeetingRoomInfoDto", ({ enumerable: true, get: function () { return create_meeting_room_info_dto_1.CreateMeetingRoomInfoDto; } }));
var update_meeting_room_info_dto_1 = __webpack_require__(/*! ./application/resource/meeting-room/dtos/update-meeting-room-info.dto */ "./src/application/resource/meeting-room/dtos/update-meeting-room-info.dto.ts");
Object.defineProperty(exports, "UpdateMeetingRoomInfoDto", ({ enumerable: true, get: function () { return update_meeting_room_info_dto_1.UpdateMeetingRoomInfoDto; } }));
var meeting_room_info_response_dto_1 = __webpack_require__(/*! ./application/resource/meeting-room/dtos/meeting-room-info-response.dto */ "./src/application/resource/meeting-room/dtos/meeting-room-info-response.dto.ts");
Object.defineProperty(exports, "MeetingRoomInfoResponseDto", ({ enumerable: true, get: function () { return meeting_room_info_response_dto_1.MeetingRoomInfoResponseDto; } }));
var create_accommodation_info_dto_1 = __webpack_require__(/*! ./application/resource/accommodation/dtos/create-accommodation-info.dto */ "./src/application/resource/accommodation/dtos/create-accommodation-info.dto.ts");
Object.defineProperty(exports, "CreateAccommodationInfoDto", ({ enumerable: true, get: function () { return create_accommodation_info_dto_1.CreateAccommodationInfoDto; } }));
var update_accommodation_info_dto_1 = __webpack_require__(/*! ./application/resource/accommodation/dtos/update-accommodation-info.dto */ "./src/application/resource/accommodation/dtos/update-accommodation-info.dto.ts");
Object.defineProperty(exports, "UpdateAccommodationInfoDto", ({ enumerable: true, get: function () { return update_accommodation_info_dto_1.UpdateAccommodationInfoDto; } }));
var accommodation_info_response_dto_1 = __webpack_require__(/*! ./application/resource/accommodation/dtos/accommodation-info-response.dto */ "./src/application/resource/accommodation/dtos/accommodation-info-response.dto.ts");
Object.defineProperty(exports, "AccommodationInfoResponseDto", ({ enumerable: true, get: function () { return accommodation_info_response_dto_1.AccommodationInfoResponseDto; } }));
var create_equipment_info_dto_1 = __webpack_require__(/*! ./application/resource/equipment/dtos/create-equipment-info.dto */ "./src/application/resource/equipment/dtos/create-equipment-info.dto.ts");
Object.defineProperty(exports, "CreateEquipmentInfoDto", ({ enumerable: true, get: function () { return create_equipment_info_dto_1.CreateEquipmentInfoDto; } }));
var update_equipment_info_dto_1 = __webpack_require__(/*! ./application/resource/equipment/dtos/update-equipment-info.dto */ "./src/application/resource/equipment/dtos/update-equipment-info.dto.ts");
Object.defineProperty(exports, "UpdateEquipmentInfoDto", ({ enumerable: true, get: function () { return update_equipment_info_dto_1.UpdateEquipmentInfoDto; } }));
var equipment_info_response_dto_1 = __webpack_require__(/*! ./application/resource/equipment/dtos/equipment-info-response.dto */ "./src/application/resource/equipment/dtos/equipment-info-response.dto.ts");
Object.defineProperty(exports, "EquipmentInfoResponseDto", ({ enumerable: true, get: function () { return equipment_info_response_dto_1.EquipmentInfoResponseDto; } }));
var response_notification_dto_1 = __webpack_require__(/*! ./application/notification/dtos/response-notification.dto */ "./src/application/notification/dtos/response-notification.dto.ts");
Object.defineProperty(exports, "NotificationDataDto", ({ enumerable: true, get: function () { return response_notification_dto_1.NotificationDataDto; } }));
Object.defineProperty(exports, "ResponseNotificationDto", ({ enumerable: true, get: function () { return response_notification_dto_1.ResponseNotificationDto; } }));
Object.defineProperty(exports, "PushNotificationSendResult", ({ enumerable: true, get: function () { return response_notification_dto_1.PushNotificationSendResult; } }));
var create_notification_dto_1 = __webpack_require__(/*! ./application/notification/dtos/create-notification.dto */ "./src/application/notification/dtos/create-notification.dto.ts");
Object.defineProperty(exports, "CreateNotificationDataDto", ({ enumerable: true, get: function () { return create_notification_dto_1.CreateNotificationDataDto; } }));
Object.defineProperty(exports, "CreateNotificationDto", ({ enumerable: true, get: function () { return create_notification_dto_1.CreateNotificationDto; } }));
Object.defineProperty(exports, "CreateEmployeeNotificationDto", ({ enumerable: true, get: function () { return create_notification_dto_1.CreateEmployeeNotificationDto; } }));
Object.defineProperty(exports, "SendNotificationDto", ({ enumerable: true, get: function () { return create_notification_dto_1.SendNotificationDto; } }));
var send_notification_dto_1 = __webpack_require__(/*! ./application/notification/dtos/send-notification.dto */ "./src/application/notification/dtos/send-notification.dto.ts");
Object.defineProperty(exports, "PushNotificationPayload", ({ enumerable: true, get: function () { return send_notification_dto_1.PushNotificationPayload; } }));
Object.defineProperty(exports, "PushNotificationDto", ({ enumerable: true, get: function () { return send_notification_dto_1.PushNotificationDto; } }));
var push_subscription_dto_1 = __webpack_require__(/*! ./application/notification/dtos/push-subscription.dto */ "./src/application/notification/dtos/push-subscription.dto.ts");
Object.defineProperty(exports, "FCMDto", ({ enumerable: true, get: function () { return push_subscription_dto_1.FCMDto; } }));
Object.defineProperty(exports, "WebPushDto", ({ enumerable: true, get: function () { return push_subscription_dto_1.WebPushDto; } }));
Object.defineProperty(exports, "PushSubscriptionDto", ({ enumerable: true, get: function () { return push_subscription_dto_1.PushSubscriptionDto; } }));
var vehicle_maintenance_history_dto_1 = __webpack_require__(/*! ./application/statistics/dtos/vehicle-maintenance-history.dto */ "./src/application/statistics/dtos/vehicle-maintenance-history.dto.ts");
Object.defineProperty(exports, "VehicleMaintenanceHistoryFilterDto", ({ enumerable: true, get: function () { return vehicle_maintenance_history_dto_1.VehicleMaintenanceHistoryFilterDto; } }));
Object.defineProperty(exports, "VehicleMaintenanceHistoryResponseDto", ({ enumerable: true, get: function () { return vehicle_maintenance_history_dto_1.VehicleMaintenanceHistoryResponseDto; } }));
var resource_usage_stats_dto_1 = __webpack_require__(/*! ./application/statistics/dtos/resource-usage-stats.dto */ "./src/application/statistics/dtos/resource-usage-stats.dto.ts");
Object.defineProperty(exports, "ResourceUsageStatsFilterDto", ({ enumerable: true, get: function () { return resource_usage_stats_dto_1.ResourceUsageStatsFilterDto; } }));
Object.defineProperty(exports, "ResourceUsageStatsResponseDto", ({ enumerable: true, get: function () { return resource_usage_stats_dto_1.ResourceUsageStatsResponseDto; } }));
var employee_reservation_stats_dto_1 = __webpack_require__(/*! ./application/statistics/dtos/employee-reservation-stats.dto */ "./src/application/statistics/dtos/employee-reservation-stats.dto.ts");
Object.defineProperty(exports, "EmployeeReservationStatsFilterDto", ({ enumerable: true, get: function () { return employee_reservation_stats_dto_1.EmployeeReservationStatsFilterDto; } }));
Object.defineProperty(exports, "EmployeeReservationStatsResponseDto", ({ enumerable: true, get: function () { return employee_reservation_stats_dto_1.EmployeeReservationStatsResponseDto; } }));
var consumable_maintenance_stats_dto_1 = __webpack_require__(/*! ./application/statistics/dtos/consumable-maintenance-stats.dto */ "./src/application/statistics/dtos/consumable-maintenance-stats.dto.ts");
Object.defineProperty(exports, "ConsumableMaintenanceStatsFilterDto", ({ enumerable: true, get: function () { return consumable_maintenance_stats_dto_1.ConsumableMaintenanceStatsFilterDto; } }));
Object.defineProperty(exports, "ConsumableMaintenanceStatsResponseDto", ({ enumerable: true, get: function () { return consumable_maintenance_stats_dto_1.ConsumableMaintenanceStatsResponseDto; } }));
var base_dto_1 = __webpack_require__(/*! ./application/statistics/dtos/base.dto */ "./src/application/statistics/dtos/base.dto.ts");
Object.defineProperty(exports, "DateRangeFilterDto", ({ enumerable: true, get: function () { return base_dto_1.DateRangeFilterDto; } }));
Object.defineProperty(exports, "YearMonthFilterDto", ({ enumerable: true, get: function () { return base_dto_1.YearMonthFilterDto; } }));
Object.defineProperty(exports, "StatisticsResponseDto", ({ enumerable: true, get: function () { return base_dto_1.StatisticsResponseDto; } }));
var return_vehicle_response_dto_1 = __webpack_require__(/*! ./application/reservation/core/dtos/return-vehicle-response.dto */ "./src/application/reservation/core/dtos/return-vehicle-response.dto.ts");
Object.defineProperty(exports, "ReturnVehicleResponseDto", ({ enumerable: true, get: function () { return return_vehicle_response_dto_1.ReturnVehicleResponseDto; } }));
Object.defineProperty(exports, "ReturnVehicleDetailResponseDto", ({ enumerable: true, get: function () { return return_vehicle_response_dto_1.ReturnVehicleDetailResponseDto; } }));
var reservation_response_dto_1 = __webpack_require__(/*! ./application/reservation/core/dtos/reservation-response.dto */ "./src/application/reservation/core/dtos/reservation-response.dto.ts");
Object.defineProperty(exports, "ReservationResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.ReservationResponseDto; } }));
Object.defineProperty(exports, "ReservationParticipantResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.ReservationParticipantResponseDto; } }));
Object.defineProperty(exports, "ReservationVehicleResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.ReservationVehicleResponseDto; } }));
Object.defineProperty(exports, "ReservationWithResourceResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.ReservationWithResourceResponseDto; } }));
Object.defineProperty(exports, "ReservationWithRelationsResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.ReservationWithRelationsResponseDto; } }));
Object.defineProperty(exports, "CreateReservationResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.CreateReservationResponseDto; } }));
Object.defineProperty(exports, "GroupedReservationResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.GroupedReservationResponseDto; } }));
Object.defineProperty(exports, "GroupedReservationWithResourceResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.GroupedReservationWithResourceResponseDto; } }));
Object.defineProperty(exports, "CalendarResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.CalendarResponseDto; } }));
var reservaion_query_dto_1 = __webpack_require__(/*! ./application/reservation/core/dtos/reservaion-query.dto */ "./src/application/reservation/core/dtos/reservaion-query.dto.ts");
Object.defineProperty(exports, "ReservationQueryDto", ({ enumerable: true, get: function () { return reservaion_query_dto_1.ReservationQueryDto; } }));
var create_reservation_dto_1 = __webpack_require__(/*! ./application/reservation/core/dtos/create-reservation.dto */ "./src/application/reservation/core/dtos/create-reservation.dto.ts");
Object.defineProperty(exports, "CreateReservationDto", ({ enumerable: true, get: function () { return create_reservation_dto_1.CreateReservationDto; } }));
var update_reservation_dto_1 = __webpack_require__(/*! ./application/reservation/core/dtos/update-reservation.dto */ "./src/application/reservation/core/dtos/update-reservation.dto.ts");
Object.defineProperty(exports, "UpdateReservationTitleDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationTitleDto; } }));
Object.defineProperty(exports, "UpdateReservationTimeDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationTimeDto; } }));
Object.defineProperty(exports, "UpdateReservationStatusDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationStatusDto; } }));
Object.defineProperty(exports, "UpdateReservationParticipantsDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationParticipantsDto; } }));
Object.defineProperty(exports, "UpdateReservationCcReceipientDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationCcReceipientDto; } }));
Object.defineProperty(exports, "UpdateReservationDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationDto; } }));
Object.defineProperty(exports, "ReturnVehicleDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.ReturnVehicleDto; } }));
var reservation_snapshot_dto_1 = __webpack_require__(/*! ./application/reservation/snapshot/dtos/reservation-snapshot.dto */ "./src/application/reservation/snapshot/dtos/reservation-snapshot.dto.ts");
Object.defineProperty(exports, "AttendeeDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.AttendeeDto; } }));
Object.defineProperty(exports, "DroppableGroupItemDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.DroppableGroupItemDto; } }));
Object.defineProperty(exports, "DroppableGroupDataDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.DroppableGroupDataDto; } }));
Object.defineProperty(exports, "DateRangeDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.DateRangeDto; } }));
Object.defineProperty(exports, "TimeInfoDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.TimeInfoDto; } }));
Object.defineProperty(exports, "TimeRangeDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.TimeRangeDto; } }));
Object.defineProperty(exports, "SelectedResourceDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.SelectedResourceDto; } }));
Object.defineProperty(exports, "ReminderTimeDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.ReminderTimeDto; } }));
Object.defineProperty(exports, "CreateReservationSnapshotDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.CreateReservationSnapshotDto; } }));
Object.defineProperty(exports, "UpdateReservationSnapshotDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.UpdateReservationSnapshotDto; } }));
Object.defineProperty(exports, "DateRangeResponseDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.DateRangeResponseDto; } }));
Object.defineProperty(exports, "TimeInfoResponseDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.TimeInfoResponseDto; } }));
Object.defineProperty(exports, "TimeRangeResponseDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.TimeRangeResponseDto; } }));
Object.defineProperty(exports, "SelectedResourceResponseDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.SelectedResourceResponseDto; } }));
Object.defineProperty(exports, "ReservationSnapshotResponseDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.ReservationSnapshotResponseDto; } }));
var create_filedata_dto_1 = __webpack_require__(/*! ./application/file/dtos/create-filedata.dto */ "./src/application/file/dtos/create-filedata.dto.ts");
Object.defineProperty(exports, "CreateFileDataDto", ({ enumerable: true, get: function () { return create_filedata_dto_1.CreateFileDataDto; } }));
var file_response_dto_1 = __webpack_require__(/*! ./application/file/dtos/file-response.dto */ "./src/application/file/dtos/file-response.dto.ts");
Object.defineProperty(exports, "FileResponseDto", ({ enumerable: true, get: function () { return file_response_dto_1.FileResponseDto; } }));


/***/ }),

/***/ "./src/legacy-application.module.ts":
/*!******************************************!*\
  !*** ./src/legacy-application.module.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LegacyApplicationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const auth_module_1 = __webpack_require__(/*! ./application/auth/auth.module */ "./src/application/auth/auth.module.ts");
const employee_module_1 = __webpack_require__(/*! ./application/employee/employee.module */ "./src/application/employee/employee.module.ts");
const file_module_1 = __webpack_require__(/*! ./application/file/file.module */ "./src/application/file/file.module.ts");
const notification_module_1 = __webpack_require__(/*! ./application/notification/notification.module */ "./src/application/notification/notification.module.ts");
const core_module_1 = __webpack_require__(/*! ./application/resource/core/core.module */ "./src/application/resource/core/core.module.ts");
const core_module_2 = __webpack_require__(/*! ./application/reservation/core/core.module */ "./src/application/reservation/core/core.module.ts");
const vehicle_module_1 = __webpack_require__(/*! ./application/resource/vehicle/vehicle.module */ "./src/application/resource/vehicle/vehicle.module.ts");
const task_module_1 = __webpack_require__(/*! ./application/task/task.module */ "./src/application/task/task.module.ts");
const statistics_module_1 = __webpack_require__(/*! ./application/statistics/statistics.module */ "./src/application/statistics/statistics.module.ts");
let LegacyApplicationModule = class LegacyApplicationModule {
};
exports.LegacyApplicationModule = LegacyApplicationModule;
exports.LegacyApplicationModule = LegacyApplicationModule = __decorate([
    (0, common_1.Module)({
        imports: [
            auth_module_1.AuthModule,
            employee_module_1.EmployeeModule,
            file_module_1.FileModule,
            notification_module_1.NotificationModule,
            core_module_1.ResourceCoreModule,
            core_module_2.ReservationCoreModule,
            core_module_2.ReservationCoreModule,
            vehicle_module_1.VehicleResourceModule,
            task_module_1.TaskModule,
            statistics_module_1.StatisticsModule,
        ],
        providers: [],
    })
], LegacyApplicationModule);


/***/ }),

/***/ "@aws-sdk/client-s3":
/*!*************************************!*\
  !*** external "@aws-sdk/client-s3" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ "@aws-sdk/s3-request-presigner":
/*!************************************************!*\
  !*** external "@aws-sdk/s3-request-presigner" ***!
  \************************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/s3-request-presigner");

/***/ }),

/***/ "@nestjs/axios":
/*!********************************!*\
  !*** external "@nestjs/axios" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("@nestjs/axios");

/***/ }),

/***/ "@nestjs/common":
/*!*********************************!*\
  !*** external "@nestjs/common" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@nestjs/common");

/***/ }),

/***/ "@nestjs/config":
/*!*********************************!*\
  !*** external "@nestjs/config" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@nestjs/config");

/***/ }),

/***/ "@nestjs/core":
/*!*******************************!*\
  !*** external "@nestjs/core" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("@nestjs/core");

/***/ }),

/***/ "@nestjs/event-emitter":
/*!****************************************!*\
  !*** external "@nestjs/event-emitter" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@nestjs/event-emitter");

/***/ }),

/***/ "@nestjs/jwt":
/*!******************************!*\
  !*** external "@nestjs/jwt" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("@nestjs/jwt");

/***/ }),

/***/ "@nestjs/passport":
/*!***********************************!*\
  !*** external "@nestjs/passport" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("@nestjs/passport");

/***/ }),

/***/ "@nestjs/platform-express":
/*!*******************************************!*\
  !*** external "@nestjs/platform-express" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("@nestjs/platform-express");

/***/ }),

/***/ "@nestjs/schedule":
/*!***********************************!*\
  !*** external "@nestjs/schedule" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("@nestjs/schedule");

/***/ }),

/***/ "@nestjs/swagger":
/*!**********************************!*\
  !*** external "@nestjs/swagger" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("@nestjs/swagger");

/***/ }),

/***/ "@nestjs/throttler/dist/throttler.decorator":
/*!*************************************************************!*\
  !*** external "@nestjs/throttler/dist/throttler.decorator" ***!
  \*************************************************************/
/***/ ((module) => {

module.exports = require("@nestjs/throttler/dist/throttler.decorator");

/***/ }),

/***/ "@nestjs/typeorm":
/*!**********************************!*\
  !*** external "@nestjs/typeorm" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("@nestjs/typeorm");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = require("axios");

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "class-transformer":
/*!************************************!*\
  !*** external "class-transformer" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("class-transformer");

/***/ }),

/***/ "class-validator":
/*!**********************************!*\
  !*** external "class-validator" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("class-validator");

/***/ }),

/***/ "cron":
/*!***********************!*\
  !*** external "cron" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("cron");

/***/ }),

/***/ "cron/dist":
/*!****************************!*\
  !*** external "cron/dist" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("cron/dist");

/***/ }),

/***/ "dayjs":
/*!************************!*\
  !*** external "dayjs" ***!
  \************************/
/***/ ((module) => {

module.exports = require("dayjs");

/***/ }),

/***/ "dayjs/plugin/timezone":
/*!****************************************!*\
  !*** external "dayjs/plugin/timezone" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("dayjs/plugin/timezone");

/***/ }),

/***/ "dayjs/plugin/utc":
/*!***********************************!*\
  !*** external "dayjs/plugin/utc" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("dayjs/plugin/utc");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "firebase-admin/app":
/*!*************************************!*\
  !*** external "firebase-admin/app" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/app");

/***/ }),

/***/ "firebase-admin/messaging":
/*!*******************************************!*\
  !*** external "firebase-admin/messaging" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/messaging");

/***/ }),

/***/ "passport-jwt":
/*!*******************************!*\
  !*** external "passport-jwt" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("passport-jwt");

/***/ }),

/***/ "rxjs":
/*!***********************!*\
  !*** external "rxjs" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("rxjs");

/***/ }),

/***/ "rxjs/operators":
/*!*********************************!*\
  !*** external "rxjs/operators" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("rxjs/operators");

/***/ }),

/***/ "typeorm":
/*!**************************!*\
  !*** external "typeorm" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("typeorm");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/

Object.defineProperty(exports, "__esModule", ({ value: true }));
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const app_module_1 = __webpack_require__(/*! @resource/app.module */ "./src/app.module.ts");
const swagger_1 = __webpack_require__(/*! @libs/swagger/swagger */ "./libs/swagger/swagger.ts");
const env_config_1 = __webpack_require__(/*! @libs/configs/env.config */ "./libs/configs/env.config.ts");
const dtos = __webpack_require__(/*! @resource/dtos.index */ "./src/dtos.index.ts");
const businessDtos = __webpack_require__(/*! ./business.dto.index */ "./src/business.dto.index.ts");
const jwt_auth_guard_1 = __webpack_require__(/*! @libs/guards/jwt-auth.guard */ "./libs/guards/jwt-auth.guard.ts");
const core_2 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const path_1 = __webpack_require__(/*! path */ "path");
const role_guard_1 = __webpack_require__(/*! @libs/guards/role.guard */ "./libs/guards/role.guard.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const request_interceptor_1 = __webpack_require__(/*! @libs/interceptors/request.interceptor */ "./libs/interceptors/request.interceptor.ts");
async function bootstrap() {
    const app = await core_1.NestFactory.create(app_module_1.AppModule);
    const isProduction = process.env.NODE_ENV === 'production';
    app.enableCors({
        origin: isProduction
            ? function (origin, callback) {
                const whitelist = [
                    'https://lrms.lumir.space',
                    'https://rms-backend-iota.vercel.app',
                    'https://lrms-dev.lumir.space',
                    'http://localhost:3002',
                ];
                if (!isProduction || !origin || whitelist.includes(origin)) {
                    callback(null, true);
                }
                else {
                    callback(new Error('Not allowed by CORS'));
                }
            }
            : true,
        methods: 'GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS',
        credentials: true,
    });
    app.setGlobalPrefix('api');
    app.useGlobalGuards(new jwt_auth_guard_1.JwtAuthGuard(app.get(core_2.Reflector)), new role_guard_1.RolesGuard(app.get(core_2.Reflector)));
    app.useGlobalInterceptors(new request_interceptor_1.RequestInterceptor());
    app.useGlobalPipes(new common_1.ValidationPipe({ transform: true }));
    const uploadPath = (0, path_1.join)(process.cwd(), 'public');
    app.useStaticAssets(uploadPath, {
        prefix: '/public',
        index: false,
        fallthrough: false,
    });
    (0, swagger_1.setupSwagger)(app, [...Object.values(dtos), ...Object.values(businessDtos)]);
    await app.listen(env_config_1.ENV.APP_PORT || 3000);
}
bootstrap();

})();

/******/ })()
;