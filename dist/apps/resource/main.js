/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./apps/resource/src/app.controller.ts":
/*!*********************************************!*\
  !*** ./apps/resource/src/app.controller.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AppController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const app_service_1 = __webpack_require__(/*! ./app.service */ "./apps/resource/src/app.service.ts");
const app_dto_1 = __webpack_require__(/*! ./app.dto */ "./apps/resource/src/app.dto.ts");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
let AppController = class AppController {
    constructor(appService, eventEmitter) {
        this.appService = appService;
        this.eventEmitter = eventEmitter;
    }
    async getVersion() {
        return {
            version: '1.0.0',
            date: date_util_1.DateUtil.now().format(),
        };
    }
    async getResourceUsageStats(filter) {
        const stats = await this.appService.getResourceUsageStats(filter);
        return stats;
    }
    async getVehicleMaintenanceHistory(filter) {
        const history = await this.appService.getVehicleMaintenanceHistory(filter);
        return history;
    }
    async getConsumableMaintenanceStats(filter) {
        const stats = await this.appService.getConsumableMaintenanceStats(filter);
        return stats;
    }
    async getEmployeeReservationStats(filter) {
        const stats = await this.appService.getEmployeeReservationStats(filter);
        return stats;
    }
    async getAllStatistics() {
        const [employeeReservationStats, resourceUsageStats, vehicleMaintenanceHistory, consumableMaintenanceStats] = await Promise.all([
            this.appService.getEmployeeReservationStats({}),
            this.appService.getResourceUsageStats({}),
            this.appService.getVehicleMaintenanceHistory({}),
            this.appService.getConsumableMaintenanceStats({}),
        ]);
        return {
            employeeReservationStats: employeeReservationStats,
            resourceUsageStats: resourceUsageStats,
            vehicleMaintenanceHistory: vehicleMaintenanceHistory,
            consumableMaintenanceStats: consumableMaintenanceStats,
        };
    }
};
exports.AppController = AppController;
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('version'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], AppController.prototype, "getVersion", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('resource-usage-stats'),
    (0, swagger_1.ApiOkResponse)({
        description: '자원 사용 통계 조회 성공',
        type: [app_dto_1.ResourceUsageStatsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof app_dto_1.ResourceUsageStatsFilterDto !== "undefined" && app_dto_1.ResourceUsageStatsFilterDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], AppController.prototype, "getResourceUsageStats", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('vehicle-maintenance-history'),
    (0, swagger_1.ApiOkResponse)({
        description: '차량 정비 이력 조회 성공',
        type: [app_dto_1.VehicleMaintenanceHistoryResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof app_dto_1.VehicleMaintenanceHistoryFilterDto !== "undefined" && app_dto_1.VehicleMaintenanceHistoryFilterDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], AppController.prototype, "getVehicleMaintenanceHistory", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('consumable-maintenance-stats'),
    (0, swagger_1.ApiOkResponse)({
        description: '소모품 정비 통계 조회 성공',
        type: [app_dto_1.ConsumableMaintenanceStatsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_h = typeof app_dto_1.ConsumableMaintenanceStatsFilterDto !== "undefined" && app_dto_1.ConsumableMaintenanceStatsFilterDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], AppController.prototype, "getConsumableMaintenanceStats", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('employee-reservation-stats'),
    (0, swagger_1.ApiOkResponse)({
        description: '직원 예약 통계 조회 성공',
        type: [app_dto_1.EmployeeReservationStatsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_k = typeof app_dto_1.EmployeeReservationStatsFilterDto !== "undefined" && app_dto_1.EmployeeReservationStatsFilterDto) === "function" ? _k : Object]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], AppController.prototype, "getEmployeeReservationStats", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, common_1.Get)('statistics'),
    (0, swagger_1.ApiOkResponse)({
        description: '모든 통계 데이터 조회 성공',
        type: app_dto_1.StatisticsResponseDto,
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], AppController.prototype, "getAllStatistics", null);
exports.AppController = AppController = __decorate([
    (0, swagger_1.ApiTags)('6. 통계 - 관리자 페이지'),
    (0, common_1.Controller)('v1/statistics'),
    __metadata("design:paramtypes", [typeof (_a = typeof app_service_1.AppService !== "undefined" && app_service_1.AppService) === "function" ? _a : Object, typeof (_b = typeof event_emitter_1.EventEmitter2 !== "undefined" && event_emitter_1.EventEmitter2) === "function" ? _b : Object])
], AppController);


/***/ }),

/***/ "./apps/resource/src/app.dto.ts":
/*!**************************************!*\
  !*** ./apps/resource/src/app.dto.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
__exportStar(__webpack_require__(/*! ./common/base.dto */ "./apps/resource/src/common/base.dto.ts"), exports);
__exportStar(__webpack_require__(/*! ./statistics */ "./apps/resource/src/statistics/index.ts"), exports);


/***/ }),

/***/ "./apps/resource/src/app.module.ts":
/*!*****************************************!*\
  !*** ./apps/resource/src/app.module.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AppModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const jwt_1 = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const typeorm_config_1 = __webpack_require__(/*! @libs/configs/typeorm.config */ "./libs/configs/typeorm.config.ts");
const env_config_1 = __webpack_require__(/*! @libs/configs/env.config */ "./libs/configs/env.config.ts");
const jwt_config_1 = __webpack_require__(/*! @libs/configs/jwt.config */ "./libs/configs/jwt.config.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const auth_module_1 = __webpack_require__(/*! ./modules/auth/auth.module */ "./apps/resource/src/modules/auth/auth.module.ts");
const resource_module_1 = __webpack_require__(/*! ./modules/resource/resource.module */ "./apps/resource/src/modules/resource/resource.module.ts");
const employee_module_1 = __webpack_require__(/*! ./modules/employee/employee.module */ "./apps/resource/src/modules/employee/employee.module.ts");
const reservation_module_1 = __webpack_require__(/*! ./modules/reservation/reservation.module */ "./apps/resource/src/modules/reservation/reservation.module.ts");
const app_service_1 = __webpack_require__(/*! ./app.service */ "./apps/resource/src/app.service.ts");
const notification_module_1 = __webpack_require__(/*! ./modules/notification/notification.module */ "./apps/resource/src/modules/notification/notification.module.ts");
const file_module_1 = __webpack_require__(/*! ./modules/file/file.module */ "./apps/resource/src/modules/file/file.module.ts");
const app_controller_1 = __webpack_require__(/*! ./app.controller */ "./apps/resource/src/app.controller.ts");
const api_doc_service_1 = __webpack_require__(/*! @libs/utils/api-doc.service */ "./libs/utils/api-doc.service.ts");
const db_doc_service_1 = __webpack_require__(/*! @libs/utils/db-doc.service */ "./libs/utils/db-doc.service.ts");
const user_domain_module_1 = __webpack_require__(/*! ./modules/auth/user.domain.module */ "./apps/resource/src/modules/auth/user.domain.module.ts");
const employee_domain_module_1 = __webpack_require__(/*! ./modules/employee/employee.domain.module */ "./apps/resource/src/modules/employee/employee.domain.module.ts");
const notification_domain_module_1 = __webpack_require__(/*! ./modules/notification/notification.domain.module */ "./apps/resource/src/modules/notification/notification.domain.module.ts");
const seed_module_1 = __webpack_require__(/*! ./modules/seed/seed.module */ "./apps/resource/src/modules/seed/seed.module.ts");
let AppModule = class AppModule {
};
exports.AppModule = AppModule;
exports.AppModule = AppModule = __decorate([
    (0, common_1.Module)({
        imports: [
            config_1.ConfigModule.forRoot({
                isGlobal: true,
                load: [env_config_1.default, env_config_1.JWT_CONFIG],
            }),
            event_emitter_1.EventEmitterModule.forRoot(),
            jwt_1.JwtModule.registerAsync({
                global: true,
                useFactory: jwt_config_1.jwtConfig,
                inject: [config_1.ConfigService],
            }),
            typeorm_1.TypeOrmModule.forRootAsync({
                inject: [config_1.ConfigService],
                useFactory: typeorm_config_1.typeOrmConfig,
            }),
            typeorm_1.TypeOrmModule.forFeature(entities_1.Entities),
            auth_module_1.AuthModule,
            employee_module_1.EmployeeModule,
            resource_module_1.ResourceModule,
            reservation_module_1.ReservationModule,
            notification_module_1.NotificationModule,
            file_module_1.FileModule,
            user_domain_module_1.UserDomainModule,
            employee_domain_module_1.EmployeeDomainModule,
            notification_domain_module_1.NotificationDomainModule,
            seed_module_1.SeedModule,
        ],
        controllers: [app_controller_1.AppController],
        providers: [app_service_1.AppService, api_doc_service_1.ApiDocService, db_doc_service_1.DbDocService],
    })
], AppModule);


/***/ }),

/***/ "./apps/resource/src/app.service.ts":
/*!******************************************!*\
  !*** ./apps/resource/src/app.service.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AppService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const typeorm_2 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
let AppService = class AppService {
    constructor(resourceUsageStatsRepository, vehicleMaintenanceHistoryRepository, consumableMaintenanceStatsRepository, employeeReservationStatsRepository) {
        this.resourceUsageStatsRepository = resourceUsageStatsRepository;
        this.vehicleMaintenanceHistoryRepository = vehicleMaintenanceHistoryRepository;
        this.consumableMaintenanceStatsRepository = consumableMaintenanceStatsRepository;
        this.employeeReservationStatsRepository = employeeReservationStatsRepository;
    }
    async getResourceUsageStats(filter) {
        const where = {};
        if (filter?.year) {
            where.year = filter.year;
        }
        if (filter?.month) {
            where.month = filter.month;
        }
        if (filter?.resourceId) {
            where.resourceId = filter.resourceId;
        }
        if (filter?.employeeId) {
            where.employeeId = filter.employeeId;
        }
        if (filter?.resourceType) {
            where.resourceType = filter.resourceType;
        }
        return this.resourceUsageStatsRepository.find({ where });
    }
    async getVehicleMaintenanceHistory(filter) {
        const where = {};
        if (filter?.startDate && filter?.endDate) {
            where.maintenanceDate = (0, typeorm_1.Between)(filter.startDate, filter.endDate);
        }
        else if (filter?.startDate) {
            where.maintenanceDate = (0, typeorm_1.Between)(filter.startDate, new Date().toISOString());
        }
        if (filter?.resourceId) {
            where.resourceId = filter.resourceId;
        }
        if (filter?.vehicleInfoId) {
            where.vehicleInfoId = filter.vehicleInfoId;
        }
        if (filter?.consumableId) {
            where.consumableId = filter.consumableId;
        }
        if (filter?.responsibleEmployeeId) {
            where.responsibleEmployeeId = filter.responsibleEmployeeId;
        }
        return this.vehicleMaintenanceHistoryRepository.find({ where });
    }
    async getConsumableMaintenanceStats(filter) {
        const where = {};
        if (filter?.year) {
            where.currentYear = filter.year;
        }
        if (filter?.month) {
            where.currentMonth = filter.month;
        }
        if (filter?.resourceId) {
            where.resourceId = filter.resourceId;
        }
        if (filter?.vehicleInfoId) {
            where.vehicleInfoId = filter.vehicleInfoId;
        }
        if (filter?.consumableId) {
            where.consumableId = filter.consumableId;
        }
        if (filter?.minMaintenanceCount) {
            where.maintenanceCount = (0, typeorm_1.MoreThanOrEqual)(filter.minMaintenanceCount);
        }
        return this.consumableMaintenanceStatsRepository.find({ where });
    }
    async getEmployeeReservationStats(filter) {
        const where = {};
        if (filter?.year) {
            where.year = filter.year;
        }
        if (filter?.month) {
            where.month = filter.month;
        }
        if (filter?.employeeId) {
            where.employeeId = filter.employeeId;
        }
        if (filter?.employeeName) {
            where.employeeName = (0, typeorm_1.Like)(`%${filter.employeeName}%`);
        }
        return this.employeeReservationStatsRepository.find({ where });
    }
};
exports.AppService = AppService;
exports.AppService = AppService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_2.InjectRepository)(entities_1.ResourceUsageStats)),
    __param(1, (0, typeorm_2.InjectRepository)(entities_1.VehicleMaintenanceHistory)),
    __param(2, (0, typeorm_2.InjectRepository)(entities_1.ConsumableMaintenanceStats)),
    __param(3, (0, typeorm_2.InjectRepository)(entities_1.EmployeeReservationStats)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _a : Object, typeof (_b = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _b : Object, typeof (_c = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _c : Object, typeof (_d = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _d : Object])
], AppService);


/***/ }),

/***/ "./apps/resource/src/common/base.dto.ts":
/*!**********************************************!*\
  !*** ./apps/resource/src/common/base.dto.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.StatisticsResponseDto = exports.YearMonthFilterDto = exports.DateRangeFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class DateRangeFilterDto {
}
exports.DateRangeFilterDto = DateRangeFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '시작 날짜' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], DateRangeFilterDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '종료 날짜' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], DateRangeFilterDto.prototype, "endDate", void 0);
class YearMonthFilterDto {
}
exports.YearMonthFilterDto = YearMonthFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '연도' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], YearMonthFilterDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '월' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], YearMonthFilterDto.prototype, "month", void 0);
class StatisticsResponseDto {
}
exports.StatisticsResponseDto = StatisticsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 예약 통계', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "employeeReservationStats", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 사용 통계', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "resourceUsageStats", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 정비 이력', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "vehicleMaintenanceHistory", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 정비 통계', type: 'array' }),
    __metadata("design:type", Array)
], StatisticsResponseDto.prototype, "consumableMaintenanceStats", void 0);


/***/ }),

/***/ "./apps/resource/src/dtos.index.ts":
/*!*****************************************!*\
  !*** ./apps/resource/src/dtos.index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateReservationStatusDto = exports.UpdateReservationTimeDto = exports.UpdateReservationTitleDto = exports.CreateReservationDto = exports.EmplyeesByDepartmentResponseDto = exports.EmployeeResponseDto = exports.UpdateEmployeeDto = exports.CreateEmployeeDto = exports.AccommodationInfoResponseDto = exports.UpdateAccommodationInfoDto = exports.CreateAccommodationInfoDto = exports.MeetingRoomInfoResponseDto = exports.UpdateMeetingRoomInfoDto = exports.CreateMeetingRoomInfoDto = exports.MaintenanceResponseDto = exports.ConsumableResponseDto = exports.VehicleInfoResponseDto = exports.UpdateMaintenanceDto = exports.UpdateConsumableDto = exports.UpdateVehicleInfoDto = exports.CreateMaintenanceDto = exports.CreateConsumableDto = exports.CreateVehicleInfoDto = exports.ResourceManagerResponseDto = exports.ResourceGroupWithResourcesAndReservationsResponseDto = exports.ResourceGroupWithResourcesResponseDto = exports.ChildResourceGroupResponseDto = exports.ResourceGroupResponseDto = exports.ResourceWithReservationsResponseDto = exports.ResourceSelectResponseDto = exports.ResourceResponseDto = exports.ReturnVehicleDto = exports.NewOrderResourceGroupDto = exports.NewOrderResourceDto = exports.UpdateResourceOrdersDto = exports.UpdateResourceGroupOrdersDto = exports.UpdateResourceInfoDto = exports.UpdateResourceGroupDto = exports.UpdateResourceDto = exports.CreateResourceInfoDto = exports.CreateResourceManagerDto = exports.CreateResourceGroupDto = exports.CreateResourceDto = exports.UpdateNotificationSettingsDto = exports.CheckPasswordDto = exports.ChangePasswordDto = exports.ChangeRoleDto = exports.UserResponseDto = exports.LoginResponseDto = exports.LoginDto = void 0;
exports.StatisticsResponseDto = exports.ConsumableMaintenanceStatsResponseDto = exports.ConsumableMaintenanceStatsFilterDto = exports.VehicleMaintenanceHistoryResponseDto = exports.VehicleMaintenanceHistoryFilterDto = exports.ResourceUsageStatsResponseDto = exports.ResourceUsageStatsFilterDto = exports.EmployeeReservationStatsResponseDto = exports.EmployeeReservationStatsFilterDto = exports.PushNotificationPayload = exports.PushNotificationDto = exports.NotificationDataDto = exports.ResponseNotificationDto = exports.PushSubscriptionDto = exports.SendNotificationDto = exports.CreateNotificationDto = exports.FileResponseDto = exports.CheckAvailabilityResponseDto = exports.CheckAvailabilityQueryDto = exports.ResourceAvailabilityDto = exports.ResourceQueryDto = exports.SelectedResourceResponseDto = exports.TimeRangeResponseDto = exports.TimeInfoResponseDto = exports.DateRangeResponseDto = exports.ReservationSnapshotResponseDto = exports.UpdateReservationSnapshotDto = exports.CreateReservationSnapshotDto = exports.SelectedResourceDto = exports.TimeRangeDto = exports.TimeInfoDto = exports.DateRangeDto = exports.ReminderTimeDto = exports.DroppableGroupDataDto = exports.DroppableGroupItemDto = exports.AttendeeDto = exports.GroupedReservationWithResourceResponseDto = exports.GroupedReservationResponseDto = exports.ReservationWithRelationsResponseDto = exports.ReservationWithResourceResponseDto = exports.ReservationResponseDto = exports.CreateReservationResponseDto = exports.UpdateReservationCcReceipientDto = exports.UpdateReservationParticipantsDto = void 0;
var login_dto_1 = __webpack_require__(/*! ./modules/auth/application/dto/login.dto */ "./apps/resource/src/modules/auth/application/dto/login.dto.ts");
Object.defineProperty(exports, "LoginDto", ({ enumerable: true, get: function () { return login_dto_1.LoginDto; } }));
var login_response_dto_1 = __webpack_require__(/*! ./modules/auth/application/dto/login-response.dto */ "./apps/resource/src/modules/auth/application/dto/login-response.dto.ts");
Object.defineProperty(exports, "LoginResponseDto", ({ enumerable: true, get: function () { return login_response_dto_1.LoginResponseDto; } }));
var user_response_dto_1 = __webpack_require__(/*! ./modules/auth/application/dto/user-response.dto */ "./apps/resource/src/modules/auth/application/dto/user-response.dto.ts");
Object.defineProperty(exports, "UserResponseDto", ({ enumerable: true, get: function () { return user_response_dto_1.UserResponseDto; } }));
var change_role_dto_1 = __webpack_require__(/*! ./modules/auth/application/dto/change-role.dto */ "./apps/resource/src/modules/auth/application/dto/change-role.dto.ts");
Object.defineProperty(exports, "ChangeRoleDto", ({ enumerable: true, get: function () { return change_role_dto_1.ChangeRoleDto; } }));
var change_password_dto_1 = __webpack_require__(/*! ./modules/auth/application/dto/change-password.dto */ "./apps/resource/src/modules/auth/application/dto/change-password.dto.ts");
Object.defineProperty(exports, "ChangePasswordDto", ({ enumerable: true, get: function () { return change_password_dto_1.ChangePasswordDto; } }));
var check_password_dto_1 = __webpack_require__(/*! ./modules/auth/application/dto/check-password.dto */ "./apps/resource/src/modules/auth/application/dto/check-password.dto.ts");
Object.defineProperty(exports, "CheckPasswordDto", ({ enumerable: true, get: function () { return check_password_dto_1.CheckPasswordDto; } }));
var notification_settings_dto_1 = __webpack_require__(/*! ./modules/auth/application/dto/notification-settings.dto */ "./apps/resource/src/modules/auth/application/dto/notification-settings.dto.ts");
Object.defineProperty(exports, "UpdateNotificationSettingsDto", ({ enumerable: true, get: function () { return notification_settings_dto_1.UpdateNotificationSettingsDto; } }));
var create_resource_dto_1 = __webpack_require__(/*! ./modules/resource/common/application/dtos/create-resource.dto */ "./apps/resource/src/modules/resource/common/application/dtos/create-resource.dto.ts");
Object.defineProperty(exports, "CreateResourceDto", ({ enumerable: true, get: function () { return create_resource_dto_1.CreateResourceDto; } }));
Object.defineProperty(exports, "CreateResourceGroupDto", ({ enumerable: true, get: function () { return create_resource_dto_1.CreateResourceGroupDto; } }));
Object.defineProperty(exports, "CreateResourceManagerDto", ({ enumerable: true, get: function () { return create_resource_dto_1.CreateResourceManagerDto; } }));
Object.defineProperty(exports, "CreateResourceInfoDto", ({ enumerable: true, get: function () { return create_resource_dto_1.CreateResourceInfoDto; } }));
var update_resource_dto_1 = __webpack_require__(/*! ./modules/resource/common/application/dtos/update-resource.dto */ "./apps/resource/src/modules/resource/common/application/dtos/update-resource.dto.ts");
Object.defineProperty(exports, "UpdateResourceDto", ({ enumerable: true, get: function () { return update_resource_dto_1.UpdateResourceDto; } }));
Object.defineProperty(exports, "UpdateResourceGroupDto", ({ enumerable: true, get: function () { return update_resource_dto_1.UpdateResourceGroupDto; } }));
Object.defineProperty(exports, "UpdateResourceInfoDto", ({ enumerable: true, get: function () { return update_resource_dto_1.UpdateResourceInfoDto; } }));
Object.defineProperty(exports, "UpdateResourceGroupOrdersDto", ({ enumerable: true, get: function () { return update_resource_dto_1.UpdateResourceGroupOrdersDto; } }));
Object.defineProperty(exports, "UpdateResourceOrdersDto", ({ enumerable: true, get: function () { return update_resource_dto_1.UpdateResourceOrdersDto; } }));
Object.defineProperty(exports, "NewOrderResourceDto", ({ enumerable: true, get: function () { return update_resource_dto_1.NewOrderResourceDto; } }));
Object.defineProperty(exports, "NewOrderResourceGroupDto", ({ enumerable: true, get: function () { return update_resource_dto_1.NewOrderResourceGroupDto; } }));
Object.defineProperty(exports, "ReturnVehicleDto", ({ enumerable: true, get: function () { return update_resource_dto_1.ReturnVehicleDto; } }));
var resource_response_dto_1 = __webpack_require__(/*! ./modules/resource/common/application/dtos/resource-response.dto */ "./apps/resource/src/modules/resource/common/application/dtos/resource-response.dto.ts");
Object.defineProperty(exports, "ResourceResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceResponseDto; } }));
Object.defineProperty(exports, "ResourceSelectResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceSelectResponseDto; } }));
Object.defineProperty(exports, "ResourceWithReservationsResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceWithReservationsResponseDto; } }));
Object.defineProperty(exports, "ResourceGroupResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceGroupResponseDto; } }));
Object.defineProperty(exports, "ChildResourceGroupResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ChildResourceGroupResponseDto; } }));
Object.defineProperty(exports, "ResourceGroupWithResourcesResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceGroupWithResourcesResponseDto; } }));
Object.defineProperty(exports, "ResourceGroupWithResourcesAndReservationsResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceGroupWithResourcesAndReservationsResponseDto; } }));
Object.defineProperty(exports, "ResourceManagerResponseDto", ({ enumerable: true, get: function () { return resource_response_dto_1.ResourceManagerResponseDto; } }));
var create_vehicle_info_dto_1 = __webpack_require__(/*! ./modules/resource/vehicle/application/dtos/create-vehicle-info.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/create-vehicle-info.dto.ts");
Object.defineProperty(exports, "CreateVehicleInfoDto", ({ enumerable: true, get: function () { return create_vehicle_info_dto_1.CreateVehicleInfoDto; } }));
Object.defineProperty(exports, "CreateConsumableDto", ({ enumerable: true, get: function () { return create_vehicle_info_dto_1.CreateConsumableDto; } }));
Object.defineProperty(exports, "CreateMaintenanceDto", ({ enumerable: true, get: function () { return create_vehicle_info_dto_1.CreateMaintenanceDto; } }));
var update_vehicle_info_dto_1 = __webpack_require__(/*! ./modules/resource/vehicle/application/dtos/update-vehicle-info.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/update-vehicle-info.dto.ts");
Object.defineProperty(exports, "UpdateVehicleInfoDto", ({ enumerable: true, get: function () { return update_vehicle_info_dto_1.UpdateVehicleInfoDto; } }));
Object.defineProperty(exports, "UpdateConsumableDto", ({ enumerable: true, get: function () { return update_vehicle_info_dto_1.UpdateConsumableDto; } }));
Object.defineProperty(exports, "UpdateMaintenanceDto", ({ enumerable: true, get: function () { return update_vehicle_info_dto_1.UpdateMaintenanceDto; } }));
var vehicle_response_dto_1 = __webpack_require__(/*! ./modules/resource/vehicle/application/dtos/vehicle-response.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/vehicle-response.dto.ts");
Object.defineProperty(exports, "VehicleInfoResponseDto", ({ enumerable: true, get: function () { return vehicle_response_dto_1.VehicleInfoResponseDto; } }));
Object.defineProperty(exports, "ConsumableResponseDto", ({ enumerable: true, get: function () { return vehicle_response_dto_1.ConsumableResponseDto; } }));
Object.defineProperty(exports, "MaintenanceResponseDto", ({ enumerable: true, get: function () { return vehicle_response_dto_1.MaintenanceResponseDto; } }));
var create_meeting_room_info_dto_1 = __webpack_require__(/*! ./modules/resource/meeting-room/application/dtos/create-meeting-room-info.dto */ "./apps/resource/src/modules/resource/meeting-room/application/dtos/create-meeting-room-info.dto.ts");
Object.defineProperty(exports, "CreateMeetingRoomInfoDto", ({ enumerable: true, get: function () { return create_meeting_room_info_dto_1.CreateMeetingRoomInfoDto; } }));
var update_meeting_room_info_dto_1 = __webpack_require__(/*! ./modules/resource/meeting-room/application/dtos/update-meeting-room-info.dto */ "./apps/resource/src/modules/resource/meeting-room/application/dtos/update-meeting-room-info.dto.ts");
Object.defineProperty(exports, "UpdateMeetingRoomInfoDto", ({ enumerable: true, get: function () { return update_meeting_room_info_dto_1.UpdateMeetingRoomInfoDto; } }));
var meeting_room_info_response_dto_1 = __webpack_require__(/*! ./modules/resource/meeting-room/application/dtos/meeting-room-info-response.dto */ "./apps/resource/src/modules/resource/meeting-room/application/dtos/meeting-room-info-response.dto.ts");
Object.defineProperty(exports, "MeetingRoomInfoResponseDto", ({ enumerable: true, get: function () { return meeting_room_info_response_dto_1.MeetingRoomInfoResponseDto; } }));
var create_accommodation_info_dto_1 = __webpack_require__(/*! ./modules/resource/accommodation/application/dtos/create-accommodation-info.dto */ "./apps/resource/src/modules/resource/accommodation/application/dtos/create-accommodation-info.dto.ts");
Object.defineProperty(exports, "CreateAccommodationInfoDto", ({ enumerable: true, get: function () { return create_accommodation_info_dto_1.CreateAccommodationInfoDto; } }));
var update_accommodation_info_dto_1 = __webpack_require__(/*! ./modules/resource/accommodation/application/dtos/update-accommodation-info.dto */ "./apps/resource/src/modules/resource/accommodation/application/dtos/update-accommodation-info.dto.ts");
Object.defineProperty(exports, "UpdateAccommodationInfoDto", ({ enumerable: true, get: function () { return update_accommodation_info_dto_1.UpdateAccommodationInfoDto; } }));
var accommodation_info_response_dto_1 = __webpack_require__(/*! ./modules/resource/accommodation/application/dtos/accommodation-info-response.dto */ "./apps/resource/src/modules/resource/accommodation/application/dtos/accommodation-info-response.dto.ts");
Object.defineProperty(exports, "AccommodationInfoResponseDto", ({ enumerable: true, get: function () { return accommodation_info_response_dto_1.AccommodationInfoResponseDto; } }));
var create_employee_dto_1 = __webpack_require__(/*! ./modules/employee/application/dtos/create-employee.dto */ "./apps/resource/src/modules/employee/application/dtos/create-employee.dto.ts");
Object.defineProperty(exports, "CreateEmployeeDto", ({ enumerable: true, get: function () { return create_employee_dto_1.CreateEmployeeDto; } }));
var update_employee_dto_1 = __webpack_require__(/*! ./modules/employee/application/dtos/update-employee.dto */ "./apps/resource/src/modules/employee/application/dtos/update-employee.dto.ts");
Object.defineProperty(exports, "UpdateEmployeeDto", ({ enumerable: true, get: function () { return update_employee_dto_1.UpdateEmployeeDto; } }));
var employee_response_dto_1 = __webpack_require__(/*! ./modules/employee/application/dtos/employee-response.dto */ "./apps/resource/src/modules/employee/application/dtos/employee-response.dto.ts");
Object.defineProperty(exports, "EmployeeResponseDto", ({ enumerable: true, get: function () { return employee_response_dto_1.EmployeeResponseDto; } }));
var employees_by_department_response_dto_1 = __webpack_require__(/*! ./modules/employee/application/dtos/employees-by-department-response.dto */ "./apps/resource/src/modules/employee/application/dtos/employees-by-department-response.dto.ts");
Object.defineProperty(exports, "EmplyeesByDepartmentResponseDto", ({ enumerable: true, get: function () { return employees_by_department_response_dto_1.EmplyeesByDepartmentResponseDto; } }));
var create_reservation_dto_1 = __webpack_require__(/*! ./modules/reservation/application/dtos/create-reservation.dto */ "./apps/resource/src/modules/reservation/application/dtos/create-reservation.dto.ts");
Object.defineProperty(exports, "CreateReservationDto", ({ enumerable: true, get: function () { return create_reservation_dto_1.CreateReservationDto; } }));
var update_reservation_dto_1 = __webpack_require__(/*! ./modules/reservation/application/dtos/update-reservation.dto */ "./apps/resource/src/modules/reservation/application/dtos/update-reservation.dto.ts");
Object.defineProperty(exports, "UpdateReservationTitleDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationTitleDto; } }));
Object.defineProperty(exports, "UpdateReservationTimeDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationTimeDto; } }));
Object.defineProperty(exports, "UpdateReservationStatusDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationStatusDto; } }));
Object.defineProperty(exports, "UpdateReservationParticipantsDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationParticipantsDto; } }));
Object.defineProperty(exports, "UpdateReservationCcReceipientDto", ({ enumerable: true, get: function () { return update_reservation_dto_1.UpdateReservationCcReceipientDto; } }));
var reservation_response_dto_1 = __webpack_require__(/*! ./modules/reservation/application/dtos/reservation-response.dto */ "./apps/resource/src/modules/reservation/application/dtos/reservation-response.dto.ts");
Object.defineProperty(exports, "CreateReservationResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.CreateReservationResponseDto; } }));
Object.defineProperty(exports, "ReservationResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.ReservationResponseDto; } }));
Object.defineProperty(exports, "ReservationWithResourceResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.ReservationWithResourceResponseDto; } }));
Object.defineProperty(exports, "ReservationWithRelationsResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.ReservationWithRelationsResponseDto; } }));
Object.defineProperty(exports, "GroupedReservationResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.GroupedReservationResponseDto; } }));
Object.defineProperty(exports, "GroupedReservationWithResourceResponseDto", ({ enumerable: true, get: function () { return reservation_response_dto_1.GroupedReservationWithResourceResponseDto; } }));
var reservation_snapshot_dto_1 = __webpack_require__(/*! ./modules/reservation/application/dtos/reservation-snapshot.dto */ "./apps/resource/src/modules/reservation/application/dtos/reservation-snapshot.dto.ts");
Object.defineProperty(exports, "AttendeeDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.AttendeeDto; } }));
Object.defineProperty(exports, "DroppableGroupItemDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.DroppableGroupItemDto; } }));
Object.defineProperty(exports, "DroppableGroupDataDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.DroppableGroupDataDto; } }));
Object.defineProperty(exports, "ReminderTimeDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.ReminderTimeDto; } }));
Object.defineProperty(exports, "DateRangeDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.DateRangeDto; } }));
Object.defineProperty(exports, "TimeInfoDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.TimeInfoDto; } }));
Object.defineProperty(exports, "TimeRangeDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.TimeRangeDto; } }));
Object.defineProperty(exports, "SelectedResourceDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.SelectedResourceDto; } }));
Object.defineProperty(exports, "CreateReservationSnapshotDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.CreateReservationSnapshotDto; } }));
Object.defineProperty(exports, "UpdateReservationSnapshotDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.UpdateReservationSnapshotDto; } }));
Object.defineProperty(exports, "ReservationSnapshotResponseDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.ReservationSnapshotResponseDto; } }));
Object.defineProperty(exports, "DateRangeResponseDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.DateRangeResponseDto; } }));
Object.defineProperty(exports, "TimeInfoResponseDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.TimeInfoResponseDto; } }));
Object.defineProperty(exports, "TimeRangeResponseDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.TimeRangeResponseDto; } }));
Object.defineProperty(exports, "SelectedResourceResponseDto", ({ enumerable: true, get: function () { return reservation_snapshot_dto_1.SelectedResourceResponseDto; } }));
var resource_query_dto_1 = __webpack_require__(/*! ./modules/resource/common/application/dtos/resource-query.dto */ "./apps/resource/src/modules/resource/common/application/dtos/resource-query.dto.ts");
Object.defineProperty(exports, "ResourceQueryDto", ({ enumerable: true, get: function () { return resource_query_dto_1.ResourceQueryDto; } }));
var available_time_response_dto_1 = __webpack_require__(/*! ./modules/resource/common/application/dtos/available-time-response.dto */ "./apps/resource/src/modules/resource/common/application/dtos/available-time-response.dto.ts");
Object.defineProperty(exports, "ResourceAvailabilityDto", ({ enumerable: true, get: function () { return available_time_response_dto_1.ResourceAvailabilityDto; } }));
var check_availability_dto_1 = __webpack_require__(/*! ./modules/resource/common/application/dtos/check-availability.dto */ "./apps/resource/src/modules/resource/common/application/dtos/check-availability.dto.ts");
Object.defineProperty(exports, "CheckAvailabilityQueryDto", ({ enumerable: true, get: function () { return check_availability_dto_1.CheckAvailabilityQueryDto; } }));
var check_availability_dto_2 = __webpack_require__(/*! ./modules/resource/common/application/dtos/check-availability.dto */ "./apps/resource/src/modules/resource/common/application/dtos/check-availability.dto.ts");
Object.defineProperty(exports, "CheckAvailabilityResponseDto", ({ enumerable: true, get: function () { return check_availability_dto_2.CheckAvailabilityResponseDto; } }));
var file_response_dto_1 = __webpack_require__(/*! ./modules/file/application/dtos/file-response.dto */ "./apps/resource/src/modules/file/application/dtos/file-response.dto.ts");
Object.defineProperty(exports, "FileResponseDto", ({ enumerable: true, get: function () { return file_response_dto_1.FileResponseDto; } }));
var create_notification_dto_1 = __webpack_require__(/*! ./modules/notification/application/dto/create-notification.dto */ "./apps/resource/src/modules/notification/application/dto/create-notification.dto.ts");
Object.defineProperty(exports, "CreateNotificationDto", ({ enumerable: true, get: function () { return create_notification_dto_1.CreateNotificationDto; } }));
Object.defineProperty(exports, "SendNotificationDto", ({ enumerable: true, get: function () { return create_notification_dto_1.SendNotificationDto; } }));
var push_subscription_dto_1 = __webpack_require__(/*! ./modules/notification/application/dto/push-subscription.dto */ "./apps/resource/src/modules/notification/application/dto/push-subscription.dto.ts");
Object.defineProperty(exports, "PushSubscriptionDto", ({ enumerable: true, get: function () { return push_subscription_dto_1.PushSubscriptionDto; } }));
var response_notification_dto_1 = __webpack_require__(/*! ./modules/notification/application/dto/response-notification.dto */ "./apps/resource/src/modules/notification/application/dto/response-notification.dto.ts");
Object.defineProperty(exports, "ResponseNotificationDto", ({ enumerable: true, get: function () { return response_notification_dto_1.ResponseNotificationDto; } }));
var response_notification_dto_2 = __webpack_require__(/*! ./modules/notification/application/dto/response-notification.dto */ "./apps/resource/src/modules/notification/application/dto/response-notification.dto.ts");
Object.defineProperty(exports, "NotificationDataDto", ({ enumerable: true, get: function () { return response_notification_dto_2.NotificationDataDto; } }));
var send_notification_dto_1 = __webpack_require__(/*! ./modules/notification/application/dto/send-notification.dto */ "./apps/resource/src/modules/notification/application/dto/send-notification.dto.ts");
Object.defineProperty(exports, "PushNotificationDto", ({ enumerable: true, get: function () { return send_notification_dto_1.PushNotificationDto; } }));
Object.defineProperty(exports, "PushNotificationPayload", ({ enumerable: true, get: function () { return send_notification_dto_1.PushNotificationPayload; } }));
var employee_reservation_stats_dto_1 = __webpack_require__(/*! ./statistics/employee-reservation-stats.dto */ "./apps/resource/src/statistics/employee-reservation-stats.dto.ts");
Object.defineProperty(exports, "EmployeeReservationStatsFilterDto", ({ enumerable: true, get: function () { return employee_reservation_stats_dto_1.EmployeeReservationStatsFilterDto; } }));
Object.defineProperty(exports, "EmployeeReservationStatsResponseDto", ({ enumerable: true, get: function () { return employee_reservation_stats_dto_1.EmployeeReservationStatsResponseDto; } }));
var resource_usage_stats_dto_1 = __webpack_require__(/*! ./statistics/resource-usage-stats.dto */ "./apps/resource/src/statistics/resource-usage-stats.dto.ts");
Object.defineProperty(exports, "ResourceUsageStatsFilterDto", ({ enumerable: true, get: function () { return resource_usage_stats_dto_1.ResourceUsageStatsFilterDto; } }));
Object.defineProperty(exports, "ResourceUsageStatsResponseDto", ({ enumerable: true, get: function () { return resource_usage_stats_dto_1.ResourceUsageStatsResponseDto; } }));
var vehicle_maintenance_history_dto_1 = __webpack_require__(/*! ./statistics/vehicle-maintenance-history.dto */ "./apps/resource/src/statistics/vehicle-maintenance-history.dto.ts");
Object.defineProperty(exports, "VehicleMaintenanceHistoryFilterDto", ({ enumerable: true, get: function () { return vehicle_maintenance_history_dto_1.VehicleMaintenanceHistoryFilterDto; } }));
Object.defineProperty(exports, "VehicleMaintenanceHistoryResponseDto", ({ enumerable: true, get: function () { return vehicle_maintenance_history_dto_1.VehicleMaintenanceHistoryResponseDto; } }));
var consumable_maintenance_stats_dto_1 = __webpack_require__(/*! ./statistics/consumable-maintenance-stats.dto */ "./apps/resource/src/statistics/consumable-maintenance-stats.dto.ts");
Object.defineProperty(exports, "ConsumableMaintenanceStatsFilterDto", ({ enumerable: true, get: function () { return consumable_maintenance_stats_dto_1.ConsumableMaintenanceStatsFilterDto; } }));
Object.defineProperty(exports, "ConsumableMaintenanceStatsResponseDto", ({ enumerable: true, get: function () { return consumable_maintenance_stats_dto_1.ConsumableMaintenanceStatsResponseDto; } }));
var base_dto_1 = __webpack_require__(/*! ./common/base.dto */ "./apps/resource/src/common/base.dto.ts");
Object.defineProperty(exports, "StatisticsResponseDto", ({ enumerable: true, get: function () { return base_dto_1.StatisticsResponseDto; } }));


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/dto/change-password.dto.ts":
/*!*******************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/dto/change-password.dto.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangePasswordDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ChangePasswordDto {
}
exports.ChangePasswordDto = ChangePasswordDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'newPassword123',
        description: '새로운 비밀번호',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], ChangePasswordDto.prototype, "newPassword", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/dto/change-role.dto.ts":
/*!***************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/dto/change-role.dto.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ChangeRoleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class ChangeRoleDto {
}
exports.ChangeRoleDto = ChangeRoleDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'userId',
        description: '유저 아이디',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], ChangeRoleDto.prototype, "userId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: true,
        description: '자원 담당자 여부',
    }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", Boolean)
], ChangeRoleDto.prototype, "isResourceAdmin", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/dto/check-password.dto.ts":
/*!******************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/dto/check-password.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckPasswordDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CheckPasswordDto {
}
exports.CheckPasswordDto = CheckPasswordDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'currentPassword123',
        description: '현재 비밀번호',
    }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], CheckPasswordDto.prototype, "password", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/dto/login-response.dto.ts":
/*!******************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/dto/login-response.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LoginResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class LoginResponseDto {
}
exports.LoginResponseDto = LoginResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9....',
    }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "accessToken", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'test@lumir.space',
    }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '홍길동',
    }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'Web 파트',
    }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '연구원',
    }),
    __metadata("design:type", String)
], LoginResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: ['USER', 'RESOURCE_ADMIN', 'SYSTEM_ADMIN'],
    }),
    __metadata("design:type", Array)
], LoginResponseDto.prototype, "roles", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/dto/login.dto.ts":
/*!*********************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/dto/login.dto.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.LoginDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class LoginDto {
}
exports.LoginDto = LoginDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'admin@lumir.space' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], LoginDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: '1234' }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsNotEmpty)(),
    __metadata("design:type", String)
], LoginDto.prototype, "password", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/dto/notification-settings.dto.ts":
/*!*************************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/dto/notification-settings.dto.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateNotificationSettingsDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class UpdateNotificationSettingsDto {
}
exports.UpdateNotificationSettingsDto = UpdateNotificationSettingsDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '웹푸시 알림 설정 여부',
        default: true
    }),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], UpdateNotificationSettingsDto.prototype, "isPushNotificationEnabled", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/dto/user-response.dto.ts":
/*!*****************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/dto/user-response.dto.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class UserResponseDto {
}
exports.UserResponseDto = UserResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '550e8400-e29b-41d4-a716-446655440000',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "userId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'test@lumir.space',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '01012345678',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "mobile", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '홍길동',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: 'Web 파트',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '연구원',
    }),
    __metadata("design:type", String)
], UserResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: ['USER', 'RESOURCE_ADMIN', 'SYSTEM_ADMIN'],
    }),
    __metadata("design:type", Array)
], UserResponseDto.prototype, "roles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: true,
    }),
    __metadata("design:type", Boolean)
], UserResponseDto.prototype, "isPushNotificationEnabled", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/handler/user-event.handler.ts":
/*!**********************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/handler/user-event.handler.ts ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserEventHandler = void 0;
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const user_service_1 = __webpack_require__(/*! ../services/user.service */ "./apps/resource/src/modules/auth/application/services/user.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let UserEventHandler = class UserEventHandler {
    constructor(userService) {
        this.userService = userService;
    }
    async handleUserRoleAddedEvent(payload) {
        console.log(`Role ${payload.role} added to user ${payload.employeeId}`);
        const user = await this.userService.findByEmployeeId(payload.employeeId);
        if (!user) {
            throw new common_1.NotFoundException('사용자를 찾을 수 없습니다.');
        }
        if (!user.roles.includes(payload.role)) {
            user.roles.push(payload.role);
            await this.userService.update(user, payload.repositoryOptions);
        }
    }
    async handleUserRoleRemovedEvent(payload) {
        console.log(`Role ${payload.role} removed from user ${payload.employeeId}`);
        const user = await this.userService.findByEmployeeId(payload.employeeId);
        if (!user) {
            throw new common_1.NotFoundException('사용자를 찾을 수 없습니다.');
        }
        user.roles = user.roles.filter((r) => r !== payload.role);
        await this.userService.update(user, payload.repositoryOptions);
    }
    async handleUserSubscriptionUpdateEvent(payload) {
        try {
            console.log(`Subscription updated for user ${payload.userId} ${payload.subscription}`);
            const user = await this.userService.findByUserId(payload.userId);
            if (!user) {
                throw new common_1.NotFoundException('User not found');
            }
            if (user.subscriptions) {
                if (user.subscriptions.length > 4) {
                    user.subscriptions.shift();
                }
                user.subscriptions.push(payload.subscription);
            }
            else {
                user.subscriptions = [payload.subscription];
            }
            await this.userService.update(user);
            return true;
        }
        catch (error) {
            console.log(error);
            return false;
        }
    }
    async handleUserSubscriptionFilterEvent(payload) {
        console.log(`Subscription filtered for user ${payload.employeeId} ${payload.subscriptions}`);
        const user = await this.userService.findByEmployeeId(payload.employeeId);
        if (!user) {
            throw new common_1.NotFoundException('User not found');
        }
        user.subscriptions = payload.subscriptions;
        await this.userService.update(user);
    }
    async handleUserMobileUpdateEvent(payload) {
        console.log(`Mobile updated for user ${payload.employeeId} ${payload.mobile}`);
        const user = await this.userService.findByEmployeeId(payload.employeeId);
        if (!user) {
            throw new common_1.NotFoundException('User not found');
        }
        user.mobile = payload.mobile;
        await this.userService.update(user);
    }
    async handleUserGetEvent(payload) {
        console.log(`User found for employeeId ${payload.employeeId} or userId ${payload.userId}`);
        if (payload.employeeId) {
            return await this.userService.findByEmployeeId(payload.employeeId);
        }
        if (payload.userId) {
            return await this.userService.findByUserId(payload.userId);
        }
        return null;
    }
    async handleUserSubscriptionGetEvent(payload) {
        console.log(`Find subscription for user ${payload.employeeId}`);
        const user = await this.userService.findByEmployeeId(payload.employeeId);
        if (user && user.isPushNotificationEnabled && user.subscriptions) {
            return user.subscriptions;
        }
        return null;
    }
    async handleFindSystemAdminEvent() {
        const systemAdmin = await this.userService.findAll({
            where: {
                roles: (0, typeorm_1.Raw)(() => `'${role_type_enum_1.Role.SYSTEM_ADMIN}' = ANY("roles")`),
            },
        });
        return systemAdmin;
    }
};
exports.UserEventHandler = UserEventHandler;
__decorate([
    (0, event_emitter_1.OnEvent)('add.user.role'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventHandler.prototype, "handleUserRoleAddedEvent", null);
__decorate([
    (0, event_emitter_1.OnEvent)('remove.user.role'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventHandler.prototype, "handleUserRoleRemovedEvent", null);
__decorate([
    (0, event_emitter_1.OnEvent)('update.user.subscription'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventHandler.prototype, "handleUserSubscriptionUpdateEvent", null);
__decorate([
    (0, event_emitter_1.OnEvent)('filter.user.subscription'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventHandler.prototype, "handleUserSubscriptionFilterEvent", null);
__decorate([
    (0, event_emitter_1.OnEvent)('update.user.mobile'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventHandler.prototype, "handleUserMobileUpdateEvent", null);
__decorate([
    (0, event_emitter_1.OnEvent)('find.user'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventHandler.prototype, "handleUserGetEvent", null);
__decorate([
    (0, event_emitter_1.OnEvent)('find.user.subscription'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserEventHandler.prototype, "handleUserSubscriptionGetEvent", null);
__decorate([
    (0, event_emitter_1.OnEvent)('find.user.system.admin'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], UserEventHandler.prototype, "handleFindSystemAdminEvent", null);
exports.UserEventHandler = UserEventHandler = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof user_service_1.UserService !== "undefined" && user_service_1.UserService) === "function" ? _a : Object])
], UserEventHandler);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/services/user.service.ts":
/*!*****************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/services/user.service.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const user_repository_port_1 = __webpack_require__(/*! @resource/modules/auth/domain/ports/user.repository.port */ "./apps/resource/src/modules/auth/domain/ports/user.repository.port.ts");
let UserService = class UserService {
    constructor(userRepository) {
        this.userRepository = userRepository;
    }
    async findAll(repositoryOptions) {
        const users = await this.userRepository.find(repositoryOptions);
        return users;
    }
    async findByEmployeeId(employeeId) {
        const user = await this.userRepository.findOne({ where: { employeeId }, relations: ['employee'] });
        return user;
    }
    async findByEmail(email) {
        const user = await this.userRepository.findOne({ where: { email }, relations: ['employee'] });
        return user;
    }
    async findByUserId(userId) {
        const user = await this.userRepository.findOne({ where: { userId }, relations: ['employee'] });
        return user;
    }
    async save(user, repositoryOptions) {
        const savedUser = await this.userRepository.save(user, repositoryOptions);
        return savedUser;
    }
    async update(user, repositoryOptions) {
        const updatedUser = await this.userRepository.update(user.userId, user, repositoryOptions);
        return updatedUser;
    }
};
exports.UserService = UserService;
exports.UserService = UserService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('UserRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof user_repository_port_1.UserRepositoryPort !== "undefined" && user_repository_port_1.UserRepositoryPort) === "function" ? _a : Object])
], UserService);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/usecases/jwt-auth.usecase.ts":
/*!*********************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/usecases/jwt-auth.usecase.ts ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.JwtAuthUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const jwt_1 = __webpack_require__(/*! @nestjs/jwt */ "@nestjs/jwt");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const user_service_1 = __webpack_require__(/*! ../services/user.service */ "./apps/resource/src/modules/auth/application/services/user.service.ts");
const bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");
let JwtAuthUsecase = class JwtAuthUsecase {
    constructor(jwtService, userService) {
        this.jwtService = jwtService;
        this.userService = userService;
    }
    async validateUser(email, password) {
        const user = await this.userService.findByEmail(email);
        if (!user) {
            throw new common_1.UnauthorizedException('존재하지 않는 사용자입니다.');
        }
        const isPasswordValid = await bcrypt.compare(password, user.password);
        if (!isPasswordValid) {
            throw new common_1.UnauthorizedException('비밀번호가 일치하지 않습니다.');
        }
        return user;
    }
    async login(loginDto) {
        const user = await this.validateUser(loginDto.email, loginDto.password);
        const payload = {
            userId: user.userId,
            employeeId: user.employeeId,
            roles: user.roles,
        };
        const accessToken = this.jwtService.sign(payload);
        const expiredAt = date_util_1.DateUtil.now().addDays(1).format();
        user.accessToken = accessToken;
        user.expiredAt = expiredAt;
        await this.userService.update(user);
        return {
            accessToken,
            email: user.email,
            name: user.employee?.name,
            department: user.employee?.department,
            position: user.employee?.position,
            roles: user.roles,
        };
    }
};
exports.JwtAuthUsecase = JwtAuthUsecase;
exports.JwtAuthUsecase = JwtAuthUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof jwt_1.JwtService !== "undefined" && jwt_1.JwtService) === "function" ? _a : Object, typeof (_b = typeof user_service_1.UserService !== "undefined" && user_service_1.UserService) === "function" ? _b : Object])
], JwtAuthUsecase);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/usecases/resource-manager.usecase.ts":
/*!*****************************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/usecases/resource-manager.usecase.ts ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceManagerUseCase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const user_service_1 = __webpack_require__(/*! ../services/user.service */ "./apps/resource/src/modules/auth/application/services/user.service.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let ResourceManagerUseCase = class ResourceManagerUseCase {
    constructor(userService) {
        this.userService = userService;
    }
    async findAllResourceManagers() {
        const resourceManagers = await this.userService.findAll({
            where: {
                roles: (0, typeorm_1.Raw)(() => `'${role_type_enum_1.Role.RESOURCE_ADMIN}' = ANY("roles")`),
                employee: {
                    department: (0, typeorm_1.Not)((0, typeorm_1.In)(['퇴사', '관리자'])),
                },
            },
            relations: ['employee'],
        });
        const departments = new Map();
        resourceManagers.forEach((resourceManager) => {
            if (!departments.has(resourceManager.employee.department)) {
                departments.set(resourceManager.employee.department, []);
            }
            departments.get(resourceManager.employee.department)?.push(resourceManager.employee);
        });
        return Array.from(departments.entries()).map(([department, employees]) => ({
            department,
            employees,
        }));
    }
};
exports.ResourceManagerUseCase = ResourceManagerUseCase;
exports.ResourceManagerUseCase = ResourceManagerUseCase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof user_service_1.UserService !== "undefined" && user_service_1.UserService) === "function" ? _a : Object])
], ResourceManagerUseCase);


/***/ }),

/***/ "./apps/resource/src/modules/auth/application/usecases/user.usecase.ts":
/*!*****************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/application/usecases/user.usecase.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const user_service_1 = __webpack_require__(/*! ../services/user.service */ "./apps/resource/src/modules/auth/application/services/user.service.ts");
const bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
let UserUsecase = class UserUsecase {
    constructor(userService) {
        this.userService = userService;
    }
    async findByUserId(userId) {
        const user = await this.userService.findByUserId(userId);
        if (!user) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        return {
            userId: user.userId,
            email: user.email,
            mobile: user.mobile,
            name: user.employee?.name,
            department: user.employee?.department,
            position: user.employee?.position,
            roles: user.roles,
            isPushNotificationEnabled: user.isPushNotificationEnabled,
        };
    }
    async checkPassword(userId, password) {
        const user = await this.userService.findByUserId(userId);
        if (!user) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        return bcrypt.compare(password, user.password);
    }
    async changePassword(userId, password) {
        const user = await this.userService.findByUserId(userId);
        if (!user) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        user.password = await bcrypt.hash(password, 10);
        await this.userService.update(user);
    }
    async changeNotificationSettings(userId, updateDto) {
        const user = await this.userService.findByUserId(userId);
        if (!user) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        user.isPushNotificationEnabled = updateDto.isPushNotificationEnabled;
        await this.userService.update(user);
        return this.findByUserId(userId);
    }
    async findAll() {
        const users = await this.userService.findAll({
            where: {
                employee: {
                    department: (0, typeorm_1.Not)((0, typeorm_2.In)(['퇴사', '관리자'])),
                },
            },
            relations: ['employee'],
        });
        const departments = new Map();
        users.forEach((resourceManager) => {
            if (!departments.has(resourceManager.employee.department)) {
                departments.set(resourceManager.employee.department, []);
            }
            const data = {
                ...resourceManager.employee,
                isResourceAdmin: resourceManager.roles.includes(role_type_enum_1.Role.RESOURCE_ADMIN),
            };
            departments.get(resourceManager.employee.department)?.push(data);
        });
        return Array.from(departments.entries()).map(([department, employees]) => ({
            department,
            employees,
        }));
    }
    async changeRole(changeRoleDto) {
        const user = await this.userService.findByUserId(changeRoleDto.userId);
        if (!user) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.AUTH.USER_NOT_FOUND);
        }
        user.roles = changeRoleDto.isResourceAdmin
            ? [...user.roles, role_type_enum_1.Role.RESOURCE_ADMIN]
            : user.roles.filter((role) => role !== role_type_enum_1.Role.RESOURCE_ADMIN);
        await this.userService.update(user);
    }
};
exports.UserUsecase = UserUsecase;
exports.UserUsecase = UserUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof user_service_1.UserService !== "undefined" && user_service_1.UserService) === "function" ? _a : Object])
], UserUsecase);


/***/ }),

/***/ "./apps/resource/src/modules/auth/auth.module.ts":
/*!*******************************************************!*\
  !*** ./apps/resource/src/modules/auth/auth.module.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AuthModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const passport_1 = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const jwt_auth_usecase_1 = __webpack_require__(/*! ./application/usecases/jwt-auth.usecase */ "./apps/resource/src/modules/auth/application/usecases/jwt-auth.usecase.ts");
const user_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/user.repository */ "./apps/resource/src/modules/auth/infrastructure/adapters/out/user.repository.ts");
const jwt_strategy_1 = __webpack_require__(/*! ./infrastructure/strategies/jwt.strategy */ "./apps/resource/src/modules/auth/infrastructure/strategies/jwt.strategy.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const user_service_1 = __webpack_require__(/*! ./application/services/user.service */ "./apps/resource/src/modules/auth/application/services/user.service.ts");
const user_usecase_1 = __webpack_require__(/*! ./application/usecases/user.usecase */ "./apps/resource/src/modules/auth/application/usecases/user.usecase.ts");
const user_event_handler_1 = __webpack_require__(/*! ./application/handler/user-event.handler */ "./apps/resource/src/modules/auth/application/handler/user-event.handler.ts");
const resource_manager_usecase_1 = __webpack_require__(/*! ./application/usecases/resource-manager.usecase */ "./apps/resource/src/modules/auth/application/usecases/resource-manager.usecase.ts");
const auth_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/auth.controller */ "./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/auth.controller.ts");
const user_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/user.controller */ "./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/user.controller.ts");
const admin_user_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/admin.user.controller */ "./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/admin.user.controller.ts");
const admin_resource_manager_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/admin.resource-manager.controller */ "./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/admin.resource-manager.controller.ts");
let AuthModule = class AuthModule {
};
exports.AuthModule = AuthModule;
exports.AuthModule = AuthModule = __decorate([
    (0, common_1.Module)({
        imports: [passport_1.PassportModule, typeorm_1.TypeOrmModule.forFeature([entities_1.User, entities_1.Employee])],
        providers: [
            jwt_strategy_1.JwtStrategy,
            {
                provide: 'AuthService',
                useClass: jwt_auth_usecase_1.JwtAuthUsecase,
            },
            user_service_1.UserService,
            user_repository_1.UserRepository,
            {
                provide: 'UserRepositoryPort',
                useClass: user_repository_1.UserRepository,
            },
            user_usecase_1.UserUsecase,
            user_event_handler_1.UserEventHandler,
            resource_manager_usecase_1.ResourceManagerUseCase,
        ],
        controllers: [auth_controller_1.UserAuthController, user_controller_1.UserUserController, admin_user_controller_1.AdminUserController, admin_resource_manager_controller_1.AdminResourceManagerController],
        exports: [
            jwt_strategy_1.JwtStrategy,
            {
                provide: 'AuthService',
                useClass: jwt_auth_usecase_1.JwtAuthUsecase,
            },
            user_service_1.UserService,
            user_usecase_1.UserUsecase,
        ],
    })
], AuthModule);


/***/ }),

/***/ "./apps/resource/src/modules/auth/domain/ports/auth.service.port.ts":
/*!**************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/domain/ports/auth.service.port.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/auth/domain/ports/user.repository.port.ts":
/*!*****************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/domain/ports/user.repository.port.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/auth/infrastructure/adapters/in/domain/controllers/user.controllers.ts":
/*!**********************************************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/infrastructure/adapters/in/domain/controllers/user.controllers.ts ***!
  \**********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserDomainController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const user_service_1 = __webpack_require__(/*! @resource/modules/auth/application/services/user.service */ "./apps/resource/src/modules/auth/application/services/user.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
let UserDomainController = class UserDomainController {
    constructor(userService) {
        this.userService = userService;
    }
    async findAll() {
        return this.userService.findAll();
    }
    async findByEmployeeId(employeeId) {
        return this.userService.findByEmployeeId(employeeId);
    }
    async findByEmail(email) {
        return this.userService.findByEmail(email);
    }
    async findByUserId(userId) {
        return this.userService.findByUserId(userId);
    }
    async save(user) {
        return this.userService.save(user);
    }
    async update(userId, user) {
        return this.userService.update({ ...user, userId });
    }
};
exports.UserDomainController = UserDomainController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '모든 사용자 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '모든 사용자 조회 성공', type: [entities_1.User] }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], UserDomainController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)('employee/:employeeId'),
    (0, swagger_1.ApiOperation)({ summary: '사원 ID로 사용자 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '사용자 조회 성공', type: entities_1.User }),
    __param(0, (0, common_1.Param)('employeeId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], UserDomainController.prototype, "findByEmployeeId", null);
__decorate([
    (0, common_1.Get)('email/:email'),
    (0, swagger_1.ApiOperation)({ summary: '이메일로 사용자 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '사용자 조회 성공', type: entities_1.User }),
    __param(0, (0, common_1.Param)('email')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], UserDomainController.prototype, "findByEmail", null);
__decorate([
    (0, common_1.Get)(':userId'),
    (0, swagger_1.ApiOperation)({ summary: '사용자 ID로 사용자 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '사용자 조회 성공', type: entities_1.User }),
    __param(0, (0, common_1.Param)('userId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], UserDomainController.prototype, "findByUserId", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '사용자 저장' }),
    (0, swagger_1.ApiResponse)({ status: 201, description: '사용자 저장 성공', type: entities_1.User }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], UserDomainController.prototype, "save", null);
__decorate([
    (0, common_1.Patch)(':userId'),
    (0, swagger_1.ApiOperation)({ summary: '사용자 정보 업데이트' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '사용자 정보 업데이트 성공', type: entities_1.User }),
    __param(0, (0, common_1.Param)('userId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_h = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], UserDomainController.prototype, "update", null);
exports.UserDomainController = UserDomainController = __decorate([
    (0, swagger_1.ApiTags)('User Domain Test'),
    (0, common_1.Controller)('domain/users'),
    (0, public_decorator_1.Public)(),
    __metadata("design:paramtypes", [typeof (_a = typeof user_service_1.UserService !== "undefined" && user_service_1.UserService) === "function" ? _a : Object])
], UserDomainController);


/***/ }),

/***/ "./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/admin.resource-manager.controller.ts":
/*!***************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/admin.resource-manager.controller.ts ***!
  \***************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminResourceManagerController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const resource_manager_usecase_1 = __webpack_require__(/*! @resource/modules/auth/application/usecases/resource-manager.usecase */ "./apps/resource/src/modules/auth/application/usecases/resource-manager.usecase.ts");
const dtos_index_1 = __webpack_require__(/*! @resource/dtos.index */ "./apps/resource/src/dtos.index.ts");
let AdminResourceManagerController = class AdminResourceManagerController {
    constructor(resourceManagerUseCase) {
        this.resourceManagerUseCase = resourceManagerUseCase;
    }
    async findAllResourceManagers() {
        return this.resourceManagerUseCase.findAllResourceManagers();
    }
};
exports.AdminResourceManagerController = AdminResourceManagerController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 관리자 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 관리자 목록 조회 성공',
        type: [dtos_index_1.EmplyeesByDepartmentResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], AdminResourceManagerController.prototype, "findAllResourceManagers", null);
exports.AdminResourceManagerController = AdminResourceManagerController = __decorate([
    (0, swagger_1.ApiTags)('3. 자원 관리자 - 관리자 페이지'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('v1/admin/resource-managers'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_manager_usecase_1.ResourceManagerUseCase !== "undefined" && resource_manager_usecase_1.ResourceManagerUseCase) === "function" ? _a : Object])
], AdminResourceManagerController);


/***/ }),

/***/ "./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/admin.user.controller.ts":
/*!***************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/admin.user.controller.ts ***!
  \***************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminUserController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const user_usecase_1 = __webpack_require__(/*! @resource/modules/auth/application/usecases/user.usecase */ "./apps/resource/src/modules/auth/application/usecases/user.usecase.ts");
const user_response_dto_1 = __webpack_require__(/*! @resource/modules/auth/application/dto/user-response.dto */ "./apps/resource/src/modules/auth/application/dto/user-response.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const change_role_dto_1 = __webpack_require__(/*! @resource/modules/auth/application/dto/change-role.dto */ "./apps/resource/src/modules/auth/application/dto/change-role.dto.ts");
let AdminUserController = class AdminUserController {
    constructor(userUsecase) {
        this.userUsecase = userUsecase;
    }
    findUser() {
        return this.userUsecase.findAll();
    }
    changeRole(changeRoleDto) {
        return this.userUsecase.changeRole(changeRoleDto);
    }
};
exports.AdminUserController = AdminUserController;
__decorate([
    (0, common_1.Get)(''),
    (0, swagger_1.ApiOperation)({ summary: '직원 목록 조회	자원담당자로 설정하기 위한 직원 목록' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '내 상세 정보 조회 성공', type: user_response_dto_1.UserResponseDto }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], AdminUserController.prototype, "findUser", null);
__decorate([
    (0, common_1.Patch)('change/role'),
    (0, swagger_1.ApiOperation)({ summary: '자원 담당자 설정	자원별 담당자 설정 또는 토글 방식' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '자원 담당자 설정 성공' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof change_role_dto_1.ChangeRoleDto !== "undefined" && change_role_dto_1.ChangeRoleDto) === "function" ? _b : Object]),
    __metadata("design:returntype", void 0)
], AdminUserController.prototype, "changeRole", null);
exports.AdminUserController = AdminUserController = __decorate([
    (0, swagger_1.ApiTags)('5. 유저 - 관리자 페이지'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('v1/admin/users'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    __metadata("design:paramtypes", [typeof (_a = typeof user_usecase_1.UserUsecase !== "undefined" && user_usecase_1.UserUsecase) === "function" ? _a : Object])
], AdminUserController);


/***/ }),

/***/ "./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/auth.controller.ts":
/*!*********************************************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/auth.controller.ts ***!
  \*********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserAuthController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const login_dto_1 = __webpack_require__(/*! @resource/modules/auth/application/dto/login.dto */ "./apps/resource/src/modules/auth/application/dto/login.dto.ts");
const auth_service_port_1 = __webpack_require__(/*! @resource/modules/auth/domain/ports/auth.service.port */ "./apps/resource/src/modules/auth/domain/ports/auth.service.port.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const login_response_dto_1 = __webpack_require__(/*! @resource/modules/auth/application/dto/login-response.dto */ "./apps/resource/src/modules/auth/application/dto/login-response.dto.ts");
let UserAuthController = class UserAuthController {
    constructor(authService) {
        this.authService = authService;
    }
    login(loginDto) {
        return this.authService.login(loginDto);
    }
};
exports.UserAuthController = UserAuthController;
__decorate([
    (0, common_1.Post)('login'),
    (0, swagger_1.ApiOperation)({ summary: '로그인' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 201, description: '로그인 성공', type: login_response_dto_1.LoginResponseDto }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof login_dto_1.LoginDto !== "undefined" && login_dto_1.LoginDto) === "function" ? _b : Object]),
    __metadata("design:returntype", void 0)
], UserAuthController.prototype, "login", null);
exports.UserAuthController = UserAuthController = __decorate([
    (0, swagger_1.ApiTags)('1. 인증 - 사용자 페이지'),
    (0, common_1.Controller)('v1/auth'),
    (0, public_decorator_1.Public)(),
    __param(0, (0, common_1.Inject)('AuthService')),
    __metadata("design:paramtypes", [typeof (_a = typeof auth_service_port_1.AuthService !== "undefined" && auth_service_port_1.AuthService) === "function" ? _a : Object])
], UserAuthController);


/***/ }),

/***/ "./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/user.controller.ts":
/*!*********************************************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/infrastructure/adapters/in/web/controllers/v1/user.controller.ts ***!
  \*********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserUserController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const user_usecase_1 = __webpack_require__(/*! @resource/modules/auth/application/usecases/user.usecase */ "./apps/resource/src/modules/auth/application/usecases/user.usecase.ts");
const user_response_dto_1 = __webpack_require__(/*! @resource/modules/auth/application/dto/user-response.dto */ "./apps/resource/src/modules/auth/application/dto/user-response.dto.ts");
const check_password_dto_1 = __webpack_require__(/*! @resource/modules/auth/application/dto/check-password.dto */ "./apps/resource/src/modules/auth/application/dto/check-password.dto.ts");
const change_password_dto_1 = __webpack_require__(/*! @resource/modules/auth/application/dto/change-password.dto */ "./apps/resource/src/modules/auth/application/dto/change-password.dto.ts");
const notification_settings_dto_1 = __webpack_require__(/*! @resource/modules/auth/application/dto/notification-settings.dto */ "./apps/resource/src/modules/auth/application/dto/notification-settings.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
let UserUserController = class UserUserController {
    constructor(userUsecase) {
        this.userUsecase = userUsecase;
    }
    findUser(user) {
        return this.userUsecase.findByUserId(user.userId);
    }
    checkPassword(user, checkPasswordDto) {
        return this.userUsecase.checkPassword(user.userId, checkPasswordDto.password);
    }
    changePassword(user, changePasswordDto) {
        return this.userUsecase.changePassword(user.userId, changePasswordDto.newPassword);
    }
    async changeNotificationSettings(user, updateDto) {
        return this.userUsecase.changeNotificationSettings(user.userId, updateDto);
    }
};
exports.UserUserController = UserUserController;
__decorate([
    (0, common_1.Get)('me'),
    (0, swagger_1.ApiOperation)({ summary: '내 상세 정보 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '내 상세 정보 조회 성공', type: user_response_dto_1.UserResponseDto }),
    __param(0, (0, user_decorator_1.User)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _b : Object]),
    __metadata("design:returntype", void 0)
], UserUserController.prototype, "findUser", null);
__decorate([
    (0, common_1.Post)('check-password'),
    (0, swagger_1.ApiOperation)({ summary: '비밀번호 확인' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '비밀번호 확인 성공' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _c : Object, typeof (_d = typeof check_password_dto_1.CheckPasswordDto !== "undefined" && check_password_dto_1.CheckPasswordDto) === "function" ? _d : Object]),
    __metadata("design:returntype", void 0)
], UserUserController.prototype, "checkPassword", null);
__decorate([
    (0, common_1.Post)('change-password'),
    (0, swagger_1.ApiOperation)({ summary: '비밀번호 변경' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '비밀번호 변경 성공' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _e : Object, typeof (_f = typeof change_password_dto_1.ChangePasswordDto !== "undefined" && change_password_dto_1.ChangePasswordDto) === "function" ? _f : Object]),
    __metadata("design:returntype", void 0)
], UserUserController.prototype, "changePassword", null);
__decorate([
    (0, common_1.Patch)('me/notification-settings'),
    (0, swagger_1.ApiOperation)({ summary: '알림 설정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '알림 설정 성공',
        type: user_response_dto_1.UserResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _g : Object, typeof (_h = typeof notification_settings_dto_1.UpdateNotificationSettingsDto !== "undefined" && notification_settings_dto_1.UpdateNotificationSettingsDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], UserUserController.prototype, "changeNotificationSettings", null);
exports.UserUserController = UserUserController = __decorate([
    (0, swagger_1.ApiTags)('5. 유저 - 사용자 페이지'),
    (0, common_1.Controller)('v1/users'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    __metadata("design:paramtypes", [typeof (_a = typeof user_usecase_1.UserUsecase !== "undefined" && user_usecase_1.UserUsecase) === "function" ? _a : Object])
], UserUserController);


/***/ }),

/***/ "./apps/resource/src/modules/auth/infrastructure/adapters/out/user.repository.ts":
/*!***************************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/infrastructure/adapters/out/user.repository.ts ***!
  \***************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let UserRepository = class UserRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async findOne(repositoryOptions) {
        const repository = this.repository;
        const entity = await repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
        });
        return entity;
    }
    async find(repositoryOptions) {
        const repository = this.repository;
        const entities = await repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
        });
        return entities;
    }
    async save(user, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.User)
            : this.repository;
        const entity = await repository.save(user);
        return entity;
    }
    async update(userId, userData, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.User)
            : this.repository;
        await repository.update(userId, userData);
        const updated = await repository.findOne({
            where: { userId },
            relations: ['employee'],
        });
        return updated;
    }
};
exports.UserRepository = UserRepository;
exports.UserRepository = UserRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.User)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], UserRepository);


/***/ }),

/***/ "./apps/resource/src/modules/auth/infrastructure/strategies/jwt.strategy.ts":
/*!**********************************************************************************!*\
  !*** ./apps/resource/src/modules/auth/infrastructure/strategies/jwt.strategy.ts ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.JwtStrategy = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const passport_1 = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
const passport_jwt_1 = __webpack_require__(/*! passport-jwt */ "passport-jwt");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
let JwtStrategy = class JwtStrategy extends (0, passport_1.PassportStrategy)(passport_jwt_1.Strategy) {
    constructor(userRepository, configService) {
        super({
            jwtFromRequest: passport_jwt_1.ExtractJwt.fromAuthHeaderAsBearerToken(),
            ignoreExpiration: false,
            secretOrKey: configService.get('jwt.secret'),
        });
        this.userRepository = userRepository;
    }
    async validate(payload) {
        const user = await this.userRepository.findOne({
            where: { userId: payload.userId },
            relations: ['employee'],
        });
        if (!user || user.userId !== payload.userId) {
            throw new common_1.UnauthorizedException();
        }
        return payload;
    }
};
exports.JwtStrategy = JwtStrategy;
exports.JwtStrategy = JwtStrategy = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.User)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object, typeof (_b = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _b : Object])
], JwtStrategy);


/***/ }),

/***/ "./apps/resource/src/modules/auth/user.domain.module.ts":
/*!**************************************************************!*\
  !*** ./apps/resource/src/modules/auth/user.domain.module.ts ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserDomainModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const user_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/user.repository */ "./apps/resource/src/modules/auth/infrastructure/adapters/out/user.repository.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const user_service_1 = __webpack_require__(/*! ./application/services/user.service */ "./apps/resource/src/modules/auth/application/services/user.service.ts");
const user_controllers_1 = __webpack_require__(/*! ./infrastructure/adapters/in/domain/controllers/user.controllers */ "./apps/resource/src/modules/auth/infrastructure/adapters/in/domain/controllers/user.controllers.ts");
let UserDomainModule = class UserDomainModule {
};
exports.UserDomainModule = UserDomainModule;
exports.UserDomainModule = UserDomainModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([entities_1.User])],
        providers: [
            user_service_1.UserService,
            user_repository_1.UserRepository,
            {
                provide: 'UserRepositoryPort',
                useClass: user_repository_1.UserRepository,
            },
        ],
        controllers: [user_controllers_1.UserDomainController],
        exports: [user_service_1.UserService],
    })
], UserDomainModule);


/***/ }),

/***/ "./apps/resource/src/modules/employee/application/dtos/create-employee.dto.ts":
/*!************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/application/dtos/create-employee.dto.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateEmployeeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CreateEmployeeDto {
}
exports.CreateEmployeeDto = CreateEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateEmployeeDto.prototype, "position", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/employee/application/dtos/employee-response.dto.ts":
/*!**************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/application/dtos/employee-response.dto.ts ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EmployeeResponseDto {
}
exports.EmployeeResponseDto = EmployeeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmployeeResponseDto.prototype, "position", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/employee/application/dtos/employees-by-department-response.dto.ts":
/*!*****************************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/application/dtos/employees-by-department-response.dto.ts ***!
  \*****************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmplyeesByDepartmentResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class EmplyeesByDepartmentResponseDto {
}
exports.EmplyeesByDepartmentResponseDto = EmplyeesByDepartmentResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], EmplyeesByDepartmentResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], EmplyeesByDepartmentResponseDto.prototype, "employees", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/employee/application/dtos/mms-employee-response.dto.ts":
/*!******************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/application/dtos/mms-employee-response.dto.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MMSWebhookRequestDto = exports.MMSEmployeeResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class MMSEmployeeResponseDto {
    constructor(employee) {
        this.id = employee.id;
        this.employee_number = employee.employee_number;
        this.name = employee.name;
        this.email = employee.email;
        this.phone_number = employee.phone_number;
        this.date_of_birth = employee.date_of_birth;
        this.gender = employee.gender;
        this.hire_date = employee.hire_date;
        this.status = employee.status;
        this.department = employee.department?.department_code;
        this.position = employee.position?.position_title;
        this.rank = employee.rank?.rank_name;
    }
}
exports.MMSEmployeeResponseDto = MMSEmployeeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID', example: '67d116b591e5366c327915d2' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '사번', example: '24020' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "employee_number", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이름', example: '구석현' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이메일', example: 'koo.sukhyun@lumir.space' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "email", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '전화번호', example: '010-1234-5678' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "phone_number", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '생년월일', example: '1980-07-04T00:00:00.000Z' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], MMSEmployeeResponseDto.prototype, "date_of_birth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '성별', example: 'MALE' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "gender", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '입사일', example: '2024-05-21T00:00:00.000Z' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], MMSEmployeeResponseDto.prototype, "hire_date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '재직 상태', example: '재직중' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '부서', example: '대표이사' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직위', example: '대표이사' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직급', example: '대표이사' }),
    __metadata("design:type", String)
], MMSEmployeeResponseDto.prototype, "rank", void 0);
class MMSWebhookRequestDto {
}
exports.MMSWebhookRequestDto = MMSWebhookRequestDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이벤트 타입', example: 'employee.updated' }),
    __metadata("design:type", String)
], MMSWebhookRequestDto.prototype, "event_type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '엔티티 타입', example: 'employee' }),
    __metadata("design:type", String)
], MMSWebhookRequestDto.prototype, "entity_type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '타임스탬프', example: '2025-04-29T02:11:51.794Z' }),
    __metadata("design:type", String)
], MMSWebhookRequestDto.prototype, "timestamp", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '페이로드' }),
    __metadata("design:type", MMSEmployeeResponseDto)
], MMSWebhookRequestDto.prototype, "payload", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/employee/application/dtos/update-employee.dto.ts":
/*!************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/application/dtos/update-employee.dto.ts ***!
  \************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateEmployeeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class UpdateEmployeeDto {
}
exports.UpdateEmployeeDto = UpdateEmployeeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "employeeNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateEmployeeDto.prototype, "position", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/employee/application/handler/employee-event.handler.ts":
/*!******************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/application/handler/employee-event.handler.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeEventHandler = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const employee_usecase_1 = __webpack_require__(/*! ../usecases/employee.usecase */ "./apps/resource/src/modules/employee/application/usecases/employee.usecase.ts");
let EmployeeEventHandler = class EmployeeEventHandler {
    constructor(employeeUseCase) {
        this.employeeUseCase = employeeUseCase;
    }
    async handleFindEmployee(payload) {
        return await this.employeeUseCase.findEmployee(payload.employeeNumber, { queryRunner: payload.queryRunner });
    }
    async handleUpdateEmployee(payload) {
        return await this.employeeUseCase.updateEmployee(payload.employee, { queryRunner: payload.queryRunner });
    }
};
exports.EmployeeEventHandler = EmployeeEventHandler;
__decorate([
    (0, event_emitter_1.OnEvent)('find.employee'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], EmployeeEventHandler.prototype, "handleFindEmployee", null);
__decorate([
    (0, event_emitter_1.OnEvent)('update.employee'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], EmployeeEventHandler.prototype, "handleUpdateEmployee", null);
exports.EmployeeEventHandler = EmployeeEventHandler = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_usecase_1.EmployeeUseCase !== "undefined" && employee_usecase_1.EmployeeUseCase) === "function" ? _a : Object])
], EmployeeEventHandler);


/***/ }),

/***/ "./apps/resource/src/modules/employee/application/services/employee.service.ts":
/*!*************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/application/services/employee.service.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_repository_port_1 = __webpack_require__(/*! @resource/modules/employee/domain/ports/employee.repository.port */ "./apps/resource/src/modules/employee/domain/ports/employee.repository.port.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let EmployeeService = class EmployeeService {
    constructor(employeeRepository) {
        this.employeeRepository = employeeRepository;
    }
    create(employee) {
        const employeeEntity = new entities_1.Employee();
        employeeEntity.name = employee.name;
        employeeEntity.employeeNumber = employee.employee_number;
        employeeEntity.department = employee.department;
        employeeEntity.position = employee.rank;
        return employeeEntity;
    }
    async save(employee, repositoryOptions) {
        return this.employeeRepository.save(employee, repositoryOptions);
    }
    async findAll(repositoryOptions) {
        return this.employeeRepository.findAll(repositoryOptions);
    }
    async findByEmployeeNumber(employeeNumber, repositoryOptions) {
        return this.employeeRepository.findByEmployeeNumber(employeeNumber, repositoryOptions);
    }
    async update(employee, repositoryOptions) {
        return this.employeeRepository.update(employee.employeeId, employee, repositoryOptions);
    }
};
exports.EmployeeService = EmployeeService;
exports.EmployeeService = EmployeeService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('EmployeeRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_repository_port_1.EmployeeRepositoryPort !== "undefined" && employee_repository_port_1.EmployeeRepositoryPort) === "function" ? _a : Object])
], EmployeeService);


/***/ }),

/***/ "./apps/resource/src/modules/employee/application/usecases/employee.usecase.ts":
/*!*************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/application/usecases/employee.usecase.ts ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeUseCase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_service_1 = __webpack_require__(/*! ../services/employee.service */ "./apps/resource/src/modules/employee/application/services/employee.service.ts");
const mms_employee_response_dto_1 = __webpack_require__(/*! ../dtos/mms-employee-response.dto */ "./apps/resource/src/modules/employee/application/dtos/mms-employee-response.dto.ts");
const axios_1 = __webpack_require__(/*! axios */ "axios");
const dist_1 = __webpack_require__(/*! @nestjs/event-emitter/dist */ "@nestjs/event-emitter/dist");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
let EmployeeUseCase = class EmployeeUseCase {
    constructor(employeeService, eventEmitter) {
        this.employeeService = employeeService;
        this.eventEmitter = eventEmitter;
    }
    async findEmployee(employeeNumber, repositoryOptions) {
        let employee = await this.employeeService.findByEmployeeNumber(employeeNumber);
        if (!employee) {
            await this.syncEmployee(employeeNumber);
            employee = await this.employeeService.findByEmployeeNumber(employeeNumber);
            if (!employee) {
                throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.EMPLOYEE.NOT_FOUND);
            }
        }
        return employee;
    }
    async findAllEmplyeesByDepartment() {
        const employees = await this.employeeService.findAll({
            where: {
                department: (0, typeorm_2.Not)((0, typeorm_1.In)(['퇴사', '관리자'])),
            },
        });
        const departments = new Map();
        employees.forEach((employee) => {
            if (!departments.has(employee.department)) {
                departments.set(employee.department, []);
            }
            departments.get(employee.department)?.push(employee);
        });
        return Array.from(departments.entries())
            .map(([department, employees]) => ({
            department,
            employees,
        }))
            .sort((a, b) => a.department.localeCompare(b.department));
    }
    async updateEmployee(employee, repositoryOptions) {
        return await this.employeeService.update(employee, repositoryOptions);
    }
    async getEmployee(employeeNumber) {
        const employee = await axios_1.default.get(`${process.env.METADATA_MANAGER_URL}/api/employees?employeeNumber=${employeeNumber}&detailed=true`);
        return new mms_employee_response_dto_1.MMSEmployeeResponseDto(employee.data);
    }
    async getEmployees() {
        const employees = await axios_1.default.get(`${process.env.METADATA_MANAGER_URL}/api/employees?detailed=true`);
        const result = [];
        employees.data.forEach((employee) => {
            result.push(new mms_employee_response_dto_1.MMSEmployeeResponseDto(employee));
        });
        return result;
    }
    async syncEmployee(employeeNumber) {
        const employee = await this.getEmployee(employeeNumber);
        const user = await this.employeeService.findByEmployeeNumber(employee.employee_number);
        try {
            if (user) {
                user.name = employee.name;
                user.employeeNumber = employee.employee_number;
                user.department = employee.department;
                user.position = employee.rank;
                await this.employeeService.save(user);
            }
            else {
                await this.employeeService.save(this.employeeService.create(employee));
            }
            if (employee.phone_number) {
                this.eventEmitter.emit('update.user.mobile', {
                    employeeId: user.employeeId,
                    mobile: employee.phone_number,
                });
            }
        }
        catch (error) {
            console.log(error);
        }
    }
    async syncEmployees() {
        const employees = await this.getEmployees();
        for (const employee of employees) {
            const user = await this.employeeService.findByEmployeeNumber(employee.employee_number);
            if (employee.status === '퇴사') {
                if (user) {
                    await this.employeeService.update({
                        userId: null,
                        employeeId: user.employeeId,
                        department: employee.status,
                        position: employee.status,
                    });
                }
                continue;
            }
            try {
                if (user) {
                    user.name = employee.name;
                    user.employeeNumber = employee.employee_number;
                    user.department = employee.department;
                    user.position = employee.rank;
                    await this.employeeService.save(user);
                }
                else {
                    await this.employeeService.save(this.employeeService.create(employee));
                }
                if (employee.phone_number) {
                    this.eventEmitter.emit('update.user.mobile', {
                        employeeId: user.employeeId,
                        mobile: employee.phone_number,
                    });
                }
            }
            catch (error) {
                console.log(error);
            }
        }
    }
};
exports.EmployeeUseCase = EmployeeUseCase;
exports.EmployeeUseCase = EmployeeUseCase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.EmployeeService !== "undefined" && employee_service_1.EmployeeService) === "function" ? _a : Object, typeof (_b = typeof dist_1.EventEmitter2 !== "undefined" && dist_1.EventEmitter2) === "function" ? _b : Object])
], EmployeeUseCase);


/***/ }),

/***/ "./apps/resource/src/modules/employee/domain/ports/employee.repository.port.ts":
/*!*************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/domain/ports/employee.repository.port.ts ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/employee/employee.domain.module.ts":
/*!**********************************************************************!*\
  !*** ./apps/resource/src/modules/employee/employee.domain.module.ts ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeDomainModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const employee_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/employee.repository */ "./apps/resource/src/modules/employee/infrastructure/adapters/out/persistence/employee.repository.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const employee_service_1 = __webpack_require__(/*! ./application/services/employee.service */ "./apps/resource/src/modules/employee/application/services/employee.service.ts");
const employee_controllers_1 = __webpack_require__(/*! ./infrastructure/adapters/in/domain/controllers/employee.controllers */ "./apps/resource/src/modules/employee/infrastructure/adapters/in/domain/controllers/employee.controllers.ts");
let EmployeeDomainModule = class EmployeeDomainModule {
};
exports.EmployeeDomainModule = EmployeeDomainModule;
exports.EmployeeDomainModule = EmployeeDomainModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([entities_1.Employee])],
        providers: [
            employee_service_1.EmployeeService,
            employee_repository_1.EmployeeRepository,
            {
                provide: 'EmployeeRepositoryPort',
                useClass: employee_repository_1.EmployeeRepository,
            },
        ],
        controllers: [employee_controllers_1.EmployeeDomainController],
        exports: [employee_service_1.EmployeeService],
    })
], EmployeeDomainModule);


/***/ }),

/***/ "./apps/resource/src/modules/employee/employee.module.ts":
/*!***************************************************************!*\
  !*** ./apps/resource/src/modules/employee/employee.module.ts ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const employee_service_1 = __webpack_require__(/*! ./application/services/employee.service */ "./apps/resource/src/modules/employee/application/services/employee.service.ts");
const employee_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/employee.repository */ "./apps/resource/src/modules/employee/infrastructure/adapters/out/persistence/employee.repository.ts");
const employee_usecase_1 = __webpack_require__(/*! ./application/usecases/employee.usecase */ "./apps/resource/src/modules/employee/application/usecases/employee.usecase.ts");
const employee_event_handler_1 = __webpack_require__(/*! ./application/handler/employee-event.handler */ "./apps/resource/src/modules/employee/application/handler/employee-event.handler.ts");
const employee_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/employee.controller */ "./apps/resource/src/modules/employee/infrastructure/adapters/in/web/controllers/v1/employee.controller.ts");
let EmployeeModule = class EmployeeModule {
};
exports.EmployeeModule = EmployeeModule;
exports.EmployeeModule = EmployeeModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([entities_1.Employee])],
        providers: [
            employee_service_1.EmployeeService,
            {
                provide: 'EmployeeRepositoryPort',
                useClass: employee_repository_1.EmployeeRepository,
            },
            employee_usecase_1.EmployeeUseCase,
            employee_event_handler_1.EmployeeEventHandler,
        ],
        controllers: [employee_controller_1.UserEmployeeController],
        exports: [employee_service_1.EmployeeService, employee_usecase_1.EmployeeUseCase],
    })
], EmployeeModule);


/***/ }),

/***/ "./apps/resource/src/modules/employee/infrastructure/adapters/in/domain/controllers/employee.controllers.ts":
/*!******************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/infrastructure/adapters/in/domain/controllers/employee.controllers.ts ***!
  \******************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeDomainController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const employee_service_1 = __webpack_require__(/*! @resource/modules/employee/application/services/employee.service */ "./apps/resource/src/modules/employee/application/services/employee.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const mms_employee_response_dto_1 = __webpack_require__(/*! @resource/modules/employee/application/dtos/mms-employee-response.dto */ "./apps/resource/src/modules/employee/application/dtos/mms-employee-response.dto.ts");
let EmployeeDomainController = class EmployeeDomainController {
    constructor(employeeService) {
        this.employeeService = employeeService;
    }
    async findAll() {
        return this.employeeService.findAll();
    }
    async findByEmployeeNumber(employeeNumber) {
        return this.employeeService.findByEmployeeNumber(employeeNumber);
    }
    async save(employeeDto) {
        const employee = this.employeeService.create(employeeDto);
        return this.employeeService.save(employee);
    }
    async update(employeeId, employee) {
        employee.employeeId = employeeId;
        return this.employeeService.update(employee);
    }
};
exports.EmployeeDomainController = EmployeeDomainController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '모든 직원 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '모든 직원 조회 성공', type: [entities_1.Employee] }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], EmployeeDomainController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':employeeNumber'),
    (0, swagger_1.ApiOperation)({ summary: '사원 번호로 직원 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '직원 조회 성공', type: entities_1.Employee }),
    __param(0, (0, common_1.Param)('employeeNumber')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], EmployeeDomainController.prototype, "findByEmployeeNumber", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '직원 생성 및 저장' }),
    (0, swagger_1.ApiResponse)({ status: 201, description: '직원 저장 성공', type: entities_1.Employee }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof mms_employee_response_dto_1.MMSEmployeeResponseDto !== "undefined" && mms_employee_response_dto_1.MMSEmployeeResponseDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], EmployeeDomainController.prototype, "save", null);
__decorate([
    (0, common_1.Patch)(':employeeId'),
    (0, swagger_1.ApiOperation)({ summary: '직원 정보 업데이트' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '직원 정보 업데이트 성공', type: entities_1.Employee }),
    __param(0, (0, common_1.Param)('employeeId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_f = typeof entities_1.Employee !== "undefined" && entities_1.Employee) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], EmployeeDomainController.prototype, "update", null);
exports.EmployeeDomainController = EmployeeDomainController = __decorate([
    (0, swagger_1.ApiTags)('Employee Domain Test'),
    (0, common_1.Controller)('domain/employees'),
    (0, public_decorator_1.Public)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_service_1.EmployeeService !== "undefined" && employee_service_1.EmployeeService) === "function" ? _a : Object])
], EmployeeDomainController);


/***/ }),

/***/ "./apps/resource/src/modules/employee/infrastructure/adapters/in/web/controllers/v1/employee.controller.ts":
/*!*****************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/infrastructure/adapters/in/web/controllers/v1/employee.controller.ts ***!
  \*****************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserEmployeeController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const employees_by_department_response_dto_1 = __webpack_require__(/*! @resource/modules/employee/application/dtos/employees-by-department-response.dto */ "./apps/resource/src/modules/employee/application/dtos/employees-by-department-response.dto.ts");
const employee_usecase_1 = __webpack_require__(/*! @resource/modules/employee/application/usecases/employee.usecase */ "./apps/resource/src/modules/employee/application/usecases/employee.usecase.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const mms_employee_response_dto_1 = __webpack_require__(/*! @resource/modules/employee/application/dtos/mms-employee-response.dto */ "./apps/resource/src/modules/employee/application/dtos/mms-employee-response.dto.ts");
const throttler_decorator_1 = __webpack_require__(/*! @nestjs/throttler/dist/throttler.decorator */ "@nestjs/throttler/dist/throttler.decorator");
let UserEmployeeController = class UserEmployeeController {
    constructor(employeeUseCase) {
        this.employeeUseCase = employeeUseCase;
    }
    async findAllEmplyeesByDepartment() {
        return this.employeeUseCase.findAllEmplyeesByDepartment();
    }
    async syncEmployees() {
        return await this.employeeUseCase.syncEmployees();
    }
    async webhookCreate(body) {
        console.log('created employee', body);
        await this.employeeUseCase.syncEmployee(body.payload.employee_number);
    }
    async webhookUpdate(body) {
        console.log('updated employee', body);
        await this.employeeUseCase.syncEmployee(body.payload.employee_number);
    }
    async webhookPositionChanged(body) {
        console.log('position changed', body);
        await this.employeeUseCase.syncEmployee(body.payload.employee_number);
    }
    async webhookDepartmentChanged(body) {
        console.log('department changed', body);
        await this.employeeUseCase.syncEmployee(body.payload.employee_number);
    }
    async webhookDelete(body) {
        console.log('deleted employee', body);
    }
};
exports.UserEmployeeController = UserEmployeeController;
__decorate([
    (0, common_1.Get)('department'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, swagger_1.ApiOperation)({ summary: '부서별 직원 목록 조회 #사용자/참석자설정/모달' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '부서별 직원 목록을 성공적으로 조회했습니다.',
        type: [employees_by_department_response_dto_1.EmplyeesByDepartmentResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], UserEmployeeController.prototype, "findAllEmplyeesByDepartment", null);
__decorate([
    (0, common_1.Get)('sync'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], UserEmployeeController.prototype, "syncEmployees", null);
__decorate([
    (0, common_1.Post)('webhook/create'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, public_decorator_1.Public)(),
    (0, throttler_decorator_1.Throttle)(5, 60),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof mms_employee_response_dto_1.MMSWebhookRequestDto !== "undefined" && mms_employee_response_dto_1.MMSWebhookRequestDto) === "function" ? _c : Object]),
    __metadata("design:returntype", Promise)
], UserEmployeeController.prototype, "webhookCreate", null);
__decorate([
    (0, common_1.Post)('webhook/update'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, public_decorator_1.Public)(),
    (0, throttler_decorator_1.Throttle)(5, 60),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof mms_employee_response_dto_1.MMSWebhookRequestDto !== "undefined" && mms_employee_response_dto_1.MMSWebhookRequestDto) === "function" ? _d : Object]),
    __metadata("design:returntype", Promise)
], UserEmployeeController.prototype, "webhookUpdate", null);
__decorate([
    (0, common_1.Post)('webhook/position_changed'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, public_decorator_1.Public)(),
    (0, throttler_decorator_1.Throttle)(5, 60),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof mms_employee_response_dto_1.MMSWebhookRequestDto !== "undefined" && mms_employee_response_dto_1.MMSWebhookRequestDto) === "function" ? _e : Object]),
    __metadata("design:returntype", Promise)
], UserEmployeeController.prototype, "webhookPositionChanged", null);
__decorate([
    (0, common_1.Post)('webhook/department_changed'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, public_decorator_1.Public)(),
    (0, throttler_decorator_1.Throttle)(5, 60),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof mms_employee_response_dto_1.MMSWebhookRequestDto !== "undefined" && mms_employee_response_dto_1.MMSWebhookRequestDto) === "function" ? _f : Object]),
    __metadata("design:returntype", Promise)
], UserEmployeeController.prototype, "webhookDepartmentChanged", null);
__decorate([
    (0, common_1.Post)('webhook/delete'),
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, public_decorator_1.Public)(),
    (0, throttler_decorator_1.Throttle)(5, 60),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof mms_employee_response_dto_1.MMSWebhookRequestDto !== "undefined" && mms_employee_response_dto_1.MMSWebhookRequestDto) === "function" ? _g : Object]),
    __metadata("design:returntype", Promise)
], UserEmployeeController.prototype, "webhookDelete", null);
exports.UserEmployeeController = UserEmployeeController = __decorate([
    (0, swagger_1.ApiTags)('5. 직원 - 사용자 페이지'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('v1/employees'),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_usecase_1.EmployeeUseCase !== "undefined" && employee_usecase_1.EmployeeUseCase) === "function" ? _a : Object])
], UserEmployeeController);


/***/ }),

/***/ "./apps/resource/src/modules/employee/infrastructure/adapters/out/persistence/employee.repository.ts":
/*!***********************************************************************************************************!*\
  !*** ./apps/resource/src/modules/employee/infrastructure/adapters/out/persistence/employee.repository.ts ***!
  \***********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let EmployeeRepository = class EmployeeRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(employee, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Employee)
            : this.repository;
        const savedEntity = await repository.save(employee);
        return savedEntity;
    }
    async findById(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Employee)
            : this.repository;
        const entity = await repository.findOne({ where: { employeeId: id } });
        return entity ? entity : null;
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Employee)
            : this.repository;
        const entities = await repository.find({
            where: repositoryOptions?.where,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            relations: repositoryOptions?.relations,
            withDeleted: repositoryOptions?.withDeleted,
        });
        return entities;
    }
    async update(id, employee, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Employee)
            : this.repository;
        await repository.update({ employeeId: id }, employee);
        const updated = await repository.findOne({ where: { employeeId: id } });
        if (!updated)
            throw new common_1.NotFoundException('Employee not found');
        return updated;
    }
    async delete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Employee)
            : this.repository;
        await repository.delete({ employeeId: id });
    }
    async findByEmployeeNumber(employeeNumber, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Employee)
            : this.repository;
        const entity = await repository.findOne({ where: { employeeNumber } });
        return entity ? entity : null;
    }
};
exports.EmployeeRepository = EmployeeRepository;
exports.EmployeeRepository = EmployeeRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.Employee)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], EmployeeRepository);


/***/ }),

/***/ "./apps/resource/src/modules/file/application/dtos/file-response.dto.ts":
/*!******************************************************************************!*\
  !*** ./apps/resource/src/modules/file/application/dtos/file-response.dto.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FileResponseDto {
}
exports.FileResponseDto = FileResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: '123e4567-e89b-12d3-a456-426614174000' }),
    __metadata("design:type", String)
], FileResponseDto.prototype, "fileId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'image.jpg' }),
    __metadata("design:type", String)
], FileResponseDto.prototype, "fileName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 'uploads/20250226123456-image.jpg' }),
    __metadata("design:type", String)
], FileResponseDto.prototype, "filePath", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/file/application/services/file.service.ts":
/*!*****************************************************************************!*\
  !*** ./apps/resource/src/modules/file/application/services/file.service.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const file_repository_port_1 = __webpack_require__(/*! ../../domain/ports/file.repository.port */ "./apps/resource/src/modules/file/domain/ports/file.repository.port.ts");
const file_storage_port_1 = __webpack_require__(/*! ../../domain/ports/file-storage.port */ "./apps/resource/src/modules/file/domain/ports/file-storage.port.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let FileService = class FileService {
    constructor(fileRepository, fileStorage) {
        this.fileRepository = fileRepository;
        this.fileStorage = fileStorage;
    }
    async findFileById(fileId) {
        const file = await this.fileRepository.findById(fileId);
        return file;
    }
    async findFileByFilePath(filePath) {
        const file = await this.fileRepository.findByFilePath(filePath);
        return file;
    }
    async findAllFilesByFilePath(filePath) {
        if (!filePath || filePath.length === 0) {
            return [];
        }
        const files = await this.fileRepository.findAllByFilePath(filePath);
        return files;
    }
    async saveFile(file) {
        const savedFile = await this.fileRepository.save(file);
        return savedFile;
    }
    async uploadFile(file) {
        const newFile = await this.fileStorage.uploadFile(file);
        const savedFile = await this.saveFile(newFile);
        return savedFile;
    }
    async deleteFile({ fileId, filePath }) {
        let file;
        if (fileId) {
            file = await this.findFileById(fileId);
            if (!file)
                throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.FILE.NOT_FOUND);
        }
        else if (filePath) {
            file = await this.findFileByFilePath(filePath);
            if (!file)
                throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.FILE.NOT_FOUND);
        }
        else {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.FILE.ID_OR_PATH_REQUIRED);
        }
        await this.fileStorage.deleteFile(file);
        await this.fileRepository.delete(file.fileId);
    }
};
exports.FileService = FileService;
exports.FileService = FileService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('FileRepositoryPort')),
    __param(1, (0, common_1.Inject)('FileStoragePort')),
    __metadata("design:paramtypes", [typeof (_a = typeof file_repository_port_1.FileRepositoryPort !== "undefined" && file_repository_port_1.FileRepositoryPort) === "function" ? _a : Object, typeof (_b = typeof file_storage_port_1.FileStoragePort !== "undefined" && file_storage_port_1.FileStoragePort) === "function" ? _b : Object])
], FileService);


/***/ }),

/***/ "./apps/resource/src/modules/file/domain/ports/file-storage.port.ts":
/*!**************************************************************************!*\
  !*** ./apps/resource/src/modules/file/domain/ports/file-storage.port.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/file/domain/ports/file.repository.port.ts":
/*!*****************************************************************************!*\
  !*** ./apps/resource/src/modules/file/domain/ports/file.repository.port.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/file/file.module.ts":
/*!*******************************************************!*\
  !*** ./apps/resource/src/modules/file/file.module.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const file_service_1 = __webpack_require__(/*! ./application/services/file.service */ "./apps/resource/src/modules/file/application/services/file.service.ts");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const file_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/file.repository */ "./apps/resource/src/modules/file/infrastructure/adapters/out/persistence/file.repository.ts");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const env_config_1 = __webpack_require__(/*! @libs/configs/env.config */ "./libs/configs/env.config.ts");
const s3_stroage_adapter_1 = __webpack_require__(/*! ./infrastructure/adapters/out/storage/s3-stroage.adapter */ "./apps/resource/src/modules/file/infrastructure/adapters/out/storage/s3-stroage.adapter.ts");
const file_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/file.controller */ "./apps/resource/src/modules/file/infrastructure/adapters/in/web/controllers/v1/file.controller.ts");
let FileModule = class FileModule {
};
exports.FileModule = FileModule;
exports.FileModule = FileModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([entities_1.File]), config_1.ConfigModule.forFeature(env_config_1.APP_CONFIG)],
        controllers: [file_controller_1.CommonFileController],
        providers: [
            config_1.ConfigService,
            file_service_1.FileService,
            {
                provide: 'FileRepositoryPort',
                useClass: file_repository_1.FileRepository,
            },
            {
                provide: 'FileStoragePort',
                useClass: s3_stroage_adapter_1.S3StorageAdapter,
            },
        ],
        exports: [file_service_1.FileService],
    })
], FileModule);


/***/ }),

/***/ "./apps/resource/src/modules/file/infrastructure/adapters/in/web/controllers/v1/file.controller.ts":
/*!*********************************************************************************************************!*\
  !*** ./apps/resource/src/modules/file/infrastructure/adapters/in/web/controllers/v1/file.controller.ts ***!
  \*********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CommonFileController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const platform_express_1 = __webpack_require__(/*! @nestjs/platform-express */ "@nestjs/platform-express");
const file_service_1 = __webpack_require__(/*! @resource/modules/file/application/services/file.service */ "./apps/resource/src/modules/file/application/services/file.service.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const file_response_dto_1 = __webpack_require__(/*! @resource/modules/file/application/dtos/file-response.dto */ "./apps/resource/src/modules/file/application/dtos/file-response.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
let CommonFileController = class CommonFileController {
    constructor(fileService) {
        this.fileService = fileService;
    }
    async uploadFile(file) {
        return this.fileService.uploadFile(file);
    }
    async deleteFile(fileId) {
        await this.fileService.deleteFile({ fileId });
    }
};
exports.CommonFileController = CommonFileController;
__decorate([
    (0, common_1.Post)('upload'),
    (0, swagger_1.ApiConsumes)('multipart/form-data'),
    (0, swagger_1.ApiBody)({
        schema: {
            type: 'object',
            properties: {
                file: {
                    type: 'string',
                    format: 'binary',
                },
            },
        },
    }),
    (0, swagger_1.ApiOperation)({ summary: '파일 업로드' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '파일 업로드 성공', type: file_response_dto_1.FileResponseDto }),
    (0, common_1.UseInterceptors)((0, platform_express_1.FileInterceptor)('file')),
    __param(0, (0, common_1.UploadedFile)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof Express !== "undefined" && (_b = Express.Multer) !== void 0 && _b.File) === "function" ? _c : Object]),
    __metadata("design:returntype", Promise)
], CommonFileController.prototype, "uploadFile", null);
__decorate([
    (0, common_1.Delete)(':fileId'),
    (0, swagger_1.ApiOperation)({ summary: '파일 삭제' }),
    (0, api_responses_decorator_1.ApiDataResponse)({ status: 200, description: '파일 삭제 성공' }),
    __param(0, (0, common_1.Param)('fileId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], CommonFileController.prototype, "deleteFile", null);
exports.CommonFileController = CommonFileController = __decorate([
    (0, swagger_1.ApiTags)('0. 파일 - 공통 페이지'),
    (0, common_1.Controller)('v1/files'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    __metadata("design:paramtypes", [typeof (_a = typeof file_service_1.FileService !== "undefined" && file_service_1.FileService) === "function" ? _a : Object])
], CommonFileController);


/***/ }),

/***/ "./apps/resource/src/modules/file/infrastructure/adapters/out/persistence/file.repository.ts":
/*!***************************************************************************************************!*\
  !*** ./apps/resource/src/modules/file/infrastructure/adapters/out/persistence/file.repository.ts ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FileRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let FileRepository = class FileRepository {
    constructor(fileRepository) {
        this.fileRepository = fileRepository;
    }
    async save(file) {
        const savedFile = await this.fileRepository.save(file);
        return savedFile;
    }
    async findById(fileId) {
        const fileEntity = await this.fileRepository.findOne({ where: { fileId } });
        return fileEntity;
    }
    async findByFilePath(filePath) {
        const fileEntity = await this.fileRepository.findOne({ where: { filePath } });
        return fileEntity;
    }
    async findAllByFilePath(filePath) {
        const fileEntities = await this.fileRepository.find({ where: { filePath: (0, typeorm_2.In)(filePath) } });
        return fileEntities;
    }
    async delete(fileId) {
        await this.fileRepository.delete({ fileId });
    }
};
exports.FileRepository = FileRepository;
exports.FileRepository = FileRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.File)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], FileRepository);


/***/ }),

/***/ "./apps/resource/src/modules/file/infrastructure/adapters/out/storage/s3-stroage.adapter.ts":
/*!**************************************************************************************************!*\
  !*** ./apps/resource/src/modules/file/infrastructure/adapters/out/storage/s3-stroage.adapter.ts ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.S3StorageAdapter = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const client_s3_1 = __webpack_require__(/*! @aws-sdk/client-s3 */ "@aws-sdk/client-s3");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let S3StorageAdapter = class S3StorageAdapter {
    constructor(configService) {
        this.configService = configService;
        this.bucketName = this.configService.get('S3_BUCKET_NAME');
        this.s3Client = new client_s3_1.S3Client({
            region: this.configService.get('S3_REGION'),
            endpoint: this.configService.get('S3_ENDPOINT'),
            credentials: {
                accessKeyId: this.configService.get('S3_ACCESS_KEY'),
                secretAccessKey: this.configService.get('S3_SECRET_KEY'),
            },
            forcePathStyle: true,
        });
    }
    async uploadFile(file, options) {
        const fileExtension = file.originalname.split('.').pop();
        const fileName = `${date_util_1.DateUtil.now().format('YYYYMMDDHHmmss')}.${fileExtension}`;
        try {
            await this.s3Client.send(new client_s3_1.PutObjectCommand({
                Bucket: this.bucketName,
                Key: fileName,
                Body: file.buffer,
                ContentType: file.mimetype,
            }));
            const newFile = {
                fileName: fileName,
                filePath: this.getFileUrl(fileName),
            };
            return newFile;
        }
        catch (error) {
            throw new Error(`Failed to upload file to S3: ${error.message}`);
        }
    }
    async deleteFile(file) {
        try {
            await this.s3Client.send(new client_s3_1.DeleteObjectCommand({
                Bucket: this.bucketName,
                Key: file.fileName,
            }));
        }
        catch (error) {
            throw new Error(`Failed to delete file from S3: ${error.message}`);
        }
    }
    getFileUrl(fileKey) {
        return `${this.configService.get('S3_ENDPOINT').replace('s3', 'object/public')}/${this.bucketName}/${fileKey}`;
    }
};
exports.S3StorageAdapter = S3StorageAdapter;
exports.S3StorageAdapter = S3StorageAdapter = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _a : Object])
], S3StorageAdapter);


/***/ }),

/***/ "./apps/resource/src/modules/notification/application/dto/create-notification.dto.ts":
/*!*******************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/application/dto/create-notification.dto.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SendNotificationDto = exports.CreateEmployeeNotificationDto = exports.CreateNotificationDto = exports.CreateNotificationDatatDto = void 0;
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class CreateNotificationDatatDto {
}
exports.CreateNotificationDatatDto = CreateNotificationDatatDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '예약 ID, 예약 알림 시 필수' }),
    __metadata("design:type", String)
], CreateNotificationDatatDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '예약 제목, 예약 알림 시 필수' }),
    __metadata("design:type", String)
], CreateNotificationDatatDto.prototype, "reservationTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '예약 날짜, 예약 알림 시 필수' }),
    __metadata("design:type", String)
], CreateNotificationDatatDto.prototype, "reservationDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '예약 시작 전 분 수, 예약 시간 알림 시 필수' }),
    __metadata("design:type", Number)
], CreateNotificationDatatDto.prototype, "beforeMinutes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID, 자원 알림 시 필수' }),
    __metadata("design:type", String)
], CreateNotificationDatatDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: true, description: '자원 이름' }),
    __metadata("design:type", String)
], CreateNotificationDatatDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType, required: true, description: '자원 타입' }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], CreateNotificationDatatDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '소모품 이름, 소모품 알림 시 필수' }),
    __metadata("design:type", String)
], CreateNotificationDatatDto.prototype, "consumableName", void 0);
class CreateNotificationDto {
}
exports.CreateNotificationDto = CreateNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "body", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", CreateNotificationDatatDto)
], CreateNotificationDto.prototype, "notificationData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateNotificationDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], CreateNotificationDto.prototype, "isSent", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: notification_type_enum_1.NotificationType }),
    __metadata("design:type", typeof (_b = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _b : Object)
], CreateNotificationDto.prototype, "notificationType", void 0);
class CreateEmployeeNotificationDto {
}
exports.CreateEmployeeNotificationDto = CreateEmployeeNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateEmployeeNotificationDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], CreateEmployeeNotificationDto.prototype, "notificationId", void 0);
class SendNotificationDto {
}
exports.SendNotificationDto = SendNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ enum: notification_type_enum_1.NotificationType }),
    __metadata("design:type", typeof (_c = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _c : Object)
], SendNotificationDto.prototype, "notificationType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", CreateNotificationDatatDto)
], SendNotificationDto.prototype, "notificationData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: ['1256124-ef14-4124-9124-124124124124'],
        description: '알림 수신자 목록 (employeeId)',
    }),
    __metadata("design:type", Array)
], SendNotificationDto.prototype, "notificationTarget", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/notification/application/dto/push-subscription.dto.ts":
/*!*****************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/application/dto/push-subscription.dto.ts ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PushSubscriptionDto = exports.WebPushDto = exports.FCMDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class FCMDto {
}
exports.FCMDto = FCMDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], FCMDto.prototype, "token", void 0);
class WebPushDto {
}
exports.WebPushDto = WebPushDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], WebPushDto.prototype, "endpoint", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        type: 'object',
        properties: {
            auth: { type: 'string' },
            p256dh: { type: 'string' },
        },
    }),
    __metadata("design:type", Object)
], WebPushDto.prototype, "keys", void 0);
class PushSubscriptionDto {
}
exports.PushSubscriptionDto = PushSubscriptionDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: FCMDto, required: false }),
    __metadata("design:type", FCMDto)
], PushSubscriptionDto.prototype, "fcm", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: WebPushDto, required: false }),
    __metadata("design:type", WebPushDto)
], PushSubscriptionDto.prototype, "webPush", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/notification/application/dto/response-notification.dto.ts":
/*!*********************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/application/dto/response-notification.dto.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResponseNotificationDto = exports.NotificationDataDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class NotificationDataDto {
}
exports.NotificationDataDto = NotificationDataDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType, required: false }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], NotificationDataDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "reservationTitle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], NotificationDataDto.prototype, "reservationDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], NotificationDataDto.prototype, "beforeMinutes", void 0);
class ResponseNotificationDto {
}
exports.ResponseNotificationDto = ResponseNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "notificationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "body", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: NotificationDataDto }),
    __metadata("design:type", NotificationDataDto)
], ResponseNotificationDto.prototype, "notificationData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResponseNotificationDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: notification_type_enum_1.NotificationType }),
    __metadata("design:type", typeof (_b = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _b : Object)
], ResponseNotificationDto.prototype, "notificationType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResponseNotificationDto.prototype, "isRead", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/notification/application/dto/send-notification.dto.ts":
/*!*****************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/application/dto/send-notification.dto.ts ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PushNotificationDto = exports.PushNotificationPayload = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const push_subscription_dto_1 = __webpack_require__(/*! ./push-subscription.dto */ "./apps/resource/src/modules/notification/application/dto/push-subscription.dto.ts");
class PushNotificationPayload {
}
exports.PushNotificationPayload = PushNotificationPayload;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], PushNotificationPayload.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], PushNotificationPayload.prototype, "body", void 0);
class PushNotificationDto {
}
exports.PushNotificationDto = PushNotificationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: PushNotificationPayload }),
    __metadata("design:type", PushNotificationPayload)
], PushNotificationDto.prototype, "payload", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: push_subscription_dto_1.PushSubscriptionDto }),
    __metadata("design:type", typeof (_a = typeof push_subscription_dto_1.PushSubscriptionDto !== "undefined" && push_subscription_dto_1.PushSubscriptionDto) === "function" ? _a : Object)
], PushNotificationDto.prototype, "subscription", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/notification/application/handler/notification-event.handler.ts":
/*!**************************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/application/handler/notification-event.handler.ts ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationEventHandler = void 0;
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const notification_usecase_1 = __webpack_require__(/*! ../usecases/notification.usecase */ "./apps/resource/src/modules/notification/application/usecases/notification.usecase.ts");
let NotificationEventHandler = class NotificationEventHandler {
    constructor(notificationUsecase) {
        this.notificationUsecase = notificationUsecase;
    }
    async handleCreateNotificationEvent(payload) {
        await this.notificationUsecase.createNotification(payload.notificationType, payload.notificationData, payload.notiTarget, payload.repositoryOptions);
    }
};
exports.NotificationEventHandler = NotificationEventHandler;
__decorate([
    (0, event_emitter_1.OnEvent)('create.notification'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], NotificationEventHandler.prototype, "handleCreateNotificationEvent", null);
exports.NotificationEventHandler = NotificationEventHandler = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_usecase_1.NotificationUsecase !== "undefined" && notification_usecase_1.NotificationUsecase) === "function" ? _a : Object])
], NotificationEventHandler);


/***/ }),

/***/ "./apps/resource/src/modules/notification/application/services/adapter.service.ts":
/*!****************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/application/services/adapter.service.ts ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdapterService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const push_notification_port_1 = __webpack_require__(/*! @resource/modules/notification/domain/ports/push-notification.port */ "./apps/resource/src/modules/notification/domain/ports/push-notification.port.ts");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
let AdapterService = class AdapterService {
    constructor(pushNotificationService, eventEmitter) {
        this.pushNotificationService = pushNotificationService;
        this.eventEmitter = eventEmitter;
    }
    async send(employeeId, notification) {
        const [subscription] = await this.eventEmitter.emitAsync('find.user.subscription', {
            employeeId,
        });
        if (!subscription) {
            throw new common_1.NotFoundException('Subscription not found');
        }
        const result = await this.pushNotificationService.bulkSendNotification(subscription, {
            title: notification.title,
            body: notification.body,
        });
        const failedTokens = [];
        if (result.failureCount > 0) {
            for (let i = 0; i < result.responses.length; i++) {
                const response = result.responses[i];
                if (!response.success) {
                    failedTokens.push(subscription[i].fcm.token);
                }
            }
            await this.eventEmitter.emitAsync('filter.user.subscription', {
                employeeId,
                subscriptions: subscription.filter((s) => !failedTokens.includes(s.fcm.token)),
            });
        }
    }
    async sendTestNotification(user, payload) {
        const [subscription] = await this.eventEmitter.emitAsync('find.user.subscription', {
            employeeId: user.employeeId,
        });
        await this.pushNotificationService.sendTestNotification(subscription, payload);
    }
};
exports.AdapterService = AdapterService;
exports.AdapterService = AdapterService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('PushNotificationServicePort')),
    __metadata("design:paramtypes", [typeof (_a = typeof push_notification_port_1.PushNotificationPort !== "undefined" && push_notification_port_1.PushNotificationPort) === "function" ? _a : Object, typeof (_b = typeof event_emitter_1.EventEmitter2 !== "undefined" && event_emitter_1.EventEmitter2) === "function" ? _b : Object])
], AdapterService);


/***/ }),

/***/ "./apps/resource/src/modules/notification/application/services/employee-notification.service.ts":
/*!******************************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/application/services/employee-notification.service.ts ***!
  \******************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeNotificationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const employee_notification_repository_port_1 = __webpack_require__(/*! ../../domain/ports/employee-notification.repository.port */ "./apps/resource/src/modules/notification/domain/ports/employee-notification.repository.port.ts");
let EmployeeNotificationService = class EmployeeNotificationService {
    constructor(employeeNotificationRepository) {
        this.employeeNotificationRepository = employeeNotificationRepository;
    }
    async save(createEmployeeNotificationDto, repositoryOptions) {
        return await this.employeeNotificationRepository.save(createEmployeeNotificationDto, repositoryOptions);
    }
    async findOne(repositoryOptions) {
        return await this.employeeNotificationRepository.findOne(repositoryOptions);
    }
    async findAll(repositoryOptions) {
        return await this.employeeNotificationRepository.findAll(repositoryOptions);
    }
    async update(employeeNotificationId, updateEmployeeNotificationDto, repositoryOptions) {
        return await this.employeeNotificationRepository.update(employeeNotificationId, updateEmployeeNotificationDto, repositoryOptions);
    }
    async delete(employeeNotificationId, repositoryOptions) {
        return await this.employeeNotificationRepository.delete(employeeNotificationId, repositoryOptions);
    }
    async deleteByNotificationId(notificationId, repositoryOptions) {
        return await this.employeeNotificationRepository.deleteByNotificationId(notificationId, repositoryOptions);
    }
};
exports.EmployeeNotificationService = EmployeeNotificationService;
exports.EmployeeNotificationService = EmployeeNotificationService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('EmployeeNotificationRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_notification_repository_port_1.EmployeeNotificationRepositoryPort !== "undefined" && employee_notification_repository_port_1.EmployeeNotificationRepositoryPort) === "function" ? _a : Object])
], EmployeeNotificationService);


/***/ }),

/***/ "./apps/resource/src/modules/notification/application/services/notification.service.ts":
/*!*********************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/application/services/notification.service.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const notification_repository_port_1 = __webpack_require__(/*! @resource/modules/notification/domain/ports/notification.repository.port */ "./apps/resource/src/modules/notification/domain/ports/notification.repository.port.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let NotificationService = class NotificationService {
    constructor(notificationRepository) {
        this.notificationRepository = notificationRepository;
    }
    async save(createNotificationDto, repositoryOptions) {
        return await this.notificationRepository.save(createNotificationDto, repositoryOptions);
    }
    async findAll(options) {
        return await this.notificationRepository.findAll(options);
    }
    async update(notificationId, updateNotificationDto) {
        return await this.notificationRepository.update(notificationId, updateNotificationDto);
    }
    async findAllByEmployeeId(employeeId) {
        return [];
    }
    async findById(id) {
        return new entities_1.Notification();
    }
    async markAsRead(id) {
    }
    async markAsUnread(id) {
    }
    async markAllAsRead() {
    }
    async delete(id) {
        await this.notificationRepository.delete(id);
    }
    async count(options) {
        return await this.notificationRepository.count(options);
    }
};
exports.NotificationService = NotificationService;
exports.NotificationService = NotificationService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('NotificationRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_repository_port_1.NotificationRepositoryPort !== "undefined" && notification_repository_port_1.NotificationRepositoryPort) === "function" ? _a : Object])
], NotificationService);


/***/ }),

/***/ "./apps/resource/src/modules/notification/application/usecases/notification.usecase.ts":
/*!*********************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/application/usecases/notification.usecase.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const adapter_service_1 = __webpack_require__(/*! ../services/adapter.service */ "./apps/resource/src/modules/notification/application/services/adapter.service.ts");
const notification_service_1 = __webpack_require__(/*! ../services/notification.service */ "./apps/resource/src/modules/notification/application/services/notification.service.ts");
const push_notification_port_1 = __webpack_require__(/*! @resource/modules/notification/domain/ports/push-notification.port */ "./apps/resource/src/modules/notification/domain/ports/push-notification.port.ts");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const employee_notification_service_1 = __webpack_require__(/*! ../services/employee-notification.service */ "./apps/resource/src/modules/notification/application/services/employee-notification.service.ts");
const cron_1 = __webpack_require__(/*! cron */ "cron");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let NotificationUsecase = class NotificationUsecase {
    constructor(adapterService, notificationService, employeeNotificationService, schedulerRegistry, eventEmitter, pushNotificationService) {
        this.adapterService = adapterService;
        this.notificationService = notificationService;
        this.employeeNotificationService = employeeNotificationService;
        this.schedulerRegistry = schedulerRegistry;
        this.eventEmitter = eventEmitter;
        this.pushNotificationService = pushNotificationService;
    }
    async onModuleInit() {
        console.log('before module init', Array.from(this.schedulerRegistry.getCronJobs().keys()));
        const upcomingNotifications = await this.notificationService.findAll({
            where: { isSent: false },
            relations: ['employees'],
        });
        for (const notification of upcomingNotifications) {
            const notiTarget = notification.employees.map((employee) => employee.employeeId);
            await this.createReservationUpcomingNotification(notification, notiTarget);
        }
        const sentNotifications = await this.notificationService.findAll({
            where: { createdAt: (0, typeorm_1.MoreThanOrEqual)(date_util_1.DateUtil.now().addDays(-3)) },
        });
        for (const notification of sentNotifications) {
            await this.markAsReadAfter3Days(notification);
        }
        console.log('after module init', Array.from(this.schedulerRegistry.getCronJobs().keys()));
    }
    async subscribe(user, subscription) {
        await this.eventEmitter.emitAsync('update.user.subscription', {
            userId: user.userId,
            subscription: subscription,
        });
    }
    async sendDirectNotification(subscription, payload) {
        await this.pushNotificationService.bulkSendNotification([subscription], payload);
    }
    async unsubscribe(user) {
        this.eventEmitter.emit('update.user.subscription', {
            userId: user.userId,
            subscription: null,
        });
    }
    async markAsRead(employeeId, notificationId) {
        const employeeNotification = await this.employeeNotificationService.findOne({
            where: {
                employeeId,
                notificationId,
            },
        });
        if (!employeeNotification) {
            throw new common_1.BadRequestException('There is no data');
        }
        await this.employeeNotificationService.update(employeeNotification.employeeNotificationId, {
            isRead: true,
        });
    }
    async findMyNotifications(employeeId, query) {
        const options = {
            where: {
                employees: { employeeId },
                isSent: true,
            },
        };
        const total = await this.notificationService.count({
            where: options.where,
        });
        if (query) {
            options.skip = query.getOffset();
            options.take = query.limit;
        }
        const notifications = await this.notificationService.findAll({
            ...options,
            relations: ['employees'],
            order: {
                createdAt: 'DESC',
            },
        });
        return {
            items: notifications.map((notification) => {
                return {
                    notificationId: notification.notificationId,
                    title: notification.title,
                    body: notification.body,
                    notificationData: notification.notificationData,
                    notificationType: notification.notificationType,
                    createdAt: notification.createdAt,
                    isRead: notification.employees.find((employee) => employee.employeeId === employeeId).isRead,
                };
            }),
            meta: {
                total,
                page: query.page,
                limit: query.limit,
                hasNext: query.page * query.limit < total,
            },
        };
    }
    async createNotification(notificationType, createNotificationDatatDto, notiTarget, repositoryOptions) {
        notiTarget = Array.from(new Set(notiTarget));
        const createNotificationDto = {
            title: '',
            body: '',
            notificationType: notificationType,
            notificationData: createNotificationDatatDto,
            createdAt: date_util_1.DateUtil.now().format('YYYY-MM-DD HH:mm'),
            isSent: true,
        };
        switch (notificationType) {
            case notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING:
                createNotificationDto.title = `예약 시간이 ${createNotificationDatatDto.beforeMinutes}분 남았습니다.`;
                createNotificationDto.body = `${createNotificationDatatDto.resourceName}`;
                createNotificationDto.createdAt = date_util_1.DateUtil.parse(createNotificationDatatDto.reservationDate)
                    .addMinutes(-createNotificationDatatDto.beforeMinutes)
                    .format('YYYY-MM-DD HH:mm');
                createNotificationDto.isSent = false;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_STATUS_PENDING:
                createNotificationDto.title = `[숙소 확정 대기중] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED:
                createNotificationDto.title = `[예약 확정] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_STATUS_CANCELLED:
                createNotificationDto.title = `[예약 취소] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_STATUS_REJECTED:
                createNotificationDto.title = `[예약 취소 (관리자)] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_TIME_CHANGED:
                createNotificationDto.title = `[예약 시간 변경] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_PARTICIPANT_CHANGED:
                createNotificationDto.title = `[참가자 변경] ${createNotificationDatatDto.reservationTitle}`;
                createNotificationDto.body = `${createNotificationDatatDto.reservationDate}`;
                break;
            case notification_type_enum_1.NotificationType.RESOURCE_CONSUMABLE_REPLACING:
                createNotificationDto.title = `[교체 주기 알림] ${createNotificationDatatDto.consumableName}`;
                createNotificationDto.body = `${createNotificationDatatDto.resourceName}`;
                break;
            case notification_type_enum_1.NotificationType.RESOURCE_VEHICLE_RETURNED:
                createNotificationDto.title = `[차량 반납] 차량이 반납되었습니다.`;
                createNotificationDto.body = `${createNotificationDatatDto.resourceName}`;
                break;
            case notification_type_enum_1.NotificationType.RESOURCE_MAINTENANCE_COMPLETED:
                createNotificationDto.title = `[정비 완료] ${createNotificationDatatDto.consumableName}`;
                createNotificationDto.body = `${createNotificationDatatDto.resourceName}`;
                break;
        }
        const notification = await this.notificationProcess(createNotificationDto, notiTarget, repositoryOptions);
        switch (notificationType) {
            case notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING:
                this.createReservationUpcomingNotification(notification, notiTarget);
                break;
            case notification_type_enum_1.NotificationType.RESERVATION_TIME_CHANGED:
                const notis = await this.notificationService.findAll({
                    where: {
                        notificationType: notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING,
                        notificationData: (0, typeorm_1.Raw)((alias) => `${alias} ->> 'reservationId' = '${createNotificationDatatDto.reservationId}'`),
                        isSent: false,
                    },
                });
                for (const noti of notis) {
                    this.deleteReservationUpcomingNotification(noti);
                    await this.employeeNotificationService.deleteByNotificationId(noti.notificationId);
                    await this.notificationService.delete(noti.notificationId);
                }
            default:
                for (const employeeId of notiTarget) {
                    try {
                        await this.adapterService.send(employeeId, notification);
                    }
                    catch (error) {
                        console.error(`Failed to send notification to employee ${employeeId}: ${error}`);
                    }
                }
                break;
        }
        await this.markAsReadAfter3Days(notification);
    }
    async notificationProcess(createNotificationDto, notiTarget, repositoryOptions) {
        const notification = await this.notificationService.save(createNotificationDto, repositoryOptions);
        for (const employeeId of notiTarget) {
            const employeeNotification = await this.employeeNotificationService.save({
                employeeId: employeeId,
                notificationId: notification.notificationId,
            }, repositoryOptions);
        }
        return notification;
    }
    async deleteReservationUpcomingNotification(notification) {
        try {
            const jobName = `upcoming-${notification.notificationId}}`;
            this.schedulerRegistry.deleteCronJob(jobName);
        }
        catch (error) {
            console.error(`Failed to delete cron job ${notification.notificationId}: ${error}`);
        }
    }
    async createReservationUpcomingNotification(notification, notiTarget) {
        const jobName = `upcoming-${notification.notificationId}`;
        const notificationDate = new Date(notification.createdAt);
        if (notificationDate.getTime() <= Date.now()) {
            console.log(`Notification time ${notificationDate} is in the past, skipping cron job creation`);
            return;
        }
        const job = new cron_1.CronJob(notificationDate, async () => {
            for (const employeeId of notiTarget) {
                try {
                    await this.adapterService.send(employeeId, notification);
                }
                catch (error) {
                    console.error(`Failed to send notification to employee ${employeeId}: ${error}`);
                }
                finally {
                    await this.notificationService.update(notification.notificationId, { isSent: true });
                }
            }
        });
        this.schedulerRegistry.addCronJob(jobName, job);
        console.log(Array.from(this.schedulerRegistry.getCronJobs().keys()));
        job.start();
    }
    async markAsReadAfter3Days(notification) {
        const parsedDate = date_util_1.DateUtil.parse(notification.createdAt).addDays(3).toDate();
        const notificationDate = new Date(parsedDate);
        const jobName = `mark-as-read-${notification.notificationId}-${date_util_1.DateUtil.now().format('YYYYMMDDHHmmssSSS')}`;
        const job = new cron_1.CronJob(notificationDate, async () => {
            const employeeNotifications = await this.employeeNotificationService.findAll({
                where: { notificationId: notification.notificationId },
            });
            for (const employeeNotification of employeeNotifications) {
                await this.employeeNotificationService.update(employeeNotification.employeeNotificationId, {
                    isRead: true,
                });
            }
        });
        this.schedulerRegistry.addCronJob(jobName, job);
        job.start();
    }
    async sendTestNotification(employeeId, payload) {
        await this.adapterService.send(employeeId, payload);
    }
};
exports.NotificationUsecase = NotificationUsecase;
exports.NotificationUsecase = NotificationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __param(5, (0, common_1.Inject)('PushNotificationServicePort')),
    __metadata("design:paramtypes", [typeof (_a = typeof adapter_service_1.AdapterService !== "undefined" && adapter_service_1.AdapterService) === "function" ? _a : Object, typeof (_b = typeof notification_service_1.NotificationService !== "undefined" && notification_service_1.NotificationService) === "function" ? _b : Object, typeof (_c = typeof employee_notification_service_1.EmployeeNotificationService !== "undefined" && employee_notification_service_1.EmployeeNotificationService) === "function" ? _c : Object, typeof (_d = typeof schedule_1.SchedulerRegistry !== "undefined" && schedule_1.SchedulerRegistry) === "function" ? _d : Object, typeof (_e = typeof event_emitter_1.EventEmitter2 !== "undefined" && event_emitter_1.EventEmitter2) === "function" ? _e : Object, typeof (_f = typeof push_notification_port_1.PushNotificationPort !== "undefined" && push_notification_port_1.PushNotificationPort) === "function" ? _f : Object])
], NotificationUsecase);


/***/ }),

/***/ "./apps/resource/src/modules/notification/domain/ports/employee-notification.repository.port.ts":
/*!******************************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/domain/ports/employee-notification.repository.port.ts ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/notification/domain/ports/notification.repository.port.ts":
/*!*********************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/domain/ports/notification.repository.port.ts ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/notification/domain/ports/push-notification.port.ts":
/*!***************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/domain/ports/push-notification.port.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/notification/infrastructure/adapters/in/domain/controllers/employee-notification.controllers.ts":
/*!***********************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/infrastructure/adapters/in/domain/controllers/employee-notification.controllers.ts ***!
  \***********************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeNotificationDomainController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const employee_notification_service_1 = __webpack_require__(/*! @resource/modules/notification/application/services/employee-notification.service */ "./apps/resource/src/modules/notification/application/services/employee-notification.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const create_notification_dto_1 = __webpack_require__(/*! @resource/modules/notification/application/dto/create-notification.dto */ "./apps/resource/src/modules/notification/application/dto/create-notification.dto.ts");
let EmployeeNotificationDomainController = class EmployeeNotificationDomainController {
    constructor(employeeNotificationService) {
        this.employeeNotificationService = employeeNotificationService;
    }
    async findAll() {
        return this.employeeNotificationService.findAll();
    }
    async findOne() {
        return this.employeeNotificationService.findOne();
    }
    async create(createEmployeeNotificationDto) {
        return this.employeeNotificationService.save(createEmployeeNotificationDto);
    }
    async update(id, updateEmployeeNotificationDto) {
        return this.employeeNotificationService.update(id, updateEmployeeNotificationDto);
    }
};
exports.EmployeeNotificationDomainController = EmployeeNotificationDomainController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '모든 직원 알림 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '모든 직원 알림 조회 성공', type: [entities_1.EmployeeNotification] }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], EmployeeNotificationDomainController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)('one'),
    (0, swagger_1.ApiOperation)({ summary: '직원 알림 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '직원 알림 조회 성공', type: entities_1.EmployeeNotification }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], EmployeeNotificationDomainController.prototype, "findOne", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '직원 알림 생성' }),
    (0, swagger_1.ApiResponse)({ status: 201, description: '직원 알림 생성 성공', type: entities_1.EmployeeNotification }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof create_notification_dto_1.CreateEmployeeNotificationDto !== "undefined" && create_notification_dto_1.CreateEmployeeNotificationDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], EmployeeNotificationDomainController.prototype, "create", null);
__decorate([
    (0, common_1.Patch)(':id'),
    (0, swagger_1.ApiOperation)({ summary: '직원 알림 업데이트' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '직원 알림 업데이트 성공', type: entities_1.EmployeeNotification }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_f = typeof Partial !== "undefined" && Partial) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], EmployeeNotificationDomainController.prototype, "update", null);
exports.EmployeeNotificationDomainController = EmployeeNotificationDomainController = __decorate([
    (0, swagger_1.ApiTags)('Employee Notification Domain Test'),
    (0, common_1.Controller)('domain/employee-notifications'),
    (0, public_decorator_1.Public)(),
    __metadata("design:paramtypes", [typeof (_a = typeof employee_notification_service_1.EmployeeNotificationService !== "undefined" && employee_notification_service_1.EmployeeNotificationService) === "function" ? _a : Object])
], EmployeeNotificationDomainController);


/***/ }),

/***/ "./apps/resource/src/modules/notification/infrastructure/adapters/in/domain/controllers/notification.controllers.ts":
/*!**************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/infrastructure/adapters/in/domain/controllers/notification.controllers.ts ***!
  \**************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationDomainController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const notification_service_1 = __webpack_require__(/*! @resource/modules/notification/application/services/notification.service */ "./apps/resource/src/modules/notification/application/services/notification.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const create_notification_dto_1 = __webpack_require__(/*! @resource/modules/notification/application/dto/create-notification.dto */ "./apps/resource/src/modules/notification/application/dto/create-notification.dto.ts");
let NotificationDomainController = class NotificationDomainController {
    constructor(notificationService) {
        this.notificationService = notificationService;
    }
    async findAll() {
        return this.notificationService.findAll();
    }
    async count() {
        return this.notificationService.count();
    }
    async findById(id) {
        return this.notificationService.findById(id);
    }
    async create(createNotificationDto) {
        return this.notificationService.save(createNotificationDto);
    }
    async update(id, notification) {
        return this.notificationService.update(id, notification);
    }
    async markAsRead(id) {
        return this.notificationService.markAsRead(id);
    }
    async markAsUnread(id) {
        return this.notificationService.markAsUnread(id);
    }
    async markAllAsRead() {
        return this.notificationService.markAllAsRead();
    }
};
exports.NotificationDomainController = NotificationDomainController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '모든 알림 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '모든 알림 조회 성공', type: [entities_1.Notification] }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], NotificationDomainController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)('count'),
    (0, swagger_1.ApiOperation)({ summary: '알림 개수 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '알림 개수 조회 성공', type: Number }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], NotificationDomainController.prototype, "count", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, swagger_1.ApiOperation)({ summary: '알림 ID로 조회' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '알림 조회 성공', type: entities_1.Notification }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], NotificationDomainController.prototype, "findById", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '알림 생성' }),
    (0, swagger_1.ApiResponse)({ status: 201, description: '알림 생성 성공', type: entities_1.Notification }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof create_notification_dto_1.CreateNotificationDto !== "undefined" && create_notification_dto_1.CreateNotificationDto) === "function" ? _e : Object]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], NotificationDomainController.prototype, "create", null);
__decorate([
    (0, common_1.Patch)(':id'),
    (0, swagger_1.ApiOperation)({ summary: '알림 업데이트' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '알림 업데이트 성공', type: entities_1.Notification }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_g = typeof Partial !== "undefined" && Partial) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], NotificationDomainController.prototype, "update", null);
__decorate([
    (0, common_1.Patch)(':id/read'),
    (0, swagger_1.ApiOperation)({ summary: '알림 읽음 표시' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '알림 읽음 표시 성공' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], NotificationDomainController.prototype, "markAsRead", null);
__decorate([
    (0, common_1.Patch)(':id/unread'),
    (0, swagger_1.ApiOperation)({ summary: '알림 읽지 않음 표시' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '알림 읽지 않음 표시 성공' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], NotificationDomainController.prototype, "markAsUnread", null);
__decorate([
    (0, common_1.Patch)('read-all'),
    (0, swagger_1.ApiOperation)({ summary: '모든 알림 읽음 표시' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: '모든 알림 읽음 표시 성공' }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], NotificationDomainController.prototype, "markAllAsRead", null);
exports.NotificationDomainController = NotificationDomainController = __decorate([
    (0, swagger_1.ApiTags)('Notification Domain Test'),
    (0, common_1.Controller)('domain/notifications'),
    (0, public_decorator_1.Public)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_service_1.NotificationService !== "undefined" && notification_service_1.NotificationService) === "function" ? _a : Object])
], NotificationDomainController);


/***/ }),

/***/ "./apps/resource/src/modules/notification/infrastructure/adapters/in/web/controllers/v1/notification.controller.ts":
/*!*************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/infrastructure/adapters/in/web/controllers/v1/notification.controller.ts ***!
  \*************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserNotificationController = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const notification_usecase_1 = __webpack_require__(/*! @resource/modules/notification/application/usecases/notification.usecase */ "./apps/resource/src/modules/notification/application/usecases/notification.usecase.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const push_subscription_dto_1 = __webpack_require__(/*! @resource/modules/notification/application/dto/push-subscription.dto */ "./apps/resource/src/modules/notification/application/dto/push-subscription.dto.ts");
const response_notification_dto_1 = __webpack_require__(/*! @resource/modules/notification/application/dto/response-notification.dto */ "./apps/resource/src/modules/notification/application/dto/response-notification.dto.ts");
const create_notification_dto_1 = __webpack_require__(/*! @resource/modules/notification/application/dto/create-notification.dto */ "./apps/resource/src/modules/notification/application/dto/create-notification.dto.ts");
const paginate_query_dto_1 = __webpack_require__(/*! @libs/dtos/paginate-query.dto */ "./libs/dtos/paginate-query.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const send_notification_dto_1 = __webpack_require__(/*! @resource/modules/notification/application/dto/send-notification.dto */ "./apps/resource/src/modules/notification/application/dto/send-notification.dto.ts");
let UserNotificationController = class UserNotificationController {
    constructor(notificationUsecase) {
        this.notificationUsecase = notificationUsecase;
    }
    async subscribe(user, subscription) {
        await this.notificationUsecase.subscribe(user, subscription);
    }
    async sendSuccess(body) {
        await this.notificationUsecase.sendDirectNotification(body.subscription, body.payload);
    }
    async send(sendNotificationDto) {
        await this.notificationUsecase.createNotification(sendNotificationDto.notificationType, sendNotificationDto.notificationData, sendNotificationDto.notificationTarget);
    }
    async findAllByEmployeeId(employeeId, query) {
        return await this.notificationUsecase.findMyNotifications(employeeId, query);
    }
    async markAsRead(user, notificationId) {
        await this.notificationUsecase.markAsRead(user.employeeId, notificationId);
    }
    async sendTest(body) {
        const employeeId = body.data.employeeId;
        const payload = body.notification;
        await this.notificationUsecase.sendTestNotification(employeeId, payload);
    }
};
exports.UserNotificationController = UserNotificationController;
__decorate([
    (0, common_1.Post)('subscribe'),
    (0, swagger_1.ApiOperation)({ summary: '웹 푸시 구독' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '웹 푸시 구독 성공',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _b : Object, typeof (_c = typeof push_subscription_dto_1.PushSubscriptionDto !== "undefined" && push_subscription_dto_1.PushSubscriptionDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], UserNotificationController.prototype, "subscribe", null);
__decorate([
    (0, common_1.Post)('subscribe/success'),
    (0, swagger_1.ApiOperation)({ summary: '웹 푸시 구독 성공' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '웹 푸시 구독 성공',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof send_notification_dto_1.PushNotificationDto !== "undefined" && send_notification_dto_1.PushNotificationDto) === "function" ? _e : Object]),
    __metadata("design:returntype", Promise)
], UserNotificationController.prototype, "sendSuccess", null);
__decorate([
    (0, common_1.Post)('send'),
    (0, swagger_1.ApiOperation)({ summary: '웹 푸시 알림 전송' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '웹 푸시 알림 전송 성공',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof create_notification_dto_1.SendNotificationDto !== "undefined" && create_notification_dto_1.SendNotificationDto) === "function" ? _f : Object]),
    __metadata("design:returntype", Promise)
], UserNotificationController.prototype, "send", null);
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '알람 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '알람 목록 조회 성공',
        type: [response_notification_dto_1.ResponseNotificationDto],
        isPaginated: true,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'page',
        type: Number,
        required: false,
    }),
    (0, swagger_1.ApiQuery)({
        name: 'limit',
        type: Number,
        required: false,
    }),
    __param(0, (0, user_decorator_1.User)('employeeId')),
    __param(1, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_g = typeof paginate_query_dto_1.PaginationQueryDto !== "undefined" && paginate_query_dto_1.PaginationQueryDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], UserNotificationController.prototype, "findAllByEmployeeId", null);
__decorate([
    (0, common_1.Patch)(':notificationId/read'),
    (0, swagger_1.ApiOperation)({ summary: '알람 읽음 처리' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('notificationId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _j : Object, String]),
    __metadata("design:returntype", Promise)
], UserNotificationController.prototype, "markAsRead", null);
__decorate([
    (0, public_decorator_1.Public)(),
    (0, swagger_1.ApiTags)('알림테스트'),
    (0, common_1.Post)('send/test'),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], UserNotificationController.prototype, "sendTest", null);
exports.UserNotificationController = UserNotificationController = __decorate([
    (0, swagger_1.ApiTags)('5. 알림 - 사용자 페이지'),
    (0, common_1.Controller)('v1/notifications'),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof notification_usecase_1.NotificationUsecase !== "undefined" && notification_usecase_1.NotificationUsecase) === "function" ? _a : Object])
], UserNotificationController);


/***/ }),

/***/ "./apps/resource/src/modules/notification/infrastructure/adapters/out/device/fcm-push.adapter.ts":
/*!*******************************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/infrastructure/adapters/out/device/fcm-push.adapter.ts ***!
  \*******************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FCMAdapter = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const app_1 = __webpack_require__(/*! firebase-admin/app */ "firebase-admin/app");
const messaging_1 = __webpack_require__(/*! firebase-admin/messaging */ "firebase-admin/messaging");
let FCMAdapter = class FCMAdapter {
    constructor(configService) {
        this.configService = configService;
        try {
            (0, app_1.initializeApp)({
                credential: (0, app_1.cert)({
                    clientEmail: this.configService.get('firebase.clientEmail'),
                    privateKey: this.configService.get('firebase.privateKey').replace(/\\n/g, '\n'),
                    projectId: this.configService.get('firebase.projectId'),
                }),
            });
            console.log('Firebase Admin initialized successfully');
        }
        catch (error) {
            console.error('Firebase initialization error:', error);
            throw error;
        }
    }
    async sendNotification(subscription, payload) {
        try {
            if (!subscription || !subscription.fcm || !subscription.fcm.token) {
                throw new common_1.BadRequestException('FCM token is missing');
            }
            const message = {
                token: subscription.fcm.token,
                notification: {
                    title: payload.title,
                    body: payload.body,
                },
                data: {
                    title: payload.title,
                    body: payload.body,
                },
            };
            const response = await (0, messaging_1.getMessaging)()
                .send(message)
                .then((response) => {
                console.log('FCM send successful. Message ID:', response);
                return { success: true, message: response, error: null };
            })
                .catch((error) => {
                console.error('FCM send error:', {
                    code: error.code,
                    message: error.message,
                    details: error.details,
                    stack: error.stack,
                });
                return { success: false, message: 'failed', error: error.message };
            });
            return response;
        }
        catch (error) {
            console.error('FCM send error:', {
                code: error.code,
                message: error.message,
                details: error.details,
                stack: error.stack,
            });
            return { success: false, message: 'failed', error: error.message };
        }
    }
    async bulkSendNotification(subscriptions, payload) {
        try {
            const tokens = subscriptions.map((subscription) => subscription.fcm.token);
            const response = await (0, messaging_1.getMessaging)()
                .sendEachForMulticast({
                tokens: tokens,
                data: {
                    title: payload.title,
                    body: payload.body,
                },
            })
                .then((response) => {
                console.log('FCM send successful. Message ID:', response);
                return response;
            });
            return response;
        }
        catch (error) {
            return { responses: [], successCount: -1, failureCount: -1 };
        }
    }
    async sendTestNotification(subscription, payload) {
        try {
            const message = {
                token: subscription.fcm.token,
                ...payload,
            };
            const response = await (0, messaging_1.getMessaging)()
                .send(message)
                .then((response) => {
                console.log('FCM send successful. Message ID:', response);
                return { success: true, message: response, error: null };
            })
                .catch((error) => {
                console.error('FCM send error:', {
                    code: error.code,
                    message: error.message,
                    details: error.details,
                    stack: error.stack,
                });
                return { success: false, message: 'failed', error: error.message };
            });
            return response;
        }
        catch (error) {
            console.error('FCM send error:', {
                code: error.code,
                message: error.message,
                details: error.details,
                stack: error.stack,
            });
            return { success: false, message: 'failed', error: error.message };
        }
    }
};
exports.FCMAdapter = FCMAdapter;
exports.FCMAdapter = FCMAdapter = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof config_1.ConfigService !== "undefined" && config_1.ConfigService) === "function" ? _a : Object])
], FCMAdapter);


/***/ }),

/***/ "./apps/resource/src/modules/notification/infrastructure/adapters/out/persistence/employee-notification.repository.ts":
/*!****************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/infrastructure/adapters/out/persistence/employee-notification.repository.ts ***!
  \****************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeNotificationRepository = void 0;
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
let EmployeeNotificationRepository = class EmployeeNotificationRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(createEmployeeNotificationDto, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.EmployeeNotification)
            : this.repository;
        return await repository.save(createEmployeeNotificationDto);
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.EmployeeNotification)
            : this.repository;
        return await repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
        });
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.EmployeeNotification)
            : this.repository;
        return await repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
        });
    }
    async update(employeeNotificationId, updateEmployeeNotificationDto, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.EmployeeNotification)
            : this.repository;
        const result = await repository.update(employeeNotificationId, updateEmployeeNotificationDto);
        return await repository.findOne({ where: { employeeNotificationId } });
    }
    async delete(employeeNotificationId, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.EmployeeNotification)
            : this.repository;
        await repository.delete(employeeNotificationId);
    }
    async deleteByNotificationId(notificationId, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.EmployeeNotification)
            : this.repository;
        await repository.delete({ notificationId });
    }
};
exports.EmployeeNotificationRepository = EmployeeNotificationRepository;
exports.EmployeeNotificationRepository = EmployeeNotificationRepository = __decorate([
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.EmployeeNotification)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], EmployeeNotificationRepository);


/***/ }),

/***/ "./apps/resource/src/modules/notification/infrastructure/adapters/out/persistence/notification.repository.ts":
/*!*******************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/infrastructure/adapters/out/persistence/notification.repository.ts ***!
  \*******************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationRepository = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const notification_entity_1 = __webpack_require__(/*! @libs/entities/notification.entity */ "./libs/entities/notification.entity.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_2 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
let NotificationRepository = class NotificationRepository {
    constructor(notificationRepository) {
        this.notificationRepository = notificationRepository;
    }
    async save(createNotificationDto, options) {
        const repository = options?.queryRunner
            ? options.queryRunner.manager.getRepository(notification_entity_1.Notification)
            : this.notificationRepository;
        return repository.save(createNotificationDto);
    }
    async findAll(options) {
        const repository = options?.queryRunner
            ? options.queryRunner.manager.getRepository(notification_entity_1.Notification)
            : this.notificationRepository;
        return repository.find({
            where: options?.where,
            relations: options?.relations,
            order: options?.order,
            skip: options?.skip,
            take: options?.take,
        });
    }
    async findOne(options) {
        const repository = options?.queryRunner
            ? options.queryRunner.manager.getRepository(notification_entity_1.Notification)
            : this.notificationRepository;
        return repository.findOne({
            where: options?.where,
            relations: options?.relations,
        });
    }
    async update(notificationId, updateNotificationDto, options) {
        const repository = options?.queryRunner
            ? options.queryRunner.manager.getRepository(notification_entity_1.Notification)
            : this.notificationRepository;
        await repository.update(notificationId, updateNotificationDto);
        return await this.findOne({ where: { notificationId } });
    }
    async delete(notificationId, options) {
        const repository = options?.queryRunner
            ? options.queryRunner.manager.getRepository(notification_entity_1.Notification)
            : this.notificationRepository;
        await repository.delete(notificationId);
    }
    async count(options) {
        const repository = options?.queryRunner
            ? options.queryRunner.manager.getRepository(notification_entity_1.Notification)
            : this.notificationRepository;
        return await repository.count({
            where: options?.where,
        });
    }
};
exports.NotificationRepository = NotificationRepository;
exports.NotificationRepository = NotificationRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_2.InjectRepository)(notification_entity_1.Notification)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_1.Repository !== "undefined" && typeorm_1.Repository) === "function" ? _a : Object])
], NotificationRepository);


/***/ }),

/***/ "./apps/resource/src/modules/notification/notification.domain.module.ts":
/*!******************************************************************************!*\
  !*** ./apps/resource/src/modules/notification/notification.domain.module.ts ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationDomainModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const notification_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/notification.repository */ "./apps/resource/src/modules/notification/infrastructure/adapters/out/persistence/notification.repository.ts");
const employee_notification_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/employee-notification.repository */ "./apps/resource/src/modules/notification/infrastructure/adapters/out/persistence/employee-notification.repository.ts");
const notification_service_1 = __webpack_require__(/*! ./application/services/notification.service */ "./apps/resource/src/modules/notification/application/services/notification.service.ts");
const employee_notification_service_1 = __webpack_require__(/*! ./application/services/employee-notification.service */ "./apps/resource/src/modules/notification/application/services/employee-notification.service.ts");
const notification_controllers_1 = __webpack_require__(/*! ./infrastructure/adapters/in/domain/controllers/notification.controllers */ "./apps/resource/src/modules/notification/infrastructure/adapters/in/domain/controllers/notification.controllers.ts");
const employee_notification_controllers_1 = __webpack_require__(/*! ./infrastructure/adapters/in/domain/controllers/employee-notification.controllers */ "./apps/resource/src/modules/notification/infrastructure/adapters/in/domain/controllers/employee-notification.controllers.ts");
let NotificationDomainModule = class NotificationDomainModule {
};
exports.NotificationDomainModule = NotificationDomainModule;
exports.NotificationDomainModule = NotificationDomainModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([entities_1.Notification, entities_1.EmployeeNotification])],
        providers: [
            notification_service_1.NotificationService,
            employee_notification_service_1.EmployeeNotificationService,
            notification_repository_1.NotificationRepository,
            employee_notification_repository_1.EmployeeNotificationRepository,
            {
                provide: 'NotificationRepositoryPort',
                useClass: notification_repository_1.NotificationRepository,
            },
            {
                provide: 'EmployeeNotificationRepositoryPort',
                useClass: employee_notification_repository_1.EmployeeNotificationRepository,
            },
        ],
        controllers: [notification_controllers_1.NotificationDomainController, employee_notification_controllers_1.EmployeeNotificationDomainController],
        exports: [notification_service_1.NotificationService, employee_notification_service_1.EmployeeNotificationService],
    })
], NotificationDomainModule);


/***/ }),

/***/ "./apps/resource/src/modules/notification/notification.module.ts":
/*!***********************************************************************!*\
  !*** ./apps/resource/src/modules/notification/notification.module.ts ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const notification_entity_1 = __webpack_require__(/*! @libs/entities/notification.entity */ "./libs/entities/notification.entity.ts");
const notification_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/notification.repository */ "./apps/resource/src/modules/notification/infrastructure/adapters/out/persistence/notification.repository.ts");
const notification_service_1 = __webpack_require__(/*! ./application/services/notification.service */ "./apps/resource/src/modules/notification/application/services/notification.service.ts");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
const env_config_1 = __webpack_require__(/*! @libs/configs/env.config */ "./libs/configs/env.config.ts");
const adapter_service_1 = __webpack_require__(/*! ./application/services/adapter.service */ "./apps/resource/src/modules/notification/application/services/adapter.service.ts");
const auth_module_1 = __webpack_require__(/*! @resource/modules/auth/auth.module */ "./apps/resource/src/modules/auth/auth.module.ts");
const notification_usecase_1 = __webpack_require__(/*! ./application/usecases/notification.usecase */ "./apps/resource/src/modules/notification/application/usecases/notification.usecase.ts");
const fcm_push_adapter_1 = __webpack_require__(/*! ./infrastructure/adapters/out/device/fcm-push.adapter */ "./apps/resource/src/modules/notification/infrastructure/adapters/out/device/fcm-push.adapter.ts");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
const employee_notification_service_1 = __webpack_require__(/*! ./application/services/employee-notification.service */ "./apps/resource/src/modules/notification/application/services/employee-notification.service.ts");
const employee_notification_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/employee-notification.repository */ "./apps/resource/src/modules/notification/infrastructure/adapters/out/persistence/employee-notification.repository.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const notification_event_handler_1 = __webpack_require__(/*! ./application/handler/notification-event.handler */ "./apps/resource/src/modules/notification/application/handler/notification-event.handler.ts");
const notification_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/notification.controller */ "./apps/resource/src/modules/notification/infrastructure/adapters/in/web/controllers/v1/notification.controller.ts");
let NotificationModule = class NotificationModule {
};
exports.NotificationModule = NotificationModule;
exports.NotificationModule = NotificationModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([notification_entity_1.Notification, entities_1.EmployeeNotification]),
            config_1.ConfigModule.forFeature(env_config_1.WEB_PUSH_CONFIG),
            config_1.ConfigModule.forFeature(env_config_1.FIREBASE_CONFIG),
            schedule_1.ScheduleModule.forRoot(),
            auth_module_1.AuthModule,
        ],
        providers: [
            config_1.ConfigService,
            notification_service_1.NotificationService,
            adapter_service_1.AdapterService,
            employee_notification_service_1.EmployeeNotificationService,
            notification_usecase_1.NotificationUsecase,
            {
                provide: 'NotificationRepositoryPort',
                useClass: notification_repository_1.NotificationRepository,
            },
            {
                provide: 'EmployeeNotificationRepositoryPort',
                useClass: employee_notification_repository_1.EmployeeNotificationRepository,
            },
            {
                provide: 'PushNotificationServicePort',
                useClass: fcm_push_adapter_1.FCMAdapter,
            },
            notification_event_handler_1.NotificationEventHandler,
        ],
        controllers: [notification_controller_1.UserNotificationController],
        exports: [
            notification_service_1.NotificationService,
            adapter_service_1.AdapterService,
            employee_notification_service_1.EmployeeNotificationService,
            notification_usecase_1.NotificationUsecase,
            {
                provide: 'NotificationRepositoryPort',
                useClass: notification_repository_1.NotificationRepository,
            },
            {
                provide: 'EmployeeNotificationRepositoryPort',
                useClass: employee_notification_repository_1.EmployeeNotificationRepository,
            },
            {
                provide: 'PushNotificationServicePort',
                useClass: fcm_push_adapter_1.FCMAdapter,
            },
        ],
    })
], NotificationModule);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/dtos/create-reservation.dto.ts":
/*!******************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/dtos/create-reservation.dto.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateReservationDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class CreateReservationDto {
}
exports.CreateReservationDto = CreateReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 ID') }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('자원 타입', Object.values(resource_type_enum_1.ResourceType)) }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], CreateReservationDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 시작 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('시작 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 종료 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('종료 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], CreateReservationDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('종일 여부') }),
    __metadata("design:type", Boolean)
], CreateReservationDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('시작 전 알림 여부') }),
    __metadata("design:type", Boolean)
], CreateReservationDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number], example: [10, 20] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('알림 시간') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], CreateReservationDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('참가자 ID') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('참가자 ID', '문자열') }),
    __metadata("design:type", Array)
], CreateReservationDto.prototype, "participantIds", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/dtos/reservation-response.dto.ts":
/*!********************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/dtos/reservation-response.dto.ts ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.GroupedReservationWithResourceResponseDto = exports.GroupedReservationResponseDto = exports.CreateReservationResponseDto = exports.ReservationWithRelationsResponseDto = exports.ReservationWithResourceResponseDto = exports.ReservationVehicleResponseDto = exports.ReservationParticipantResponseDto = exports.ReservationResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_type_enum_2 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const dtos_index_1 = __webpack_require__(/*! @resource/dtos.index */ "./apps/resource/src/dtos.index.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
class ReservationResponseDto {
    constructor(reservation) {
        this.reservationId = reservation?.reservationId;
        this.resourceId = reservation?.resourceId;
        this.title = reservation?.title;
        this.description = reservation?.description;
        this.rejectReason = reservation?.rejectReason;
        this.startDate = date_util_1.DateUtil.format(reservation?.startDate);
        this.endDate = date_util_1.DateUtil.format(reservation?.endDate);
        this.status = reservation?.status;
        this.isAllDay = reservation?.isAllDay;
        this.notifyBeforeStart = reservation?.notifyBeforeStart;
        this.notifyMinutesBeforeStart = reservation?.notifyMinutesBeforeStart;
    }
}
exports.ReservationResponseDto = ReservationResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationResponseDto.prototype, "rejectReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: reservation_type_enum_1.ReservationStatus, required: false }),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _a : Object)
], ReservationResponseDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationResponseDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationResponseDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number] }),
    __metadata("design:type", Array)
], ReservationResponseDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationResponseDto.prototype, "isMine", void 0);
class ReservationParticipantResponseDto {
}
exports.ReservationParticipantResponseDto = ReservationParticipantResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationParticipantResponseDto.prototype, "participantId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationParticipantResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationParticipantResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => dtos_index_1.EmployeeResponseDto, required: false }),
    __metadata("design:type", typeof (_b = typeof dtos_index_1.EmployeeResponseDto !== "undefined" && dtos_index_1.EmployeeResponseDto) === "function" ? _b : Object)
], ReservationParticipantResponseDto.prototype, "employee", void 0);
class ReservationVehicleResponseDto {
}
exports.ReservationVehicleResponseDto = ReservationVehicleResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationVehicleResponseDto.prototype, "reservationVehicleId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationVehicleResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "startOdometer", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "endOdometer", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "startFuelLevel", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ReservationVehicleResponseDto.prototype, "endFuelLevel", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ReservationVehicleResponseDto.prototype, "isReturned", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ReservationVehicleResponseDto.prototype, "returnedAt", void 0);
class ReservationWithResourceResponseDto extends ReservationResponseDto {
    constructor(reservation) {
        super(reservation);
        this.resource = reservation?.resource;
    }
}
exports.ReservationWithResourceResponseDto = ReservationWithResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => dtos_index_1.ResourceResponseDto, required: false }),
    __metadata("design:type", typeof (_d = typeof dtos_index_1.ResourceResponseDto !== "undefined" && dtos_index_1.ResourceResponseDto) === "function" ? _d : Object)
], ReservationWithResourceResponseDto.prototype, "resource", void 0);
class ReservationWithRelationsResponseDto extends ReservationResponseDto {
    constructor(reservation) {
        super(reservation);
        this.resource = reservation?.resource;
        this.reservers = reservation?.participants?.filter((participant) => participant.type === reservation_type_enum_2.ParticipantsType.RESERVER);
        this.participants = reservation?.participants?.filter((participant) => participant.type === reservation_type_enum_2.ParticipantsType.PARTICIPANT);
        this.reservationVehicles = reservation?.reservationVehicles;
    }
}
exports.ReservationWithRelationsResponseDto = ReservationWithRelationsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => dtos_index_1.ResourceResponseDto, required: false }),
    __metadata("design:type", typeof (_e = typeof dtos_index_1.ResourceResponseDto !== "undefined" && dtos_index_1.ResourceResponseDto) === "function" ? _e : Object)
], ReservationWithRelationsResponseDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ReservationParticipantResponseDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "reservers", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ReservationParticipantResponseDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "participants", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ReservationVehicleResponseDto], required: false }),
    __metadata("design:type", Array)
], ReservationWithRelationsResponseDto.prototype, "reservationVehicles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationWithRelationsResponseDto.prototype, "isMine", void 0);
class CreateReservationResponseDto {
}
exports.CreateReservationResponseDto = CreateReservationResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: '123e4567-e89b-12d3-a456-426614174000' }),
    __metadata("design:type", String)
], CreateReservationResponseDto.prototype, "reservationId", void 0);
class GroupedReservationResponseDto {
}
exports.GroupedReservationResponseDto = GroupedReservationResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '날짜 (YYYY-MM-DD 형식)' }),
    __metadata("design:type", String)
], GroupedReservationResponseDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '해당 날짜의 예약 목록',
        type: [ReservationWithRelationsResponseDto],
    }),
    __metadata("design:type", Array)
], GroupedReservationResponseDto.prototype, "reservations", void 0);
class GroupedReservationWithResourceResponseDto {
}
exports.GroupedReservationWithResourceResponseDto = GroupedReservationWithResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 정보',
        type: () => dtos_index_1.ResourceResponseDto,
    }),
    __metadata("design:type", typeof (_f = typeof dtos_index_1.ResourceResponseDto !== "undefined" && dtos_index_1.ResourceResponseDto) === "function" ? _f : Object)
], GroupedReservationWithResourceResponseDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '예약 목록',
        required: false,
        type: [GroupedReservationResponseDto],
    }),
    __metadata("design:type", Array)
], GroupedReservationWithResourceResponseDto.prototype, "groupedReservations", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/dtos/reservation-snapshot.dto.ts":
/*!********************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/dtos/reservation-snapshot.dto.ts ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationSnapshotResponseDto = exports.SelectedResourceResponseDto = exports.TimeRangeResponseDto = exports.TimeInfoResponseDto = exports.DateRangeResponseDto = exports.UpdateReservationSnapshotDto = exports.CreateReservationSnapshotDto = exports.ReminderTimeDto = exports.SelectedResourceDto = exports.TimeRangeDto = exports.TimeInfoDto = exports.DateRangeDto = exports.DroppableGroupDataDto = exports.DroppableGroupItemDto = exports.AttendeeDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
class AttendeeDto {
}
exports.AttendeeDto = AttendeeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsUUID)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], AttendeeDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], AttendeeDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], AttendeeDto.prototype, "department", void 0);
class DroppableGroupItemDto {
}
exports.DroppableGroupItemDto = DroppableGroupItemDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DroppableGroupItemDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DroppableGroupItemDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], DroppableGroupItemDto.prototype, "order", void 0);
class DroppableGroupDataDto {
}
exports.DroppableGroupDataDto = DroppableGroupDataDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DroppableGroupDataDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], DroppableGroupDataDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [DroppableGroupItemDto], required: false }),
    (0, class_validator_1.IsArray)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], DroppableGroupDataDto.prototype, "items", void 0);
class DateRangeDto {
}
exports.DateRangeDto = DateRangeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DateRangeDto.prototype, "from", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DateRangeDto.prototype, "to", void 0);
class TimeInfoDto {
}
exports.TimeInfoDto = TimeInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], TimeInfoDto.prototype, "hour", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], TimeInfoDto.prototype, "minute", void 0);
class TimeRangeDto {
}
exports.TimeRangeDto = TimeRangeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], TimeRangeDto.prototype, "am", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], TimeRangeDto.prototype, "pm", void 0);
class SelectedResourceDto {
}
exports.SelectedResourceDto = SelectedResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], SelectedResourceDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], SelectedResourceDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], SelectedResourceDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], SelectedResourceDto.prototype, "endDate", void 0);
class ReminderTimeDto {
}
exports.ReminderTimeDto = ReminderTimeDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], ReminderTimeDto.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], ReminderTimeDto.prototype, "time", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], ReminderTimeDto.prototype, "isSelected", void 0);
class CreateReservationSnapshotDto {
}
exports.CreateReservationSnapshotDto = CreateReservationSnapshotDto;
__decorate([
    (0, swagger_1.ApiProperty)({ enum: ['groups', 'date-time', 'resources', 'info'], required: false }),
    (0, class_validator_1.IsEnum)(['groups', 'date-time', 'resources', 'info']),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], CreateReservationSnapshotDto.prototype, "step", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], CreateReservationSnapshotDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: DroppableGroupDataDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    __metadata("design:type", DroppableGroupDataDto)
], CreateReservationSnapshotDto.prototype, "droppableGroupData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: DateRangeDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => DateRangeDto),
    __metadata("design:type", DateRangeDto)
], CreateReservationSnapshotDto.prototype, "dateRange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeInfoDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => TimeInfoDto),
    __metadata("design:type", TimeInfoDto)
], CreateReservationSnapshotDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeInfoDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => TimeInfoDto),
    __metadata("design:type", TimeInfoDto)
], CreateReservationSnapshotDto.prototype, "endTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeRangeDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => TimeRangeDto),
    __metadata("design:type", TimeRangeDto)
], CreateReservationSnapshotDto.prototype, "timeRange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    __metadata("design:type", Number)
], CreateReservationSnapshotDto.prototype, "timeUnit", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: SelectedResourceDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsObject)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => SelectedResourceDto),
    __metadata("design:type", SelectedResourceDto)
], CreateReservationSnapshotDto.prototype, "selectedResource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CreateReservationSnapshotDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [ReminderTimeDto] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    __metadata("design:type", Array)
], CreateReservationSnapshotDto.prototype, "reminderTimes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, default: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateReservationSnapshotDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, default: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    __metadata("design:type", Boolean)
], CreateReservationSnapshotDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    __metadata("design:type", Array)
], CreateReservationSnapshotDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [AttendeeDto] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)(),
    __metadata("design:type", Array)
], CreateReservationSnapshotDto.prototype, "attendees", void 0);
class UpdateReservationSnapshotDto extends CreateReservationSnapshotDto {
}
exports.UpdateReservationSnapshotDto = UpdateReservationSnapshotDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], UpdateReservationSnapshotDto.prototype, "snapshotId", void 0);
class DateRangeResponseDto {
}
exports.DateRangeResponseDto = DateRangeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], DateRangeResponseDto.prototype, "from", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], DateRangeResponseDto.prototype, "to", void 0);
class TimeInfoResponseDto {
}
exports.TimeInfoResponseDto = TimeInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], TimeInfoResponseDto.prototype, "hour", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], TimeInfoResponseDto.prototype, "minute", void 0);
class TimeRangeResponseDto {
}
exports.TimeRangeResponseDto = TimeRangeResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], TimeRangeResponseDto.prototype, "am", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], TimeRangeResponseDto.prototype, "pm", void 0);
class SelectedResourceResponseDto {
}
exports.SelectedResourceResponseDto = SelectedResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], SelectedResourceResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], SelectedResourceResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], SelectedResourceResponseDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], SelectedResourceResponseDto.prototype, "endDate", void 0);
class ReservationSnapshotResponseDto {
}
exports.ReservationSnapshotResponseDto = ReservationSnapshotResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationSnapshotResponseDto.prototype, "snapshotId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ReservationSnapshotResponseDto.prototype, "userId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: ['groups', 'date-time', 'resources', 'info'], required: false }),
    __metadata("design:type", String)
], ReservationSnapshotResponseDto.prototype, "step", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationSnapshotResponseDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: DroppableGroupDataDto }),
    __metadata("design:type", DroppableGroupDataDto)
], ReservationSnapshotResponseDto.prototype, "droppableGroupData", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: DateRangeResponseDto }),
    __metadata("design:type", DateRangeResponseDto)
], ReservationSnapshotResponseDto.prototype, "dateRange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeInfoResponseDto }),
    __metadata("design:type", TimeInfoResponseDto)
], ReservationSnapshotResponseDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeInfoResponseDto }),
    __metadata("design:type", TimeInfoResponseDto)
], ReservationSnapshotResponseDto.prototype, "endTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: TimeRangeResponseDto }),
    __metadata("design:type", TimeRangeResponseDto)
], ReservationSnapshotResponseDto.prototype, "timeRange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], ReservationSnapshotResponseDto.prototype, "timeUnit", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: SelectedResourceResponseDto }),
    __metadata("design:type", SelectedResourceResponseDto)
], ReservationSnapshotResponseDto.prototype, "selectedResource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ReservationSnapshotResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [ReminderTimeDto] }),
    __metadata("design:type", Array)
], ReservationSnapshotResponseDto.prototype, "reminderTimes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationSnapshotResponseDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], ReservationSnapshotResponseDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number] }),
    __metadata("design:type", Array)
], ReservationSnapshotResponseDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [AttendeeDto] }),
    __metadata("design:type", Array)
], ReservationSnapshotResponseDto.prototype, "attendees", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], ReservationSnapshotResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], ReservationSnapshotResponseDto.prototype, "updatedAt", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/dtos/update-reservation.dto.ts":
/*!******************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/dtos/update-reservation.dto.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateReservationDto = exports.UpdateReservationCcReceipientDto = exports.UpdateReservationParticipantsDto = exports.UpdateReservationStatusDto = exports.UpdateReservationTimeDto = exports.UpdateReservationTitleDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class UpdateReservationTitleDto {
}
exports.UpdateReservationTitleDto = UpdateReservationTitleDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], UpdateReservationTitleDto.prototype, "title", void 0);
class UpdateReservationTimeDto {
    constructor(reservation) {
        this.startDate = date_util_1.DateUtil.format(reservation?.startDate);
        this.endDate = date_util_1.DateUtil.format(reservation?.endDate);
        this.isAllDay = reservation?.isAllDay;
    }
    getPropertiesAndTypes() {
        return Object.getOwnPropertyNames(this).map((property) => ({
            property,
            type: Reflect.getMetadata('design:type', this, property),
        }));
    }
}
exports.UpdateReservationTimeDto = UpdateReservationTimeDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 시작 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('시작 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], UpdateReservationTimeDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 종료 시간 (YYYY-MM-DD HH:mm:ss 형식)',
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('종료 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    __metadata("design:type", String)
], UpdateReservationTimeDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('종일 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateReservationTimeDto.prototype, "isAllDay", void 0);
class UpdateReservationStatusDto {
}
exports.UpdateReservationStatusDto = UpdateReservationStatusDto;
__decorate([
    (0, swagger_1.ApiProperty)({ enum: reservation_type_enum_1.ReservationStatus }),
    (0, class_validator_1.IsEnum)(reservation_type_enum_1.ReservationStatus, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('예약 상태', Object.values(reservation_type_enum_1.ReservationStatus)),
    }),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _a : Object)
], UpdateReservationStatusDto.prototype, "status", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('거절 사유') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('거절 사유', 0, 100) }),
    __metadata("design:type", String)
], UpdateReservationStatusDto.prototype, "rejectReason", void 0);
class UpdateReservationParticipantsDto {
}
exports.UpdateReservationParticipantsDto = UpdateReservationParticipantsDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('참가자 ID') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('참가자 ID', '문자열') }),
    __metadata("design:type", Array)
], UpdateReservationParticipantsDto.prototype, "participantIds", void 0);
class UpdateReservationCcReceipientDto {
}
exports.UpdateReservationCcReceipientDto = UpdateReservationCcReceipientDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('수신참조자 ID') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('수신참조자 ID', '문자열') }),
    __metadata("design:type", Array)
], UpdateReservationCcReceipientDto.prototype, "ccReceipientIds", void 0);
class UpdateReservationDto {
}
exports.UpdateReservationDto = UpdateReservationDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 ID') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 시작 시간 (YYYY-MM-DD HH:mm:ss 형식)',
        required: false,
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('시작 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        example: '2025-01-01 00:00:00',
        description: '예약 종료 시간 (YYYY-MM-DD HH:mm:ss 형식)',
        required: false,
    }),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]) ([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('종료 시간', 'YYYY-MM-DD HH:mm:ss'),
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateReservationDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false, required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('종일 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateReservationDto.prototype, "isAllDay", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: false, required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('시작 전 알림 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateReservationDto.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [Number], example: [10, 20] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('알림 시간') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateReservationDto.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String], required: false }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('참가자 ID') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('참가자 ID', '문자열') }),
    __metadata("design:type", Array)
], UpdateReservationDto.prototype, "participantIds", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/handler/reservation-event.handler.ts":
/*!************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/handler/reservation-event.handler.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationEventHandler = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const reservation_service_1 = __webpack_require__(/*! ../services/reservation.service */ "./apps/resource/src/modules/reservation/application/services/reservation.service.ts");
let ReservationEventHandler = class ReservationEventHandler {
    constructor(reservationService) {
        this.reservationService = reservationService;
    }
    async handleFindReservation(payload) {
        return await this.reservationService.findAll(payload.repositoryOptions);
    }
};
exports.ReservationEventHandler = ReservationEventHandler;
__decorate([
    (0, event_emitter_1.OnEvent)('find.reservation'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], ReservationEventHandler.prototype, "handleFindReservation", null);
exports.ReservationEventHandler = ReservationEventHandler = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.ReservationService !== "undefined" && reservation_service_1.ReservationService) === "function" ? _a : Object])
], ReservationEventHandler);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/services/participant.service.ts":
/*!*******************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/services/participant.service.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ParticipantService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_participant_repository_port_1 = __webpack_require__(/*! ../../domain/ports/reservation-participant.repository.port */ "./apps/resource/src/modules/reservation/domain/ports/reservation-participant.repository.port.ts");
let ParticipantService = class ParticipantService {
    constructor(participantRepository) {
        this.participantRepository = participantRepository;
    }
    async save(participant, repositoryOptions) {
        return this.participantRepository.save(participant, repositoryOptions);
    }
    async findAll(repositoryOptions) {
        return this.participantRepository.findAll(repositoryOptions);
    }
    async findOne(repositoryOptions) {
        return this.participantRepository.findOne(repositoryOptions);
    }
    async update(id, participant, repositoryOptions) {
        return this.participantRepository.update(id, participant, repositoryOptions);
    }
    async delete(id, repositoryOptions) {
        return this.participantRepository.delete(id, repositoryOptions);
    }
};
exports.ParticipantService = ParticipantService;
exports.ParticipantService = ParticipantService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('ReservationParticipantRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_participant_repository_port_1.ReservationParticipantRepositoryPort !== "undefined" && reservation_participant_repository_port_1.ReservationParticipantRepositoryPort) === "function" ? _a : Object])
], ParticipantService);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/services/reservation-snapshot.service.ts":
/*!****************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/services/reservation-snapshot.service.ts ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationSnapshotService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_snapshot_repository_port_1 = __webpack_require__(/*! @resource/modules/reservation/domain/ports/reservation-snapshot.repository.port */ "./apps/resource/src/modules/reservation/domain/ports/reservation-snapshot.repository.port.ts");
let ReservationSnapshotService = class ReservationSnapshotService {
    constructor(repository) {
        this.repository = repository;
    }
    async findOne(options) {
        return this.repository.findOne(options);
    }
    async findAll(options) {
        return this.repository.findAll(options);
    }
    create(dto) {
        const snapshot = this.repository.create(dto);
        return snapshot;
    }
    async save(snapshot, options) {
        return this.repository.save(snapshot, options);
    }
    async update(id, dto, options) {
        return this.repository.update(id, dto, options);
    }
    async delete(id, options) {
        await this.repository.delete(id, options);
    }
    async count(options) {
        return this.repository.count(options);
    }
};
exports.ReservationSnapshotService = ReservationSnapshotService;
exports.ReservationSnapshotService = ReservationSnapshotService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('ReservationSnapshotRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_snapshot_repository_port_1.ReservationSnapshotRepositoryPort !== "undefined" && reservation_snapshot_repository_port_1.ReservationSnapshotRepositoryPort) === "function" ? _a : Object])
], ReservationSnapshotService);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/services/reservation-vehicle.service.ts":
/*!***************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/services/reservation-vehicle.service.ts ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationVehicleService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_vehicle_repository_port_1 = __webpack_require__(/*! ../../domain/ports/reservation-vehicle.repository.port */ "./apps/resource/src/modules/reservation/domain/ports/reservation-vehicle.repository.port.ts");
let ReservationVehicleService = class ReservationVehicleService {
    constructor(reservationVehicleRepository) {
        this.reservationVehicleRepository = reservationVehicleRepository;
    }
    async save(reservationVehicle, repositoryOptions) {
        return await this.reservationVehicleRepository.save(reservationVehicle, repositoryOptions);
    }
    async findAll(repositoryOptions) {
        return await this.reservationVehicleRepository.findAll(repositoryOptions);
    }
    async findOne(repositoryOptions) {
        return await this.reservationVehicleRepository.findOne(repositoryOptions);
    }
    async update(id, reservationVehicle, repositoryOptions) {
        return await this.reservationVehicleRepository.update(id, reservationVehicle, repositoryOptions);
    }
    async delete(id, repositoryOptions) {
        await this.reservationVehicleRepository.delete(id, repositoryOptions);
    }
    async count(repositoryOptions) {
        return await this.reservationVehicleRepository.count(repositoryOptions);
    }
    async updateOdometer(id, startOdometer, endOdometer, repositoryOptions) {
        return await this.reservationVehicleRepository.updateOdometer(id, startOdometer, endOdometer, repositoryOptions);
    }
    async updateFuelLevel(id, startFuelLevel, endFuelLevel, repositoryOptions) {
        return await this.reservationVehicleRepository.updateFuelLevel(id, startFuelLevel, endFuelLevel, repositoryOptions);
    }
    async markAsReturned(id, repositoryOptions) {
        return await this.reservationVehicleRepository.markAsReturned(id, repositoryOptions);
    }
    async findByReservationId(reservationId, repositoryOptions) {
        return await this.reservationVehicleRepository.findByReservationId(reservationId, repositoryOptions);
    }
    async findByVehicleInfoId(vehicleInfoId, repositoryOptions) {
        return await this.reservationVehicleRepository.findByVehicleInfoId(vehicleInfoId, repositoryOptions);
    }
};
exports.ReservationVehicleService = ReservationVehicleService;
exports.ReservationVehicleService = ReservationVehicleService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('ReservationVehicleRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_vehicle_repository_port_1.ReservationVehicleRepositoryPort !== "undefined" && reservation_vehicle_repository_port_1.ReservationVehicleRepositoryPort) === "function" ? _a : Object])
], ReservationVehicleService);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/services/reservation.service.ts":
/*!*******************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/services/reservation.service.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_repository_port_1 = __webpack_require__(/*! ../../domain/ports/reservation.repository.port */ "./apps/resource/src/modules/reservation/domain/ports/reservation.repository.port.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
let ReservationService = class ReservationService {
    constructor(reservationRepository) {
        this.reservationRepository = reservationRepository;
    }
    create(createDto) {
        const reservation = this.reservationRepository.create(createDto);
        return reservation;
    }
    async save(reservation, repositoryOptions) {
        const savedReservation = await this.reservationRepository.save(reservation, repositoryOptions);
        return savedReservation;
    }
    async findAll(repositoryOptions) {
        const reservations = await this.reservationRepository.findAll(repositoryOptions);
        return reservations;
    }
    async count(repositoryOptions) {
        const count = await this.reservationRepository.count(repositoryOptions);
        return count;
    }
    async findOne(repositoryOptions) {
        const reservation = await this.reservationRepository.findOne(repositoryOptions);
        return reservation;
    }
    async update(reservationId, reservation, repositoryOptions) {
        const updatedReservation = await this.reservationRepository.update(reservationId, reservation, repositoryOptions);
        return updatedReservation;
    }
    async findConflictingReservations(resourceId, startDate, endDate, reservationId) {
        return await this.findAll({
            where: {
                resourceId,
                ...(reservationId && { reservationId: (0, typeorm_1.Not)(reservationId) }),
                startDate: (0, typeorm_1.LessThan)(endDate),
                endDate: (0, typeorm_1.MoreThan)(startDate),
                status: (0, typeorm_1.In)([reservation_type_enum_1.ReservationStatus.CONFIRMED, reservation_type_enum_1.ReservationStatus.CLOSED]),
            },
        });
    }
};
exports.ReservationService = ReservationService;
exports.ReservationService = ReservationService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('ReservationRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_repository_port_1.ReservationRepositoryPort !== "undefined" && reservation_repository_port_1.ReservationRepositoryPort) === "function" ? _a : Object])
], ReservationService);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/usecases/reservation-snapshot.usecase.ts":
/*!****************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/usecases/reservation-snapshot.usecase.ts ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationSnapshotUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_snapshot_service_1 = __webpack_require__(/*! ../services/reservation-snapshot.service */ "./apps/resource/src/modules/reservation/application/services/reservation-snapshot.service.ts");
let ReservationSnapshotUsecase = class ReservationSnapshotUsecase {
    constructor(snapshotService) {
        this.snapshotService = snapshotService;
    }
    async upsertSnapshot(user, dto) {
        const snapshot = await this.findSnapshotByUserId(user.userId);
        if (snapshot) {
            return await this.updateSnapshot({ ...dto, snapshotId: snapshot.snapshotId });
        }
        else {
            return await this.createSnapshot(user, dto);
        }
    }
    async createSnapshot(user, dto) {
        const snapshot = this.snapshotService.create(dto);
        snapshot.userId = user.userId;
        const savedSnapshot = await this.snapshotService.save(snapshot);
        return this.toResponseDto(savedSnapshot);
    }
    async updateSnapshot(dto) {
        const updatedSnapshot = await this.snapshotService.update(dto.snapshotId, dto);
        return this.toResponseDto(updatedSnapshot);
    }
    async findSnapshotByUserId(userId) {
        const snapshot = await this.snapshotService.findOne({
            where: { userId },
        });
        return snapshot ? this.toResponseDto(snapshot) : null;
    }
    async findAllSnapshots(options) {
        const snapshots = await this.snapshotService.findAll(options);
        return snapshots.map((snapshot) => this.toResponseDto(snapshot));
    }
    async deleteSnapshot(snapshotId) {
        await this.snapshotService.delete(snapshotId);
    }
    toResponseDto(snapshot) {
        return {
            snapshotId: snapshot.snapshotId,
            userId: snapshot.userId,
            step: snapshot.step,
            resourceType: snapshot.resourceType,
            droppableGroupData: snapshot.droppableGroupData,
            dateRange: snapshot.dateRange,
            startTime: snapshot.startTime,
            endTime: snapshot.endTime,
            timeRange: snapshot.timeRange,
            timeUnit: snapshot.timeUnit,
            selectedResource: snapshot.selectedResource,
            title: snapshot.title,
            reminderTimes: snapshot.reminderTimes,
            isAllDay: snapshot.isAllDay,
            notifyBeforeStart: snapshot.notifyBeforeStart,
            notifyMinutesBeforeStart: snapshot.notifyMinutesBeforeStart,
            attendees: snapshot.attendees,
            createdAt: snapshot.createdAt,
            updatedAt: snapshot.updatedAt,
        };
    }
};
exports.ReservationSnapshotUsecase = ReservationSnapshotUsecase;
exports.ReservationSnapshotUsecase = ReservationSnapshotUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_snapshot_service_1.ReservationSnapshotService !== "undefined" && reservation_snapshot_service_1.ReservationSnapshotService) === "function" ? _a : Object])
], ReservationSnapshotUsecase);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/application/usecases/reservation.usecase.ts":
/*!*******************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/application/usecases/reservation.usecase.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const reservation_response_dto_1 = __webpack_require__(/*! ../dtos/reservation-response.dto */ "./apps/resource/src/modules/reservation/application/dtos/reservation-response.dto.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const reservation_service_1 = __webpack_require__(/*! ../services/reservation.service */ "./apps/resource/src/modules/reservation/application/services/reservation.service.ts");
const participant_service_1 = __webpack_require__(/*! ../services/participant.service */ "./apps/resource/src/modules/reservation/application/services/participant.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const dist_1 = __webpack_require__(/*! cron/dist */ "cron/dist");
const schedule_1 = __webpack_require__(/*! @nestjs/schedule */ "@nestjs/schedule");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const reservation_vehicle_service_1 = __webpack_require__(/*! ../services/reservation-vehicle.service */ "./apps/resource/src/modules/reservation/application/services/reservation-vehicle.service.ts");
const dtos_index_1 = __webpack_require__(/*! @resource/dtos.index */ "./apps/resource/src/dtos.index.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let ReservationUsecase = class ReservationUsecase {
    constructor(reservationService, participantService, reservationVehicleService, dataSource, eventEmitter, schedulerRegistry) {
        this.reservationService = reservationService;
        this.participantService = participantService;
        this.reservationVehicleService = reservationVehicleService;
        this.dataSource = dataSource;
        this.eventEmitter = eventEmitter;
        this.schedulerRegistry = schedulerRegistry;
    }
    async onModuleInit() {
        const now = date_util_1.DateUtil.now().format();
        const notClosedReservations = await this.reservationService.findAll({
            where: {
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                resource: {
                    type: (0, typeorm_1.Not)(resource_type_enum_1.ResourceType.VEHICLE),
                },
                endDate: (0, typeorm_1.LessThanOrEqual)(date_util_1.DateUtil.date(now).toDate()),
            },
        });
        for (const reservation of notClosedReservations) {
            await this.reservationService.update(reservation.reservationId, { status: reservation_type_enum_1.ReservationStatus.CLOSED });
        }
        const reservations = await this.reservationService.findAll({
            where: {
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                resource: {
                    type: (0, typeorm_1.Not)(resource_type_enum_1.ResourceType.VEHICLE),
                },
                endDate: (0, typeorm_1.MoreThan)(date_util_1.DateUtil.date(now).toDate()),
            },
        });
        console.log(reservations);
        for (const reservation of reservations) {
            this.createReservationClosingJob(reservation);
        }
    }
    async handleCron() {
        const now = date_util_1.DateUtil.now().format();
        const notClosedReservations = await this.reservationService.findAll({
            where: {
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                resource: {
                    type: (0, typeorm_1.Not)(resource_type_enum_1.ResourceType.VEHICLE),
                },
                endDate: (0, typeorm_1.LessThanOrEqual)(date_util_1.DateUtil.date(now).toDate()),
            },
        });
        for (const reservation of notClosedReservations) {
            await this.reservationService.update(reservation.reservationId, { status: reservation_type_enum_1.ReservationStatus.CLOSED });
        }
    }
    async findMyReservationList(employeeId, page, limit, resourceType, startDate) {
        const where = { participants: { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER } };
        if (resourceType) {
            where.resource = {
                type: resourceType,
            };
        }
        const options = {
            where,
        };
        if (page && limit) {
            options.skip = (page - 1) * limit;
            options.take = limit;
        }
        const reservations = await this.reservationService.findAll(options);
        const reservationWithParticipants = await this.reservationService.findAll({
            where: {
                reservationId: (0, typeorm_1.In)(reservations.map((r) => r.reservationId)),
            },
            relations: ['resource', 'participants', 'participants.employee', 'reservationVehicles'],
            withDeleted: true,
        });
        const count = await this.reservationService.count({
            where: {
                reservationId: (0, typeorm_1.In)(reservations.map((r) => r.reservationId)),
            },
        });
        const groupedReservations = reservationWithParticipants.reduce((acc, reservation) => {
            const date = date_util_1.DateUtil.format(reservation.startDate, 'YYYY-MM-DD');
            if (!acc[date]) {
                acc[date] = [];
            }
            acc[date].push(reservation);
            return acc;
        }, {});
        const groupedReservationsResponse = Object.entries(groupedReservations).map(([date, reservations]) => ({
            date,
            reservations: reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation)),
        }));
        return {
            items: groupedReservationsResponse,
            meta: {
                total: count,
                page,
                limit,
                hasNext: page * limit < count,
            },
        };
    }
    async findResourceReservationList(employeeId, resourceId, page, limit, month, isMine) {
        const monthStart = `${month}-01 00:00:00`;
        const lastDay = date_util_1.DateUtil.date(month).getLastDayOfMonth().getDate();
        const monthEnd = `${month}-${lastDay} 23:59:59`;
        const monthStartDate = date_util_1.DateUtil.date(monthStart).toDate();
        const monthEndDate = date_util_1.DateUtil.date(monthEnd).toDate();
        const dateCondition = (0, typeorm_1.Raw)((alias) => `(${alias} BETWEEN :monthStartDate AND :monthEndDate OR
              "Reservation"."endDate" BETWEEN :monthStartDate AND :monthEndDate OR
              (${alias} <= :monthStartDate AND "Reservation"."endDate" >= :monthEndDate))`, { monthStartDate, monthEndDate });
        const where = {
            startDate: dateCondition,
            resourceId: resourceId,
        };
        const [resources] = await this.eventEmitter.emitAsync('find.resource', {
            repositoryOptions: {
                where: { resourceId: resourceId },
            },
        });
        if (resources && resources.length === 0) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        const resource = resources[0];
        if (isMine) {
            where.participants = { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER };
        }
        const options = {
            where,
        };
        if (page && limit) {
            options.skip = (page - 1) * limit;
            options.take = limit;
        }
        const reservations = await this.reservationService.findAll(options);
        const count = await this.reservationService.count({ where });
        const reservationWithParticipants = await this.reservationService.findAll({
            where: {
                reservationId: (0, typeorm_1.In)(reservations.map((r) => r.reservationId)),
            },
            relations: ['participants', 'participants.employee'],
            withDeleted: true,
        });
        const groupedReservations = reservationWithParticipants.reduce((acc, reservation) => {
            const date = date_util_1.DateUtil.format(reservation.startDate, 'YYYY-MM-DD');
            if (!acc[date]) {
                acc[date] = [];
            }
            acc[date].push(reservation);
            return acc;
        }, {});
        const groupedReservationsResponse = Object.entries(groupedReservations).map(([date, reservations]) => ({
            date,
            reservations: reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation)),
        }));
        return {
            resource: new dtos_index_1.ResourceResponseDto(resource),
            groupedReservations: groupedReservationsResponse,
        };
    }
    async findMyUsingReservationList(employeeId) {
        const where = [
            {
                participants: { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER },
                resource: { type: resource_type_enum_1.ResourceType.VEHICLE },
                status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                startDate: (0, typeorm_1.LessThanOrEqual)(date_util_1.DateUtil.date(date_util_1.DateUtil.now().format()).toDate()),
                endDate: (0, typeorm_1.MoreThanOrEqual)(date_util_1.DateUtil.date(date_util_1.DateUtil.now().format()).toDate()),
            },
            {
                participants: { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER },
                status: reservation_type_enum_1.ReservationStatus.CLOSED,
                reservationVehicles: {
                    isReturned: false,
                },
            },
        ];
        const reservations = await this.reservationService.findAll({
            where,
            relations: ['resource', 'reservationVehicles', 'participants'],
            order: {
                startDate: 'ASC',
            },
            withDeleted: true,
        });
        reservations.sort((a, b) => {
            if (a.status === reservation_type_enum_1.ReservationStatus.CONFIRMED) {
                return -1;
            }
            return 1;
        });
        return {
            items: reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation)),
            meta: {
                total: reservations.length,
                page: 1,
                limit: reservations.length,
                hasNext: false,
            },
        };
    }
    async findMyUpcomingReservationList(employeeId, query, resourceType) {
        const { page, limit } = query;
        const today = date_util_1.DateUtil.date(date_util_1.DateUtil.now().format('YYYY-MM-DD 00:00:00')).toDate();
        const where = {
            participants: { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER },
            endDate: (0, typeorm_1.MoreThanOrEqual)(today),
        };
        if (resourceType) {
            where.resource = {
                type: resourceType,
            };
        }
        const options = {
            where,
            relations: ['resource', 'participants', 'participants.employee'],
        };
        const reservations = await this.reservationService.findAll(options);
        const count = reservations.length;
        const reservationWithParticipants = await this.reservationService.findAll({
            where: {
                reservationId: (0, typeorm_1.In)(reservations.map((r) => r.reservationId)),
            },
            relations: ['resource', 'participants', 'participants.employee'],
            order: {
                startDate: 'ASC',
            },
            skip: (page - 1) * limit,
            take: limit,
            withDeleted: true,
        });
        const groupedReservations = reservationWithParticipants.reduce((acc, reservation) => {
            const date = date_util_1.DateUtil.format(reservation.startDate, 'YYYY-MM-DD');
            if (!acc[date]) {
                acc[date] = [];
            }
            acc[date].push(reservation);
            return acc;
        }, {});
        const groupedReservationsResponse = Object.entries(groupedReservations).map(([date, reservations]) => ({
            date,
            reservations: reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation)),
        }));
        return {
            items: groupedReservationsResponse,
            meta: {
                total: count,
                page,
                limit,
                hasNext: page * limit < count,
            },
        };
    }
    async findMyAllSchedules(employeeId, query, resourceType) {
        const { page, limit } = query;
        const today = date_util_1.DateUtil.date(date_util_1.DateUtil.now().format('YYYY-MM-DD 00:00:00')).toDate();
        const where = {
            participants: { employeeId },
            status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
            endDate: (0, typeorm_1.MoreThanOrEqual)(today),
        };
        if (resourceType) {
            where.resource = {
                type: resourceType,
            };
        }
        const options = {
            where,
            relations: ['resource', 'participants', 'participants.employee'],
        };
        const reservations = await this.reservationService.findAll(options);
        const count = reservations.length;
        const reservationWithParticipants = await this.reservationService.findAll({
            where: {
                reservationId: (0, typeorm_1.In)(reservations.map((r) => r.reservationId)),
            },
            relations: ['resource', 'participants', 'participants.employee'],
            order: {
                startDate: 'ASC',
            },
            skip: (page - 1) * limit,
            take: limit,
            withDeleted: true,
        });
        const groupedReservations = reservationWithParticipants.reduce((acc, reservation) => {
            const date = date_util_1.DateUtil.format(reservation.startDate, 'YYYY-MM-DD');
            if (!acc[date]) {
                acc[date] = [];
            }
            acc[date].push(reservation);
            return acc;
        }, {});
        const groupedReservationsResponse = Object.entries(groupedReservations).map(([date, reservations]) => ({
            date,
            reservations: reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation)),
        }));
        return {
            items: groupedReservationsResponse,
            meta: {
                total: count,
                page,
                limit,
                hasNext: page * limit < count,
            },
        };
    }
    async findReservationDetail(user, reservationId) {
        const reservation = await this.reservationService.findOne({
            where: { reservationId },
            relations: [
                'resource',
                'resource.vehicleInfo',
                'resource.meetingRoomInfo',
                'resource.accommodationInfo',
                'participants',
                'participants.employee',
                'reservationVehicles',
            ],
            withDeleted: true,
        });
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        const reservationResponseDto = new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation);
        reservationResponseDto.isMine = reservationResponseDto.reservers.some((reserver) => reserver.employeeId === user.employeeId);
        return reservationResponseDto;
    }
    async findReservationList(startDate, endDate, resourceType, resourceId, status) {
        if (startDate && endDate && startDate > endDate) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_DATE_RANGE);
        }
        if (status && status.filter((s) => reservation_type_enum_1.ReservationStatus[s]).length === 0) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.INVALID_STATUS);
        }
        const regex = /(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/;
        let where = {};
        if (status && status.length > 0) {
            where.status = (0, typeorm_1.In)(status);
        }
        if (resourceType) {
            where.resource = {
                type: resourceType,
            };
        }
        if (resourceId) {
            where.resource = {
                resourceId,
            };
        }
        if (startDate && endDate) {
            where = {
                ...where,
                startDate: (0, typeorm_1.LessThan)(date_util_1.DateUtil.date(regex.test(endDate) ? endDate : endDate + ' 23:59:59').toDate()),
                endDate: (0, typeorm_1.MoreThan)(date_util_1.DateUtil.date(regex.test(startDate) ? startDate : startDate + ' 00:00:00').toDate()),
            };
        }
        const reservations = await this.reservationService.findAll({
            where,
            relations: ['resource', 'participants', 'participants.employee'],
            withDeleted: true,
        });
        const reservationResponseDtos = reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation));
        return reservationResponseDtos;
    }
    async findCheckReservationList(query) {
        const { page, limit } = query;
        const where = [
            {
                status: reservation_type_enum_1.ReservationStatus.PENDING,
                resource: {
                    type: resource_type_enum_1.ResourceType.ACCOMMODATION,
                },
            },
        ];
        const options = {
            where,
            relations: ['resource', 'reservationVehicles', 'participants', 'participants.employee'],
            withDeleted: true,
        };
        const reservations = await this.reservationService.findAll(options);
        const reservationResponseDtos = reservations.map((reservation) => new reservation_response_dto_1.ReservationWithRelationsResponseDto(reservation));
        return {
            items: reservationResponseDtos,
            meta: {
                total: reservations.length,
                page: 1,
                limit: reservations.length,
                hasNext: false,
            },
        };
    }
    async checkReservationAccess(reservationId, employeeId) {
        const reservation = await this.reservationService.findOne({
            where: { reservationId, participants: { employeeId, type: reservation_type_enum_1.ParticipantsType.RESERVER } },
            relations: ['participants'],
        });
        if (!reservation) {
            throw new common_1.UnauthorizedException(error_message_1.ERROR_MESSAGE.BUSINESS.COMMON.UNAUTHORIZED);
        }
        return true;
    }
    async makeReservation(user, createDto) {
        const conflicts = await this.reservationService.findConflictingReservations(createDto.resourceId, date_util_1.DateUtil.date(createDto.startDate).toDate(), date_util_1.DateUtil.date(createDto.endDate).toDate());
        if (conflicts.length > 0) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.TIME_CONFLICT);
        }
        if (createDto.startDate > createDto.endDate) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_DATE_RANGE);
        }
        const [resources] = await this.eventEmitter.emitAsync('find.resource', {
            repositoryOptions: {
                where: { resourceId: createDto.resourceId },
                relations: ['vehicleInfo'],
            },
        });
        const resource = resources[0];
        if (!resource.isAvailable) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.RESOURCE_UNAVAILABLE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const reservation = this.reservationService.create(createDto);
            const savedReservation = await this.reservationService.save(reservation, {
                queryRunner,
            });
            if (createDto.resourceType === resource_type_enum_1.ResourceType.VEHICLE) {
                const reservationVehicle = new entities_1.ReservationVehicle();
                reservationVehicle.reservationId = savedReservation.reservationId;
                reservationVehicle.vehicleInfoId = resource.vehicleInfo.vehicleInfoId;
                reservationVehicle.startOdometer = resource.vehicleInfo.totalMileage;
                reservationVehicle.isReturned = false;
                reservationVehicle.returnedAt = null;
                await this.reservationVehicleService.save(reservationVehicle, {
                    queryRunner,
                });
            }
            await Promise.all([
                this.participantService.save({
                    reservationId: savedReservation.reservationId,
                    employeeId: user.employeeId,
                    type: reservation_type_enum_1.ParticipantsType.RESERVER,
                }, { queryRunner }),
                ...createDto.participantIds.map((employeeId) => this.participantService.save({
                    reservationId: savedReservation.reservationId,
                    employeeId,
                    type: reservation_type_enum_1.ParticipantsType.PARTICIPANT,
                }, { queryRunner })),
            ]);
            await queryRunner.commitTransaction();
            try {
                const reservationWithResource = await this.reservationService.findOne({
                    where: { reservationId: savedReservation.reservationId },
                    relations: ['resource'],
                    withDeleted: true,
                });
                if (reservationWithResource.status === reservation_type_enum_1.ReservationStatus.CONFIRMED) {
                    if (reservationWithResource.resource.type !== resource_type_enum_1.ResourceType.VEHICLE) {
                        this.createReservationClosingJob(reservationWithResource);
                    }
                    const notiTarget = [...createDto.participantIds, user.employeeId];
                    this.eventEmitter.emit('create.notification', {
                        notificationType: notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED,
                        notificationData: {
                            reservationId: reservationWithResource.reservationId,
                            reservationTitle: reservationWithResource.title,
                            reservationDate: date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(reservationWithResource.startDate), date_util_1.DateUtil.format(reservationWithResource.endDate)),
                            resourceId: reservationWithResource.resource.resourceId,
                            resourceName: reservationWithResource.resource.name,
                            resourceType: reservationWithResource.resource.type,
                        },
                        notiTarget,
                    });
                    for (const beforeMinutes of reservationWithResource.notifyMinutesBeforeStart) {
                        this.eventEmitter.emit('create.notification', {
                            notificationType: notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING,
                            notificationData: {
                                reservationId: reservationWithResource.reservationId,
                                reservationTitle: reservationWithResource.title,
                                resourceId: reservationWithResource.resource.resourceId,
                                resourceName: reservationWithResource.resource.name,
                                resourceType: reservationWithResource.resource.type,
                                reservationDate: date_util_1.DateUtil.format(reservationWithResource.startDate),
                                beforeMinutes: beforeMinutes,
                            },
                            notiTarget,
                        });
                    }
                }
                else if (reservationWithResource.status === reservation_type_enum_1.ReservationStatus.PENDING &&
                    reservationWithResource.resource.type === resource_type_enum_1.ResourceType.ACCOMMODATION) {
                    const [systemUser] = await this.eventEmitter.emitAsync('find.user.system.admin');
                    this.eventEmitter.emit('create.notification', {
                        notificationType: notification_type_enum_1.NotificationType.RESERVATION_STATUS_PENDING,
                        notificationData: {
                            reservationId: reservationWithResource.reservationId,
                            reservationTitle: reservationWithResource.title,
                            reservationDate: date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(reservationWithResource.startDate), date_util_1.DateUtil.format(reservationWithResource.endDate)),
                            resourceId: reservationWithResource.resource.resourceId,
                            resourceName: reservationWithResource.resource.name,
                            resourceType: reservationWithResource.resource.type,
                        },
                        notiTarget: [...systemUser.map((user) => user.employeeId)],
                    });
                }
            }
            catch (error) {
                console.log(error);
                console.log('Notification creation failed');
            }
            return {
                reservationId: savedReservation.reservationId,
            };
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async updateReservation(reservationId, updateDto) {
        const reservation = await this.reservationService.findOne({
            where: { reservationId, status: (0, typeorm_1.In)([reservation_type_enum_1.ReservationStatus.PENDING, reservation_type_enum_1.ReservationStatus.CONFIRMED]) },
            relations: ['resource', 'participants'],
            withDeleted: true,
        });
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        if (reservation.status === reservation_type_enum_1.ReservationStatus.CLOSED) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.CANNOT_UPDATE_STATUS(reservation.status));
        }
        let hasUpdateTime = false;
        let hasUpdateParticipants = false;
        if (updateDto.participantIds) {
            hasUpdateParticipants =
                updateDto.participantIds.length !==
                    reservation.participants.filter((p) => p.type === reservation_type_enum_1.ParticipantsType.PARTICIPANT).length ||
                    updateDto.participantIds.some((id) => !reservation.participants.some((p) => p.employeeId === id));
        }
        if (updateDto.resourceId && updateDto.startDate && updateDto.endDate) {
            hasUpdateTime = true;
            const conflicts = await this.reservationService.findConflictingReservations(updateDto.resourceId, date_util_1.DateUtil.date(updateDto.startDate).toDate(), date_util_1.DateUtil.date(updateDto.endDate).toDate(), reservationId);
            if (conflicts.length > 0) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.TIME_CONFLICT);
            }
            if (reservation.status === reservation_type_enum_1.ReservationStatus.CONFIRMED &&
                reservation.resource.type === resource_type_enum_1.ResourceType.ACCOMMODATION) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.CANNOT_UPDATE_ACCOMMODATION_TIME);
            }
        }
        const participantIds = updateDto.participantIds;
        delete updateDto.participantIds;
        let updatedReservation = await this.reservationService.findOne({
            where: { reservationId },
            relations: ['participants', 'resource'],
            withDeleted: true,
        });
        const hasUpdateTings = updateDto.title || updateDto.isAllDay || updateDto.notifyBeforeStart || updateDto.notifyMinutesBeforeStart;
        if (hasUpdateTings) {
            updatedReservation = await this.reservationService.update(reservationId, {
                title: updateDto?.title || undefined,
                isAllDay: updateDto?.isAllDay || undefined,
                notifyBeforeStart: updateDto?.notifyBeforeStart || undefined,
                notifyMinutesBeforeStart: updateDto?.notifyMinutesBeforeStart || undefined,
            });
        }
        if (hasUpdateParticipants) {
            const participants = reservation.participants.filter((p) => p.type === reservation_type_enum_1.ParticipantsType.PARTICIPANT);
            const newParticipants = participantIds.filter((id) => !participants.some((p) => p.employeeId === id));
            const deletedParticipants = participants.filter((p) => !participantIds.includes(p.employeeId));
            await Promise.all(deletedParticipants.map((participant) => this.participantService.delete(participant.participantId)));
            await Promise.all(newParticipants.map((employeeId) => this.participantService.save({
                reservationId,
                employeeId,
                type: reservation_type_enum_1.ParticipantsType.PARTICIPANT,
            })));
            if (updatedReservation.resource.notifyParticipantChange) {
                try {
                    const notiTarget = [...newParticipants, ...participants.map((p) => p.employeeId)];
                    this.eventEmitter.emit('create.notification', {
                        notificationType: notification_type_enum_1.NotificationType.RESERVATION_PARTICIPANT_CHANGED,
                        notificationData: {
                            reservationId: updatedReservation.reservationId,
                            reservationTitle: updatedReservation.title,
                            reservationDate: date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(updatedReservation.startDate), date_util_1.DateUtil.format(updatedReservation.endDate)),
                            resourceId: updatedReservation.resource.resourceId,
                            resourceName: updatedReservation.resource.name,
                            resourceType: updatedReservation.resource.type,
                        },
                        notiTarget,
                    });
                }
                catch (error) {
                    console.log(error);
                    console.log('Notification creation failed in updateParticipants');
                }
            }
        }
        if (hasUpdateTime) {
            if (reservation.status === reservation_type_enum_1.ReservationStatus.CONFIRMED &&
                reservation.resource.type !== resource_type_enum_1.ResourceType.VEHICLE) {
                this.deleteReservationClosingJob(reservationId);
                this.createReservationClosingJob(reservation);
            }
            updatedReservation = await this.reservationService.update(reservationId, {
                startDate: updateDto.startDate ? date_util_1.DateUtil.date(updateDto.startDate).toDate() : undefined,
                endDate: updateDto.endDate ? date_util_1.DateUtil.date(updateDto.endDate).toDate() : undefined,
            });
            if (updatedReservation.resource.notifyReservationChange) {
                try {
                    const notiTarget = updatedReservation.participants.map((participant) => participant.employeeId);
                    await this.eventEmitter.emitAsync('create.notification', {
                        notificationType: notification_type_enum_1.NotificationType.RESERVATION_TIME_CHANGED,
                        notificationData: {
                            reservationId: updatedReservation.reservationId,
                            reservationTitle: updatedReservation.title,
                            reservationDate: date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(updatedReservation.startDate), date_util_1.DateUtil.format(updatedReservation.endDate)),
                            resourceId: updatedReservation.resource.resourceId,
                            resourceName: updatedReservation.resource.name,
                            resourceType: updatedReservation.resource.type,
                        },
                        notiTarget,
                    });
                    for (const beforeMinutes of updatedReservation.notifyMinutesBeforeStart) {
                        this.eventEmitter.emit('create.notification', {
                            notificationType: notification_type_enum_1.NotificationType.RESERVATION_DATE_UPCOMING,
                            notificationData: {
                                reservationId: updatedReservation.reservationId,
                                reservationTitle: updatedReservation.title,
                                resourceId: updatedReservation.resource.resourceId,
                                resourceName: updatedReservation.resource.name,
                                resourceType: updatedReservation.resource.type,
                                reservationDate: date_util_1.DateUtil.format(updatedReservation.startDate),
                                beforeMinutes: beforeMinutes,
                            },
                            notiTarget,
                        });
                    }
                }
                catch (error) {
                    console.log(error);
                    console.log('Notification creation failed in updateTime');
                }
            }
        }
        return new reservation_response_dto_1.ReservationResponseDto(updatedReservation);
    }
    async updateStatus(reservationId, updateDto) {
        const reservation = await this.reservationService.findOne({
            where: { reservationId },
            relations: ['resource', 'resource.resourceManagers'],
            withDeleted: true,
        });
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        if (reservation.status === reservation_type_enum_1.ReservationStatus.CLOSED) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.CANNOT_UPDATE_STATUS(reservation.status));
        }
        const updatedReservation = await this.reservationService.update(reservationId, updateDto);
        if (updateDto.status === reservation_type_enum_1.ReservationStatus.CANCELLED || updateDto.status === reservation_type_enum_1.ReservationStatus.REJECTED) {
            this.deleteReservationClosingJob(reservationId);
        }
        if (updateDto.status === reservation_type_enum_1.ReservationStatus.CONFIRMED) {
            this.createReservationClosingJob(updatedReservation);
        }
        if (reservation.resource.notifyReservationChange && updateDto.status !== reservation_type_enum_1.ReservationStatus.CLOSED) {
            try {
                const reservers = await this.participantService.findAll({
                    where: { reservationId },
                });
                const notiTarget = [
                    ...reservation.resource.resourceManagers.map((manager) => manager.employeeId),
                    ...reservers.map((reserver) => reserver.employeeId),
                ];
                let notificationType;
                switch (updateDto.status) {
                    case reservation_type_enum_1.ReservationStatus.CONFIRMED:
                        notificationType = notification_type_enum_1.NotificationType.RESERVATION_STATUS_CONFIRMED;
                        break;
                    case reservation_type_enum_1.ReservationStatus.CANCELLED:
                        notificationType = notification_type_enum_1.NotificationType.RESERVATION_STATUS_CANCELLED;
                        break;
                    case reservation_type_enum_1.ReservationStatus.REJECTED:
                        notificationType = notification_type_enum_1.NotificationType.RESERVATION_STATUS_REJECTED;
                        break;
                }
                this.eventEmitter.emit('create.notification', {
                    notificationType,
                    notificationData: {
                        reservationId: reservation.reservationId,
                        reservationTitle: reservation.title,
                        reservationDate: date_util_1.DateUtil.toAlarmRangeString(date_util_1.DateUtil.format(reservation.startDate), date_util_1.DateUtil.format(reservation.endDate)),
                        resourceId: reservation.resource.resourceId,
                        resourceName: reservation.resource.name,
                        resourceType: reservation.resource.type,
                    },
                    notiTarget,
                });
            }
            catch (error) {
                console.log(error);
                console.log('Notification creation failed in updateStatus');
            }
        }
        return new reservation_response_dto_1.ReservationResponseDto(updatedReservation);
    }
    async returnVehicle(user, reservationId, returnDto) {
        const reservation = await this.reservationService.findOne({
            where: { reservationId },
            relations: ['resource', 'resource.vehicleInfo', 'resource.resourceManagers'],
            withDeleted: true,
        });
        if (!reservation) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.NOT_FOUND);
        }
        if (reservation.resource.type !== resource_type_enum_1.ResourceType.VEHICLE) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_RESOURCE_TYPE);
        }
        if (reservation.status !== reservation_type_enum_1.ReservationStatus.CONFIRMED) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.CANNOT_RETURN_STATUS(reservation.status));
        }
        if (reservation.resource.vehicleInfo.totalMileage > returnDto.totalMileage) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.INVALID_MILEAGE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const reservationVehicles = await this.reservationVehicleService.findByReservationId(reservationId, {
                queryRunner,
            });
            if (!reservationVehicles || reservationVehicles.length === 0) {
                throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.VEHICLE_NOT_FOUND);
            }
            const reservationVehicle = reservationVehicles[0];
            if (reservationVehicle.isReturned) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.VEHICLE_ALREADY_RETURNED);
            }
            await this.reservationService.update(reservationId, {
                status: reservation_type_enum_1.ReservationStatus.CLOSED,
            }, { queryRunner });
            await this.reservationVehicleService.update(reservationVehicle.reservationVehicleId, {
                endOdometer: returnDto.totalMileage,
                isReturned: true,
                returnedAt: date_util_1.DateUtil.now().toDate(),
            }, { queryRunner });
            const vehicleInfoId = reservation.resource.vehicleInfo.vehicleInfoId;
            await this.eventEmitter.emitAsync('update.resource', {
                resourceId: reservation.resource.resourceId,
                updateData: { location: returnDto.location },
                repositoryOptions: { queryRunner },
            });
            await this.eventEmitter.emitAsync('update.vehicle.info', {
                vehicleInfoId,
                updateData: {
                    totalMileage: returnDto.totalMileage,
                    leftMileage: returnDto.leftMileage,
                    parkingLocationImages: returnDto.parkingLocationImages,
                    odometerImages: returnDto.odometerImages,
                    indoorImages: returnDto.indoorImages,
                },
                repositoryOptions: { queryRunner },
            });
            const notiTarget = [
                user.employeeId,
            ];
            this.eventEmitter.emit('create.notification', {
                notificationType: notification_type_enum_1.NotificationType.RESOURCE_VEHICLE_RETURNED,
                notificationData: {
                    resourceId: reservation.resource.resourceId,
                    resourceName: reservation.resource.name,
                    resourceType: reservation.resource.type,
                },
                notiTarget,
            });
            await queryRunner.commitTransaction();
            return true;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            console.error('Error in returnVehicle:', error);
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async returnVehicleCheck(reservationId) {
        return true;
    }
    deleteReservationClosingJob(reservationId) {
        const jobName = `closing-${reservationId}`;
        try {
            if (this.schedulerRegistry.doesExist('cron', jobName)) {
                this.schedulerRegistry.deleteCronJob(jobName);
                console.log(`Job ${jobName} deleted successfully`);
            }
        }
        catch (error) {
            console.log(`Failed to delete job ${jobName}: ${error.message}`);
        }
    }
    async createReservationClosingJob(reservation) {
        const jobName = `closing-${reservation.reservationId}`;
        console.log('createReservationClosingJob', jobName);
        const executeTime = date_util_1.DateUtil.date(reservation.endDate).toDate();
        if (executeTime.getTime() <= Date.now()) {
            console.log(`ExecuteTime time ${executeTime} is in the past, skipping cron job creation`);
            await this.reservationService.update(reservation.reservationId, { status: reservation_type_enum_1.ReservationStatus.CLOSED });
            return;
        }
        this.deleteReservationClosingJob(reservation.reservationId);
        const job = new dist_1.CronJob(executeTime, async () => {
            await this.reservationService.update(reservation.reservationId, { status: reservation_type_enum_1.ReservationStatus.CLOSED });
        });
        this.schedulerRegistry.addCronJob(jobName, job);
        job.start();
    }
};
exports.ReservationUsecase = ReservationUsecase;
exports.ReservationUsecase = ReservationUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_service_1.ReservationService !== "undefined" && reservation_service_1.ReservationService) === "function" ? _a : Object, typeof (_b = typeof participant_service_1.ParticipantService !== "undefined" && participant_service_1.ParticipantService) === "function" ? _b : Object, typeof (_c = typeof reservation_vehicle_service_1.ReservationVehicleService !== "undefined" && reservation_vehicle_service_1.ReservationVehicleService) === "function" ? _c : Object, typeof (_d = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _d : Object, typeof (_e = typeof event_emitter_1.EventEmitter2 !== "undefined" && event_emitter_1.EventEmitter2) === "function" ? _e : Object, typeof (_f = typeof schedule_1.SchedulerRegistry !== "undefined" && schedule_1.SchedulerRegistry) === "function" ? _f : Object])
], ReservationUsecase);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/domain/ports/reservation-participant.repository.port.ts":
/*!*******************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/domain/ports/reservation-participant.repository.port.ts ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/reservation/domain/ports/reservation-snapshot.repository.port.ts":
/*!****************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/domain/ports/reservation-snapshot.repository.port.ts ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/reservation/domain/ports/reservation-vehicle.repository.port.ts":
/*!***************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/domain/ports/reservation-vehicle.repository.port.ts ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/reservation/domain/ports/reservation.repository.port.ts":
/*!*******************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/domain/ports/reservation.repository.port.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/reservation/infrastructure/adapters/in/web/controllers/v1/admin.reservation.controller.ts":
/*!*****************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/infrastructure/adapters/in/web/controllers/v1/admin.reservation.controller.ts ***!
  \*****************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminReservationController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const dtos_index_1 = __webpack_require__(/*! @resource/dtos.index */ "./apps/resource/src/dtos.index.ts");
const reservation_usecase_1 = __webpack_require__(/*! ../../../../../../application/usecases/reservation.usecase */ "./apps/resource/src/modules/reservation/application/usecases/reservation.usecase.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_response_dto_1 = __webpack_require__(/*! @resource/modules/reservation/application/dtos/reservation-response.dto */ "./apps/resource/src/modules/reservation/application/dtos/reservation-response.dto.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const paginate_query_dto_1 = __webpack_require__(/*! @libs/dtos/paginate-query.dto */ "./libs/dtos/paginate-query.dto.ts");
let AdminReservationController = class AdminReservationController {
    constructor(reservationUsecase) {
        this.reservationUsecase = reservationUsecase;
    }
    async findReservationList(startDate, endDate, resourceType, resourceId, status) {
        return this.reservationUsecase.findReservationList(startDate, endDate, resourceType, resourceId, status);
    }
    async findCheckReservationList(query) {
        return this.reservationUsecase.findCheckReservationList(query);
    }
    async findOne(user, reservationId) {
        return this.reservationUsecase.findReservationDetail(user, reservationId);
    }
    async updateStatus(reservationId, updateDto) {
        return this.reservationUsecase.updateStatus(reservationId, updateDto);
    }
};
exports.AdminReservationController = AdminReservationController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({
        summary: '예약 리스트 조회 #관리자/예약관리',
    }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 리스트 조회 성공',
        type: [reservation_response_dto_1.ReservationWithResourceResponseDto],
    }),
    (0, swagger_1.ApiQuery)({
        name: 'startDate',
        type: String,
        required: false,
        example: date_util_1.DateUtil.now().addDays(-20).format('YYYY-MM-DD'),
    }),
    (0, swagger_1.ApiQuery)({
        name: 'endDate',
        type: String,
        required: false,
        example: date_util_1.DateUtil.now().addDays(30).format('YYYY-MM-DD'),
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({ name: 'resourceId', type: String, required: false, example: '78117aaf-a203-43a3-bb38-51ec91ca935a' }),
    (0, swagger_1.ApiQuery)({
        name: 'status',
        enum: reservation_type_enum_1.ReservationStatus,
        description: `Available values : ${Object.values(reservation_type_enum_1.ReservationStatus).join(', ')}`,
        isArray: true,
        required: false,
        example: [reservation_type_enum_1.ReservationStatus.CONFIRMED],
    }),
    __param(0, (0, common_1.Query)('startDate')),
    __param(1, (0, common_1.Query)('endDate')),
    __param(2, (0, common_1.Query)('resourceType')),
    __param(3, (0, common_1.Query)('resourceId')),
    __param(4, (0, common_1.Query)('status', new common_1.ParseArrayPipe({ optional: true, separator: ',' }))),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String, typeof (_b = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _b : Object, String, Array]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], AdminReservationController.prototype, "findReservationList", null);
__decorate([
    (0, common_1.Get)('check'),
    (0, swagger_1.ApiOperation)({ summary: '확인이 필요한 예약들' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '확인이 필요한 예약들 조회 성공',
        type: [reservation_response_dto_1.ReservationWithRelationsResponseDto],
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof paginate_query_dto_1.PaginationQueryDto !== "undefined" && paginate_query_dto_1.PaginationQueryDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], AdminReservationController.prototype, "findCheckReservationList", null);
__decorate([
    (0, common_1.Get)(':reservationId'),
    (0, swagger_1.ApiOperation)({ summary: '예약 상세 조회 #사용자/예약상세페이지' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 상세 조회 성공',
        type: reservation_response_dto_1.ReservationWithRelationsResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _f : Object, String]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], AdminReservationController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':reservationId/status'),
    (0, swagger_1.ApiOperation)({ summary: '예약 상태 수정 #관리자/예약관리/예약상세' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 상태 수정 성공',
        type: dtos_index_1.ReservationResponseDto,
    }),
    __param(0, (0, common_1.Param)('reservationId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_h = typeof dtos_index_1.UpdateReservationStatusDto !== "undefined" && dtos_index_1.UpdateReservationStatusDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], AdminReservationController.prototype, "updateStatus", null);
exports.AdminReservationController = AdminReservationController = __decorate([
    (0, swagger_1.ApiTags)('2. 예약 - 관리자 페이지'),
    (0, common_1.Controller)('v1/admin/reservations'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_usecase_1.ReservationUsecase !== "undefined" && reservation_usecase_1.ReservationUsecase) === "function" ? _a : Object])
], AdminReservationController);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/infrastructure/adapters/in/web/controllers/v1/cron.reservation.controller.ts":
/*!****************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/infrastructure/adapters/in/web/controllers/v1/cron.reservation.controller.ts ***!
  \****************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CronReservationController = void 0;
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const reservation_usecase_1 = __webpack_require__(/*! @resource/modules/reservation/application/usecases/reservation.usecase */ "./apps/resource/src/modules/reservation/application/usecases/reservation.usecase.ts");
let CronReservationController = class CronReservationController {
    constructor(reservationUsecase) {
        this.reservationUsecase = reservationUsecase;
    }
    async closeReservation() {
        return this.reservationUsecase.handleCron();
    }
};
exports.CronReservationController = CronReservationController;
__decorate([
    (0, swagger_1.ApiExcludeEndpoint)(),
    (0, common_1.Get)('cron-job/close'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], CronReservationController.prototype, "closeReservation", null);
exports.CronReservationController = CronReservationController = __decorate([
    (0, swagger_1.ApiTags)('2. 예약 - 사용자 페이지'),
    (0, public_decorator_1.Public)(),
    (0, common_1.Controller)('v1/reservations'),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_usecase_1.ReservationUsecase !== "undefined" && reservation_usecase_1.ReservationUsecase) === "function" ? _a : Object])
], CronReservationController);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/infrastructure/adapters/in/web/controllers/v1/reservation.controller.ts":
/*!***********************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/infrastructure/adapters/in/web/controllers/v1/reservation.controller.ts ***!
  \***********************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserReservationController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const create_reservation_dto_1 = __webpack_require__(/*! ../../../../../../application/dtos/create-reservation.dto */ "./apps/resource/src/modules/reservation/application/dtos/create-reservation.dto.ts");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const dtos_index_1 = __webpack_require__(/*! @resource/dtos.index */ "./apps/resource/src/dtos.index.ts");
const reservation_usecase_1 = __webpack_require__(/*! ../../../../../../application/usecases/reservation.usecase */ "./apps/resource/src/modules/reservation/application/usecases/reservation.usecase.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_response_dto_1 = __webpack_require__(/*! @resource/modules/reservation/application/dtos/reservation-response.dto */ "./apps/resource/src/modules/reservation/application/dtos/reservation-response.dto.ts");
const paginate_query_dto_1 = __webpack_require__(/*! @libs/dtos/paginate-query.dto */ "./libs/dtos/paginate-query.dto.ts");
const reservation_snapshot_dto_1 = __webpack_require__(/*! @resource/modules/reservation/application/dtos/reservation-snapshot.dto */ "./apps/resource/src/modules/reservation/application/dtos/reservation-snapshot.dto.ts");
const reservation_snapshot_usecase_1 = __webpack_require__(/*! @resource/modules/reservation/application/usecases/reservation-snapshot.usecase */ "./apps/resource/src/modules/reservation/application/usecases/reservation-snapshot.usecase.ts");
const update_reservation_dto_1 = __webpack_require__(/*! @resource/modules/reservation/application/dtos/update-reservation.dto */ "./apps/resource/src/modules/reservation/application/dtos/update-reservation.dto.ts");
let UserReservationController = class UserReservationController {
    constructor(reservationUsecase, reservationSnapshotUsecase) {
        this.reservationUsecase = reservationUsecase;
        this.reservationSnapshotUsecase = reservationSnapshotUsecase;
    }
    async createSnapshot(user, createSnapshotDto) {
        return this.reservationSnapshotUsecase.upsertSnapshot(user, createSnapshotDto);
    }
    async updateSnapshot(user, updateSnapshotDto) {
        return this.reservationSnapshotUsecase.updateSnapshot(updateSnapshotDto);
    }
    async findUserSnapshot(user) {
        return this.reservationSnapshotUsecase.findSnapshotByUserId(user.userId);
    }
    async deleteSnapshot(user, snapshotId) {
        await this.reservationSnapshotUsecase.deleteSnapshot(snapshotId);
    }
    async create(user, createDto) {
        return this.reservationUsecase.makeReservation(user, createDto);
    }
    async findMyReservationList(user, resourceType, query) {
        const { page, limit } = query;
        return this.reservationUsecase.findMyReservationList(user.employeeId, page, limit, resourceType);
    }
    async findResourceReservationList(user, resourceId, query, month, isMine) {
        const { page, limit } = query;
        return this.reservationUsecase.findResourceReservationList(user.employeeId, resourceId, page, limit, month, isMine);
    }
    async findMyUsingReservationList(user) {
        return this.reservationUsecase.findMyUsingReservationList(user.employeeId);
    }
    async findMyUpcomingReservationList(user, resourceType, query) {
        return this.reservationUsecase.findMyUpcomingReservationList(user.employeeId, query, resourceType);
    }
    async findMyUpcomingSchedules(user, resourceType, query) {
        return this.reservationUsecase.findMyAllSchedules(user.employeeId, query, resourceType);
    }
    async findOne(user, reservationId) {
        return this.reservationUsecase.findReservationDetail(user, reservationId);
    }
    async updateReservation(user, reservationId, updateDto) {
        await this.reservationUsecase.checkReservationAccess(reservationId, user.employeeId);
        return this.reservationUsecase.updateReservation(reservationId, updateDto);
    }
    async updateStatusCancel(user, reservationId) {
        await this.reservationUsecase.checkReservationAccess(reservationId, user.employeeId);
        return this.reservationUsecase.updateStatus(reservationId, { status: reservation_type_enum_1.ReservationStatus.CANCELLED });
    }
    async returnVehicle(user, reservationId, returnDto) {
        return this.reservationUsecase.returnVehicle(user, reservationId, returnDto);
    }
};
exports.UserReservationController = UserReservationController;
__decorate([
    (0, common_1.Post)('snapshot'),
    (0, swagger_1.ApiOperation)({ summary: '예약 스냅샷 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 스냅샷 생성 성공',
        type: dtos_index_1.ReservationSnapshotResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _c : Object, typeof (_d = typeof reservation_snapshot_dto_1.CreateReservationSnapshotDto !== "undefined" && reservation_snapshot_dto_1.CreateReservationSnapshotDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], UserReservationController.prototype, "createSnapshot", null);
__decorate([
    (0, common_1.Patch)('snapshot'),
    (0, swagger_1.ApiOperation)({ summary: '예약 스냅샷 업데이트' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 스냅샷 업데이트 성공',
        type: dtos_index_1.ReservationSnapshotResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_f = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _f : Object, typeof (_g = typeof dtos_index_1.UpdateReservationSnapshotDto !== "undefined" && dtos_index_1.UpdateReservationSnapshotDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], UserReservationController.prototype, "updateSnapshot", null);
__decorate([
    (0, common_1.Get)('snapshot/user'),
    (0, swagger_1.ApiOperation)({ summary: '유저의 예약 스냅샷 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 스냅샷 조회 성공',
        type: dtos_index_1.ReservationSnapshotResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _j : Object]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], UserReservationController.prototype, "findUserSnapshot", null);
__decorate([
    (0, common_1.Delete)('snapshot/:snapshotId'),
    (0, swagger_1.ApiOperation)({ summary: '예약 스냅샷 삭제' }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('snapshotId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_l = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _l : Object, String]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], UserReservationController.prototype, "deleteSnapshot", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '예약 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 생성 성공',
        type: dtos_index_1.CreateReservationResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_o = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _o : Object, typeof (_p = typeof create_reservation_dto_1.CreateReservationDto !== "undefined" && create_reservation_dto_1.CreateReservationDto) === "function" ? _p : Object]),
    __metadata("design:returntype", typeof (_q = typeof Promise !== "undefined" && Promise) === "function" ? _q : Object)
], UserReservationController.prototype, "create", null);
__decorate([
    (0, common_1.Get)('me'),
    (0, swagger_1.ApiOperation)({ summary: '내 예약 리스트 조회, 자원 타입별 ' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '내 예약 리스트 조회',
        type: [reservation_response_dto_1.GroupedReservationResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('resourceType')),
    __param(2, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_r = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _r : Object, typeof (_s = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _s : Object, typeof (_t = typeof paginate_query_dto_1.PaginationQueryDto !== "undefined" && paginate_query_dto_1.PaginationQueryDto) === "function" ? _t : Object]),
    __metadata("design:returntype", typeof (_u = typeof Promise !== "undefined" && Promise) === "function" ? _u : Object)
], UserReservationController.prototype, "findMyReservationList", null);
__decorate([
    (0, common_1.Get)('resource/:resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원별 예약 리스트 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '자원별 예약 리스트 조회',
        type: reservation_response_dto_1.GroupedReservationWithResourceResponseDto,
    }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    (0, swagger_1.ApiQuery)({ name: 'month', type: String, example: '2025-04' }),
    (0, swagger_1.ApiQuery)({ name: 'isMine', type: Boolean, required: false, example: true }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('resourceId')),
    __param(2, (0, common_1.Query)()),
    __param(3, (0, common_1.Query)('month')),
    __param(4, (0, common_1.Query)('isMine')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_v = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _v : Object, String, typeof (_w = typeof paginate_query_dto_1.PaginationQueryDto !== "undefined" && paginate_query_dto_1.PaginationQueryDto) === "function" ? _w : Object, String, Boolean]),
    __metadata("design:returntype", typeof (_x = typeof Promise !== "undefined" && Promise) === "function" ? _x : Object)
], UserReservationController.prototype, "findResourceReservationList", null);
__decorate([
    (0, common_1.Get)('my-using'),
    (0, swagger_1.ApiOperation)({ summary: '내 이용중인 예약 리스트 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '내 이용중인 예약 리스트 조회',
        type: [reservation_response_dto_1.ReservationWithRelationsResponseDto],
    }),
    __param(0, (0, user_decorator_1.User)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_y = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _y : Object]),
    __metadata("design:returntype", typeof (_z = typeof Promise !== "undefined" && Promise) === "function" ? _z : Object)
], UserReservationController.prototype, "findMyUsingReservationList", null);
__decorate([
    (0, common_1.Get)('my-upcoming'),
    (0, swagger_1.ApiOperation)({ summary: '내 예약 리스트 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '내 예약 리스트 조회',
        type: [reservation_response_dto_1.GroupedReservationResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('resourceType')),
    __param(2, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_0 = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _0 : Object, typeof (_1 = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _1 : Object, typeof (_2 = typeof paginate_query_dto_1.PaginationQueryDto !== "undefined" && paginate_query_dto_1.PaginationQueryDto) === "function" ? _2 : Object]),
    __metadata("design:returntype", typeof (_3 = typeof Promise !== "undefined" && Promise) === "function" ? _3 : Object)
], UserReservationController.prototype, "findMyUpcomingReservationList", null);
__decorate([
    (0, common_1.Get)('my-upcoming-schedules'),
    (0, swagger_1.ApiOperation)({ summary: '내 일정 리스트 조회 (예약자/참석자 모두 포함)' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '내 일정 리스트 조회 (예약자/참석자 모두 포함)',
        type: [reservation_response_dto_1.GroupedReservationResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: false, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('resourceType')),
    __param(2, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_4 = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _4 : Object, typeof (_5 = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _5 : Object, typeof (_6 = typeof paginate_query_dto_1.PaginationQueryDto !== "undefined" && paginate_query_dto_1.PaginationQueryDto) === "function" ? _6 : Object]),
    __metadata("design:returntype", typeof (_7 = typeof Promise !== "undefined" && Promise) === "function" ? _7 : Object)
], UserReservationController.prototype, "findMyUpcomingSchedules", null);
__decorate([
    (0, common_1.Get)(':reservationId'),
    (0, swagger_1.ApiOperation)({ summary: '예약 상세 조회 #사용자/예약상세페이지' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 상세 조회 성공',
        type: reservation_response_dto_1.ReservationWithRelationsResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_8 = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _8 : Object, String]),
    __metadata("design:returntype", typeof (_9 = typeof Promise !== "undefined" && Promise) === "function" ? _9 : Object)
], UserReservationController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':reservationId'),
    (0, swagger_1.ApiOperation)({ summary: '예약 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 수정 성공',
        type: dtos_index_1.ReservationResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_10 = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _10 : Object, String, typeof (_11 = typeof update_reservation_dto_1.UpdateReservationDto !== "undefined" && update_reservation_dto_1.UpdateReservationDto) === "function" ? _11 : Object]),
    __metadata("design:returntype", typeof (_12 = typeof Promise !== "undefined" && Promise) === "function" ? _12 : Object)
], UserReservationController.prototype, "updateReservation", null);
__decorate([
    (0, common_1.Patch)(':reservationId/status/cancel'),
    (0, swagger_1.ApiOperation)({ summary: '예약 취소 #사용자/예약상세페이지' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 상태 수정 성공',
        type: dtos_index_1.ReservationResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_13 = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _13 : Object, String]),
    __metadata("design:returntype", typeof (_14 = typeof Promise !== "undefined" && Promise) === "function" ? _14 : Object)
], UserReservationController.prototype, "updateStatusCancel", null);
__decorate([
    (0, common_1.Patch)(':reservationId/return-vehicle'),
    (0, swagger_1.ApiOperation)({ summary: '차량 반납 #사용자/자원예약/차량반납' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '차량 반납 성공',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('reservationId')),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_15 = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _15 : Object, String, typeof (_16 = typeof dtos_index_1.ReturnVehicleDto !== "undefined" && dtos_index_1.ReturnVehicleDto) === "function" ? _16 : Object]),
    __metadata("design:returntype", typeof (_17 = typeof Promise !== "undefined" && Promise) === "function" ? _17 : Object)
], UserReservationController.prototype, "returnVehicle", null);
exports.UserReservationController = UserReservationController = __decorate([
    (0, swagger_1.ApiTags)('2. 예약 - 사용자 페이지'),
    (0, common_1.Controller)('v1/reservations'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    __metadata("design:paramtypes", [typeof (_a = typeof reservation_usecase_1.ReservationUsecase !== "undefined" && reservation_usecase_1.ReservationUsecase) === "function" ? _a : Object, typeof (_b = typeof reservation_snapshot_usecase_1.ReservationSnapshotUsecase !== "undefined" && reservation_snapshot_usecase_1.ReservationSnapshotUsecase) === "function" ? _b : Object])
], UserReservationController);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation-participant.repository.ts":
/*!*****************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation-participant.repository.ts ***!
  \*****************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationParticipantRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let ReservationParticipantRepository = class ReservationParticipantRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(participant, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationParticipant)
            : this.repository;
        const entity = repository.create(participant);
        const saved = await repository.save(entity);
        return saved;
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationParticipant)
            : this.repository;
        return repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
        });
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationParticipant)
            : this.repository;
        return repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
        });
    }
    async update(id, participant, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationParticipant)
            : this.repository;
        await repository.update(id, participant);
        const updated = await repository.findOne({
            where: { participantId: id },
        });
        return updated;
    }
    async delete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationParticipant)
            : this.repository;
        await repository.delete(id);
    }
};
exports.ReservationParticipantRepository = ReservationParticipantRepository;
exports.ReservationParticipantRepository = ReservationParticipantRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.ReservationParticipant)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], ReservationParticipantRepository);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation-snapshot.repository.ts":
/*!**************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation-snapshot.repository.ts ***!
  \**************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationSnapshotRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let ReservationSnapshotRepository = class ReservationSnapshotRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationSnapshot)
            : this.repository;
        return repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
        });
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationSnapshot)
            : this.repository;
        return repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
        });
    }
    create(dto) {
        const snapshot = this.repository.create(dto);
        return snapshot;
    }
    async save(snapshot, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationSnapshot)
            : this.repository;
        return repository.save(snapshot);
    }
    async update(id, dto) {
        await this.repository.update(id, dto);
        const updated = await this.repository.findOne({
            where: { snapshotId: id },
        });
        return updated;
    }
    async delete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationSnapshot)
            : this.repository;
        await repository.delete(id);
    }
    async count(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationSnapshot)
            : this.repository;
        return repository.count({
            where: repositoryOptions?.where
        });
    }
};
exports.ReservationSnapshotRepository = ReservationSnapshotRepository;
exports.ReservationSnapshotRepository = ReservationSnapshotRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.ReservationSnapshot)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], ReservationSnapshotRepository);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation-vehicle.repository.ts":
/*!*************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation-vehicle.repository.ts ***!
  \*************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationVehicleRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let ReservationVehicleRepository = class ReservationVehicleRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(reservationVehicle, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationVehicle)
            : this.repository;
        return await repository.save(reservationVehicle);
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationVehicle)
            : this.repository;
        const entity = await repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            withDeleted: repositoryOptions?.withDeleted,
        });
        return entity ? entity : null;
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationVehicle)
            : this.repository;
        return await repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
    }
    async update(id, reservationVehicle, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationVehicle)
            : this.repository;
        await repository.update({ reservationVehicleId: id }, reservationVehicle);
        const updated = await repository.findOne({ where: { reservationVehicleId: id } });
        return updated;
    }
    async delete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationVehicle)
            : this.repository;
        await repository.delete({ reservationVehicleId: id });
    }
    async count(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ReservationVehicle)
            : this.repository;
        return await repository.count({
            where: repositoryOptions?.where,
        });
    }
    async updateOdometer(id, startOdometer, endOdometer, repositoryOptions) {
        return this.update(id, {
            startOdometer,
            endOdometer,
        }, repositoryOptions);
    }
    async updateFuelLevel(id, startFuelLevel, endFuelLevel, repositoryOptions) {
        return this.update(id, {
            startFuelLevel,
            endFuelLevel,
        }, repositoryOptions);
    }
    async markAsReturned(id, repositoryOptions) {
        return this.update(id, {
            isReturned: true,
            returnedAt: new Date(),
        }, repositoryOptions);
    }
    async findByReservationId(reservationId, repositoryOptions) {
        const options = {
            ...repositoryOptions,
            where: { reservationId },
        };
        return this.findAll(options);
    }
    async findByVehicleInfoId(vehicleInfoId, repositoryOptions) {
        const options = {
            ...repositoryOptions,
            where: { vehicleInfoId },
        };
        return this.findAll(options);
    }
};
exports.ReservationVehicleRepository = ReservationVehicleRepository;
exports.ReservationVehicleRepository = ReservationVehicleRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.ReservationVehicle)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], ReservationVehicleRepository);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation.repository.ts":
/*!*****************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation.repository.ts ***!
  \*****************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let ReservationRepository = class ReservationRepository {
    constructor(repository) {
        this.repository = repository;
    }
    create(createDto) {
        const reservation = new entities_1.Reservation();
        reservation.resourceId = createDto.resourceId;
        reservation.title = createDto.title;
        reservation.description = createDto.description;
        reservation.startDate = date_util_1.DateUtil.date(createDto.startDate).toDate();
        reservation.endDate = date_util_1.DateUtil.date(createDto.endDate).toDate();
        reservation.isAllDay = createDto.isAllDay;
        reservation.notifyBeforeStart = createDto.notifyBeforeStart;
        reservation.notifyMinutesBeforeStart = createDto.notifyMinutesBeforeStart;
        reservation.status =
            createDto.resourceType === resource_type_enum_1.ResourceType.ACCOMMODATION
                ? reservation_type_enum_1.ReservationStatus.PENDING
                : reservation_type_enum_1.ReservationStatus.CONFIRMED;
        return reservation;
    }
    async save(reservation, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Reservation)
            : this.repository;
        try {
            const saved = await repository.save(reservation);
            return saved;
        }
        catch (error) {
            if (error.constraint === 'no_time_overlap') {
                console.warn(date_util_1.DateUtil.now().toISOString(), reservation.startDate, reservation.endDate);
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESERVATION.TIME_CONFLICT);
            }
            throw error;
        }
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Reservation)
            : this.repository;
        const entity = await repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            withDeleted: repositoryOptions?.withDeleted,
        });
        return entity ? entity : null;
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Reservation)
            : this.repository;
        const entities = await repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
        return entities;
    }
    async update(id, reservation, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Reservation)
            : this.repository;
        await repository.update(id, reservation);
        const updated = await repository.findOne({
            where: { reservationId: id },
            relations: ['resource', 'participants'],
        });
        return updated;
    }
    async delete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Reservation)
            : this.repository;
        await repository.delete(id);
    }
    async count(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Reservation)
            : this.repository;
        const count = await repository.count({
            where: repositoryOptions?.where,
        });
        return count;
    }
};
exports.ReservationRepository = ReservationRepository;
exports.ReservationRepository = ReservationRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.Reservation)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], ReservationRepository);


/***/ }),

/***/ "./apps/resource/src/modules/reservation/reservation.module.ts":
/*!*********************************************************************!*\
  !*** ./apps/resource/src/modules/reservation/reservation.module.ts ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const reservation_service_1 = __webpack_require__(/*! ./application/services/reservation.service */ "./apps/resource/src/modules/reservation/application/services/reservation.service.ts");
const reservation_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/reservation.repository */ "./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation.repository.ts");
const reservation_participant_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/reservation-participant.repository */ "./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation-participant.repository.ts");
const participant_service_1 = __webpack_require__(/*! ./application/services/participant.service */ "./apps/resource/src/modules/reservation/application/services/participant.service.ts");
const reservation_usecase_1 = __webpack_require__(/*! ./application/usecases/reservation.usecase */ "./apps/resource/src/modules/reservation/application/usecases/reservation.usecase.ts");
const reservation_event_handler_1 = __webpack_require__(/*! ./application/handler/reservation-event.handler */ "./apps/resource/src/modules/reservation/application/handler/reservation-event.handler.ts");
const admin_reservation_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/admin.reservation.controller */ "./apps/resource/src/modules/reservation/infrastructure/adapters/in/web/controllers/v1/admin.reservation.controller.ts");
const reservation_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/reservation.controller */ "./apps/resource/src/modules/reservation/infrastructure/adapters/in/web/controllers/v1/reservation.controller.ts");
const reservation_snapshot_usecase_1 = __webpack_require__(/*! ./application/usecases/reservation-snapshot.usecase */ "./apps/resource/src/modules/reservation/application/usecases/reservation-snapshot.usecase.ts");
const reservation_snapshot_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/reservation-snapshot.repository */ "./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation-snapshot.repository.ts");
const reservation_snapshot_service_1 = __webpack_require__(/*! ./application/services/reservation-snapshot.service */ "./apps/resource/src/modules/reservation/application/services/reservation-snapshot.service.ts");
const reservation_vehicle_service_1 = __webpack_require__(/*! ./application/services/reservation-vehicle.service */ "./apps/resource/src/modules/reservation/application/services/reservation-vehicle.service.ts");
const reservation_vehicle_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/reservation-vehicle.repository */ "./apps/resource/src/modules/reservation/infrastructure/adapters/out/persistence/reservation-vehicle.repository.ts");
const cron_reservation_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/cron.reservation.controller */ "./apps/resource/src/modules/reservation/infrastructure/adapters/in/web/controllers/v1/cron.reservation.controller.ts");
let ReservationModule = class ReservationModule {
};
exports.ReservationModule = ReservationModule;
exports.ReservationModule = ReservationModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([
                entities_1.Reservation,
                entities_1.ReservationParticipant,
                entities_1.Schedule,
                entities_1.ReservationSnapshot,
                entities_1.ReservationVehicle,
            ]),
        ],
        providers: [
            reservation_service_1.ReservationService,
            participant_service_1.ParticipantService,
            reservation_snapshot_service_1.ReservationSnapshotService,
            reservation_vehicle_service_1.ReservationVehicleService,
            {
                provide: 'ReservationRepositoryPort',
                useClass: reservation_repository_1.ReservationRepository,
            },
            {
                provide: 'ReservationParticipantRepositoryPort',
                useClass: reservation_participant_repository_1.ReservationParticipantRepository,
            },
            {
                provide: 'ReservationSnapshotRepositoryPort',
                useClass: reservation_snapshot_repository_1.ReservationSnapshotRepository,
            },
            {
                provide: 'ReservationVehicleRepositoryPort',
                useClass: reservation_vehicle_repository_1.ReservationVehicleRepository,
            },
            reservation_usecase_1.ReservationUsecase,
            reservation_event_handler_1.ReservationEventHandler,
            reservation_snapshot_usecase_1.ReservationSnapshotUsecase,
        ],
        controllers: [admin_reservation_controller_1.AdminReservationController, reservation_controller_1.UserReservationController, cron_reservation_controller_1.CronReservationController],
        exports: [reservation_service_1.ReservationService, reservation_snapshot_usecase_1.ReservationSnapshotUsecase, reservation_vehicle_service_1.ReservationVehicleService],
    })
], ReservationModule);


/***/ }),

/***/ "./apps/resource/src/modules/resource/accommodation/accommodation-resource.module.ts":
/*!*******************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/accommodation/accommodation-resource.module.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationResourceModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const accommodation_info_service_1 = __webpack_require__(/*! ./application/services/accommodation-info.service */ "./apps/resource/src/modules/resource/accommodation/application/services/accommodation-info.service.ts");
const accommodation_info_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/accommodation-info.repository */ "./apps/resource/src/modules/resource/accommodation/infrastructure/adapters/out/persistence/accommodation-info.repository.ts");
const accommodation_resource_handler_1 = __webpack_require__(/*! ./application/handlers/accommodation-resource.handler */ "./apps/resource/src/modules/resource/accommodation/application/handlers/accommodation-resource.handler.ts");
let AccommodationResourceModule = class AccommodationResourceModule {
};
exports.AccommodationResourceModule = AccommodationResourceModule;
exports.AccommodationResourceModule = AccommodationResourceModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([entities_1.AccommodationInfo])],
        providers: [
            accommodation_info_service_1.AccommodationInfoService,
            accommodation_resource_handler_1.AccommodationResourceHandler,
            {
                provide: 'AccommodationInfoRepositoryPort',
                useClass: accommodation_info_repository_1.AccommodationInfoRepository,
            },
        ],
        controllers: [],
        exports: [accommodation_resource_handler_1.AccommodationResourceHandler],
    })
], AccommodationResourceModule);


/***/ }),

/***/ "./apps/resource/src/modules/resource/accommodation/application/dtos/accommodation-info-response.dto.ts":
/*!**************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/accommodation/application/dtos/accommodation-info-response.dto.ts ***!
  \**************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationInfoResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class AccommodationInfoResponseDto {
}
exports.AccommodationInfoResponseDto = AccommodationInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], AccommodationInfoResponseDto.prototype, "accommodationInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], AccommodationInfoResponseDto.prototype, "resourceId", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/accommodation/application/dtos/create-accommodation-info.dto.ts":
/*!************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/accommodation/application/dtos/create-accommodation-info.dto.ts ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateAccommodationInfoDto = void 0;
class CreateAccommodationInfoDto {
}
exports.CreateAccommodationInfoDto = CreateAccommodationInfoDto;


/***/ }),

/***/ "./apps/resource/src/modules/resource/accommodation/application/dtos/update-accommodation-info.dto.ts":
/*!************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/accommodation/application/dtos/update-accommodation-info.dto.ts ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateAccommodationInfoDto = void 0;
class UpdateAccommodationInfoDto {
}
exports.UpdateAccommodationInfoDto = UpdateAccommodationInfoDto;


/***/ }),

/***/ "./apps/resource/src/modules/resource/accommodation/application/handlers/accommodation-resource.handler.ts":
/*!*****************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/accommodation/application/handlers/accommodation-resource.handler.ts ***!
  \*****************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationResourceHandler = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const accommodation_info_repository_port_1 = __webpack_require__(/*! ../../domain/ports/accommodation-info.repository.port */ "./apps/resource/src/modules/resource/accommodation/domain/ports/accommodation-info.repository.port.ts");
const accommodation_info_1 = __webpack_require__(/*! ../../domain/models/accommodation-info */ "./apps/resource/src/modules/resource/accommodation/domain/models/accommodation-info.ts");
let AccommodationResourceHandler = class AccommodationResourceHandler {
    constructor(accommodationInfoRepository) {
        this.accommodationInfoRepository = accommodationInfoRepository;
    }
    async createTypeInfo(resource, typeInfo, repositoryOptions) {
        const accommodationInfo = new accommodation_info_1.AccommodationInfo({
            ...typeInfo,
            resourceId: resource.resourceId,
        });
        await this.accommodationInfoRepository.save(accommodationInfo, repositoryOptions);
    }
    async getTypeInfo(resourceId, repositoryOptions) {
        return this.accommodationInfoRepository.findByResourceId(resourceId, repositoryOptions);
    }
    async updateTypeInfo(resource, typeInfo, repositoryOptions) {
        await this.accommodationInfoRepository.update(resource.resourceId, typeInfo, repositoryOptions);
    }
    async deleteTypeInfo(resourceId, repositoryOptions) {
        await this.accommodationInfoRepository.delete(resourceId, repositoryOptions);
    }
    async validateTypeData(typeInfo, repositoryOptions) {
        return true;
    }
};
exports.AccommodationResourceHandler = AccommodationResourceHandler;
exports.AccommodationResourceHandler = AccommodationResourceHandler = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('AccommodationInfoRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof accommodation_info_repository_port_1.AccommodationInfoRepositoryPort !== "undefined" && accommodation_info_repository_port_1.AccommodationInfoRepositoryPort) === "function" ? _a : Object])
], AccommodationResourceHandler);


/***/ }),

/***/ "./apps/resource/src/modules/resource/accommodation/application/services/accommodation-info.service.ts":
/*!*************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/accommodation/application/services/accommodation-info.service.ts ***!
  \*************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationInfoService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const accommodation_info_repository_port_1 = __webpack_require__(/*! @resource/modules/resource/accommodation/domain/ports/accommodation-info.repository.port */ "./apps/resource/src/modules/resource/accommodation/domain/ports/accommodation-info.repository.port.ts");
const accommodation_info_1 = __webpack_require__(/*! @resource/modules/resource/accommodation/domain/models/accommodation-info */ "./apps/resource/src/modules/resource/accommodation/domain/models/accommodation-info.ts");
let AccommodationInfoService = class AccommodationInfoService {
    constructor(accommodationInfoRepository) {
        this.accommodationInfoRepository = accommodationInfoRepository;
    }
    async create(createDto, repositoryOptions) {
        const accommodationInfo = new accommodation_info_1.AccommodationInfo({
            resourceId: createDto.resourceId,
        });
        return this.accommodationInfoRepository.save(accommodationInfo, repositoryOptions);
    }
    async findByResourceId(resourceId, repositoryOptions) {
        const info = await this.accommodationInfoRepository.findByResourceId(resourceId, repositoryOptions);
        if (!info) {
            throw new common_1.NotFoundException('Accommodation info not found');
        }
        return info;
    }
    async update(resourceId, updateData, repositoryOptions) {
        const info = await this.findByResourceId(resourceId, repositoryOptions);
        return this.accommodationInfoRepository.update(resourceId, {
            ...info,
            ...updateData,
        }, repositoryOptions);
    }
    async remove(resourceId, repositoryOptions) {
        await this.accommodationInfoRepository.delete(resourceId, repositoryOptions);
    }
};
exports.AccommodationInfoService = AccommodationInfoService;
exports.AccommodationInfoService = AccommodationInfoService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('AccommodationInfoRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof accommodation_info_repository_port_1.AccommodationInfoRepositoryPort !== "undefined" && accommodation_info_repository_port_1.AccommodationInfoRepositoryPort) === "function" ? _a : Object])
], AccommodationInfoService);


/***/ }),

/***/ "./apps/resource/src/modules/resource/accommodation/domain/models/accommodation-info.ts":
/*!**********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/accommodation/domain/models/accommodation-info.ts ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationInfo = void 0;
class AccommodationInfo {
    constructor(props) {
        this.validateProps(props);
        this.props = props;
    }
    validateProps(props) {
        if (!props.resourceId) {
            throw new Error('Resource ID is required');
        }
    }
    get accommodationInfoId() {
        return this.props.accommodationInfoId;
    }
    get resourceId() {
        return this.props.resourceId;
    }
    toJSON() {
        return { ...this.props };
    }
}
exports.AccommodationInfo = AccommodationInfo;


/***/ }),

/***/ "./apps/resource/src/modules/resource/accommodation/domain/ports/accommodation-info.repository.port.ts":
/*!*************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/accommodation/domain/ports/accommodation-info.repository.port.ts ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/resource/accommodation/infrastructure/adapters/out/persistence/accommodation-info.repository.ts":
/*!***********************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/accommodation/infrastructure/adapters/out/persistence/accommodation-info.repository.ts ***!
  \***********************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationInfoRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const accommodation_info_1 = __webpack_require__(/*! @resource/modules/resource/accommodation/domain/models/accommodation-info */ "./apps/resource/src/modules/resource/accommodation/domain/models/accommodation-info.ts");
let AccommodationInfoRepository = class AccommodationInfoRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(accommodationInfo, repositoryOptions) {
        const entity = this.toEntity(accommodationInfo);
        const repository = repositoryOptions?.queryRunner ? repositoryOptions.queryRunner.manager.getRepository(entities_1.AccommodationInfo) : this.repository;
        const savedEntity = await repository.save(entity);
        return this.toDomain(savedEntity);
    }
    async findByResourceId(resourceId, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner ? repositoryOptions.queryRunner.manager.getRepository(entities_1.AccommodationInfo) : this.repository;
        const entity = await repository.findOne({ where: { resourceId } });
        return entity ? this.toDomain(entity) : null;
    }
    async update(resourceId, accommodationInfo, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner ? repositoryOptions.queryRunner.manager.getRepository(entities_1.AccommodationInfo) : this.repository;
        await repository.update({ resourceId }, this.toEntity(accommodationInfo));
        const updated = await repository.findOne({ where: { resourceId } });
        if (!updated)
            throw new common_1.NotFoundException('Accommodation info not found');
        return this.toDomain(updated);
    }
    async delete(resourceId, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner ? repositoryOptions.queryRunner.manager.getRepository(entities_1.AccommodationInfo) : this.repository;
        await repository.delete({ resourceId });
    }
    toDomain(entity) {
        return new accommodation_info_1.AccommodationInfo({
            accommodationInfoId: entity.accommodationInfoId,
            resourceId: entity.resourceId,
        });
    }
    toEntity(domain) {
        const props = domain instanceof accommodation_info_1.AccommodationInfo ? domain.toJSON() : domain;
        return {
            accommodationInfoId: props.accommodationInfoId,
            resourceId: props.resourceId,
        };
    }
};
exports.AccommodationInfoRepository = AccommodationInfoRepository;
exports.AccommodationInfoRepository = AccommodationInfoRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.AccommodationInfo)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], AccommodationInfoRepository);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/dtos/available-time-response.dto.ts":
/*!***************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/dtos/available-time-response.dto.ts ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceAvailabilityDto = exports.TimeSlotDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class TimeSlotDto {
}
exports.TimeSlotDto = TimeSlotDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '시작 시간 (ISO 문자열)',
        example: '2025-01-01T09:00:00',
    }),
    __metadata("design:type", String)
], TimeSlotDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '종료 시간 (ISO 문자열)',
        example: '2025-01-01T10:00:00',
    }),
    __metadata("design:type", String)
], TimeSlotDto.prototype, "endTime", void 0);
class ResourceAvailabilityDto {
}
exports.ResourceAvailabilityDto = ResourceAvailabilityDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 ID',
        example: '78117aaf-a203-43a3-bb38-51ec91ca935a',
    }),
    __metadata("design:type", String)
], ResourceAvailabilityDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '자원 이름',
        example: '회의실 A',
    }),
    __metadata("design:type", String)
], ResourceAvailabilityDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        required: false,
        description: '자원 위치',
        example: '서울특별시 강남구 테헤란로 14길 6 남도빌딩 3층',
    }),
    __metadata("design:type", String)
], ResourceAvailabilityDto.prototype, "resourceLocation", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        required: false,
        description: '가용 시간 슬롯 목록',
        type: [TimeSlotDto],
    }),
    __metadata("design:type", Array)
], ResourceAvailabilityDto.prototype, "availableTimeSlots", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/dtos/check-availability.dto.ts":
/*!**********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/dtos/check-availability.dto.ts ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CheckAvailabilityResponseDto = exports.CheckAvailabilityQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
class CheckAvailabilityQueryDto {
}
exports.CheckAvailabilityQueryDto = CheckAvailabilityQueryDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    (0, class_validator_1.IsUUID)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 시작 시간' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 종료 시간' }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], CheckAvailabilityQueryDto.prototype, "endDate", void 0);
class CheckAvailabilityResponseDto {
}
exports.CheckAvailabilityResponseDto = CheckAvailabilityResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 가능 여부' }),
    __metadata("design:type", Boolean)
], CheckAvailabilityResponseDto.prototype, "isAvailable", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/dtos/create-resource.dto.ts":
/*!*******************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/dtos/create-resource.dto.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateResourceInfoDto = exports.CreateResourceDto = exports.ResourceLocation = exports.CreateResourceManagerDto = exports.CreateResourceGroupDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const create_vehicle_info_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/create-vehicle-info.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/create-vehicle-info.dto.ts");
const create_meeting_room_info_dto_1 = __webpack_require__(/*! @resource/modules/resource/meeting-room/application/dtos/create-meeting-room-info.dto */ "./apps/resource/src/modules/resource/meeting-room/application/dtos/create-meeting-room-info.dto.ts");
const create_accommodation_info_dto_1 = __webpack_require__(/*! @resource/modules/resource/accommodation/application/dtos/create-accommodation-info.dto */ "./apps/resource/src/modules/resource/accommodation/application/dtos/create-accommodation-info.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class CreateResourceGroupDto {
}
exports.CreateResourceGroupDto = CreateResourceGroupDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('상위 자원 그룹 ID') }),
    __metadata("design:type", String)
], CreateResourceGroupDto.prototype, "parentResourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('자원 타입', Object.values(resource_type_enum_1.ResourceType)) }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], CreateResourceGroupDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceGroupDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceGroupDto.prototype, "description", void 0);
class CreateResourceManagerDto {
}
exports.CreateResourceManagerDto = CreateResourceManagerDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID' }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('직원 ID') }),
    __metadata("design:type", String)
], CreateResourceManagerDto.prototype, "employeeId", void 0);
class ResourceLocation {
}
exports.ResourceLocation = ResourceLocation;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('주소') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('주소', 0, 100) }),
    __metadata("design:type", String)
], ResourceLocation.prototype, "address", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('상세 주소') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('상세 주소', 0, 100) }),
    __metadata("design:type", String)
], ResourceLocation.prototype, "detailAddress", void 0);
class CreateResourceDto {
}
exports.CreateResourceDto = CreateResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 그룹 ID') }),
    __metadata("design:type", String)
], CreateResourceDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('이름', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], CreateResourceDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: ResourceLocation }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", ResourceLocation)
], CreateResourceDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], CreateResourceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('참가자 변경 알림 여부') }),
    __metadata("design:type", Boolean)
], CreateResourceDto.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('예약 변경 알림 여부') }),
    __metadata("design:type", Boolean)
], CreateResourceDto.prototype, "notifyReservationChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ENUM('자원 타입', Object.values(resource_type_enum_1.ResourceType)) }),
    __metadata("design:type", typeof (_b = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _b : Object)
], CreateResourceDto.prototype, "type", void 0);
class CreateResourceInfoDto {
}
exports.CreateResourceInfoDto = CreateResourceInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: CreateResourceDto }),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => CreateResourceDto),
    __metadata("design:type", CreateResourceDto)
], CreateResourceInfoDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        oneOf: [
            { $ref: (0, swagger_1.getSchemaPath)(create_vehicle_info_dto_1.CreateVehicleInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(create_meeting_room_info_dto_1.CreateMeetingRoomInfoDto) },
            { $ref: (0, swagger_1.getSchemaPath)(create_accommodation_info_dto_1.CreateAccommodationInfoDto) },
        ],
    }),
    __metadata("design:type", Object)
], CreateResourceInfoDto.prototype, "typeInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [CreateResourceManagerDto] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('관리자') }),
    (0, class_validator_1.ValidateNested)({ each: true }),
    (0, class_transformer_1.Type)(() => CreateResourceManagerDto),
    __metadata("design:type", Array)
], CreateResourceInfoDto.prototype, "managers", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/dtos/resource-query.dto.ts":
/*!******************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/dtos/resource-query.dto.ts ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceQueryDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const paginate_query_dto_1 = __webpack_require__(/*! @libs/dtos/paginate-query.dto */ "./libs/dtos/paginate-query.dto.ts");
class ResourceQueryDto extends paginate_query_dto_1.PaginationQueryDto {
}
exports.ResourceQueryDto = ResourceQueryDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '리소스 타입',
        enum: resource_type_enum_1.ResourceType,
        example: resource_type_enum_1.ResourceType.MEETING_ROOM,
    }),
    (0, class_validator_1.IsEnum)(resource_type_enum_1.ResourceType),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], ResourceQueryDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '리소스 그룹 ID',
        example: 'ca33f67a-a9c2-4a29-b266-3d82f9aa7fe4',
    }),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '예약 ID',
        example: '123e4567-e89b-12d3-a456-426614174000',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "reservationId", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '시작 날짜',
        example: '2024-01-01',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "startDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '종료 날짜',
        example: '2024-01-31',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "endDate", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '시작 시간',
        example: '09:00:00',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "startTime", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '종료 시간',
        example: '18:00:00',
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceQueryDto.prototype, "endTime", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '오전 시간대 필터',
        example: true,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    __metadata("design:type", Boolean)
], ResourceQueryDto.prototype, "am", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '오후 시간대 필터',
        example: true,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsBoolean)(),
    (0, class_transformer_1.Transform)(({ value }) => value === 'true' || value === true),
    __metadata("design:type", Boolean)
], ResourceQueryDto.prototype, "pm", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '이용 시간 단위(분)',
        example: 30,
        minimum: 1,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_validator_1.Min)(1),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], ResourceQueryDto.prototype, "timeUnit", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/dtos/resource-response.dto.ts":
/*!*********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/dtos/resource-response.dto.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroupWithResourcesAndReservationsResponseDto = exports.ResourceGroupWithResourcesResponseDto = exports.ChildResourceGroupResponseDto = exports.ResourceWithReservationsResponseDto = exports.ResourceSelectResponseDto = exports.ResourceResponseDto = exports.ResourceGroupResponseDto = exports.ResourceManagerResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const vehicle_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/vehicle-response.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/vehicle-response.dto.ts");
const meeting_room_info_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/meeting-room/application/dtos/meeting-room-info-response.dto */ "./apps/resource/src/modules/resource/meeting-room/application/dtos/meeting-room-info-response.dto.ts");
const accommodation_info_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/accommodation/application/dtos/accommodation-info-response.dto */ "./apps/resource/src/modules/resource/accommodation/application/dtos/accommodation-info-response.dto.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const create_resource_dto_1 = __webpack_require__(/*! ./create-resource.dto */ "./apps/resource/src/modules/resource/common/application/dtos/create-resource.dto.ts");
const reservation_response_dto_1 = __webpack_require__(/*! @resource/modules/reservation/application/dtos/reservation-response.dto */ "./apps/resource/src/modules/reservation/application/dtos/reservation-response.dto.ts");
const employee_response_dto_1 = __webpack_require__(/*! @resource/modules/employee/application/dtos/employee-response.dto */ "./apps/resource/src/modules/employee/application/dtos/employee-response.dto.ts");
const file_response_dto_1 = __webpack_require__(/*! @resource/modules/file/application/dtos/file-response.dto */ "./apps/resource/src/modules/file/application/dtos/file-response.dto.ts");
class ResourceManagerResponseDto {
}
exports.ResourceManagerResponseDto = ResourceManagerResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceManagerResponseDto.prototype, "resourceManagerId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceManagerResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceManagerResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_a = typeof employee_response_dto_1.EmployeeResponseDto !== "undefined" && employee_response_dto_1.EmployeeResponseDto) === "function" ? _a : Object)
], ResourceManagerResponseDto.prototype, "employee", void 0);
class ResourceGroupResponseDto {
}
exports.ResourceGroupResponseDto = ResourceGroupResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    __metadata("design:type", typeof (_b = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _b : Object)
], ResourceGroupResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ResourceGroupResponseDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceGroupResponseDto.prototype, "parentResourceGroupId", void 0);
class ResourceResponseDto {
    constructor(resource) {
        this.resourceId = resource?.resourceId;
        this.resourceGroupId = resource?.resourceGroupId;
        this.name = resource?.name;
        this.description = resource?.description;
        this.location = resource?.location;
        this.images = resource?.images;
        this.type = resource?.type;
        this.isAvailable = resource?.isAvailable;
        this.unavailableReason = resource?.unavailableReason;
        this.notifyParticipantChange = resource?.notifyParticipantChange;
        this.notifyReservationChange = resource?.notifyReservationChange;
        this.order = resource?.order;
        this.managers = resource?.resourceManagers;
        this.resourceGroup = resource?.resourceGroup;
        this.imageFiles = resource?.images ? resource['imageFiles'] : [];
        if (resource?.vehicleInfo) {
            this.typeInfo = resource.vehicleInfo;
        }
        else if (resource?.meetingRoomInfo) {
            this.typeInfo = resource.meetingRoomInfo;
        }
        else if (resource?.accommodationInfo) {
            this.typeInfo = resource.accommodationInfo;
        }
    }
}
exports.ResourceResponseDto = ResourceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: create_resource_dto_1.ResourceLocation }),
    __metadata("design:type", typeof (_c = typeof create_resource_dto_1.ResourceLocation !== "undefined" && create_resource_dto_1.ResourceLocation) === "function" ? _c : Object)
], ResourceResponseDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    __metadata("design:type", Array)
], ResourceResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [file_response_dto_1.FileResponseDto] }),
    __metadata("design:type", Array)
], ResourceResponseDto.prototype, "imageFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ enum: resource_type_enum_1.ResourceType }),
    __metadata("design:type", typeof (_d = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _d : Object)
], ResourceResponseDto.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceResponseDto.prototype, "isAvailable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceResponseDto.prototype, "unavailableReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceResponseDto.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceResponseDto.prototype, "notifyReservationChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ResourceResponseDto.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        required: false,
        oneOf: [
            { $ref: (0, swagger_1.getSchemaPath)(vehicle_response_dto_1.VehicleInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(meeting_room_info_response_dto_1.MeetingRoomInfoResponseDto) },
            { $ref: (0, swagger_1.getSchemaPath)(accommodation_info_response_dto_1.AccommodationInfoResponseDto) },
        ],
    }),
    __metadata("design:type", Object)
], ResourceResponseDto.prototype, "typeInfo", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [ResourceManagerResponseDto] }),
    __metadata("design:type", Array)
], ResourceResponseDto.prototype, "managers", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", ResourceGroupResponseDto)
], ResourceResponseDto.prototype, "resourceGroup", void 0);
class ResourceSelectResponseDto {
}
exports.ResourceSelectResponseDto = ResourceSelectResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    __metadata("design:type", Array)
], ResourceSelectResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Boolean)
], ResourceSelectResponseDto.prototype, "isAvailable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "unavailableReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ResourceSelectResponseDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], ResourceSelectResponseDto.prototype, "order", void 0);
class ResourceWithReservationsResponseDto extends ResourceResponseDto {
    constructor(resource) {
        super(resource);
        this.reservations = resource?.reservations.map((reservation) => new reservation_response_dto_1.ReservationResponseDto(reservation));
    }
}
exports.ResourceWithReservationsResponseDto = ResourceWithReservationsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [reservation_response_dto_1.ReservationResponseDto] }),
    __metadata("design:type", Array)
], ResourceWithReservationsResponseDto.prototype, "reservations", void 0);
class ChildResourceGroupResponseDto extends ResourceGroupResponseDto {
}
exports.ChildResourceGroupResponseDto = ChildResourceGroupResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: () => ResourceSelectResponseDto, required: false }),
    __metadata("design:type", Array)
], ChildResourceGroupResponseDto.prototype, "resources", void 0);
class ResourceGroupWithResourcesResponseDto extends ResourceGroupResponseDto {
}
exports.ResourceGroupWithResourcesResponseDto = ResourceGroupWithResourcesResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [ChildResourceGroupResponseDto],
        required: false,
    }),
    __metadata("design:type", Array)
], ResourceGroupWithResourcesResponseDto.prototype, "children", void 0);
class ResourceGroupWithResourcesAndReservationsResponseDto extends ResourceGroupResponseDto {
}
exports.ResourceGroupWithResourcesAndReservationsResponseDto = ResourceGroupWithResourcesAndReservationsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        type: [ResourceWithReservationsResponseDto],
        required: false,
    }),
    __metadata("design:type", Array)
], ResourceGroupWithResourcesAndReservationsResponseDto.prototype, "resources", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/dtos/update-resource.dto.ts":
/*!*******************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/dtos/update-resource.dto.ts ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateResourceGroupOrdersDto = exports.NewOrderResourceGroupDto = exports.UpdateResourceOrdersDto = exports.NewOrderResourceDto = exports.ReturnVehicleDto = exports.UpdateResourceInfoDto = exports.UpdateResourceDto = exports.UpdateResourceGroupDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const create_resource_dto_1 = __webpack_require__(/*! ./create-resource.dto */ "./apps/resource/src/modules/resource/common/application/dtos/create-resource.dto.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class UpdateResourceGroupDto {
}
exports.UpdateResourceGroupDto = UpdateResourceGroupDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('제목') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('제목', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceGroupDto.prototype, "title", void 0);
class UpdateResourceDto {
}
exports.UpdateResourceDto = UpdateResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 그룹 ID') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('이름') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('이름', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('설명') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('설명', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "description", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: 'object' }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_a = typeof create_resource_dto_1.ResourceLocation !== "undefined" && create_resource_dto_1.ResourceLocation) === "function" ? _a : Object)
], UpdateResourceDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateResourceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('사용 가능 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateResourceDto.prototype, "isAvailable", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('사용 불가 사유') }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('사용 불가 사유', 0, 100) }),
    __metadata("design:type", String)
], UpdateResourceDto.prototype, "unavailableReason", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('참가자 변경 알림 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateResourceDto.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('예약 변경 알림 여부') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateResourceDto.prototype, "notifyReservationChange", void 0);
class UpdateResourceInfoDto {
}
exports.UpdateResourceInfoDto = UpdateResourceInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: UpdateResourceDto }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.ValidateNested)(),
    (0, class_transformer_1.Type)(() => UpdateResourceDto),
    __metadata("design:type", UpdateResourceDto)
], UpdateResourceInfoDto.prototype, "resource", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [create_resource_dto_1.CreateResourceManagerDto] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('관리자') }),
    (0, class_validator_1.ValidateNested)({ each: true }),
    (0, class_transformer_1.Type)(() => create_resource_dto_1.CreateResourceManagerDto),
    __metadata("design:type", Array)
], UpdateResourceInfoDto.prototype, "managers", void 0);
class ReturnVehicleDto {
}
exports.ReturnVehicleDto = ReturnVehicleDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", typeof (_b = typeof create_resource_dto_1.ResourceLocation !== "undefined" && create_resource_dto_1.ResourceLocation) === "function" ? _b : Object)
], ReturnVehicleDto.prototype, "location", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ minimum: 0, maximum: 999999999 }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('남은 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    __metadata("design:type", Number)
], ReturnVehicleDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ minimum: 0, maximum: 999999999 }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('총 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    __metadata("design:type", Number)
], ReturnVehicleDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주차 위치 이미지') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('주차 위치 이미지', '문자열') }),
    __metadata("design:type", Array)
], ReturnVehicleDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주행거리계 이미지') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('주행거리계 이미지', '문자열') }),
    __metadata("design:type", Array)
], ReturnVehicleDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('차량 실내 이미지') }),
    (0, class_validator_1.IsString)({ each: true, message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_ARRAY_ITEM_TYPE('차량 실내 이미지', '문자열') }),
    __metadata("design:type", Array)
], ReturnVehicleDto.prototype, "indoorImages", void 0);
class NewOrderResourceDto {
}
exports.NewOrderResourceDto = NewOrderResourceDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 ID') }),
    __metadata("design:type", String)
], NewOrderResourceDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsNumber)({}, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_NUMBER('순서') }),
    __metadata("design:type", Number)
], NewOrderResourceDto.prototype, "newOrder", void 0);
class UpdateResourceOrdersDto {
}
exports.UpdateResourceOrdersDto = UpdateResourceOrdersDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [NewOrderResourceDto] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('순서 목록') }),
    __metadata("design:type", Array)
], UpdateResourceOrdersDto.prototype, "orders", void 0);
class NewOrderResourceGroupDto {
}
exports.NewOrderResourceGroupDto = NewOrderResourceGroupDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('자원 그룹 ID') }),
    __metadata("design:type", String)
], NewOrderResourceGroupDto.prototype, "resourceGroupId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsNumber)({}, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_NUMBER('순서') }),
    __metadata("design:type", Number)
], NewOrderResourceGroupDto.prototype, "newOrder", void 0);
class UpdateResourceGroupOrdersDto {
}
exports.UpdateResourceGroupOrdersDto = UpdateResourceGroupOrdersDto;
__decorate([
    (0, swagger_1.ApiProperty)({ type: [NewOrderResourceGroupDto] }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('순서 목록') }),
    __metadata("design:type", Array)
], UpdateResourceGroupOrdersDto.prototype, "orders", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/handler/resource-event.handler.ts":
/*!*************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/handler/resource-event.handler.ts ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceEventHandler = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const resource_service_1 = __webpack_require__(/*! @resource/modules/resource/common/application/services/resource.service */ "./apps/resource/src/modules/resource/common/application/services/resource.service.ts");
let ResourceEventHandler = class ResourceEventHandler {
    constructor(resourceService) {
        this.resourceService = resourceService;
    }
    async handleFindResource(payload) {
        return await this.resourceService.findAll(payload.repositoryOptions);
    }
    async handleUpdateResource(payload) {
        return await this.resourceService.update(payload.resourceId, payload.updateData, payload.repositoryOptions);
    }
};
exports.ResourceEventHandler = ResourceEventHandler;
__decorate([
    (0, event_emitter_1.OnEvent)('find.resource'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], ResourceEventHandler.prototype, "handleFindResource", null);
__decorate([
    (0, event_emitter_1.OnEvent)('update.resource'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], ResourceEventHandler.prototype, "handleUpdateResource", null);
exports.ResourceEventHandler = ResourceEventHandler = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.ResourceService !== "undefined" && resource_service_1.ResourceService) === "function" ? _a : Object])
], ResourceEventHandler);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/services/resource-group.service.ts":
/*!**************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/services/resource-group.service.ts ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroupService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_group_repository_port_1 = __webpack_require__(/*! @resource/modules/resource/common/domain/ports/resource-group.repository.port */ "./apps/resource/src/modules/resource/common/domain/ports/resource-group.repository.port.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let ResourceGroupService = class ResourceGroupService {
    constructor(resourceGroupRepository, dataSource) {
        this.resourceGroupRepository = resourceGroupRepository;
        this.dataSource = dataSource;
    }
    async save(resourceGroup, repositoryOptions) {
        return this.resourceGroupRepository.save(resourceGroup, repositoryOptions);
    }
    async findAll(repositoryOptions) {
        const resourceGroups = await this.resourceGroupRepository.find(repositoryOptions);
        return resourceGroups;
    }
    async findOne(repositoryOptions) {
        const resourceGroup = await this.resourceGroupRepository.findOne(repositoryOptions);
        return resourceGroup;
    }
    async update(resourceGroupId, resourceGroup, repositoryOptions) {
        return this.resourceGroupRepository.update(resourceGroupId, resourceGroup, repositoryOptions);
    }
    async delete(resourceGroupId, repositoryOptions) {
        return this.resourceGroupRepository.delete(resourceGroupId, repositoryOptions);
    }
};
exports.ResourceGroupService = ResourceGroupService;
exports.ResourceGroupService = ResourceGroupService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('ResourceGroupRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_repository_port_1.ResourceGroupRepositoryPort !== "undefined" && resource_group_repository_port_1.ResourceGroupRepositoryPort) === "function" ? _a : Object, typeof (_b = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _b : Object])
], ResourceGroupService);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/services/resource-manager.service.ts":
/*!****************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/services/resource-manager.service.ts ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceManagerService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_manager_repository_port_1 = __webpack_require__(/*! @resource/modules/resource/common/domain/ports/resource-manager.repository.port */ "./apps/resource/src/modules/resource/common/domain/ports/resource-manager.repository.port.ts");
let ResourceManagerService = class ResourceManagerService {
    constructor(resourceManagerRepository) {
        this.resourceManagerRepository = resourceManagerRepository;
    }
    async save(resourceManager, repositoryOptions) {
        return this.resourceManagerRepository.save(resourceManager, repositoryOptions);
    }
    async findOne(repositoryOptions) {
        return this.resourceManagerRepository.findOne(repositoryOptions);
    }
    async findAll(repositoryOptions) {
        return this.resourceManagerRepository.find(repositoryOptions);
    }
    async updateManagers(resourceId, newManagerIds, repositoryOptions) {
        const currentManagers = await this.findAll({
            where: {
                resourceId: resourceId,
            },
        });
        const currentManagerIds = currentManagers.map((m) => m.employeeId);
        const managersToRemove = currentManagers.filter((manager) => !newManagerIds.includes(manager.employeeId));
        await Promise.all(managersToRemove.map((manager) => this.resourceManagerRepository.delete(manager.resourceManagerId, repositoryOptions)));
        const managersToAdd = newManagerIds.filter((employeeId) => !currentManagerIds.includes(employeeId));
        await Promise.all(managersToAdd.map((employeeId) => this.save({ resourceId, employeeId }, repositoryOptions)));
    }
    async remove(resourceManagerId, repositoryOptions) {
        await this.resourceManagerRepository.delete(resourceManagerId, repositoryOptions);
    }
};
exports.ResourceManagerService = ResourceManagerService;
exports.ResourceManagerService = ResourceManagerService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('ResourceManagerRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_manager_repository_port_1.ResourceManagerRepositoryPort !== "undefined" && resource_manager_repository_port_1.ResourceManagerRepositoryPort) === "function" ? _a : Object])
], ResourceManagerService);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/services/resource.service.ts":
/*!********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/services/resource.service.ts ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_repository_port_1 = __webpack_require__(/*! @resource/modules/resource/common/domain/ports/resource.repository.port */ "./apps/resource/src/modules/resource/common/domain/ports/resource.repository.port.ts");
let ResourceService = class ResourceService {
    constructor(resourceRepository) {
        this.resourceRepository = resourceRepository;
    }
    async save(resource, repositoryOptions) {
        const savedResource = await this.resourceRepository.save(resource, repositoryOptions);
        return savedResource;
    }
    async findOne(repositoryOptions) {
        const resource = await this.resourceRepository.findOne(repositoryOptions);
        return resource;
    }
    async findAll(repositoryOptions) {
        const resources = await this.resourceRepository.find(repositoryOptions);
        return resources;
    }
    async update(resourceId, resource, repositoryOptions) {
        const updatedResource = await this.resourceRepository.update(resourceId, resource, repositoryOptions);
        return updatedResource;
    }
    async delete(resourceId) {
        await this.resourceRepository.delete(resourceId);
    }
    async softDelete(resourceId, repositoryOptions) {
        await this.resourceRepository.softDelete(resourceId, repositoryOptions);
    }
};
exports.ResourceService = ResourceService;
exports.ResourceService = ResourceService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('ResourceRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_repository_port_1.ResourceRepositoryPort !== "undefined" && resource_repository_port_1.ResourceRepositoryPort) === "function" ? _a : Object])
], ResourceService);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/usecases/resource-group.usecase.ts":
/*!**************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/usecases/resource-group.usecase.ts ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroupUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_service_1 = __webpack_require__(/*! ../services/resource.service */ "./apps/resource/src/modules/resource/common/application/services/resource.service.ts");
const resource_group_service_1 = __webpack_require__(/*! ../services/resource-group.service */ "./apps/resource/src/modules/resource/common/application/services/resource-group.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let ResourceGroupUsecase = class ResourceGroupUsecase {
    constructor(resourceService, resourceGroupService, dataSource) {
        this.resourceService = resourceService;
        this.resourceGroupService = resourceGroupService;
        this.dataSource = dataSource;
    }
    async findParentResourceGroups() {
        const resourceGroups = await this.resourceGroupService.findAll({
            where: {
                parentResourceGroupId: (0, typeorm_1.IsNull)(),
            },
            order: {
                order: 'ASC',
            },
        });
        return resourceGroups;
    }
    async findResourceGroupsWithResourceData(type) {
        const resourceGroups = await this.resourceGroupService.findAll({
            where: {
                parentResourceGroupId: (0, typeorm_1.IsNull)(),
                ...(type && { type }),
            },
            relations: ['children'],
            order: {
                order: 'ASC',
            },
        });
        const resourceGroupsResponse = await Promise.all(resourceGroups.map(async (resourceGroup) => ({
            resourceGroupId: resourceGroup.resourceGroupId,
            ...resourceGroup,
            children: await Promise.all(resourceGroup.children.map(async (child) => ({
                resourceGroupId: child.resourceGroupId,
                ...child,
                resources: (await this.resourceService.findAll({
                    where: {
                        resourceGroupId: child.resourceGroupId,
                    },
                    order: {
                        order: 'ASC',
                    },
                })).map((resource) => ({
                    resourceId: resource.resourceId,
                    name: resource.name,
                    images: resource.images,
                    isAvailable: resource.isAvailable,
                    unavailableReason: resource.unavailableReason,
                    resourceGroupId: child.resourceGroupId,
                    order: resource.order,
                })),
            }))),
        })));
        return resourceGroupsResponse;
    }
    async createResourceGroup(createResourceGroupDto) {
        const resourceGroups = await this.resourceGroupService.findAll({
            where: {
                parentResourceGroupId: createResourceGroupDto.parentResourceGroupId,
            },
        });
        const resourceGroupOrder = resourceGroups.length;
        const resourceGroup = await this.resourceGroupService.save({
            ...createResourceGroupDto,
            order: resourceGroupOrder,
        });
        return resourceGroup;
    }
    async updateResourceGroup(resourceGroupId, updateResourceGroupDto) {
        const resourceGroup = await this.resourceGroupService.update(resourceGroupId, updateResourceGroupDto);
        return resourceGroup;
    }
    async reorderResourceGroups(updateResourceGroupOrdersDto) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await Promise.all(updateResourceGroupOrdersDto.orders.map(async (order) => {
                await this.resourceGroupService.update(order.resourceGroupId, { order: order.newOrder }, { queryRunner });
            }));
            await queryRunner.commitTransaction();
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw err;
        }
        finally {
            await queryRunner.release();
        }
    }
    async deleteResourceGroup(resourceGroupId) {
        const resourceGroup = await this.resourceGroupService.findOne({
            where: {
                resourceGroupId: resourceGroupId,
            },
            relations: ['resources'],
        });
        if (!resourceGroup) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE_GROUP.NOT_FOUND);
        }
        if (resourceGroup.resources.length > 0) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.HAS_RESOURCES);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await this.resourceGroupService.delete(resourceGroupId, { queryRunner });
            const siblings = await this.resourceGroupService.findAll({
                where: {
                    resourceGroupId: (0, typeorm_1.Not)(resourceGroupId),
                    parentResourceGroupId: resourceGroup.parentResourceGroupId,
                },
                order: {
                    order: 'ASC',
                },
            });
            for (let i = 0; i < siblings.length; i++) {
                await this.resourceGroupService.update(siblings[i].resourceGroupId, { order: i }, { queryRunner });
            }
            await queryRunner.commitTransaction();
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE_GROUP.FAILED_REORDER);
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.ResourceGroupUsecase = ResourceGroupUsecase;
exports.ResourceGroupUsecase = ResourceGroupUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.ResourceService !== "undefined" && resource_service_1.ResourceService) === "function" ? _a : Object, typeof (_b = typeof resource_group_service_1.ResourceGroupService !== "undefined" && resource_group_service_1.ResourceGroupService) === "function" ? _b : Object, typeof (_c = typeof typeorm_2.DataSource !== "undefined" && typeorm_2.DataSource) === "function" ? _c : Object])
], ResourceGroupUsecase);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/application/usecases/resource.usecase.ts":
/*!********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/application/usecases/resource.usecase.ts ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const resource_response_dto_1 = __webpack_require__(/*! ../dtos/resource-response.dto */ "./apps/resource/src/modules/resource/common/application/dtos/resource-response.dto.ts");
const resource_service_1 = __webpack_require__(/*! ../services/resource.service */ "./apps/resource/src/modules/resource/common/application/services/resource.service.ts");
const resource_group_service_1 = __webpack_require__(/*! ../services/resource-group.service */ "./apps/resource/src/modules/resource/common/application/services/resource-group.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/services/vehicle-info.service */ "./apps/resource/src/modules/resource/vehicle/application/services/vehicle-info.service.ts");
const resource_manager_service_1 = __webpack_require__(/*! ../services/resource-manager.service */ "./apps/resource/src/modules/resource/common/application/services/resource-manager.service.ts");
const vehicle_info_usecase_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/usecases/vehicle-info.usecase */ "./apps/resource/src/modules/resource/vehicle/application/usecases/vehicle-info.usecase.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const file_service_1 = __webpack_require__(/*! @resource/modules/file/application/services/file.service */ "./apps/resource/src/modules/file/application/services/file.service.ts");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const maintenance_service_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/services/maintenance.service */ "./apps/resource/src/modules/resource/vehicle/application/services/maintenance.service.ts");
const available_time_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/available-time-response.dto */ "./apps/resource/src/modules/resource/common/application/dtos/available-time-response.dto.ts");
const consumable_service_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/services/consumable.service */ "./apps/resource/src/modules/resource/vehicle/application/services/consumable.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let ResourceUsecase = class ResourceUsecase {
    constructor(resourceService, resourceManagerService, resourceGroupService, vehicleInfoService, vehicleInfoUsecase, maintenanceService, consumableService, dataSource, fileService, typeHandlers, eventEmitter) {
        this.resourceService = resourceService;
        this.resourceManagerService = resourceManagerService;
        this.resourceGroupService = resourceGroupService;
        this.vehicleInfoService = vehicleInfoService;
        this.vehicleInfoUsecase = vehicleInfoUsecase;
        this.maintenanceService = maintenanceService;
        this.consumableService = consumableService;
        this.dataSource = dataSource;
        this.fileService = fileService;
        this.typeHandlers = typeHandlers;
        this.eventEmitter = eventEmitter;
    }
    async findResources(type) {
        let relations = [];
        if (type === resource_type_enum_1.ResourceType.VEHICLE) {
            relations = ['vehicleInfo', 'vehicleInfo.consumables'];
        }
        else if (type === resource_type_enum_1.ResourceType.MEETING_ROOM) {
            relations = ['meetingRoomInfo'];
        }
        else if (type === resource_type_enum_1.ResourceType.ACCOMMODATION) {
            relations = ['accommodationInfo'];
        }
        const resources = await this.resourceService.findAll({
            where: {
                type: type,
            },
            relations: relations,
        });
        return resources.map((resource) => new resource_response_dto_1.ResourceResponseDto(resource));
    }
    async findResourcesByTypeAndDateWithReservations(user, type, startDate, endDate, isMine) {
        if (!!startDate && !!endDate && startDate > endDate) {
            throw new common_1.BadRequestException('Start date must be before end date');
        }
        const regex = /(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/;
        const startDateObj = regex.test(startDate)
            ? date_util_1.DateUtil.date(startDate).toDate()
            : date_util_1.DateUtil.date(startDate + ' 00:00:00').toDate();
        const endDateObj = regex.test(endDate)
            ? date_util_1.DateUtil.date(endDate).toDate()
            : date_util_1.DateUtil.date(endDate + ' 23:59:59').toDate();
        const resourceGroups = await this.resourceGroupService.findAll({
            where: {
                type: type,
                parentResourceGroupId: (0, typeorm_1.Not)((0, typeorm_1.IsNull)()),
            },
            order: {
                order: 'ASC',
            },
        });
        const resourceGroupsWithResources = await Promise.all(resourceGroups.map(async (resourceGroup) => {
            const resources = await this.resourceService.findAll({
                where: {
                    resourceGroupId: resourceGroup.resourceGroupId,
                },
                order: {
                    order: 'ASC',
                },
            });
            const resourcesWithReservations = await Promise.all(resources.map(async (resource) => {
                const dateCondition = (0, typeorm_1.Raw)((alias) => `(${alias} BETWEEN :startDateObj AND :endDateObj OR
                              "Reservation"."endDate" BETWEEN :startDateObj AND :endDateObj OR
                              (${alias} <= :startDateObj AND "Reservation"."endDate" >= :endDateObj))`, { startDateObj, endDateObj });
                const where = {
                    startDate: dateCondition,
                    resourceId: resource.resourceId,
                    status: (0, typeorm_1.In)([reservation_type_enum_1.ReservationStatus.CONFIRMED, reservation_type_enum_1.ReservationStatus.CLOSED]),
                };
                const [reservations] = await this.eventEmitter.emitAsync('find.reservation', {
                    repositoryOptions: {
                        where: where,
                        relations: ['participants', 'participants.employee'],
                        order: {
                            startDate: 'ASC',
                        },
                    },
                });
                const reservationResponseDtos = reservations
                    .map((reservation) => {
                    const isMine = reservation.participants.some((participant) => participant.type === reservation_type_enum_1.ParticipantsType.RESERVER &&
                        participant.employeeId === user.employeeId);
                    reservation.participants = reservation.participants.filter((participant) => participant.type === reservation_type_enum_1.ParticipantsType.RESERVER);
                    return {
                        ...reservation,
                        startDate: date_util_1.DateUtil.date(reservation.startDate).format(),
                        endDate: date_util_1.DateUtil.date(reservation.endDate).format(),
                        isMine: isMine,
                    };
                })
                    .filter((reservation) => {
                    if (isMine) {
                        return reservation.participants.some((participant) => participant.employeeId === user.employeeId);
                    }
                    return true;
                });
                return {
                    ...resource,
                    resourceId: resource.resourceId,
                    reservations: reservationResponseDtos,
                };
            }));
            return {
                ...resourceGroup,
                resources: resourcesWithReservations,
            };
        }));
        return resourceGroupsWithResources;
    }
    async findResourceDetailForUser(employeeId, resourceId) {
        const resource = await this.resourceService.findOne({
            where: { resourceId: resourceId },
            relations: [
                'resourceGroup',
                'vehicleInfo',
                'meetingRoomInfo',
                'accommodationInfo',
                'resourceManagers',
                'resourceManagers.employee',
            ],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        resource['imageFiles'] = await this.fileService.findAllFilesByFilePath(resource.images);
        if (resource.vehicleInfo) {
            if (resource.resourceManagers.some((manager) => manager.employeeId === employeeId)) {
                resource.vehicleInfo['consumables'] = await this.consumableService.findAll({
                    where: { vehicleInfoId: resource.vehicleInfo.vehicleInfoId },
                });
            }
            if (resource.vehicleInfo.consumables && resource.vehicleInfo.consumables.length > 0) {
                const mileage = Number(resource.vehicleInfo.totalMileage);
                for (const consumable of resource.vehicleInfo.consumables) {
                    const replaceCycle = Number(consumable.replaceCycle);
                    const latestMaintenance = await this.maintenanceService.findOne({
                        where: { consumableId: consumable.consumableId },
                        order: { date: 'DESC' },
                    });
                    if (latestMaintenance) {
                        consumable.maintenances = [latestMaintenance].map((maintenance) => {
                            return {
                                ...maintenance,
                                mileageFromLastMaintenance: mileage - Number(maintenance.mileage),
                                maintanceRequired: mileage - Number(maintenance.mileage) > replaceCycle,
                            };
                        });
                    }
                }
                resource.vehicleInfo.consumables.sort((a, b) => {
                    if (!a.maintenances?.length && !b.maintenances?.length) {
                        return a.name.localeCompare(b.name);
                    }
                    if (!a.maintenances?.length)
                        return -1;
                    if (!b.maintenances?.length)
                        return 1;
                    const aMileage = a.maintenances[0]?.['mileageFromLastMaintenance'] || 0;
                    const bMileage = b.maintenances[0]?.['mileageFromLastMaintenance'] || 0;
                    return aMileage - bMileage;
                });
            }
            resource.vehicleInfo['parkingLocationFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.parkingLocationImages);
            resource.vehicleInfo['odometerFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.odometerImages);
            resource.vehicleInfo['indoorFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.indoorImages);
        }
        return new resource_response_dto_1.ResourceResponseDto(resource);
    }
    async findResourceDetailForAdmin(resourceId) {
        const resource = await this.resourceService.findOne({
            where: { resourceId: resourceId },
            relations: [
                'resourceGroup',
                'vehicleInfo',
                'vehicleInfo.consumables',
                'meetingRoomInfo',
                'accommodationInfo',
                'resourceManagers',
                'resourceManagers.employee',
            ],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        resource['imageFiles'] = await this.fileService.findAllFilesByFilePath(resource.images);
        if (resource.vehicleInfo) {
            if (resource.vehicleInfo.consumables) {
                const mileage = Number(resource.vehicleInfo.totalMileage);
                for (const consumable of resource.vehicleInfo.consumables) {
                    const replaceCycle = Number(consumable.replaceCycle);
                    const latestMaintenance = await this.maintenanceService.findOne({
                        where: { consumableId: consumable.consumableId },
                        order: { date: 'DESC' },
                    });
                    if (latestMaintenance) {
                        consumable.maintenances = [latestMaintenance].map((maintenance) => {
                            return {
                                ...maintenance,
                                mileageFromLastMaintenance: mileage - Number(maintenance.mileage),
                                maintanceRequired: mileage - Number(maintenance.mileage) > replaceCycle,
                            };
                        });
                    }
                }
                resource.vehicleInfo.consumables.sort((a, b) => {
                    if (!a.maintenances?.length && !b.maintenances?.length) {
                        return a.name.localeCompare(b.name);
                    }
                    if (!a.maintenances?.length)
                        return -1;
                    if (!b.maintenances?.length)
                        return 1;
                    const aMileage = a.maintenances[0]?.['mileageFromLastMaintenance'] || 0;
                    const bMileage = b.maintenances[0]?.['mileageFromLastMaintenance'] || 0;
                    return aMileage - bMileage;
                });
            }
            resource.vehicleInfo['parkingLocationFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.parkingLocationImages);
            resource.vehicleInfo['odometerFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.odometerImages);
            resource.vehicleInfo['indoorFiles'] = await this.fileService.findAllFilesByFilePath(resource.vehicleInfo.indoorImages);
        }
        return new resource_response_dto_1.ResourceResponseDto(resource);
    }
    async findAvailableTime(query) {
        const { resourceType, resourceGroupId, startDate, endDate, startTime, endTime, am, pm, timeUnit, reservationId, } = query;
        if (!startDate && !endDate) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.DATE_REQUIRED);
        }
        if (startDate && endDate && startDate > endDate) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.INVALID_DATE_RANGE);
        }
        const isTimeRange = startTime && endTime;
        const isTimeSelected = (am !== undefined || pm !== undefined) && timeUnit;
        if (isTimeRange && isTimeSelected) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.TIME_RANGE_CONFLICT);
        }
        const resources = await this.resourceService.findAll({
            where: {
                isAvailable: true,
                resourceGroupId: resourceGroupId,
                type: resourceType,
            },
            relations: ['resourceGroup'],
        });
        const startDateObj = (0, typeorm_1.LessThan)(endTime ? date_util_1.DateUtil.date(endDate + ' ' + endTime).toDate() : date_util_1.DateUtil.date(endDate + ' 23:59:59').toDate());
        const endDateObj = (0, typeorm_1.MoreThanOrEqual)(startTime
            ? date_util_1.DateUtil.date(startDate + ' ' + startTime).toDate()
            : date_util_1.DateUtil.date(startDate + ' 00:00:00').toDate());
        for (const resource of resources) {
            const [reservations] = await this.eventEmitter.emitAsync('find.reservation', {
                repositoryOptions: {
                    where: {
                        resourceId: resource.resourceId,
                        reservationId: reservationId ? (0, typeorm_1.Not)(reservationId) : undefined,
                        status: (0, typeorm_1.In)([reservation_type_enum_1.ReservationStatus.CONFIRMED, reservation_type_enum_1.ReservationStatus.CLOSED]),
                        startDate: startDateObj,
                        endDate: endDateObj,
                    },
                },
            });
            resource.reservations = reservations;
        }
        const result = [];
        if (!resources || (resources && resources.length === 0)) {
            return result;
        }
        const isSameDay = startDate === endDate;
        const isAccommodation = resourceType === resource_type_enum_1.ResourceType.ACCOMMODATION;
        if (!isAccommodation && isSameDay && timeUnit) {
            for (const resource of resources) {
                const availabilityDto = new available_time_response_dto_1.ResourceAvailabilityDto();
                availabilityDto.resourceId = resource.resourceId;
                availabilityDto.resourceName = resource.name;
                availabilityDto.availableTimeSlots = this.calculateAvailableTimeSlots(resource, startDate, endDate, am, pm, timeUnit, isSameDay);
                result.push(availabilityDto);
            }
        }
        else if (isAccommodation || !isSameDay) {
            const combinedStartDateTime = startTime ? `${startDate} ${startTime}` : `${startDate} 00:00:00`;
            const combinedEndDateTime = endTime ? `${endDate} ${endTime}` : `${endDate} 24:00:00`;
            const startDateObj = date_util_1.DateUtil.date(combinedStartDateTime);
            const endDateObj = date_util_1.DateUtil.date(combinedEndDateTime);
            for (const resource of resources) {
                const confirmedReservations = resource.reservations.filter((reservation) => reservation.status === reservation_type_enum_1.ReservationStatus.CONFIRMED);
                const hasConflict = confirmedReservations.some((reservation) => {
                    const reserveStart = date_util_1.DateUtil.date(reservation.startDate);
                    const reserveEnd = date_util_1.DateUtil.date(reservation.endDate);
                    return ((this.isSameOrAfter(startDateObj, reserveStart) && this.isBefore(startDateObj, reserveEnd)) ||
                        (this.isAfter(endDateObj, reserveStart) && this.isSameOrBefore(endDateObj, reserveEnd)) ||
                        (this.isBefore(startDateObj, reserveStart) && this.isAfter(endDateObj, reserveEnd)));
                });
                if (!hasConflict) {
                    const availabilityDto = new available_time_response_dto_1.ResourceAvailabilityDto();
                    availabilityDto.resourceId = resource.resourceId;
                    availabilityDto.resourceName = resource.name;
                    if (resource.location) {
                        const location = resource.location;
                        availabilityDto.resourceLocation =
                            location.address + (location.detailAddress ? ` ${location.detailAddress}` : '');
                    }
                    result.push(availabilityDto);
                }
            }
        }
        else {
            throw new common_1.BadRequestException('시간 조회 조건이 올바르지 않습니다.');
        }
        return result;
    }
    calculateAvailableTimeSlots(resource, startDate, endDate, am, pm, timeUnit, isSameDay) {
        const availableSlots = [];
        const existingReservations = resource.reservations || [];
        const confirmedReservations = existingReservations;
        if (isSameDay) {
            const dateStr = startDate;
            const currentMinute = date_util_1.DateUtil.now().toDate().getMinutes();
            const roundedHour = date_util_1.DateUtil.now().format(`HH:${currentMinute < 30 ? '00' : '30'}:00`);
            const isToday = date_util_1.DateUtil.date(startDate).format('YYYY-MM-DD') === date_util_1.DateUtil.now().format('YYYY-MM-DD');
            const isAllDay = (am && pm) || (!am && !pm);
            const isVehicle = resource.type === resource_type_enum_1.ResourceType.VEHICLE;
            let startTime;
            let endTime;
            if (isVehicle) {
                if (isToday) {
                    startTime = roundedHour;
                    endTime = '24:00:00';
                }
                else {
                    if (isAllDay) {
                        startTime = '00:00:00';
                        endTime = '24:00:00';
                    }
                    else {
                        startTime = am ? '00:00:00' : '12:00:00';
                        endTime = am ? '12:00:00' : '24:00:00';
                    }
                }
            }
            else {
                if (isToday) {
                    startTime = roundedHour;
                    endTime = '18:00:00';
                }
                else {
                    if (isAllDay) {
                        startTime = '09:00:00';
                        endTime = '18:00:00';
                    }
                    else {
                        startTime = am ? '09:00:00' : '12:00:00';
                        endTime = am ? '12:00:00' : '18:00:00';
                    }
                }
            }
            this.processTimeRange(dateStr, startTime, endTime, timeUnit, confirmedReservations, availableSlots);
        }
        else {
            let currentDate = date_util_1.DateUtil.date(startDate);
            const endDateObj = date_util_1.DateUtil.date(endDate);
            while (this.isSameOrBefore(currentDate, endDateObj)) {
                const dateStr = currentDate.format('YYYY-MM-DD');
                this.processTimeRange(dateStr, '00:00:00', '23:59:59', timeUnit, confirmedReservations, availableSlots);
                currentDate = currentDate.addDays(1);
            }
        }
        return availableSlots;
    }
    processTimeRange(dateStr, startTime, endTime, timeUnit, confirmedReservations, availableSlots) {
        const startTime_obj = date_util_1.DateUtil.date(`${dateStr} ${startTime}`);
        const endTime_obj = date_util_1.DateUtil.date(`${dateStr} ${endTime}`);
        const slotIntervalMinutes = 30;
        let slotStart = startTime_obj;
        while (this.isBefore(slotStart, endTime_obj)) {
            const slotEnd = slotStart.addMinutes(timeUnit);
            if (this.isAfter(slotEnd, endTime_obj)) {
                slotStart = slotStart.addMinutes(slotIntervalMinutes);
                continue;
            }
            const isAvailable = !confirmedReservations.some((reservation) => {
                const reservationStart = date_util_1.DateUtil.date(reservation.startDate);
                const reservationEnd = date_util_1.DateUtil.date(reservation.endDate);
                return ((this.isSameOrAfter(slotStart, reservationStart) && this.isBefore(slotStart, reservationEnd)) ||
                    (this.isAfter(slotEnd, reservationStart) && this.isSameOrBefore(slotEnd, reservationEnd)) ||
                    (this.isBefore(slotStart, reservationStart) && this.isAfter(slotEnd, reservationEnd)));
            });
            if (isAvailable) {
                availableSlots.push({
                    startTime: slotStart.format(),
                    endTime: slotEnd.format(),
                });
            }
            slotStart = slotStart.addMinutes(slotIntervalMinutes);
        }
    }
    isSameOrBefore(d1, d2) {
        return d1.toDate().getTime() <= d2.toDate().getTime();
    }
    isBefore(d1, d2) {
        return d1.toDate().getTime() < d2.toDate().getTime();
    }
    isAfter(d1, d2) {
        return d1.toDate().getTime() > d2.toDate().getTime();
    }
    isSameOrAfter(d1, d2) {
        return d1.toDate().getTime() >= d2.toDate().getTime();
    }
    async checkAvailability(resourceId, startDate, endDate) {
        const startDateObj = date_util_1.DateUtil.date(startDate).toDate();
        const endDateObj = date_util_1.DateUtil.date(endDate).toDate();
        const resource = await this.resourceService.findOne({
            where: {
                resourceId: resourceId,
                reservations: {
                    status: reservation_type_enum_1.ReservationStatus.CONFIRMED,
                    startDate: (0, typeorm_1.LessThan)(endDateObj),
                    endDate: (0, typeorm_1.MoreThan)(startDateObj),
                },
            },
            relations: ['reservations'],
        });
        return !resource;
    }
    async returnVehicle(user, resourceId, updateDto) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        const resource = await this.resourceService.findOne({
            where: { resourceId: resourceId },
            relations: ['vehicleInfo', 'resourceManagers'],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        const vehicleInfo = await this.vehicleInfoService.findOne({
            where: { vehicleInfoId: resource.vehicleInfo.vehicleInfoId },
        });
        if (!vehicleInfo) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.NOT_FOUND);
        }
        try {
            await this.resourceService.update(resourceId, { location: updateDto.location }, { queryRunner });
            await this.vehicleInfoUsecase.updateVehicleInfo(vehicleInfo.vehicleInfoId, {
                leftMileage: updateDto.leftMileage,
                totalMileage: updateDto.totalMileage,
                parkingLocationImages: updateDto.parkingLocationImages,
                odometerImages: updateDto.odometerImages,
            }, { queryRunner });
            const notiTarget = [...resource.resourceManagers.map((manager) => manager.employeeId), user.employeeId];
            this.eventEmitter.emit('create.notification', {
                notificationType: notification_type_enum_1.NotificationType.RESOURCE_VEHICLE_RETURNED,
                notificationData: {
                    resourceId: resource.resourceId,
                    resourceName: resource.name,
                    resourceType: resource.type,
                },
                notiTarget,
            });
            await queryRunner.commitTransaction();
            return true;
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.FAILED_RETURN);
        }
        finally {
            await queryRunner.release();
        }
    }
    async createResourceWithInfos(createResourceInfo) {
        const { resource, typeInfo, managers } = createResourceInfo;
        if (!resource.resourceGroupId) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.GROUP_ID_REQUIRED);
        }
        if (!managers || managers.length === 0) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.MANAGERS_REQUIRED);
        }
        const group = await this.resourceGroupService.findOne({
            where: { resourceGroupId: resource.resourceGroupId },
        });
        if (!group) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE_GROUP.NOT_FOUND);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const resources = await this.resourceService.findAll({
                where: {
                    resourceGroupId: group.resourceGroupId,
                },
            });
            const resourceOrder = resources.length;
            const savedResource = await this.resourceService.save({ ...resource, order: resourceOrder }, {
                queryRunner,
            });
            const handler = this.typeHandlers.get(group.type);
            if (!handler) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.UNSUPPORTED_TYPE(group.type));
            }
            await handler.createTypeInfo(savedResource, typeInfo, { queryRunner });
            await Promise.all([
                ...managers.map((manager) => {
                    return this.resourceManagerService.save({
                        resourceId: savedResource.resourceId,
                        employeeId: manager.employeeId,
                    }, { queryRunner });
                }),
            ]);
            await queryRunner.commitTransaction();
            return true;
        }
        catch (err) {
            console.error(err);
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_CREATE);
        }
        finally {
            await queryRunner.release();
        }
    }
    async updateResource(resourceId, updateRequest) {
        const resource = await this.resourceService.findOne({
            where: {
                resourceId: resourceId,
            },
            relations: ['resourceGroup'],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            if (updateRequest.resource) {
                await this.resourceService.update(resourceId, updateRequest.resource, { queryRunner });
            }
            if (updateRequest.managers) {
                const newManagerIds = updateRequest.managers.map((m) => m.employeeId);
                await this.resourceManagerService.updateManagers(resourceId, newManagerIds, { queryRunner });
            }
            await queryRunner.commitTransaction();
            return this.findResourceDetailForAdmin(resourceId);
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_UPDATE);
        }
        finally {
            await queryRunner.release();
        }
    }
    async reorderResources(updateResourceOrdersDto) {
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await Promise.all(updateResourceOrdersDto.orders.map(async (order) => {
                await this.resourceService.update(order.resourceId, { order: order.newOrder }, { queryRunner });
            }));
            await queryRunner.commitTransaction();
        }
        catch (err) {
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_REORDER);
        }
        finally {
            await queryRunner.release();
        }
    }
    async deleteResource(resourceId) {
        const resource = await this.resourceService.findOne({
            where: {
                resourceId: resourceId,
            },
            relations: ['resourceGroup', 'resourceManagers'],
        });
        if (!resource) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.NOT_FOUND);
        }
        if (resource.isAvailable) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.IS_AVAILABLE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            await this.resourceService.update(resourceId, { resourceGroupId: null }, { queryRunner });
            for (const manager of resource.resourceManagers) {
                await this.resourceManagerService.remove(manager.resourceManagerId, { queryRunner });
            }
            await this.resourceService.softDelete(resourceId, { queryRunner });
            const resources = await this.resourceService.findAll({
                where: {
                    resourceId: (0, typeorm_1.Not)(resourceId),
                    resourceGroupId: resource.resourceGroupId,
                    deletedAt: (0, typeorm_1.IsNull)(),
                },
                order: {
                    order: 'ASC',
                },
            });
            for (let i = 0; i < resources.length; i++) {
                await this.resourceService.update(resources[i].resourceId, { order: i }, { queryRunner });
            }
            await queryRunner.commitTransaction();
        }
        catch (err) {
            console.error(err);
            await queryRunner.rollbackTransaction();
            throw new common_1.InternalServerErrorException(error_message_1.ERROR_MESSAGE.BUSINESS.RESOURCE.FAILED_DELETE);
        }
        finally {
            await queryRunner.release();
        }
    }
};
exports.ResourceUsecase = ResourceUsecase;
exports.ResourceUsecase = ResourceUsecase = __decorate([
    (0, common_1.Injectable)(),
    __param(9, (0, common_1.Inject)('ResourceTypeHandlers')),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_service_1.ResourceService !== "undefined" && resource_service_1.ResourceService) === "function" ? _a : Object, typeof (_b = typeof resource_manager_service_1.ResourceManagerService !== "undefined" && resource_manager_service_1.ResourceManagerService) === "function" ? _b : Object, typeof (_c = typeof resource_group_service_1.ResourceGroupService !== "undefined" && resource_group_service_1.ResourceGroupService) === "function" ? _c : Object, typeof (_d = typeof vehicle_info_service_1.VehicleInfoService !== "undefined" && vehicle_info_service_1.VehicleInfoService) === "function" ? _d : Object, typeof (_e = typeof vehicle_info_usecase_1.VehicleInfoUsecase !== "undefined" && vehicle_info_usecase_1.VehicleInfoUsecase) === "function" ? _e : Object, typeof (_f = typeof maintenance_service_1.MaintenanceService !== "undefined" && maintenance_service_1.MaintenanceService) === "function" ? _f : Object, typeof (_g = typeof consumable_service_1.ConsumableService !== "undefined" && consumable_service_1.ConsumableService) === "function" ? _g : Object, typeof (_h = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _h : Object, typeof (_j = typeof file_service_1.FileService !== "undefined" && file_service_1.FileService) === "function" ? _j : Object, typeof (_k = typeof Map !== "undefined" && Map) === "function" ? _k : Object, typeof (_l = typeof event_emitter_1.EventEmitter2 !== "undefined" && event_emitter_1.EventEmitter2) === "function" ? _l : Object])
], ResourceUsecase);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/domain/ports/resource-group.repository.port.ts":
/*!**************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/domain/ports/resource-group.repository.port.ts ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/domain/ports/resource-manager.repository.port.ts":
/*!****************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/domain/ports/resource-manager.repository.port.ts ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/domain/ports/resource.repository.port.ts":
/*!********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/domain/ports/resource.repository.port.ts ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/admin.resource-group.controller.ts":
/*!************************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/admin.resource-group.controller.ts ***!
  \************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminResourceGroupController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const create_resource_dto_1 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/create-resource.dto */ "./apps/resource/src/modules/resource/common/application/dtos/create-resource.dto.ts");
const resource_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/resource-response.dto */ "./apps/resource/src/modules/resource/common/application/dtos/resource-response.dto.ts");
const update_resource_dto_1 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/update-resource.dto */ "./apps/resource/src/modules/resource/common/application/dtos/update-resource.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const resource_group_usecase_1 = __webpack_require__(/*! @resource/modules/resource/common/application/usecases/resource-group.usecase */ "./apps/resource/src/modules/resource/common/application/usecases/resource-group.usecase.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const update_resource_dto_2 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/update-resource.dto */ "./apps/resource/src/modules/resource/common/application/dtos/update-resource.dto.ts");
let AdminResourceGroupController = class AdminResourceGroupController {
    constructor(resourceGroupUsecase) {
        this.resourceGroupUsecase = resourceGroupUsecase;
    }
    async findParentResourceGroups() {
        return this.resourceGroupUsecase.findParentResourceGroups();
    }
    async findAll(type) {
        return this.resourceGroupUsecase.findResourceGroupsWithResourceData(type);
    }
    async create(createResourceGroupDto) {
        return this.resourceGroupUsecase.createResourceGroup(createResourceGroupDto);
    }
    async updateOrder(updateResourceGroupOrdersDto) {
        return this.resourceGroupUsecase.reorderResourceGroups(updateResourceGroupOrdersDto);
    }
    async update(resourceGroupId, updateResourceGroupDto) {
        return this.resourceGroupUsecase.updateResourceGroup(resourceGroupId, updateResourceGroupDto);
    }
    async remove(resourceGroupId) {
        return this.resourceGroupUsecase.deleteResourceGroup(resourceGroupId);
    }
};
exports.AdminResourceGroupController = AdminResourceGroupController;
__decorate([
    (0, common_1.Get)('parents'),
    (0, swagger_1.ApiOperation)({ summary: '상위그룹 목록 조회 #사용자/자원구분/모달' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '상위 자원 그룹 목록을 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], AdminResourceGroupController.prototype, "findParentResourceGroups", null);
__decorate([
    (0, common_1.Get)('resources'),
    (0, swagger_1.ApiOperation)({ summary: '상위그룹-하위그룹-자원 목록 조회 #사용자/자원선택/모달 #관리자/자원관리/자원목록' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '자원 그룹들과 각 그룹에 속한 자원 목록을 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupWithResourcesResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'type', enum: resource_type_enum_1.ResourceType, required: false }),
    __param(0, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], AdminResourceGroupController.prototype, "findAll", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 201,
        description: '자원 그룹이 생성되었습니다.',
        type: resource_response_dto_1.ResourceGroupResponseDto,
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof create_resource_dto_1.CreateResourceGroupDto !== "undefined" && create_resource_dto_1.CreateResourceGroupDto) === "function" ? _e : Object]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], AdminResourceGroupController.prototype, "create", null);
__decorate([
    (0, common_1.Patch)('order'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 순서 변경' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 그룹 순서가 성공적으로 변경되었습니다.',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof update_resource_dto_2.UpdateResourceGroupOrdersDto !== "undefined" && update_resource_dto_2.UpdateResourceGroupOrdersDto) === "function" ? _g : Object]),
    __metadata("design:returntype", Promise)
], AdminResourceGroupController.prototype, "updateOrder", null);
__decorate([
    (0, common_1.Patch)(':resourceGroupId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '자원 그룹이 수정되었습니다.',
        type: resource_response_dto_1.ResourceGroupResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceGroupId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_h = typeof update_resource_dto_1.UpdateResourceGroupDto !== "undefined" && update_resource_dto_1.UpdateResourceGroupDto) === "function" ? _h : Object]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], AdminResourceGroupController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':resourceGroupId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 그룹 삭제' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '자원 그룹이 삭제되었습니다.',
    }),
    __param(0, (0, common_1.Param)('resourceGroupId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], AdminResourceGroupController.prototype, "remove", null);
exports.AdminResourceGroupController = AdminResourceGroupController = __decorate([
    (0, swagger_1.ApiTags)('3. 자원 그룹 - 관리자 페이지'),
    (0, common_1.Controller)('v1/admin/resource-groups'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_usecase_1.ResourceGroupUsecase !== "undefined" && resource_group_usecase_1.ResourceGroupUsecase) === "function" ? _a : Object])
], AdminResourceGroupController);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/admin.resource.controller.ts":
/*!******************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/admin.resource.controller.ts ***!
  \******************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminResourceController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const dtos_index_1 = __webpack_require__(/*! @resource/dtos.index */ "./apps/resource/src/dtos.index.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const resource_usecase_1 = __webpack_require__(/*! @resource/modules/resource/common/application/usecases/resource.usecase */ "./apps/resource/src/modules/resource/common/application/usecases/resource.usecase.ts");
const update_resource_dto_1 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/update-resource.dto */ "./apps/resource/src/modules/resource/common/application/dtos/update-resource.dto.ts");
let AdminResourceController = class AdminResourceController {
    constructor(resourceUsecase) {
        this.resourceUsecase = resourceUsecase;
    }
    async createWithInfos(createResourceInfo) {
        return this.resourceUsecase.createResourceWithInfos(createResourceInfo);
    }
    async findAll(type) {
        return this.resourceUsecase.findResources(type);
    }
    async findOne(resourceId) {
        return this.resourceUsecase.findResourceDetailForAdmin(resourceId);
    }
    async reorder(updateResourceOrdersDto) {
        return this.resourceUsecase.reorderResources(updateResourceOrdersDto);
    }
    async update(resourceId, updateResourceInfoDto) {
        return this.resourceUsecase.updateResource(resourceId, updateResourceInfoDto);
    }
    async updateAvailability(resourceId, updateResourceInfoDto) {
        return this.resourceUsecase.updateResource(resourceId, updateResourceInfoDto);
    }
    async remove(resourceId) {
        return this.resourceUsecase.deleteResource(resourceId);
    }
};
exports.AdminResourceController = AdminResourceController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 생성 #관리자/자원관리/생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 201,
        description: '자원이 성공적으로 생성되었습니다.',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof dtos_index_1.CreateResourceInfoDto !== "undefined" && dtos_index_1.CreateResourceInfoDto) === "function" ? _b : Object]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], AdminResourceController.prototype, "createWithInfos", null);
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: '자원 목록 조회 #관리자/자원관리/자원리스트' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 목록을 성공적으로 조회했습니다.',
        type: [dtos_index_1.ResourceResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'type', enum: resource_type_enum_1.ResourceType }),
    __param(0, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], AdminResourceController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 상세 조회 #관리자/자원관리/상세' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원을 성공적으로 조회했습니다.',
        type: dtos_index_1.ResourceResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], AdminResourceController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)('order'),
    (0, swagger_1.ApiOperation)({ summary: '자원 순서 변경' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 순서가 성공적으로 변경되었습니다.',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof update_resource_dto_1.UpdateResourceOrdersDto !== "undefined" && update_resource_dto_1.UpdateResourceOrdersDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], AdminResourceController.prototype, "reorder", null);
__decorate([
    (0, common_1.Patch)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원이 성공적으로 수정되었습니다.',
        type: dtos_index_1.ResourceResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_j = typeof dtos_index_1.UpdateResourceInfoDto !== "undefined" && dtos_index_1.UpdateResourceInfoDto) === "function" ? _j : Object]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], AdminResourceController.prototype, "update", null);
__decorate([
    (0, common_1.Patch)(':resourceId/availability'),
    (0, swagger_1.ApiOperation)({ summary: '자원 예약 가능 상태 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원이 성공적으로 수정되었습니다.',
        type: dtos_index_1.ResourceResponseDto,
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_l = typeof dtos_index_1.UpdateResourceInfoDto !== "undefined" && dtos_index_1.UpdateResourceInfoDto) === "function" ? _l : Object]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], AdminResourceController.prototype, "updateAvailability", null);
__decorate([
    (0, common_1.Delete)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 삭제' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원이 성공적으로 삭제되었습니다.',
    }),
    __param(0, (0, common_1.Param)('resourceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_o = typeof Promise !== "undefined" && Promise) === "function" ? _o : Object)
], AdminResourceController.prototype, "remove", null);
exports.AdminResourceController = AdminResourceController = __decorate([
    (0, swagger_1.ApiTags)('3. 자원 - 관리자 페이지'),
    (0, common_1.Controller)('v1/admin/resources'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_usecase_1.ResourceUsecase !== "undefined" && resource_usecase_1.ResourceUsecase) === "function" ? _a : Object])
], AdminResourceController);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/resource-group.controller.ts":
/*!******************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/resource-group.controller.ts ***!
  \******************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserResourceGroupController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const resource_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/resource-response.dto */ "./apps/resource/src/modules/resource/common/application/dtos/resource-response.dto.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const resource_group_usecase_1 = __webpack_require__(/*! @resource/modules/resource/common/application/usecases/resource-group.usecase */ "./apps/resource/src/modules/resource/common/application/usecases/resource-group.usecase.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
let UserResourceGroupController = class UserResourceGroupController {
    constructor(resourceGroupUsecase) {
        this.resourceGroupUsecase = resourceGroupUsecase;
    }
    async findParentResourceGroups() {
        return this.resourceGroupUsecase.findParentResourceGroups();
    }
    async findAll(type) {
        return this.resourceGroupUsecase.findResourceGroupsWithResourceData(type);
    }
};
exports.UserResourceGroupController = UserResourceGroupController;
__decorate([
    (0, common_1.Get)('parents'),
    (0, swagger_1.ApiOperation)({ summary: '상위그룹 목록 조회 #사용자/자원구분/모달' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '상위 자원 그룹 목록을 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupResponseDto],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], UserResourceGroupController.prototype, "findParentResourceGroups", null);
__decorate([
    (0, common_1.Get)('resources'),
    (0, swagger_1.ApiOperation)({ summary: '상위그룹-하위그룹-자원 목록 조회 #사용자/자원선택/모달 #관리자/자원관리/자원목록' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '자원 그룹들과 각 그룹에 속한 자원 목록을 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupWithResourcesResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'type', enum: resource_type_enum_1.ResourceType, required: false }),
    __param(0, (0, common_1.Query)('type')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], UserResourceGroupController.prototype, "findAll", null);
exports.UserResourceGroupController = UserResourceGroupController = __decorate([
    (0, swagger_1.ApiTags)('3. 자원 그룹 - 사용자 페이지'),
    (0, common_1.Controller)('v1/resource-groups'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_group_usecase_1.ResourceGroupUsecase !== "undefined" && resource_group_usecase_1.ResourceGroupUsecase) === "function" ? _a : Object])
], UserResourceGroupController);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/resource.controller.ts":
/*!************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/resource.controller.ts ***!
  \************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserResourceController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const dtos_index_1 = __webpack_require__(/*! @resource/dtos.index */ "./apps/resource/src/dtos.index.ts");
const resource_query_dto_1 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/resource-query.dto */ "./apps/resource/src/modules/resource/common/application/dtos/resource-query.dto.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const resource_usecase_1 = __webpack_require__(/*! @resource/modules/resource/common/application/usecases/resource.usecase */ "./apps/resource/src/modules/resource/common/application/usecases/resource.usecase.ts");
const resource_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/resource-response.dto */ "./apps/resource/src/modules/resource/common/application/dtos/resource-response.dto.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const check_availability_dto_1 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/check-availability.dto */ "./apps/resource/src/modules/resource/common/application/dtos/check-availability.dto.ts");
const check_availability_dto_2 = __webpack_require__(/*! @resource/modules/resource/common/application/dtos/check-availability.dto */ "./apps/resource/src/modules/resource/common/application/dtos/check-availability.dto.ts");
let UserResourceController = class UserResourceController {
    constructor(resourceUsecase) {
        this.resourceUsecase = resourceUsecase;
    }
    async findResourcesByTypeAndDateWithReservations(user, type, startDate, endDate, isMine) {
        return this.resourceUsecase.findResourcesByTypeAndDateWithReservations(user, type, startDate, endDate, isMine);
    }
    async findAvailableTime(query) {
        return this.resourceUsecase.findAvailableTime(query);
    }
    async checkAvailability(query) {
        const isAvailable = await this.resourceUsecase.checkAvailability(query.resourceId, query.startDate, query.endDate);
        return {
            isAvailable,
        };
    }
    async findOne(user, resourceId) {
        return this.resourceUsecase.findResourceDetailForUser(user.employeeId, resourceId);
    }
};
exports.UserResourceController = UserResourceController;
__decorate([
    (0, common_1.Get)('reservations'),
    (0, swagger_1.ApiOperation)({ summary: '자원 별 예약 목록 조회 #사용자/자원예약/리스트 #사용자/세부예약내역' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원 목록을 성공적으로 조회했습니다.',
        type: [resource_response_dto_1.ResourceGroupWithResourcesAndReservationsResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'type', enum: resource_type_enum_1.ResourceType }),
    (0, swagger_1.ApiQuery)({ name: 'startDate', example: '2025-01-01 or 2025-01-01 00:00:00' }),
    (0, swagger_1.ApiQuery)({ name: 'endDate', example: '2025-01-01 or 2025-01-01 00:00:00' }),
    (0, swagger_1.ApiQuery)({ name: 'isMine', type: Boolean, required: false, example: true }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Query)('type')),
    __param(2, (0, common_1.Query)('startDate')),
    __param(3, (0, common_1.Query)('endDate')),
    __param(4, (0, common_1.Query)('isMine')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _b : Object, typeof (_c = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _c : Object, String, String, Boolean]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], UserResourceController.prototype, "findResourcesByTypeAndDateWithReservations", null);
__decorate([
    (0, common_1.Get)('availability'),
    (0, swagger_1.ApiOperation)({ summary: '예약 가능 시간 조회 #사용자/예약 생성 페이지' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 가능 시간 조회 성공',
        type: dtos_index_1.ResourceAvailabilityDto,
    }),
    (0, swagger_1.ApiQuery)({ name: 'resourceType', enum: resource_type_enum_1.ResourceType, required: true, example: resource_type_enum_1.ResourceType.MEETING_ROOM }),
    (0, swagger_1.ApiQuery)({
        name: 'resourceGroupId',
        type: String,
        required: true,
        example: '78117aaf-a203-43a3-bb38-51ec91ca935a',
    }),
    (0, swagger_1.ApiQuery)({ name: 'reservationId', type: String, required: false, example: '123e4567-e89b-12d3-a456-426614174000' }),
    (0, swagger_1.ApiQuery)({ name: 'startDate', type: String, required: false, example: '2025-01-01' }),
    (0, swagger_1.ApiQuery)({ name: 'endDate', type: String, required: false, example: '2025-01-01' }),
    (0, swagger_1.ApiQuery)({ name: 'startTime', type: String, required: false, example: '09:00:00' }),
    (0, swagger_1.ApiQuery)({ name: 'endTime', type: String, required: false, example: '18:00:00' }),
    (0, swagger_1.ApiQuery)({ name: 'am', type: Boolean, required: false, example: true }),
    (0, swagger_1.ApiQuery)({ name: 'pm', type: Boolean, required: false, example: true }),
    (0, swagger_1.ApiQuery)({ name: 'timeUnit', type: Number, required: false, example: 30 }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof resource_query_dto_1.ResourceQueryDto !== "undefined" && resource_query_dto_1.ResourceQueryDto) === "function" ? _e : Object]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], UserResourceController.prototype, "findAvailableTime", null);
__decorate([
    (0, common_1.Get)('check-availability'),
    (0, swagger_1.ApiOperation)({ summary: '예약 시간 가용성 확인' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '예약 시간 가용성 확인 결과',
        type: check_availability_dto_2.CheckAvailabilityResponseDto,
    }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof check_availability_dto_1.CheckAvailabilityQueryDto !== "undefined" && check_availability_dto_1.CheckAvailabilityQueryDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], UserResourceController.prototype, "checkAvailability", null);
__decorate([
    (0, common_1.Get)(':resourceId'),
    (0, swagger_1.ApiOperation)({ summary: '자원 상세 조회 ' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '자원을 성공적으로 조회했습니다.',
        type: dtos_index_1.ResourceResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('resourceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _j : Object, String]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], UserResourceController.prototype, "findOne", null);
exports.UserResourceController = UserResourceController = __decorate([
    (0, swagger_1.ApiTags)('3. 자원 - 사용자 페이지'),
    (0, common_1.Controller)('v1/resources'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.USER),
    __metadata("design:paramtypes", [typeof (_a = typeof resource_usecase_1.ResourceUsecase !== "undefined" && resource_usecase_1.ResourceUsecase) === "function" ? _a : Object])
], UserResourceController);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/infrastructure/adapters/out/persistence/resource-group.repository.ts":
/*!************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/infrastructure/adapters/out/persistence/resource-group.repository.ts ***!
  \************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroupRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let ResourceGroupRepository = class ResourceGroupRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(resourceGroup, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ResourceGroup)
            : this.repository;
        return repository.save(resourceGroup);
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ResourceGroup)
            : this.repository;
        return repository.findOne({ where: repositoryOptions?.where, relations: repositoryOptions?.relations });
    }
    async find(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ResourceGroup)
            : this.repository;
        return repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
        });
    }
    async update(id, resourceGroup, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ResourceGroup)
            : this.repository;
        await repository.update({ resourceGroupId: id }, resourceGroup);
        const updated = await repository.findOne({ where: { resourceGroupId: id } });
        if (!updated)
            throw new common_1.NotFoundException('Resource group not found');
        return updated;
    }
    async delete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ResourceGroup)
            : this.repository;
        await repository.delete({ resourceGroupId: id });
    }
};
exports.ResourceGroupRepository = ResourceGroupRepository;
exports.ResourceGroupRepository = ResourceGroupRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.ResourceGroup)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], ResourceGroupRepository);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/infrastructure/adapters/out/persistence/resource-manager.repository.ts":
/*!**************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/infrastructure/adapters/out/persistence/resource-manager.repository.ts ***!
  \**************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceManagerRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let ResourceManagerRepository = class ResourceManagerRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(resourceManager, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ResourceManager)
            : this.repository;
        return repository.save(resourceManager);
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ResourceManager)
            : this.repository;
        return repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
        });
    }
    async find(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ResourceManager)
            : this.repository;
        return repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
        });
    }
    async update(id, resourceManager, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ResourceManager)
            : this.repository;
        await repository.update({ resourceManagerId: id }, resourceManager);
        const updated = await repository.findOne({ where: { resourceManagerId: id } });
        if (!updated)
            throw new common_1.NotFoundException('Resource manager not found');
        return updated;
    }
    async delete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.ResourceManager)
            : this.repository;
        await repository.delete({ resourceManagerId: id });
    }
};
exports.ResourceManagerRepository = ResourceManagerRepository;
exports.ResourceManagerRepository = ResourceManagerRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.ResourceManager)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], ResourceManagerRepository);


/***/ }),

/***/ "./apps/resource/src/modules/resource/common/infrastructure/adapters/out/persistence/resource.repository.ts":
/*!******************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/common/infrastructure/adapters/out/persistence/resource.repository.ts ***!
  \******************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let ResourceRepository = class ResourceRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(resource, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Resource)
            : this.repository;
        const savedEntity = await repository.save(resource);
        return await repository.findOne({
            where: { resourceId: savedEntity.resourceId },
            relations: ['resourceGroup'],
        });
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Resource)
            : this.repository;
        return repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
        });
    }
    async find(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Resource)
            : this.repository;
        return await repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
        });
    }
    async update(id, resource, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Resource)
            : this.repository;
        await repository.update({ resourceId: id }, resource);
        const updated = await repository.findOne({
            where: { resourceId: id },
            relations: ['resourceGroup'],
        });
        if (!updated)
            throw new common_1.NotFoundException('Resource not found');
        return updated;
    }
    async delete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Resource)
            : this.repository;
        await repository.delete({ resourceId: id });
    }
    async softDelete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Resource)
            : this.repository;
        await repository.softDelete({ resourceId: id });
    }
};
exports.ResourceRepository = ResourceRepository;
exports.ResourceRepository = ResourceRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.Resource)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], ResourceRepository);


/***/ }),

/***/ "./apps/resource/src/modules/resource/meeting-room/application/dtos/create-meeting-room-info.dto.ts":
/*!**********************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/meeting-room/application/dtos/create-meeting-room-info.dto.ts ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateMeetingRoomInfoDto = void 0;
class CreateMeetingRoomInfoDto {
}
exports.CreateMeetingRoomInfoDto = CreateMeetingRoomInfoDto;


/***/ }),

/***/ "./apps/resource/src/modules/resource/meeting-room/application/dtos/meeting-room-info-response.dto.ts":
/*!************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/meeting-room/application/dtos/meeting-room-info-response.dto.ts ***!
  \************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomInfoResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class MeetingRoomInfoResponseDto {
}
exports.MeetingRoomInfoResponseDto = MeetingRoomInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MeetingRoomInfoResponseDto.prototype, "meetingRoomInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MeetingRoomInfoResponseDto.prototype, "resourceId", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/meeting-room/application/dtos/update-meeting-room-info.dto.ts":
/*!**********************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/meeting-room/application/dtos/update-meeting-room-info.dto.ts ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateMeetingRoomInfoDto = void 0;
class UpdateMeetingRoomInfoDto {
}
exports.UpdateMeetingRoomInfoDto = UpdateMeetingRoomInfoDto;


/***/ }),

/***/ "./apps/resource/src/modules/resource/meeting-room/application/handlers/meeting-room-resource.handler.ts":
/*!***************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/meeting-room/application/handlers/meeting-room-resource.handler.ts ***!
  \***************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomResourceHandler = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const meeting_room_info_repository_port_1 = __webpack_require__(/*! ../../domain/ports/meeting-room-info.repository.port */ "./apps/resource/src/modules/resource/meeting-room/domain/ports/meeting-room-info.repository.port.ts");
const meeting_room_info_1 = __webpack_require__(/*! ../../domain/models/meeting-room-info */ "./apps/resource/src/modules/resource/meeting-room/domain/models/meeting-room-info.ts");
let MeetingRoomResourceHandler = class MeetingRoomResourceHandler {
    constructor(meetingRoomInfoRepository) {
        this.meetingRoomInfoRepository = meetingRoomInfoRepository;
    }
    async createTypeInfo(resource, typeInfo, repositoryOptions) {
        const meetingRoomInfo = new meeting_room_info_1.MeetingRoomInfo({
            ...typeInfo,
            resourceId: resource.resourceId,
        });
        await this.meetingRoomInfoRepository.save(meetingRoomInfo, repositoryOptions);
    }
    async getTypeInfo(resourceId, repositoryOptions) {
        return this.meetingRoomInfoRepository.findByResourceId(resourceId, repositoryOptions);
    }
    async updateTypeInfo(resource, typeInfo, repositoryOptions) {
        await this.meetingRoomInfoRepository.update(resource.resourceId, typeInfo, repositoryOptions);
    }
    async deleteTypeInfo(resourceId, repositoryOptions) {
        await this.meetingRoomInfoRepository.delete(resourceId, repositoryOptions);
    }
    async validateTypeData(typeInfo, repositoryOptions) {
        return true;
    }
};
exports.MeetingRoomResourceHandler = MeetingRoomResourceHandler;
exports.MeetingRoomResourceHandler = MeetingRoomResourceHandler = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('MeetingRoomInfoRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof meeting_room_info_repository_port_1.MeetingRoomInfoRepositoryPort !== "undefined" && meeting_room_info_repository_port_1.MeetingRoomInfoRepositoryPort) === "function" ? _a : Object])
], MeetingRoomResourceHandler);


/***/ }),

/***/ "./apps/resource/src/modules/resource/meeting-room/application/services/meeting-room-info.service.ts":
/*!***********************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/meeting-room/application/services/meeting-room-info.service.ts ***!
  \***********************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomInfoService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const meeting_room_info_repository_port_1 = __webpack_require__(/*! @resource/modules/resource/meeting-room/domain/ports/meeting-room-info.repository.port */ "./apps/resource/src/modules/resource/meeting-room/domain/ports/meeting-room-info.repository.port.ts");
const meeting_room_info_1 = __webpack_require__(/*! @resource/modules/resource/meeting-room/domain/models/meeting-room-info */ "./apps/resource/src/modules/resource/meeting-room/domain/models/meeting-room-info.ts");
let MeetingRoomInfoService = class MeetingRoomInfoService {
    constructor(meetingRoomInfoRepository) {
        this.meetingRoomInfoRepository = meetingRoomInfoRepository;
    }
    async create(createDto) {
        const meetingRoomInfo = new meeting_room_info_1.MeetingRoomInfo({
            resourceId: createDto.resourceId,
        });
        return this.meetingRoomInfoRepository.save(meetingRoomInfo);
    }
    async findByResourceId(resourceId) {
        const info = await this.meetingRoomInfoRepository.findByResourceId(resourceId);
        if (!info) {
            throw new common_1.NotFoundException('Meeting room info not found');
        }
        return info;
    }
    async update(resourceId, updateData) {
        const info = await this.findByResourceId(resourceId);
        return this.meetingRoomInfoRepository.update(resourceId, {
            ...info,
            ...updateData,
        });
    }
    async remove(resourceId) {
        await this.meetingRoomInfoRepository.delete(resourceId);
    }
};
exports.MeetingRoomInfoService = MeetingRoomInfoService;
exports.MeetingRoomInfoService = MeetingRoomInfoService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('MeetingRoomInfoRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof meeting_room_info_repository_port_1.MeetingRoomInfoRepositoryPort !== "undefined" && meeting_room_info_repository_port_1.MeetingRoomInfoRepositoryPort) === "function" ? _a : Object])
], MeetingRoomInfoService);


/***/ }),

/***/ "./apps/resource/src/modules/resource/meeting-room/domain/models/meeting-room-info.ts":
/*!********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/meeting-room/domain/models/meeting-room-info.ts ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomInfo = void 0;
class MeetingRoomInfo {
    constructor(props) {
        this.validateProps(props);
        this.props = props;
    }
    validateProps(props) {
        if (!props.resourceId) {
            throw new Error('Resource ID is required');
        }
    }
    get meetingRoomInfoId() {
        return this.props.meetingRoomInfoId;
    }
    get resourceId() {
        return this.props.resourceId;
    }
    toJSON() {
        return { ...this.props };
    }
}
exports.MeetingRoomInfo = MeetingRoomInfo;


/***/ }),

/***/ "./apps/resource/src/modules/resource/meeting-room/domain/ports/meeting-room-info.repository.port.ts":
/*!***********************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/meeting-room/domain/ports/meeting-room-info.repository.port.ts ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/resource/meeting-room/infrastructure/adapters/out/persistence/meeting-room-info.repository.ts":
/*!*********************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/meeting-room/infrastructure/adapters/out/persistence/meeting-room-info.repository.ts ***!
  \*********************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomInfoRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const meeting_room_info_1 = __webpack_require__(/*! @resource/modules/resource/meeting-room/domain/models/meeting-room-info */ "./apps/resource/src/modules/resource/meeting-room/domain/models/meeting-room-info.ts");
let MeetingRoomInfoRepository = class MeetingRoomInfoRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(meetingRoomInfo, repositoryOptions) {
        const entity = this.toEntity(meetingRoomInfo);
        const repository = repositoryOptions?.queryRunner ? repositoryOptions.queryRunner.manager.getRepository(entities_1.MeetingRoomInfo) : this.repository;
        const savedEntity = await repository.save(entity);
        return this.toDomain(savedEntity);
    }
    async findByResourceId(resourceId, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner ? repositoryOptions.queryRunner.manager.getRepository(entities_1.MeetingRoomInfo) : this.repository;
        const entity = await repository.findOne({ where: { resourceId } });
        return entity ? this.toDomain(entity) : null;
    }
    async update(resourceId, meetingRoomInfo, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner ? repositoryOptions.queryRunner.manager.getRepository(entities_1.MeetingRoomInfo) : this.repository;
        await repository.update({ resourceId }, this.toEntity(meetingRoomInfo));
        const updated = await this.findByResourceId(resourceId, repositoryOptions);
        if (!updated)
            throw new common_1.NotFoundException('Meeting room info not found');
        return updated;
    }
    async delete(resourceId, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner ? repositoryOptions.queryRunner.manager.getRepository(entities_1.MeetingRoomInfo) : this.repository;
        await repository.delete({ resourceId });
    }
    toDomain(entity) {
        return new meeting_room_info_1.MeetingRoomInfo({
            meetingRoomInfoId: entity.meetingRoomInfoId,
            resourceId: entity.resourceId,
        });
    }
    toEntity(domain) {
        const props = domain instanceof meeting_room_info_1.MeetingRoomInfo ? domain.toJSON() : domain;
        return {
            meetingRoomInfoId: props.meetingRoomInfoId,
            resourceId: props.resourceId,
        };
    }
};
exports.MeetingRoomInfoRepository = MeetingRoomInfoRepository;
exports.MeetingRoomInfoRepository = MeetingRoomInfoRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.MeetingRoomInfo)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], MeetingRoomInfoRepository);


/***/ }),

/***/ "./apps/resource/src/modules/resource/meeting-room/meeting-room-resource.module.ts":
/*!*****************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/meeting-room/meeting-room-resource.module.ts ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomResourceModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const meeting_room_resource_handler_1 = __webpack_require__(/*! ./application/handlers/meeting-room-resource.handler */ "./apps/resource/src/modules/resource/meeting-room/application/handlers/meeting-room-resource.handler.ts");
const meeting_room_info_service_1 = __webpack_require__(/*! ./application/services/meeting-room-info.service */ "./apps/resource/src/modules/resource/meeting-room/application/services/meeting-room-info.service.ts");
const meeting_room_info_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/meeting-room-info.repository */ "./apps/resource/src/modules/resource/meeting-room/infrastructure/adapters/out/persistence/meeting-room-info.repository.ts");
let MeetingRoomResourceModule = class MeetingRoomResourceModule {
};
exports.MeetingRoomResourceModule = MeetingRoomResourceModule;
exports.MeetingRoomResourceModule = MeetingRoomResourceModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([entities_1.MeetingRoomInfo])],
        providers: [
            meeting_room_resource_handler_1.MeetingRoomResourceHandler,
            meeting_room_info_service_1.MeetingRoomInfoService,
            meeting_room_info_repository_1.MeetingRoomInfoRepository,
            {
                provide: 'MeetingRoomInfoRepositoryPort',
                useExisting: meeting_room_info_repository_1.MeetingRoomInfoRepository,
            },
        ],
        controllers: [],
        exports: [meeting_room_resource_handler_1.MeetingRoomResourceHandler, meeting_room_info_service_1.MeetingRoomInfoService],
    })
], MeetingRoomResourceModule);


/***/ }),

/***/ "./apps/resource/src/modules/resource/resource.module.ts":
/*!***************************************************************!*\
  !*** ./apps/resource/src/modules/resource/resource.module.ts ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const resource_service_1 = __webpack_require__(/*! ./common/application/services/resource.service */ "./apps/resource/src/modules/resource/common/application/services/resource.service.ts");
const resource_group_service_1 = __webpack_require__(/*! ./common/application/services/resource-group.service */ "./apps/resource/src/modules/resource/common/application/services/resource-group.service.ts");
const resource_manager_service_1 = __webpack_require__(/*! ./common/application/services/resource-manager.service */ "./apps/resource/src/modules/resource/common/application/services/resource-manager.service.ts");
const resource_repository_1 = __webpack_require__(/*! ./common/infrastructure/adapters/out/persistence/resource.repository */ "./apps/resource/src/modules/resource/common/infrastructure/adapters/out/persistence/resource.repository.ts");
const resource_group_repository_1 = __webpack_require__(/*! ./common/infrastructure/adapters/out/persistence/resource-group.repository */ "./apps/resource/src/modules/resource/common/infrastructure/adapters/out/persistence/resource-group.repository.ts");
const resource_manager_repository_1 = __webpack_require__(/*! ./common/infrastructure/adapters/out/persistence/resource-manager.repository */ "./apps/resource/src/modules/resource/common/infrastructure/adapters/out/persistence/resource-manager.repository.ts");
const vehicle_resource_module_1 = __webpack_require__(/*! ./vehicle/vehicle-resource.module */ "./apps/resource/src/modules/resource/vehicle/vehicle-resource.module.ts");
const meeting_room_resource_module_1 = __webpack_require__(/*! ./meeting-room/meeting-room-resource.module */ "./apps/resource/src/modules/resource/meeting-room/meeting-room-resource.module.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const vehicle_resource_handler_1 = __webpack_require__(/*! ./vehicle/application/handlers/vehicle-resource.handler */ "./apps/resource/src/modules/resource/vehicle/application/handlers/vehicle-resource.handler.ts");
const meeting_room_resource_handler_1 = __webpack_require__(/*! ./meeting-room/application/handlers/meeting-room-resource.handler */ "./apps/resource/src/modules/resource/meeting-room/application/handlers/meeting-room-resource.handler.ts");
const accommodation_resource_module_1 = __webpack_require__(/*! ./accommodation/accommodation-resource.module */ "./apps/resource/src/modules/resource/accommodation/accommodation-resource.module.ts");
const accommodation_resource_handler_1 = __webpack_require__(/*! ./accommodation/application/handlers/accommodation-resource.handler */ "./apps/resource/src/modules/resource/accommodation/application/handlers/accommodation-resource.handler.ts");
const resource_group_usecase_1 = __webpack_require__(/*! ./common/application/usecases/resource-group.usecase */ "./apps/resource/src/modules/resource/common/application/usecases/resource-group.usecase.ts");
const resource_usecase_1 = __webpack_require__(/*! ./common/application/usecases/resource.usecase */ "./apps/resource/src/modules/resource/common/application/usecases/resource.usecase.ts");
const file_module_1 = __webpack_require__(/*! ../file/file.module */ "./apps/resource/src/modules/file/file.module.ts");
const admin_resource_controller_1 = __webpack_require__(/*! ./common/infrastructure/adapters/in/web/controllers/v1/admin.resource.controller */ "./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/admin.resource.controller.ts");
const admin_resource_group_controller_1 = __webpack_require__(/*! ./common/infrastructure/adapters/in/web/controllers/v1/admin.resource-group.controller */ "./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/admin.resource-group.controller.ts");
const resource_group_controller_1 = __webpack_require__(/*! ./common/infrastructure/adapters/in/web/controllers/v1/resource-group.controller */ "./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/resource-group.controller.ts");
const resource_controller_1 = __webpack_require__(/*! ./common/infrastructure/adapters/in/web/controllers/v1/resource.controller */ "./apps/resource/src/modules/resource/common/infrastructure/adapters/in/web/controllers/v1/resource.controller.ts");
const resource_event_handler_1 = __webpack_require__(/*! ./common/application/handler/resource-event.handler */ "./apps/resource/src/modules/resource/common/application/handler/resource-event.handler.ts");
let ResourceModule = class ResourceModule {
};
exports.ResourceModule = ResourceModule;
exports.ResourceModule = ResourceModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([entities_1.Resource, entities_1.ResourceGroup, entities_1.ResourceManager]),
            vehicle_resource_module_1.VehicleResourceModule,
            meeting_room_resource_module_1.MeetingRoomResourceModule,
            accommodation_resource_module_1.AccommodationResourceModule,
            file_module_1.FileModule,
        ],
        providers: [
            resource_service_1.ResourceService,
            resource_group_service_1.ResourceGroupService,
            resource_manager_service_1.ResourceManagerService,
            {
                provide: 'ResourceRepositoryPort',
                useClass: resource_repository_1.ResourceRepository,
            },
            {
                provide: 'ResourceGroupRepositoryPort',
                useClass: resource_group_repository_1.ResourceGroupRepository,
            },
            {
                provide: 'ResourceManagerRepositoryPort',
                useClass: resource_manager_repository_1.ResourceManagerRepository,
            },
            {
                provide: 'ResourceTypeHandlers',
                useFactory: (vehicleHandler, meetingRoomHandler, accommodationHandler) => {
                    const handlers = new Map();
                    handlers.set(resource_type_enum_1.ResourceType.VEHICLE, vehicleHandler);
                    handlers.set(resource_type_enum_1.ResourceType.MEETING_ROOM, meetingRoomHandler);
                    handlers.set(resource_type_enum_1.ResourceType.ACCOMMODATION, accommodationHandler);
                    return handlers;
                },
                inject: [vehicle_resource_handler_1.VehicleResourceHandler, meeting_room_resource_handler_1.MeetingRoomResourceHandler, accommodation_resource_handler_1.AccommodationResourceHandler],
            },
            resource_usecase_1.ResourceUsecase,
            resource_group_usecase_1.ResourceGroupUsecase,
            resource_event_handler_1.ResourceEventHandler,
        ],
        controllers: [
            admin_resource_controller_1.AdminResourceController,
            admin_resource_group_controller_1.AdminResourceGroupController,
            resource_group_controller_1.UserResourceGroupController,
            resource_controller_1.UserResourceController,
        ],
        exports: [resource_service_1.ResourceService, resource_group_service_1.ResourceGroupService, resource_manager_service_1.ResourceManagerService],
    })
], ResourceModule);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/dtos/create-vehicle-info.dto.ts":
/*!************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/dtos/create-vehicle-info.dto.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.CreateMaintenanceDto = exports.CreateConsumableDto = exports.CreateVehicleInfoDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class CreateVehicleInfoDto {
}
exports.CreateVehicleInfoDto = CreateVehicleInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: true }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('차량 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('차량 번호', 0, 100) }),
    __metadata("design:type", String)
], CreateVehicleInfoDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('남은 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    __metadata("design:type", Number)
], CreateVehicleInfoDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('총 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    __metadata("design:type", Number)
], CreateVehicleInfoDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험 이름', 0, 100) }),
    __metadata("design:type", String)
], CreateVehicleInfoDto.prototype, "insuranceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험사 전화 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험사 전화 번호', 0, 100) }),
    __metadata("design:type", String)
], CreateVehicleInfoDto.prototype, "insuranceNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], description: '주차위치 이미지 배열' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주차위치 이미지') }),
    __metadata("design:type", Array)
], CreateVehicleInfoDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], description: '계기판 이미지 배열' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('계기판 이미지') }),
    __metadata("design:type", Array)
], CreateVehicleInfoDto.prototype, "odometerImages", void 0);
class CreateConsumableDto {
}
exports.CreateConsumableDto = CreateConsumableDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('소모품 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('소모품 이름', 0, 100) }),
    __metadata("design:type", String)
], CreateConsumableDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 주기' }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('소모품 교체 주기') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    __metadata("design:type", Number)
], CreateConsumableDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ default: true, description: '소모품 교체 알림 주기' }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('소모품 교체 알림 주기') }),
    __metadata("design:type", Boolean)
], CreateConsumableDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '차량 ID',
        example: 'vehicle-123',
    }),
    __metadata("design:type", String)
], CreateConsumableDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '초기 주행거리',
        example: 0,
    }),
    __metadata("design:type", Number)
], CreateConsumableDto.prototype, "initMileage", void 0);
class CreateMaintenanceDto {
}
exports.CreateMaintenanceDto = CreateMaintenanceDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('날짜', 'YYYY-MM-DD'),
    }),
    __metadata("design:type", String)
], CreateMaintenanceDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    __metadata("design:type", Number)
], CreateMaintenanceDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('비용') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    __metadata("design:type", Number)
], CreateMaintenanceDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String], description: '이미지 배열' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지') }),
    __metadata("design:type", Array)
], CreateMaintenanceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '소모품 ID',
        example: 'consumable-123',
    }),
    __metadata("design:type", String)
], CreateMaintenanceDto.prototype, "consumableId", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/dtos/update-vehicle-info.dto.ts":
/*!************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/dtos/update-vehicle-info.dto.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UpdateVehicleInfoDto = exports.UpdateConsumableDto = exports.UpdateMaintenanceDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
class UpdateMaintenanceDto {
}
exports.UpdateMaintenanceDto = UpdateMaintenanceDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)(),
    (0, class_validator_1.Matches)(/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/, {
        message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_DATE_FORMAT('날짜', 'YYYY-MM-DD'),
    }),
    __metadata("design:type", String)
], UpdateMaintenanceDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('주행거리') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], UpdateMaintenanceDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('비용') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('비용') }),
    __metadata("design:type", Number)
], UpdateMaintenanceDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, type: [String] }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('이미지') }),
    __metadata("design:type", Array)
], UpdateMaintenanceDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '소모품 ID',
        example: 'consumable-123',
    }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateMaintenanceDto.prototype, "consumableId", void 0);
class UpdateConsumableDto {
}
exports.UpdateConsumableDto = UpdateConsumableDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('소모품 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('소모품 이름', 0, 100) }),
    __metadata("design:type", String)
], UpdateConsumableDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 주기' }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('소모품 교체 주기') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('소모품 교체 주기') }),
    __metadata("design:type", Number)
], UpdateConsumableDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ default: true, description: '소모품 교체 알림 주기' }),
    (0, class_validator_1.IsBoolean)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_BOOLEAN('소모품 교체 알림 주기') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], UpdateConsumableDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '차량 ID',
        example: 'vehicle-123',
    }),
    __metadata("design:type", String)
], UpdateConsumableDto.prototype, "vehicleInfoId", void 0);
class UpdateVehicleInfoDto {
}
exports.UpdateVehicleInfoDto = UpdateVehicleInfoDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('차량 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('차량 번호', 0, 100) }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateVehicleInfoDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험 이름') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험 이름', 0, 100) }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateVehicleInfoDto.prototype, "insuranceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsString)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_STRING('보험 번호') }),
    (0, class_validator_1.Length)(0, 100, { message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_LENGTH('보험 번호', 0, 100) }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], UpdateVehicleInfoDto.prototype, "insuranceNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('총 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('총 주행거리') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], UpdateVehicleInfoDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsInt)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_INT('남은 주행거리') }),
    (0, class_validator_1.Min)(0, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.Max)(999999999, { message: error_message_1.ERROR_MESSAGE.VALIDATION.INVALID_MILEAGE('남은 주행거리') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], UpdateVehicleInfoDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주차 위치 이미지') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateVehicleInfoDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    (0, class_validator_1.IsArray)({ message: error_message_1.ERROR_MESSAGE.VALIDATION.IS_ARRAY('주행거리계 이미지') }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Array)
], UpdateVehicleInfoDto.prototype, "odometerImages", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/dtos/vehicle-response.dto.ts":
/*!*********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/dtos/vehicle-response.dto.ts ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfoResponseDto = exports.ConsumableResponseDto = exports.MaintenanceResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const file_response_dto_1 = __webpack_require__(/*! @resource/modules/file/application/dtos/file-response.dto */ "./apps/resource/src/modules/file/application/dtos/file-response.dto.ts");
class MaintenanceResponseDto {
}
exports.MaintenanceResponseDto = MaintenanceResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "maintenanceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "date", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], MaintenanceResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "mileageFromLastMaintenance", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], MaintenanceResponseDto.prototype, "maintanceRequired", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Number)
], MaintenanceResponseDto.prototype, "previousMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", Boolean)
], MaintenanceResponseDto.prototype, "isLatest", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false }),
    __metadata("design:type", String)
], MaintenanceResponseDto.prototype, "previousDate", void 0);
class ConsumableResponseDto {
}
exports.ConsumableResponseDto = ConsumableResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ConsumableResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], ConsumableResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    __metadata("design:type", String)
], ConsumableResponseDto.prototype, "name", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 주기' }),
    __metadata("design:type", Number)
], ConsumableResponseDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 교체 알림 주기' }),
    __metadata("design:type", Boolean)
], ConsumableResponseDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [MaintenanceResponseDto], required: false }),
    __metadata("design:type", Array)
], ConsumableResponseDto.prototype, "maintenances", void 0);
class VehicleInfoResponseDto {
}
exports.VehicleInfoResponseDto = VehicleInfoResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "insuranceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", String)
], VehicleInfoResponseDto.prototype, "insuranceNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], VehicleInfoResponseDto.prototype, "totalMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Number)
], VehicleInfoResponseDto.prototype, "leftMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "odometerImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)(),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "indoorImages", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [file_response_dto_1.FileResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "parkingLocationFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [file_response_dto_1.FileResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "odometerFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [file_response_dto_1.FileResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "indoorFiles", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ type: [ConsumableResponseDto], required: false }),
    __metadata("design:type", Array)
], VehicleInfoResponseDto.prototype, "consumables", void 0);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/handlers/vehicle-event.handler.ts":
/*!**************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/handlers/vehicle-event.handler.ts ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleEventHandler = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const vehicle_info_service_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/services/vehicle-info.service */ "./apps/resource/src/modules/resource/vehicle/application/services/vehicle-info.service.ts");
let VehicleEventHandler = class VehicleEventHandler {
    constructor(vehicleInfoService) {
        this.vehicleInfoService = vehicleInfoService;
    }
    async handleUpdateVehicleInfo(payload) {
        return await this.vehicleInfoService.update(payload.vehicleInfoId, payload.updateData, payload.repositoryOptions);
    }
};
exports.VehicleEventHandler = VehicleEventHandler;
__decorate([
    (0, event_emitter_1.OnEvent)('update.vehicle.info'),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", Promise)
], VehicleEventHandler.prototype, "handleUpdateVehicleInfo", null);
exports.VehicleEventHandler = VehicleEventHandler = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_service_1.VehicleInfoService !== "undefined" && vehicle_info_service_1.VehicleInfoService) === "function" ? _a : Object])
], VehicleEventHandler);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/handlers/vehicle-resource.handler.ts":
/*!*****************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/handlers/vehicle-resource.handler.ts ***!
  \*****************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleResourceHandler = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const vehicle_info_repository_port_1 = __webpack_require__(/*! ../../domain/ports/vehicle-info.repository.port */ "./apps/resource/src/modules/resource/vehicle/domain/ports/vehicle-info.repository.port.ts");
let VehicleResourceHandler = class VehicleResourceHandler {
    constructor(vehicleInfoRepository) {
        this.vehicleInfoRepository = vehicleInfoRepository;
    }
    async createTypeInfo(resource, typeInfo, repositoryOptions) {
        await this.vehicleInfoRepository.save({
            resourceId: resource.resourceId,
            ...typeInfo,
        }, repositoryOptions);
    }
};
exports.VehicleResourceHandler = VehicleResourceHandler;
exports.VehicleResourceHandler = VehicleResourceHandler = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('VehicleInfoRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_repository_port_1.VehicleInfoRepositoryPort !== "undefined" && vehicle_info_repository_port_1.VehicleInfoRepositoryPort) === "function" ? _a : Object])
], VehicleResourceHandler);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/services/consumable.service.ts":
/*!***********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/services/consumable.service.ts ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const consumable_repository_port_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/domain/ports/consumable.repository.port */ "./apps/resource/src/modules/resource/vehicle/domain/ports/consumable.repository.port.ts");
let ConsumableService = class ConsumableService {
    constructor(consumableRepository) {
        this.consumableRepository = consumableRepository;
    }
    async save(createConsumableDto, repositoryOptions) {
        return this.consumableRepository.save(createConsumableDto, repositoryOptions);
    }
    async findAll(repositoryOptions) {
        return this.consumableRepository.findAll(repositoryOptions);
    }
    async findOne(repositoryOptions) {
        return this.consumableRepository.findOne(repositoryOptions);
    }
    async update(id, updateData, repositoryOptions) {
        return this.consumableRepository.update(id, updateData, repositoryOptions);
    }
    async delete(id, repositoryOptions) {
        return this.consumableRepository.delete(id, repositoryOptions);
    }
    async checkRole(consumableId, user) {
        return true;
    }
};
exports.ConsumableService = ConsumableService;
exports.ConsumableService = ConsumableService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('ConsumableRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_repository_port_1.ConsumableRepositoryPort !== "undefined" && consumable_repository_port_1.ConsumableRepositoryPort) === "function" ? _a : Object])
], ConsumableService);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/services/maintenance.service.ts":
/*!************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/services/maintenance.service.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MaintenanceService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const maintenance_repository_port_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/domain/ports/maintenance.repository.port */ "./apps/resource/src/modules/resource/vehicle/domain/ports/maintenance.repository.port.ts");
let MaintenanceService = class MaintenanceService {
    constructor(maintenanceRepository) {
        this.maintenanceRepository = maintenanceRepository;
    }
    async save(createMaintenanceDto, repositoryOptions) {
        return this.maintenanceRepository.save(createMaintenanceDto, repositoryOptions);
    }
    async findAll(repositoryOptions) {
        return await this.maintenanceRepository.findAll(repositoryOptions);
    }
    async findOne(repositoryOptions) {
        return this.maintenanceRepository.findOne(repositoryOptions);
    }
    async update(id, updateMaintenanceDto, repositoryOptions) {
        return this.maintenanceRepository.update(id, updateMaintenanceDto, repositoryOptions);
    }
    async delete(id, repositoryOptions) {
        return this.maintenanceRepository.delete(id, repositoryOptions);
    }
    async count(repositoryOptions) {
        return this.maintenanceRepository.count(repositoryOptions);
    }
    async checkRole(maintenanceId, user) {
        return true;
    }
};
exports.MaintenanceService = MaintenanceService;
exports.MaintenanceService = MaintenanceService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('MaintenanceRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_repository_port_1.MaintenanceRepositoryPort !== "undefined" && maintenance_repository_port_1.MaintenanceRepositoryPort) === "function" ? _a : Object])
], MaintenanceService);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/services/vehicle-info.service.ts":
/*!*************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/services/vehicle-info.service.ts ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfoService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const vehicle_info_repository_port_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/domain/ports/vehicle-info.repository.port */ "./apps/resource/src/modules/resource/vehicle/domain/ports/vehicle-info.repository.port.ts");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
let VehicleInfoService = class VehicleInfoService {
    constructor(vehicleInfoRepository, eventEmitter) {
        this.vehicleInfoRepository = vehicleInfoRepository;
        this.eventEmitter = eventEmitter;
    }
    async save(vehicleInfo, repositoryOptions) {
        return this.vehicleInfoRepository.save(vehicleInfo, repositoryOptions);
    }
    async findOne(repositoryOptions) {
        return this.vehicleInfoRepository.findOne(repositoryOptions);
    }
    async update(vehicleInfoId, updateData, repositoryOptions) {
        try {
            return await this.vehicleInfoRepository.update(vehicleInfoId, updateData, repositoryOptions);
        }
        catch (error) {
            console.log(error);
            throw error;
        }
        finally {
            this.createNotification(vehicleInfoId);
        }
    }
    async createNotification(vehicleInfoId) {
        const vehicleInfo = await this.vehicleInfoRepository.findOne({
            where: { vehicleInfoId },
            relations: ['resource', 'resource.resourceManagers', 'consumables', 'consumables.maintenances'],
        });
        const [systemUser] = await this.eventEmitter.emitAsync('find.user.system.admin');
        const notiTarget = [
            ...vehicleInfo.resource.resourceManagers.map((manager) => manager.employeeId),
            ...systemUser.map((user) => user.employeeId),
        ];
        for (const consumable of vehicleInfo.consumables) {
            if (!consumable.notifyReplacementCycle)
                continue;
            const replaceCycle = Number(consumable.replaceCycle);
            const initMileage = Number(consumable.initMileage);
            const totalMileage = Number(vehicleInfo.totalMileage);
            const lastMaintenanceMileage = consumable.maintenances[0]?.mileage;
            const standardMileage = totalMileage - initMileage;
            const isReplace = lastMaintenanceMileage && lastMaintenanceMileage > 0
                ? totalMileage - lastMaintenanceMileage >= replaceCycle
                : standardMileage >= replaceCycle;
            if (isReplace) {
                this.eventEmitter.emit('create.notification', {
                    notificationType: notification_type_enum_1.NotificationType.RESOURCE_CONSUMABLE_REPLACING,
                    notificationData: {
                        resourceId: vehicleInfo.resource.resourceId,
                        resourceName: vehicleInfo.resource.name,
                        resourceType: vehicleInfo.resource.type,
                        consumableName: consumable.name,
                    },
                    notiTarget,
                });
            }
        }
    }
    async checkRole(vehicleInfoId, user) {
        return true;
    }
};
exports.VehicleInfoService = VehicleInfoService;
exports.VehicleInfoService = VehicleInfoService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, common_1.Inject)('VehicleInfoRepositoryPort')),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_repository_port_1.VehicleInfoRepositoryPort !== "undefined" && vehicle_info_repository_port_1.VehicleInfoRepositoryPort) === "function" ? _a : Object, typeof (_b = typeof event_emitter_1.EventEmitter2 !== "undefined" && event_emitter_1.EventEmitter2) === "function" ? _b : Object])
], VehicleInfoService);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/usecases/consumable.usecase.ts":
/*!***********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/usecases/consumable.usecase.ts ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableUsecase = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const consumable_service_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/services/consumable.service */ "./apps/resource/src/modules/resource/vehicle/application/services/consumable.service.ts");
const vehicle_info_service_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/services/vehicle-info.service */ "./apps/resource/src/modules/resource/vehicle/application/services/vehicle-info.service.ts");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let ConsumableUsecase = class ConsumableUsecase {
    constructor(consumableService, vehicleInfoService) {
        this.consumableService = consumableService;
        this.vehicleInfoService = vehicleInfoService;
    }
    async save(user, createConsumableDto, repositoryOptions) {
        const result = await this.checkRole(createConsumableDto.vehicleInfoId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.UNAUTHORIZED);
        const vehicleInfo = await this.vehicleInfoService.findOne({
            where: {
                vehicleInfoId: createConsumableDto.vehicleInfoId,
            },
            relations: ['consumables'],
        });
        if (!vehicleInfo)
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.NOT_FOUND);
        createConsumableDto.initMileage = vehicleInfo.totalMileage;
        if (vehicleInfo.consumables.length > 0) {
            const hasSameName = vehicleInfo.consumables.some((consumable) => consumable.name === createConsumableDto.name);
            if (hasSameName)
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.ALREADY_EXISTS);
        }
        return this.consumableService.save(createConsumableDto, repositoryOptions);
    }
    async findAll(user, repositoryOptions) {
        const result = await this.checkRole(repositoryOptions?.where.vehicleInfoId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.UNAUTHORIZED);
        return this.consumableService.findAll(repositoryOptions);
    }
    async findOne(user, repositoryOptions) {
        const result = await this.checkRole(repositoryOptions?.where.vehicleInfoId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.UNAUTHORIZED);
        return this.consumableService.findOne(repositoryOptions);
    }
    async update(user, id, updateData, repositoryOptions) {
        const result = await this.checkRole(repositoryOptions?.where.vehicleInfoId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.UNAUTHORIZED);
        const vehicleInfo = await this.vehicleInfoService.findOne({
            where: {
                vehicleInfoId: updateData.vehicleInfoId,
            },
            relations: ['consumables'],
        });
        if (!vehicleInfo)
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.NOT_FOUND);
        if (vehicleInfo.consumables.length > 0) {
            const hasSameName = vehicleInfo.consumables.some((consumable) => consumable.name === updateData.name && consumable.consumableId !== id);
            if (hasSameName)
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.ALREADY_EXISTS);
        }
        return this.consumableService.update(id, updateData, repositoryOptions);
    }
    async delete(user, id, repositoryOptions) {
        const result = await this.checkRole(repositoryOptions?.where.vehicleInfoId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.CONSUMABLE.UNAUTHORIZED);
        return await this.consumableService.delete(id, repositoryOptions);
    }
    async checkRole(vehicleInfoId, user) {
        return true;
    }
};
exports.ConsumableUsecase = ConsumableUsecase;
exports.ConsumableUsecase = ConsumableUsecase = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_service_1.ConsumableService !== "undefined" && consumable_service_1.ConsumableService) === "function" ? _a : Object, typeof (_b = typeof vehicle_info_service_1.VehicleInfoService !== "undefined" && vehicle_info_service_1.VehicleInfoService) === "function" ? _b : Object])
], ConsumableUsecase);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/usecases/maintenance.usecase.ts":
/*!************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/usecases/maintenance.usecase.ts ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MaintenanceUsecase = void 0;
const vehicle_info_service_1 = __webpack_require__(/*! ../services/vehicle-info.service */ "./apps/resource/src/modules/resource/vehicle/application/services/vehicle-info.service.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const common_2 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const consumable_service_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/services/consumable.service */ "./apps/resource/src/modules/resource/vehicle/application/services/consumable.service.ts");
const maintenance_service_1 = __webpack_require__(/*! ../services/maintenance.service */ "./apps/resource/src/modules/resource/vehicle/application/services/maintenance.service.ts");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
let MaintenanceUsecase = class MaintenanceUsecase {
    constructor(maintenanceService, consumableService, vehicleInfoService, dataSource, eventEmitter) {
        this.maintenanceService = maintenanceService;
        this.consumableService = consumableService;
        this.vehicleInfoService = vehicleInfoService;
        this.dataSource = dataSource;
        this.eventEmitter = eventEmitter;
    }
    async save(user, createMaintenanceDto) {
        const result = await this.consumableService.checkRole(createMaintenanceDto.consumableId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.UNAUTHORIZED);
        const existingMaintenance = await this.maintenanceService.findOne({
            where: {
                consumableId: createMaintenanceDto.consumableId,
                date: (0, typeorm_1.MoreThanOrEqual)(createMaintenanceDto.date),
            },
        });
        if (existingMaintenance) {
            throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.INVALID_DATE);
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const maintenance = await this.maintenanceService.save({ ...createMaintenanceDto, maintananceBy: user.employeeId }, { queryRunner });
            if (createMaintenanceDto.mileage) {
                const consumable = await this.consumableService.findOne({
                    where: { consumableId: maintenance.consumableId },
                    relations: ['vehicleInfo'],
                });
                if (consumable.vehicleInfo.totalMileage < createMaintenanceDto.mileage) {
                    await this.vehicleInfoService.update(consumable.vehicleInfo.vehicleInfoId, {
                        totalMileage: createMaintenanceDto.mileage,
                    }, { queryRunner });
                }
            }
            await queryRunner.commitTransaction();
            const [systemAdmins] = await this.eventEmitter.emitAsync('find.user.system.admin');
            const consumable = await this.consumableService.findOne({
                where: { consumableId: maintenance.consumableId },
                relations: ['vehicleInfo', 'vehicleInfo.resource'],
                withDeleted: true,
            });
            this.eventEmitter.emit('create.notification', {
                notificationType: notification_type_enum_1.NotificationType.RESOURCE_MAINTENANCE_COMPLETED,
                notificationData: {
                    resourceId: consumable.vehicleInfo.resource.resourceId,
                    resourceType: consumable.vehicleInfo.resource.type,
                    consumableName: consumable.name,
                    resourceName: consumable.vehicleInfo.resource.name,
                },
                notiTarget: systemAdmins.map((admin) => admin.employeeId),
            });
            return maintenance;
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async findAllByVehicleInfoId(user, vehicleInfoId, page, limit) {
        const result = await this.vehicleInfoService.checkRole(vehicleInfoId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.UNAUTHORIZED);
        const vehicleInfo = await this.vehicleInfoService.findOne({
            where: { vehicleInfoId },
            relations: ['resource', 'consumables', 'consumables.maintenances'],
            withDeleted: true,
        });
        const options = {
            where: {
                maintenanceId: (0, typeorm_1.In)(vehicleInfo.consumables.flatMap((consumable) => consumable.maintenances.map((maintenance) => maintenance.maintenanceId))),
            },
            withDeleted: true,
        };
        const count = await this.maintenanceService.count(options);
        if (page && limit) {
            options.skip = (page - 1) * limit;
            options.take = limit;
        }
        options.relations = ['consumable'];
        options.order = { createdAt: 'DESC' };
        const maintenances = await this.maintenanceService.findAll(options);
        return {
            items: maintenances.map((maintenance, index, array) => ({
                maintenanceId: maintenance.maintenanceId,
                consumableId: maintenance.consumableId,
                date: maintenance.date,
                mileage: maintenance.mileage,
                cost: maintenance.cost,
                images: maintenance.images,
                consumableName: maintenance.consumable.name,
                resourceName: vehicleInfo.resource.name,
                previousMileage: index !== array.length - 1 ? array[index + 1].mileage : 0,
                isLatest: index === 0,
            })),
            meta: {
                total: count,
                page,
                limit,
                hasNext: page * limit < count,
            },
        };
    }
    async findAll(user, consumableId) {
        const result = await this.consumableService.checkRole(consumableId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.UNAUTHORIZED);
        return this.maintenanceService.findAll({
            where: { consumableId },
        });
    }
    async findOne(user, maintenanceId) {
        const result = await this.maintenanceService.checkRole(maintenanceId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.UNAUTHORIZED);
        const maintenance = await this.maintenanceService.findOne({
            where: { maintenanceId },
            relations: ['consumable', 'consumable.vehicleInfo', 'consumable.vehicleInfo.resource'],
            withDeleted: true,
        });
        const previousMaintenance = await this.maintenanceService.findOne({
            where: { consumableId: maintenance.consumableId, createdAt: (0, typeorm_1.LessThan)(maintenance.createdAt) },
            order: { createdAt: 'DESC' },
        });
        maintenance.createdAt.setTime(maintenance.createdAt.getTime() + 1);
        const nextMaintenance = await this.maintenanceService.findOne({
            where: { consumableId: maintenance.consumableId, createdAt: (0, typeorm_1.MoreThan)(maintenance.createdAt) },
            order: { createdAt: 'ASC' },
        });
        return {
            maintenanceId: maintenance.maintenanceId,
            consumableId: maintenance.consumableId,
            date: maintenance.date,
            mileage: maintenance.mileage,
            cost: maintenance.cost,
            images: maintenance.images,
            consumableName: maintenance.consumable.name,
            resourceName: maintenance.consumable.vehicleInfo.resource.name,
            previousMileage: previousMaintenance ? previousMaintenance.mileage : 0,
            previousDate: previousMaintenance ? previousMaintenance.date : null,
            isLatest: !nextMaintenance,
        };
    }
    async update(user, maintenanceId, updateMaintenanceDto, repositoryOptions) {
        const result = await this.maintenanceService.checkRole(maintenanceId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.UNAUTHORIZED);
        if (updateMaintenanceDto.date) {
            const existingMaintenance = await this.maintenanceService.findOne({
                where: {
                    maintenanceId: (0, typeorm_1.Not)(maintenanceId),
                    consumableId: updateMaintenanceDto.consumableId,
                    date: (0, typeorm_1.MoreThan)(updateMaintenanceDto.date),
                },
            });
            if (existingMaintenance) {
                throw new common_1.BadRequestException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.INVALID_DATE);
            }
        }
        const queryRunner = this.dataSource.createQueryRunner();
        await queryRunner.connect();
        await queryRunner.startTransaction();
        try {
            const maintenance = await this.maintenanceService.update(maintenanceId, updateMaintenanceDto, {
                queryRunner,
                ...repositoryOptions,
            });
            if (updateMaintenanceDto.mileage) {
                const savedMaintenance = await this.maintenanceService.findOne({
                    where: { maintenanceId: maintenance.maintenanceId },
                    relations: ['consumable', 'consumable.vehicleInfo'],
                    order: { createdAt: 'DESC' },
                    withDeleted: true,
                });
                if (savedMaintenance.consumable.vehicleInfo.totalMileage < updateMaintenanceDto.mileage) {
                    await this.vehicleInfoService.update(savedMaintenance.consumable.vehicleInfo.vehicleInfoId, {
                        totalMileage: updateMaintenanceDto.mileage,
                    }, { queryRunner });
                }
            }
            await queryRunner.commitTransaction();
            return await this.maintenanceService.findOne({
                where: {
                    maintenanceId: maintenanceId,
                },
            });
        }
        catch (error) {
            await queryRunner.rollbackTransaction();
            throw error;
        }
        finally {
            await queryRunner.release();
        }
    }
    async delete(user, maintenanceId, repositoryOptions) {
        const result = await this.maintenanceService.checkRole(maintenanceId, user);
        if (!result)
            throw new common_1.ForbiddenException(error_message_1.ERROR_MESSAGE.BUSINESS.MAINTENANCE.UNAUTHORIZED);
        return await this.maintenanceService.delete(maintenanceId, repositoryOptions);
    }
};
exports.MaintenanceUsecase = MaintenanceUsecase;
exports.MaintenanceUsecase = MaintenanceUsecase = __decorate([
    (0, common_2.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_service_1.MaintenanceService !== "undefined" && maintenance_service_1.MaintenanceService) === "function" ? _a : Object, typeof (_b = typeof consumable_service_1.ConsumableService !== "undefined" && consumable_service_1.ConsumableService) === "function" ? _b : Object, typeof (_c = typeof vehicle_info_service_1.VehicleInfoService !== "undefined" && vehicle_info_service_1.VehicleInfoService) === "function" ? _c : Object, typeof (_d = typeof typeorm_1.DataSource !== "undefined" && typeorm_1.DataSource) === "function" ? _d : Object, typeof (_e = typeof event_emitter_1.EventEmitter2 !== "undefined" && event_emitter_1.EventEmitter2) === "function" ? _e : Object])
], MaintenanceUsecase);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/application/usecases/vehicle-info.usecase.ts":
/*!*************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/application/usecases/vehicle-info.usecase.ts ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfoUsecase = void 0;
const vehicle_info_service_1 = __webpack_require__(/*! ../services/vehicle-info.service */ "./apps/resource/src/modules/resource/vehicle/application/services/vehicle-info.service.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const common_2 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const event_emitter_1 = __webpack_require__(/*! @nestjs/event-emitter */ "@nestjs/event-emitter");
const error_message_1 = __webpack_require__(/*! @libs/constants/error-message */ "./libs/constants/error-message.ts");
let VehicleInfoUsecase = class VehicleInfoUsecase {
    constructor(vehicleInfoService, eventEmitter) {
        this.vehicleInfoService = vehicleInfoService;
        this.eventEmitter = eventEmitter;
    }
    async findVehicleInfo(vehicleInfoId) {
        const vehicleInfo = await this.vehicleInfoService.findOne({
            where: {
                vehicleInfoId,
            },
        });
        if (!vehicleInfo) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.NOT_FOUND);
        }
        return {
            vehicleInfoId: vehicleInfo.vehicleInfoId,
            resourceId: vehicleInfo.resourceId,
            totalMileage: Number(vehicleInfo.totalMileage),
            leftMileage: Number(vehicleInfo.leftMileage),
            insuranceName: vehicleInfo.insuranceName,
            insuranceNumber: vehicleInfo.insuranceNumber,
            parkingLocationImages: vehicleInfo.parkingLocationImages,
            odometerImages: vehicleInfo.odometerImages,
            indoorImages: vehicleInfo.indoorImages,
        };
    }
    async updateVehicleInfo(vehicleInfoId, updateVehicleInfoDto, repositoryOptions) {
        const previousVehicleInfo = await this.vehicleInfoService.findOne({
            where: {
                vehicleInfoId: vehicleInfoId,
            },
            relations: ['consumables'],
            withDeleted: true,
        });
        if (!previousVehicleInfo) {
            throw new common_1.NotFoundException(error_message_1.ERROR_MESSAGE.BUSINESS.VEHICLE_INFO.NOT_FOUND);
        }
        const vehicleInfo = await this.vehicleInfoService.update(vehicleInfoId, updateVehicleInfoDto, repositoryOptions);
        return {
            vehicleInfoId: vehicleInfo.vehicleInfoId,
            resourceId: vehicleInfo.resourceId,
            totalMileage: Number(vehicleInfo.totalMileage),
            leftMileage: Number(vehicleInfo.leftMileage),
            insuranceName: vehicleInfo.insuranceName,
            insuranceNumber: vehicleInfo.insuranceNumber,
            parkingLocationImages: vehicleInfo.parkingLocationImages,
            odometerImages: vehicleInfo.odometerImages,
            indoorImages: vehicleInfo.indoorImages,
        };
    }
};
exports.VehicleInfoUsecase = VehicleInfoUsecase;
exports.VehicleInfoUsecase = VehicleInfoUsecase = __decorate([
    (0, common_2.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_service_1.VehicleInfoService !== "undefined" && vehicle_info_service_1.VehicleInfoService) === "function" ? _a : Object, typeof (_b = typeof event_emitter_1.EventEmitter2 !== "undefined" && event_emitter_1.EventEmitter2) === "function" ? _b : Object])
], VehicleInfoUsecase);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/domain/ports/consumable.repository.port.ts":
/*!***********************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/domain/ports/consumable.repository.port.ts ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/domain/ports/maintenance.repository.port.ts":
/*!************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/domain/ports/maintenance.repository.port.ts ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/domain/ports/vehicle-info.repository.port.ts":
/*!*************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/domain/ports/vehicle-info.repository.port.ts ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/admin.consumable.controller.ts":
/*!*********************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/admin.consumable.controller.ts ***!
  \*********************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminConsumableController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const create_vehicle_info_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/create-vehicle-info.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/create-vehicle-info.dto.ts");
const update_vehicle_info_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/update-vehicle-info.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/update-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/vehicle-response.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/vehicle-response.dto.ts");
const consumable_usecase_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/usecases/consumable.usecase */ "./apps/resource/src/modules/resource/vehicle/application/usecases/consumable.usecase.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let AdminConsumableController = class AdminConsumableController {
    constructor(consumableUsecase) {
        this.consumableUsecase = consumableUsecase;
    }
    async create(user, createConsumableDto) {
        const consumable = await this.consumableUsecase.save(user, createConsumableDto);
        return consumable;
    }
    async findAll(user, vehicleInfoId) {
        const consumables = await this.consumableUsecase.findAll(user, {
            where: {
                vehicleInfoId: vehicleInfoId,
            },
        });
        return consumables.map((consumable) => ({
            consumableId: consumable.consumableId,
            vehicleInfoId: consumable.vehicleInfoId,
            name: consumable.name,
            replaceCycle: consumable.replaceCycle,
            notifyReplacementCycle: consumable.notifyReplacementCycle,
        }));
    }
    async findOne(user, consumableId) {
        const consumable = await this.consumableUsecase.findOne(user, {
            where: {
                consumableId: consumableId,
            },
            relations: ['maintenances'],
        });
        return {
            consumableId: consumable.consumableId,
            vehicleInfoId: consumable.vehicleInfoId,
            name: consumable.name,
            replaceCycle: consumable.replaceCycle,
            notifyReplacementCycle: consumable.notifyReplacementCycle,
            maintenances: consumable.maintenances.map((maintenance) => ({
                maintenanceId: maintenance.maintenanceId,
                consumableId: maintenance.consumableId,
                date: maintenance.date,
                mileage: maintenance.mileage,
                cost: maintenance.cost,
                images: maintenance.images,
            })),
        };
    }
    async update(consumableId, user, updateConsumableDto) {
        const consumable = await this.consumableUsecase.update(user, consumableId, updateConsumableDto);
        return {
            consumableId: consumable.consumableId,
            vehicleInfoId: consumable.vehicleInfoId,
            name: consumable.name,
            replaceCycle: consumable.replaceCycle,
            notifyReplacementCycle: consumable.notifyReplacementCycle,
        };
    }
    async remove(user, consumableId) {
        await this.consumableUsecase.delete(user, consumableId);
    }
};
exports.AdminConsumableController = AdminConsumableController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '소모품 등록' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 201,
        description: '소모품이 성공적으로 등록되었습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _b : Object, typeof (_c = typeof create_vehicle_info_dto_1.CreateConsumableDto !== "undefined" && create_vehicle_info_dto_1.CreateConsumableDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], AdminConsumableController.prototype, "create", null);
__decorate([
    (0, common_1.Get)('vehicle/:vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '소모품 목록을 성공적으로 조회했습니다.',
        type: [vehicle_response_dto_1.ConsumableResponseDto],
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('vehicleInfoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _e : Object, String]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], AdminConsumableController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 상세 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '소모품을 성공적으로 조회했습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('consumableId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_g = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _g : Object, String]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], AdminConsumableController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '소모품이 성공적으로 수정되었습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, common_1.Param)('consumableId')),
    __param(1, (0, user_decorator_1.User)()),
    __param(2, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_j = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _j : Object, typeof (_k = typeof update_vehicle_info_dto_1.UpdateConsumableDto !== "undefined" && update_vehicle_info_dto_1.UpdateConsumableDto) === "function" ? _k : Object]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], AdminConsumableController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 삭제' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '소모품이 성공적으로 삭제되었습니다.',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('consumableId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_m = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _m : Object, String]),
    __metadata("design:returntype", typeof (_o = typeof Promise !== "undefined" && Promise) === "function" ? _o : Object)
], AdminConsumableController.prototype, "remove", null);
exports.AdminConsumableController = AdminConsumableController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 소모품 - 관리자 페이지'),
    (0, common_1.Controller)('v1/admin/consumables'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_usecase_1.ConsumableUsecase !== "undefined" && consumable_usecase_1.ConsumableUsecase) === "function" ? _a : Object])
], AdminConsumableController);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/admin.maintenance.controller.ts":
/*!**********************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/admin.maintenance.controller.ts ***!
  \**********************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminMaintenanceController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const create_vehicle_info_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/create-vehicle-info.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/create-vehicle-info.dto.ts");
const update_vehicle_info_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/update-vehicle-info.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/update-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/vehicle-response.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/vehicle-response.dto.ts");
const maintenance_usecase_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/usecases/maintenance.usecase */ "./apps/resource/src/modules/resource/vehicle/application/usecases/maintenance.usecase.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const paginate_query_dto_1 = __webpack_require__(/*! @libs/dtos/paginate-query.dto */ "./libs/dtos/paginate-query.dto.ts");
let AdminMaintenanceController = class AdminMaintenanceController {
    constructor(maintenanceUsecase) {
        this.maintenanceUsecase = maintenanceUsecase;
    }
    async create(user, createMaintenanceDto) {
        return this.maintenanceUsecase.save(user, createMaintenanceDto);
    }
    async findAll(user, vehicleInfoId, query) {
        const { page, limit } = query;
        return this.maintenanceUsecase.findAllByVehicleInfoId(user, vehicleInfoId, page, limit);
    }
    async findOne(user, maintenanceId) {
        return this.maintenanceUsecase.findOne(user, maintenanceId);
    }
    async update(maintenanceId, updateMaintenanceDto, user) {
        return this.maintenanceUsecase.update(user, maintenanceId, updateMaintenanceDto);
    }
    async remove(user, maintenanceId) {
        return this.maintenanceUsecase.delete(user, maintenanceId);
    }
};
exports.AdminMaintenanceController = AdminMaintenanceController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 201,
        description: '정비 이력이 생성되었습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _b : Object, typeof (_c = typeof create_vehicle_info_dto_1.CreateMaintenanceDto !== "undefined" && create_vehicle_info_dto_1.CreateMaintenanceDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], AdminMaintenanceController.prototype, "create", null);
__decorate([
    (0, common_1.Get)('vehicle/:vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 목록 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '정비 이력 목록을 조회했습니다.',
        type: [vehicle_response_dto_1.MaintenanceResponseDto],
    }),
    (0, swagger_1.ApiQuery)({ name: 'page', type: Number, required: false, example: 1 }),
    (0, swagger_1.ApiQuery)({ name: 'limit', type: Number, required: false, example: 10 }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('vehicleInfoId')),
    __param(2, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _e : Object, String, typeof (_f = typeof paginate_query_dto_1.PaginationQueryDto !== "undefined" && paginate_query_dto_1.PaginationQueryDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], AdminMaintenanceController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':maintenanceId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 상세 이력 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '정비 상세 이력을 조회했습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('maintenanceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_h = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _h : Object, String]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], AdminMaintenanceController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':maintenanceId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '정비 이력이 수정되었습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, common_1.Param)('maintenanceId')),
    __param(1, (0, common_1.Body)()),
    __param(2, (0, user_decorator_1.User)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_k = typeof update_vehicle_info_dto_1.UpdateMaintenanceDto !== "undefined" && update_vehicle_info_dto_1.UpdateMaintenanceDto) === "function" ? _k : Object, typeof (_l = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _l : Object]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], AdminMaintenanceController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':maintenanceId'),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 삭제' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        description: '정비 이력이 삭제되었습니다.',
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('maintenanceId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_o = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _o : Object, String]),
    __metadata("design:returntype", typeof (_p = typeof Promise !== "undefined" && Promise) === "function" ? _p : Object)
], AdminMaintenanceController.prototype, "remove", null);
exports.AdminMaintenanceController = AdminMaintenanceController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 정비 이력 - 관리자 페이지'),
    (0, common_1.Controller)('v1/admin/maintenances'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_usecase_1.MaintenanceUsecase !== "undefined" && maintenance_usecase_1.MaintenanceUsecase) === "function" ? _a : Object])
], AdminMaintenanceController);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/admin.vehicle-info.controller.ts":
/*!***********************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/admin.vehicle-info.controller.ts ***!
  \***********************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AdminVehicleInfoController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const update_vehicle_info_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/update-vehicle-info.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/update-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/vehicle-response.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/vehicle-response.dto.ts");
const vehicle_info_usecase_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/usecases/vehicle-info.usecase */ "./apps/resource/src/modules/resource/vehicle/application/usecases/vehicle-info.usecase.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
let AdminVehicleInfoController = class AdminVehicleInfoController {
    constructor(vehicleInfoUsecase) {
        this.vehicleInfoUsecase = vehicleInfoUsecase;
    }
    async findVehicleInfo(vehicleInfoId) {
        return this.vehicleInfoUsecase.findVehicleInfo(vehicleInfoId);
    }
    async update(vehicleInfoId, updateVehicleInfoDto) {
        return this.vehicleInfoUsecase.updateVehicleInfo(vehicleInfoId, updateVehicleInfoDto);
    }
};
exports.AdminVehicleInfoController = AdminVehicleInfoController;
__decorate([
    (0, common_1.Get)(':vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '차량 정보 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '차량 정보를 성공적으로 조회했습니다.',
        type: vehicle_response_dto_1.VehicleInfoResponseDto,
    }),
    __param(0, (0, common_1.Param)('vehicleInfoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], AdminVehicleInfoController.prototype, "findVehicleInfo", null);
__decorate([
    (0, common_1.Patch)(':vehicleInfoId'),
    (0, swagger_1.ApiOperation)({ summary: '차량 정보 수정' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '차량 정보가 성공적으로 수정되었습니다.',
        type: vehicle_response_dto_1.VehicleInfoResponseDto,
    }),
    __param(0, (0, common_1.Param)('vehicleInfoId')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_c = typeof update_vehicle_info_dto_1.UpdateVehicleInfoDto !== "undefined" && update_vehicle_info_dto_1.UpdateVehicleInfoDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], AdminVehicleInfoController.prototype, "update", null);
exports.AdminVehicleInfoController = AdminVehicleInfoController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 정보 - 관리자 페이지'),
    (0, common_1.Controller)('v1/admin/vehicle-info'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.SYSTEM_ADMIN),
    __metadata("design:paramtypes", [typeof (_a = typeof vehicle_info_usecase_1.VehicleInfoUsecase !== "undefined" && vehicle_info_usecase_1.VehicleInfoUsecase) === "function" ? _a : Object])
], AdminVehicleInfoController);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/consumable.controller.ts":
/*!***************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/consumable.controller.ts ***!
  \***************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserConsumableController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/vehicle-response.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/vehicle-response.dto.ts");
const consumable_usecase_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/usecases/consumable.usecase */ "./apps/resource/src/modules/resource/vehicle/application/usecases/consumable.usecase.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let UserConsumableController = class UserConsumableController {
    constructor(consumableUsecase) {
        this.consumableUsecase = consumableUsecase;
    }
    async findOne(user, consumableId) {
        const consumable = await this.consumableUsecase.findOne(user, {
            where: {
                consumableId: consumableId,
            },
            relations: ['maintenances'],
        });
        return {
            consumableId: consumable.consumableId,
            vehicleInfoId: consumable.vehicleInfoId,
            name: consumable.name,
            replaceCycle: consumable.replaceCycle,
            notifyReplacementCycle: consumable.notifyReplacementCycle,
            maintenances: consumable.maintenances.map((maintenance) => ({
                maintenanceId: maintenance.maintenanceId,
                consumableId: maintenance.consumableId,
                date: maintenance.date,
                mileage: maintenance.mileage,
                cost: maintenance.cost,
                images: maintenance.images,
            })),
        };
    }
};
exports.UserConsumableController = UserConsumableController;
__decorate([
    (0, common_1.Get)(':consumableId'),
    (0, swagger_1.ApiOperation)({ summary: '소모품 상세 조회' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 200,
        description: '소모품을 성공적으로 조회했습니다.',
        type: vehicle_response_dto_1.ConsumableResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Param)('consumableId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _b : Object, String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], UserConsumableController.prototype, "findOne", null);
exports.UserConsumableController = UserConsumableController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 소모품 - 사용자 페이지'),
    (0, common_1.Controller)('v1/consumables'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.RESOURCE_ADMIN),
    __metadata("design:paramtypes", [typeof (_a = typeof consumable_usecase_1.ConsumableUsecase !== "undefined" && consumable_usecase_1.ConsumableUsecase) === "function" ? _a : Object])
], UserConsumableController);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/maintenance.controller.ts":
/*!****************************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/maintenance.controller.ts ***!
  \****************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.UserMaintenanceController = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const api_responses_decorator_1 = __webpack_require__(/*! @libs/decorators/api-responses.decorator */ "./libs/decorators/api-responses.decorator.ts");
const create_vehicle_info_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/create-vehicle-info.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/create-vehicle-info.dto.ts");
const vehicle_response_dto_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/dtos/vehicle-response.dto */ "./apps/resource/src/modules/resource/vehicle/application/dtos/vehicle-response.dto.ts");
const maintenance_usecase_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/application/usecases/maintenance.usecase */ "./apps/resource/src/modules/resource/vehicle/application/usecases/maintenance.usecase.ts");
const user_decorator_1 = __webpack_require__(/*! @libs/decorators/user.decorator */ "./libs/decorators/user.decorator.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
let UserMaintenanceController = class UserMaintenanceController {
    constructor(maintenanceUsecase) {
        this.maintenanceUsecase = maintenanceUsecase;
    }
    async create(user, createMaintenanceDto) {
        return this.maintenanceUsecase.save(user, createMaintenanceDto);
    }
};
exports.UserMaintenanceController = UserMaintenanceController;
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: '정비 이력 생성' }),
    (0, api_responses_decorator_1.ApiDataResponse)({
        status: 201,
        description: '정비 이력이 생성되었습니다.',
        type: vehicle_response_dto_1.MaintenanceResponseDto,
    }),
    __param(0, (0, user_decorator_1.User)()),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof entities_1.User !== "undefined" && entities_1.User) === "function" ? _b : Object, typeof (_c = typeof create_vehicle_info_dto_1.CreateMaintenanceDto !== "undefined" && create_vehicle_info_dto_1.CreateMaintenanceDto) === "function" ? _c : Object]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], UserMaintenanceController.prototype, "create", null);
exports.UserMaintenanceController = UserMaintenanceController = __decorate([
    (0, swagger_1.ApiTags)('4. 차량 정비 이력 - 사용자 페이지'),
    (0, common_1.Controller)('v1/maintenances'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, role_decorator_1.Roles)(role_type_enum_1.Role.RESOURCE_ADMIN),
    __metadata("design:paramtypes", [typeof (_a = typeof maintenance_usecase_1.MaintenanceUsecase !== "undefined" && maintenance_usecase_1.MaintenanceUsecase) === "function" ? _a : Object])
], UserMaintenanceController);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/out/persistence/consumable.repository.ts":
/*!*********************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/out/persistence/consumable.repository.ts ***!
  \*********************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
let ConsumableRepository = class ConsumableRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(createConsumableDto, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Consumable)
            : this.repository;
        const savedEntity = await repository.save(createConsumableDto);
        return savedEntity;
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Consumable)
            : this.repository;
        const entities = await repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
        return entities;
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Consumable)
            : this.repository;
        const entity = await repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            withDeleted: repositoryOptions?.withDeleted,
        });
        return entity ? entity : null;
    }
    async update(id, consumable, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Consumable)
            : this.repository;
        await repository.update({ consumableId: id }, consumable);
        const updated = await this.findOne({ where: { consumableId: id }, relations: repositoryOptions?.relations });
        if (!updated)
            throw new common_1.NotFoundException('Consumable not found');
        return updated;
    }
    async delete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Consumable)
            : this.repository;
        const consumable = await repository.findOne({ where: { consumableId: id }, withDeleted: true });
        if (!consumable)
            throw new common_1.NotFoundException('Consumable not found');
        const deletedName = `${consumable.name}(삭제된 소모품-${date_util_1.DateUtil.now().format('YYYY.MM.DD HH:mm:ss')})`;
        await repository.update({ consumableId: id }, { name: deletedName });
        await repository.softDelete({ consumableId: id });
    }
};
exports.ConsumableRepository = ConsumableRepository;
exports.ConsumableRepository = ConsumableRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.Consumable)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], ConsumableRepository);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/out/persistence/maintenance.repository.ts":
/*!**********************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/out/persistence/maintenance.repository.ts ***!
  \**********************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MaintenanceRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let MaintenanceRepository = class MaintenanceRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(createMaintenanceDto, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Maintenance)
            : this.repository;
        const savedEntity = await repository.save(createMaintenanceDto);
        return savedEntity;
    }
    async findAll(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Maintenance)
            : this.repository;
        return repository.find({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            skip: repositoryOptions?.skip,
            take: repositoryOptions?.take,
            withDeleted: repositoryOptions?.withDeleted,
        });
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Maintenance)
            : this.repository;
        return repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            order: repositoryOptions?.order,
            withDeleted: repositoryOptions?.withDeleted,
        });
    }
    async update(id, updateMaintenanceDto, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Maintenance)
            : this.repository;
        await repository.update({ maintenanceId: id }, updateMaintenanceDto);
        const updated = await this.findOne({ where: { maintenanceId: id }, relations: repositoryOptions?.relations });
        if (!updated)
            throw new common_1.NotFoundException('Maintenance not found');
        return updated;
    }
    async delete(id, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Maintenance)
            : this.repository;
        await repository.delete({ maintenanceId: id });
    }
    async count(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.Maintenance)
            : this.repository;
        return repository.count({ where: repositoryOptions?.where });
    }
};
exports.MaintenanceRepository = MaintenanceRepository;
exports.MaintenanceRepository = MaintenanceRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.Maintenance)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], MaintenanceRepository);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/out/persistence/vehicle-info.repository.ts":
/*!***********************************************************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/out/persistence/vehicle-info.repository.ts ***!
  \***********************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfoRepository = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let VehicleInfoRepository = class VehicleInfoRepository {
    constructor(repository) {
        this.repository = repository;
    }
    async save(vehicleInfo, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.VehicleInfo)
            : this.repository;
        const savedEntity = await repository.save(vehicleInfo);
        return savedEntity;
    }
    async findOne(repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.VehicleInfo)
            : this.repository;
        const entity = await repository.findOne({
            where: repositoryOptions?.where,
            relations: repositoryOptions?.relations,
            withDeleted: repositoryOptions?.withDeleted,
        });
        return entity ? entity : null;
    }
    async update(id, vehicleInfo, repositoryOptions) {
        const repository = repositoryOptions?.queryRunner
            ? repositoryOptions.queryRunner.manager.getRepository(entities_1.VehicleInfo)
            : this.repository;
        await repository.update({ vehicleInfoId: id }, vehicleInfo);
        const updated = await this.findOne({ where: { vehicleInfoId: id } });
        if (!updated)
            throw new common_1.NotFoundException('Vehicle info not found');
        return updated;
    }
};
exports.VehicleInfoRepository = VehicleInfoRepository;
exports.VehicleInfoRepository = VehicleInfoRepository = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.VehicleInfo)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object])
], VehicleInfoRepository);


/***/ }),

/***/ "./apps/resource/src/modules/resource/vehicle/vehicle-resource.module.ts":
/*!*******************************************************************************!*\
  !*** ./apps/resource/src/modules/resource/vehicle/vehicle-resource.module.ts ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleResourceModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const vehicle_resource_handler_1 = __webpack_require__(/*! ./application/handlers/vehicle-resource.handler */ "./apps/resource/src/modules/resource/vehicle/application/handlers/vehicle-resource.handler.ts");
const vehicle_info_service_1 = __webpack_require__(/*! ./application/services/vehicle-info.service */ "./apps/resource/src/modules/resource/vehicle/application/services/vehicle-info.service.ts");
const consumable_service_1 = __webpack_require__(/*! ./application/services/consumable.service */ "./apps/resource/src/modules/resource/vehicle/application/services/consumable.service.ts");
const maintenance_service_1 = __webpack_require__(/*! ./application/services/maintenance.service */ "./apps/resource/src/modules/resource/vehicle/application/services/maintenance.service.ts");
const consumable_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/consumable.repository */ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/out/persistence/consumable.repository.ts");
const maintenance_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/maintenance.repository */ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/out/persistence/maintenance.repository.ts");
const vehicle_info_usecase_1 = __webpack_require__(/*! ./application/usecases/vehicle-info.usecase */ "./apps/resource/src/modules/resource/vehicle/application/usecases/vehicle-info.usecase.ts");
const consumable_usecase_1 = __webpack_require__(/*! ./application/usecases/consumable.usecase */ "./apps/resource/src/modules/resource/vehicle/application/usecases/consumable.usecase.ts");
const maintenance_usecase_1 = __webpack_require__(/*! ./application/usecases/maintenance.usecase */ "./apps/resource/src/modules/resource/vehicle/application/usecases/maintenance.usecase.ts");
const admin_vehicle_info_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/admin.vehicle-info.controller */ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/admin.vehicle-info.controller.ts");
const admin_consumable_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/admin.consumable.controller */ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/admin.consumable.controller.ts");
const admin_maintenance_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/admin.maintenance.controller */ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/admin.maintenance.controller.ts");
const vehicle_event_handler_1 = __webpack_require__(/*! ./application/handlers/vehicle-event.handler */ "./apps/resource/src/modules/resource/vehicle/application/handlers/vehicle-event.handler.ts");
const consumable_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/consumable.controller */ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/consumable.controller.ts");
const maintenance_controller_1 = __webpack_require__(/*! ./infrastructure/adapters/in/web/controllers/v1/maintenance.controller */ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/in/web/controllers/v1/maintenance.controller.ts");
const vehicle_info_repository_1 = __webpack_require__(/*! ./infrastructure/adapters/out/persistence/vehicle-info.repository */ "./apps/resource/src/modules/resource/vehicle/infrastructure/adapters/out/persistence/vehicle-info.repository.ts");
let VehicleResourceModule = class VehicleResourceModule {
};
exports.VehicleResourceModule = VehicleResourceModule;
exports.VehicleResourceModule = VehicleResourceModule = __decorate([
    (0, common_1.Module)({
        imports: [typeorm_1.TypeOrmModule.forFeature([entities_1.VehicleInfo, entities_1.Consumable, entities_1.Maintenance])],
        providers: [
            vehicle_resource_handler_1.VehicleResourceHandler,
            vehicle_info_service_1.VehicleInfoService,
            consumable_service_1.ConsumableService,
            maintenance_service_1.MaintenanceService,
            vehicle_info_usecase_1.VehicleInfoUsecase,
            consumable_usecase_1.ConsumableUsecase,
            maintenance_usecase_1.MaintenanceUsecase,
            vehicle_info_repository_1.VehicleInfoRepository,
            {
                provide: 'VehicleInfoRepositoryPort',
                useExisting: vehicle_info_repository_1.VehicleInfoRepository,
            },
            consumable_repository_1.ConsumableRepository,
            {
                provide: 'ConsumableRepositoryPort',
                useExisting: consumable_repository_1.ConsumableRepository,
            },
            maintenance_repository_1.MaintenanceRepository,
            {
                provide: 'MaintenanceRepositoryPort',
                useExisting: maintenance_repository_1.MaintenanceRepository,
            },
            vehicle_event_handler_1.VehicleEventHandler,
        ],
        controllers: [
            admin_vehicle_info_controller_1.AdminVehicleInfoController,
            admin_consumable_controller_1.AdminConsumableController,
            admin_maintenance_controller_1.AdminMaintenanceController,
            consumable_controller_1.UserConsumableController,
            maintenance_controller_1.UserMaintenanceController,
        ],
        exports: [
            vehicle_resource_handler_1.VehicleResourceHandler,
            vehicle_info_service_1.VehicleInfoService,
            consumable_service_1.ConsumableService,
            maintenance_service_1.MaintenanceService,
            vehicle_info_usecase_1.VehicleInfoUsecase,
            consumable_usecase_1.ConsumableUsecase,
            maintenance_usecase_1.MaintenanceUsecase,
        ],
    })
], VehicleResourceModule);


/***/ }),

/***/ "./apps/resource/src/modules/seed/seed.data.ts":
/*!*****************************************************!*\
  !*** ./apps/resource/src/modules/seed/seed.data.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.seedData = void 0;
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
exports.seedData = [
    {
        title: '법인차량 ',
        type: resource_type_enum_1.ResourceType.VEHICLE,
        resources: [
            {
                name: '싼타페(25어5677)',
                location: {
                    address: 'B3',
                    detailAddress: 'A01',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.VEHICLE,
                order: 0,
            },
            {
                name: '셀토스(126서1152)',
                location: {
                    address: 'B3',
                    detailAddress: 'B01',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.VEHICLE,
                order: 1,
            },
            {
                name: '카니발(116너 5351)',
                location: {
                    address: 'B3',
                    detailAddress: 'C01',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.VEHICLE,
                order: 2,
            },
            {
                name: '카니발(161라 4762)',
                location: {
                    address: 'B3',
                    detailAddress: 'D01',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.VEHICLE,
                order: 3,
            },
        ],
    },
    {
        title: '대전숙소',
        type: resource_type_enum_1.ResourceType.ACCOMMODATION,
        resources: [
            {
                name: '럭셔리모텔1',
                location: {
                    address: '대전광역시 유성구',
                    detailAddress: '온천서로 30-10',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.ACCOMMODATION,
                order: 0,
            },
            {
                name: '럭셔리모텔2',
                location: {
                    address: '대전광역시 유성구',
                    detailAddress: '온천서로 30-10',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.ACCOMMODATION,
                order: 1,
            },
            {
                name: '럭셔리모텔3',
                location: {
                    address: '대전광역시 유성구',
                    detailAddress: '온천서로 30-10',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.ACCOMMODATION,
                order: 2,
            },
            {
                name: '럭셔리모텔4',
                location: {
                    address: '대전광역시 유성구',
                    detailAddress: '온천서로 30-10',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.ACCOMMODATION,
                order: 3,
            },
            {
                name: '럭셔리모텔5',
                location: {
                    address: '대전광역시 유성구',
                    detailAddress: '온천서로 30-10',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.ACCOMMODATION,
                order: 4,
            },
            {
                name: '럭셔리모텔6',
                location: {
                    address: '대전광역시 유성구',
                    detailAddress: '온천서로 30-10',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.ACCOMMODATION,
                order: 5,
            },
        ],
    },
    {
        title: '11층 회의실',
        type: resource_type_enum_1.ResourceType.MEETING_ROOM,
        resources: [
            {
                name: '11층 대회의실',
                location: {
                    address: '11층',
                    detailAddress: '',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.MEETING_ROOM,
                order: 0,
            },
            {
                name: '11층 중회의실',
                location: {
                    address: '11층',
                    detailAddress: '',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.MEETING_ROOM,
                order: 1,
            },
            {
                name: '11층 소회의실',
                location: {
                    address: '11층',
                    detailAddress: '',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.MEETING_ROOM,
                order: 2,
            },
            {
                name: '대표이사실',
                location: {
                    address: '11층',
                    detailAddress: '',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.MEETING_ROOM,
                order: 3,
            },
        ],
    },
    {
        title: '5층 회의실',
        type: resource_type_enum_1.ResourceType.MEETING_ROOM,
        resources: [
            {
                name: '5층 회의실',
                location: {
                    address: '5층',
                    detailAddress: '',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.MEETING_ROOM,
                order: 0,
            },
            {
                name: '5층 중회의실',
                location: {
                    address: '5층',
                    detailAddress: '',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.MEETING_ROOM,
                order: 1,
            },
            {
                name: '5층 소회의실',
                location: {
                    address: '5층',
                    detailAddress: '',
                },
                images: [],
                type: resource_type_enum_1.ResourceType.MEETING_ROOM,
                order: 2,
            },
        ],
    },
];


/***/ }),

/***/ "./apps/resource/src/modules/seed/seed.module.ts":
/*!*******************************************************!*\
  !*** ./apps/resource/src/modules/seed/seed.module.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SeedModule = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const seed_service_1 = __webpack_require__(/*! ./seed.service */ "./apps/resource/src/modules/seed/seed.service.ts");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const entities_2 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
let SeedModule = class SeedModule {
};
exports.SeedModule = SeedModule;
exports.SeedModule = SeedModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([
                entities_1.ResourceGroup,
                entities_2.Resource,
                entities_1.ResourceManager,
                entities_1.VehicleInfo,
                entities_1.AccommodationInfo,
                entities_1.MeetingRoomInfo,
            ]),
        ],
        providers: [seed_service_1.SeedService],
        exports: [seed_service_1.SeedService],
    })
], SeedModule);


/***/ }),

/***/ "./apps/resource/src/modules/seed/seed.service.ts":
/*!********************************************************!*\
  !*** ./apps/resource/src/modules/seed/seed.service.ts ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SeedService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! @nestjs/typeorm */ "@nestjs/typeorm");
const typeorm_2 = __webpack_require__(/*! typeorm */ "typeorm");
const entities_1 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const entities_2 = __webpack_require__(/*! @libs/entities */ "./libs/entities/index.ts");
const seed_data_1 = __webpack_require__(/*! ./seed.data */ "./apps/resource/src/modules/seed/seed.data.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
let SeedService = class SeedService {
    constructor(resourceGroupRepository, resourceRepository, resourceManagerRepository, vehicleInfoRepository, accommodationInfoRepository, meetingRoomInfoRepository) {
        this.resourceGroupRepository = resourceGroupRepository;
        this.resourceRepository = resourceRepository;
        this.resourceManagerRepository = resourceManagerRepository;
        this.vehicleInfoRepository = vehicleInfoRepository;
        this.accommodationInfoRepository = accommodationInfoRepository;
        this.meetingRoomInfoRepository = meetingRoomInfoRepository;
    }
    async onModuleInit() {
    }
    async seed() {
        const defaultResourceGroup = await this.resourceGroupRepository.find();
        const categories = defaultResourceGroup.filter((group) => group.parentResourceGroupId === null);
        const groups = defaultResourceGroup.filter((group) => group.parentResourceGroupId !== null);
        if (groups.length === 0) {
            for (const group of seed_data_1.seedData) {
                const parentGroup = categories.find((c) => c.type === group.type);
                const savedGroup = await this.resourceGroupRepository.save({
                    title: group.title,
                    type: group.type,
                    parentResourceGroupId: parentGroup.resourceGroupId,
                });
                for (const resource of group.resources) {
                    const savedResource = await this.resourceRepository.save({
                        name: resource.name,
                        location: resource.location,
                        images: resource.images,
                        type: resource.type,
                        order: resource.order,
                        resourceGroupId: savedGroup.resourceGroupId,
                    });
                    if (resource.type === resource_type_enum_1.ResourceType.VEHICLE) {
                        await this.vehicleInfoRepository.save({
                            resourceId: savedResource.resourceId,
                        });
                    }
                    else if (resource.type === resource_type_enum_1.ResourceType.ACCOMMODATION) {
                        await this.accommodationInfoRepository.save({
                            resourceId: savedResource.resourceId,
                        });
                    }
                    else if (resource.type === resource_type_enum_1.ResourceType.MEETING_ROOM) {
                        await this.meetingRoomInfoRepository.save({
                            resourceId: savedResource.resourceId,
                        });
                    }
                    await this.resourceManagerRepository.save({
                        resourceId: savedResource.resourceId,
                        employeeId: 'bedf827a-a374-4549-9c84-90698fbd9d51',
                    });
                }
            }
        }
    }
};
exports.SeedService = SeedService;
exports.SeedService = SeedService = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(entities_1.ResourceGroup)),
    __param(1, (0, typeorm_1.InjectRepository)(entities_2.Resource)),
    __param(2, (0, typeorm_1.InjectRepository)(entities_1.ResourceManager)),
    __param(3, (0, typeorm_1.InjectRepository)(entities_1.VehicleInfo)),
    __param(4, (0, typeorm_1.InjectRepository)(entities_1.AccommodationInfo)),
    __param(5, (0, typeorm_1.InjectRepository)(entities_1.MeetingRoomInfo)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object, typeof (_b = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _b : Object, typeof (_c = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _c : Object, typeof (_d = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _d : Object, typeof (_e = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _e : Object, typeof (_f = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _f : Object])
], SeedService);


/***/ }),

/***/ "./apps/resource/src/statistics/consumable-maintenance-stats.dto.ts":
/*!**************************************************************************!*\
  !*** ./apps/resource/src/statistics/consumable-maintenance-stats.dto.ts ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStatsResponseDto = exports.ConsumableMaintenanceStatsFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const base_dto_1 = __webpack_require__(/*! ../common/base.dto */ "./apps/resource/src/common/base.dto.ts");
class ConsumableMaintenanceStatsFilterDto extends base_dto_1.YearMonthFilterDto {
}
exports.ConsumableMaintenanceStatsFilterDto = ConsumableMaintenanceStatsFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsFilterDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '차량 정보 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsFilterDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '소모품 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsFilterDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '최소 정비 횟수' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)(),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsFilterDto.prototype, "minMaintenanceCount", void 0);
class ConsumableMaintenanceStatsResponseDto {
}
exports.ConsumableMaintenanceStatsResponseDto = ConsumableMaintenanceStatsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 이름' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 유형' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 정보 ID' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 번호' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 ID' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    __metadata("design:type", String)
], ConsumableMaintenanceStatsResponseDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기 알림 여부' }),
    __metadata("design:type", Boolean)
], ConsumableMaintenanceStatsResponseDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 횟수' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "maintenanceCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '첫 정비 날짜' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ConsumableMaintenanceStatsResponseDto.prototype, "firstMaintenanceDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '마지막 정비 날짜' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ConsumableMaintenanceStatsResponseDto.prototype, "lastMaintenanceDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 비용' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "totalCost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '평균 비용' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "averageCost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '최소 주행 거리' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "minMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '최대 주행 거리' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "maxMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '평균 주행 거리' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "averageMileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 간 평균 일수' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "averageDaysBetweenMaintenances", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '현재 연도' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "currentYear", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '현재 월' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "currentMonth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '최근 3개월 정비 횟수' }),
    __metadata("design:type", Number)
], ConsumableMaintenanceStatsResponseDto.prototype, "recentMaintenanceCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '통계 계산 시점' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ConsumableMaintenanceStatsResponseDto.prototype, "computedAt", void 0);


/***/ }),

/***/ "./apps/resource/src/statistics/employee-reservation-stats.dto.ts":
/*!************************************************************************!*\
  !*** ./apps/resource/src/statistics/employee-reservation-stats.dto.ts ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeReservationStatsResponseDto = exports.EmployeeReservationStatsFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const base_dto_1 = __webpack_require__(/*! ../common/base.dto */ "./apps/resource/src/common/base.dto.ts");
class EmployeeReservationStatsFilterDto extends base_dto_1.YearMonthFilterDto {
}
exports.EmployeeReservationStatsFilterDto = EmployeeReservationStatsFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '직원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], EmployeeReservationStatsFilterDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '직원 이름' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], EmployeeReservationStatsFilterDto.prototype, "employeeName", void 0);
class EmployeeReservationStatsResponseDto {
}
exports.EmployeeReservationStatsResponseDto = EmployeeReservationStatsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연도' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '월' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "month", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연월 (YYYY-MM)' }),
    __metadata("design:type", String)
], EmployeeReservationStatsResponseDto.prototype, "yearMonth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID' }),
    __metadata("design:type", String)
], EmployeeReservationStatsResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 이름' }),
    __metadata("design:type", String)
], EmployeeReservationStatsResponseDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "reservationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 이용 시간 (시간)' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "totalHours", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약당 평균 이용 시간 (시간)' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "avgHoursPerReservation", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "vehicleCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '회의실 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "meetingRoomCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '숙소 예약 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "accommodationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '취소 횟수' }),
    __metadata("design:type", Number)
], EmployeeReservationStatsResponseDto.prototype, "cancellationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '통계 계산 시점' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeReservationStatsResponseDto.prototype, "computedAt", void 0);


/***/ }),

/***/ "./apps/resource/src/statistics/index.ts":
/*!***********************************************!*\
  !*** ./apps/resource/src/statistics/index.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStatsResponseDto = exports.ConsumableMaintenanceStatsFilterDto = exports.VehicleMaintenanceHistoryResponseDto = exports.VehicleMaintenanceHistoryFilterDto = exports.ResourceUsageStatsResponseDto = exports.ResourceUsageStatsFilterDto = exports.EmployeeReservationStatsResponseDto = exports.EmployeeReservationStatsFilterDto = void 0;
var employee_reservation_stats_dto_1 = __webpack_require__(/*! ./employee-reservation-stats.dto */ "./apps/resource/src/statistics/employee-reservation-stats.dto.ts");
Object.defineProperty(exports, "EmployeeReservationStatsFilterDto", ({ enumerable: true, get: function () { return employee_reservation_stats_dto_1.EmployeeReservationStatsFilterDto; } }));
Object.defineProperty(exports, "EmployeeReservationStatsResponseDto", ({ enumerable: true, get: function () { return employee_reservation_stats_dto_1.EmployeeReservationStatsResponseDto; } }));
var resource_usage_stats_dto_1 = __webpack_require__(/*! ./resource-usage-stats.dto */ "./apps/resource/src/statistics/resource-usage-stats.dto.ts");
Object.defineProperty(exports, "ResourceUsageStatsFilterDto", ({ enumerable: true, get: function () { return resource_usage_stats_dto_1.ResourceUsageStatsFilterDto; } }));
Object.defineProperty(exports, "ResourceUsageStatsResponseDto", ({ enumerable: true, get: function () { return resource_usage_stats_dto_1.ResourceUsageStatsResponseDto; } }));
var vehicle_maintenance_history_dto_1 = __webpack_require__(/*! ./vehicle-maintenance-history.dto */ "./apps/resource/src/statistics/vehicle-maintenance-history.dto.ts");
Object.defineProperty(exports, "VehicleMaintenanceHistoryFilterDto", ({ enumerable: true, get: function () { return vehicle_maintenance_history_dto_1.VehicleMaintenanceHistoryFilterDto; } }));
Object.defineProperty(exports, "VehicleMaintenanceHistoryResponseDto", ({ enumerable: true, get: function () { return vehicle_maintenance_history_dto_1.VehicleMaintenanceHistoryResponseDto; } }));
var consumable_maintenance_stats_dto_1 = __webpack_require__(/*! ./consumable-maintenance-stats.dto */ "./apps/resource/src/statistics/consumable-maintenance-stats.dto.ts");
Object.defineProperty(exports, "ConsumableMaintenanceStatsFilterDto", ({ enumerable: true, get: function () { return consumable_maintenance_stats_dto_1.ConsumableMaintenanceStatsFilterDto; } }));
Object.defineProperty(exports, "ConsumableMaintenanceStatsResponseDto", ({ enumerable: true, get: function () { return consumable_maintenance_stats_dto_1.ConsumableMaintenanceStatsResponseDto; } }));


/***/ }),

/***/ "./apps/resource/src/statistics/resource-usage-stats.dto.ts":
/*!******************************************************************!*\
  !*** ./apps/resource/src/statistics/resource-usage-stats.dto.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceUsageStatsResponseDto = exports.ResourceUsageStatsFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const base_dto_1 = __webpack_require__(/*! ../common/base.dto */ "./apps/resource/src/common/base.dto.ts");
class ResourceUsageStatsFilterDto extends base_dto_1.YearMonthFilterDto {
}
exports.ResourceUsageStatsFilterDto = ResourceUsageStatsFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceUsageStatsFilterDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '직원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceUsageStatsFilterDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 유형' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], ResourceUsageStatsFilterDto.prototype, "resourceType", void 0);
class ResourceUsageStatsResponseDto {
}
exports.ResourceUsageStatsResponseDto = ResourceUsageStatsResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 이름' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 유형' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "resourceType", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 ID' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "employeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직원 이름' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "employeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연도' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '월' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "month", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연월 (YYYY-MM)' }),
    __metadata("design:type", String)
], ResourceUsageStatsResponseDto.prototype, "yearMonth", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 횟수' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "reservationCount", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '총 이용 시간 (시간)' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "totalHours", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '예약 횟수 순위' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "countRank", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '이용 시간 순위' }),
    __metadata("design:type", Number)
], ResourceUsageStatsResponseDto.prototype, "hoursRank", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '통계 계산 시점' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ResourceUsageStatsResponseDto.prototype, "computedAt", void 0);


/***/ }),

/***/ "./apps/resource/src/statistics/vehicle-maintenance-history.dto.ts":
/*!*************************************************************************!*\
  !*** ./apps/resource/src/statistics/vehicle-maintenance-history.dto.ts ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleMaintenanceHistoryResponseDto = exports.VehicleMaintenanceHistoryFilterDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const base_dto_1 = __webpack_require__(/*! ../common/base.dto */ "./apps/resource/src/common/base.dto.ts");
class VehicleMaintenanceHistoryFilterDto extends base_dto_1.DateRangeFilterDto {
}
exports.VehicleMaintenanceHistoryFilterDto = VehicleMaintenanceHistoryFilterDto;
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '자원 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '차량 정보 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '소모품 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, description: '담당자 ID' }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsString)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryFilterDto.prototype, "responsibleEmployeeId", void 0);
class VehicleMaintenanceHistoryResponseDto {
}
exports.VehicleMaintenanceHistoryResponseDto = VehicleMaintenanceHistoryResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "resourceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '자원 이름' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "resourceName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 정보 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '차량 번호' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "vehicleNumber", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "consumableId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '소모품 이름' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "consumableName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "replaceCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '교체 주기 알림 여부' }),
    __metadata("design:type", Boolean)
], VehicleMaintenanceHistoryResponseDto.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "maintenanceId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 날짜' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "maintenanceDate", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '주행 거리' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "mileage", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '비용' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "cost", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 담당자 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "maintananceBy", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '정비 이미지' }),
    __metadata("design:type", Array)
], VehicleMaintenanceHistoryResponseDto.prototype, "images", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '생성 시간' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], VehicleMaintenanceHistoryResponseDto.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '업데이트 시간' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], VehicleMaintenanceHistoryResponseDto.prototype, "updatedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '담당 직원 ID' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "responsibleEmployeeId", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '담당 직원 이름' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "responsibleEmployeeName", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '부서' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "department", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '직급' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "position", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '연도' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "year", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '월' }),
    __metadata("design:type", Number)
], VehicleMaintenanceHistoryResponseDto.prototype, "month", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: '날짜 문자열' }),
    __metadata("design:type", String)
], VehicleMaintenanceHistoryResponseDto.prototype, "dateStr", void 0);


/***/ }),

/***/ "./libs/configs/env.config.ts":
/*!************************************!*\
  !*** ./libs/configs/env.config.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.FIREBASE_CONFIG = exports.APP_CONFIG = exports.WEB_PUSH_CONFIG = exports.JWT_CONFIG = exports.ENV = void 0;
const dotenv_1 = __webpack_require__(/*! dotenv */ "dotenv");
const config_1 = __webpack_require__(/*! @nestjs/config */ "@nestjs/config");
(0, dotenv_1.config)();
exports.ENV = process.env;
exports["default"] = (0, config_1.registerAs)('database', () => {
    return {
        host: process.env.POSTGRES_HOST || 'localhost',
        port: parseInt(process.env.POSTGRES_PORT, 10) || 5432,
        username: process.env.POSTGRES_USER || 'admin',
        password: process.env.POSTGRES_PASSWORD || 'tech7admin!',
        database: process.env.POSTGRES_DB || 'resource-server',
    };
});
exports.JWT_CONFIG = (0, config_1.registerAs)('jwt', () => {
    return {
        secret: process.env.JWT_SECRET,
        expiresIn: process.env.JWT_EXPIRES_IN,
    };
});
exports.WEB_PUSH_CONFIG = (0, config_1.registerAs)('webPush', () => {
    return {
        publicKey: process.env.WEB_PUSH_PUBLIC_KEY,
        privateKey: process.env.WEB_PUSH_PRIVATE_KEY,
    };
});
exports.APP_CONFIG = (0, config_1.registerAs)('app', () => {
    return {
        url: process.env.NODE_ENV === 'production' ? 'http://localhost:5001' : 'http://localhost:3000',
        port: process.env.NODE_ENV === 'production' ? 5001 : 3000,
        storage: {
            type: process.env.NODE_ENV,
        },
    };
});
exports.FIREBASE_CONFIG = (0, config_1.registerAs)('firebase', () => {
    return {
        type: process.env.FIREBASE_TYPE,
        projectId: process.env.FIREBASE_PROJECT_ID,
        privateKeyId: process.env.FIREBASE_PRIVATE_KEY_ID,
        privateKey: process.env.FIREBASE_PRIVATE_KEY,
        clientEmail: process.env.FIREBASE_CLIENT_EMAIL,
        clientId: process.env.FIREBASE_CLIENT_ID,
        authUri: process.env.FIREBASE_AUTH_URI,
        tokenUri: process.env.FIREBASE_TOKEN_URI,
        authProviderX509CertUrl: process.env.FIREBASE_AUTH_PROVIDER_X509_CERT_URL,
        clientX509CertUrl: process.env.FIREBASE_CLIENT_X509_CERT_URL,
        universeDomain: process.env.FIREBASE_UNIVERSE_DOMAIN,
    };
});


/***/ }),

/***/ "./libs/configs/jwt.config.ts":
/*!************************************!*\
  !*** ./libs/configs/jwt.config.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.jwtConfig = void 0;
const jwtConfig = (configService) => ({
    secret: configService.get('JWT_SECRET'),
    signOptions: {
        expiresIn: configService.get('JWT_EXPIRES_IN'),
    },
});
exports.jwtConfig = jwtConfig;


/***/ }),

/***/ "./libs/configs/typeorm.config.ts":
/*!****************************************!*\
  !*** ./libs/configs/typeorm.config.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.typeOrmConfig = void 0;
const entities_1 = __webpack_require__(/*! ../entities */ "./libs/entities/index.ts");
const typeOrmConfig = (configService) => {
    return {
        type: 'postgres',
        host: configService.get('database.host'),
        port: configService.get('database.port'),
        username: configService.get('database.username'),
        password: configService.get('database.password'),
        database: configService.get('database.database'),
        entities: entities_1.Entities,
        schema: 'public',
        migrationsRun: configService.get('database.port') === 6543,
        ssl: configService.get('database.port') === 6543,
        extra: {
            ssl: configService.get('database.port') === 6543 ? { rejectUnauthorized: false } : null,
        },
    };
};
exports.typeOrmConfig = typeOrmConfig;


/***/ }),

/***/ "./libs/constants/error-message.ts":
/*!*****************************************!*\
  !*** ./libs/constants/error-message.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ERROR_MESSAGE = void 0;
const ValidationErrorMessage = {
    REQUIRED: (field) => `${field}은(는) 필수 값입니다.`,
    IS_INT: (field) => `${field}은(는) 정수여야 합니다.`,
    IS_ARRAY: (field) => `${field}은(는) 배열이어야 합니다.`,
    IS_STRING: (field) => `${field}은(는) 문자열이어야 합니다.`,
    IS_NUMBER: (field) => `${field}은(는) 숫자여야 합니다.`,
    IS_BOOLEAN: (field) => `${field}은(는) 불리언이어야 합니다.`,
    IS_DATE: (field) => `${field}은(는) 날짜여야 합니다.`,
    IS_EMAIL: (field) => `${field}은(는) 이메일 형식이어야 합니다.`,
    IS_URL: (field) => `${field}은(는) URL 형식이어야 합니다.`,
    IS_PHONE: (field) => `${field}은(는) 전화번호 형식이어야 합니다.`,
    IS_MIN: (field, min) => `${field}은(는) ${min} 이상이어야 합니다.`,
    IS_MAX: (field, max) => `${field}은(는) ${max} 이하이어야 합니다.`,
    IS_MIN_LENGTH: (field, minLength) => `${field}은(는) ${minLength} 글자 이상이어야 합니다.`,
    IS_MAX_LENGTH: (field, maxLength) => `${field}은(는) ${maxLength} 글자 이하이어야 합니다.`,
    IS_LENGTH: (field, minLength, maxLength) => `${field}은(는) ${minLength} 글자 이상 ${maxLength} 글자 이하이어야 합니다.`,
    IS_REGEX: (field, regex) => `${field}은(는) ${regex} 형식이어야 합니다.`,
    IS_ENUM: (field, enumValues) => `${field}은(는) ${enumValues.join(', ')} 중 하나여야 합니다.`,
    IS_IN: (field, values) => `${field}은(는) ${values.join(', ')} 중 하나여야 합니다.`,
    IS_NOT_IN: (field, values) => `${field}은(는) ${values.join(', ')} 중 하나여야 합니다.`,
    IS_NOT_NULL: (field) => `${field}은(는) NULL이 아니어야 합니다.`,
    IS_NULL: (field) => `${field}은(는) NULL이어야 합니다.`,
    IS_POSITIVE: (field) => `${field}은(는) 양수여야 합니다.`,
    IS_NEGATIVE: (field) => `${field}은(는) 음수여야 합니다.`,
    IS_ZERO: (field) => `${field}은(는) 0이어야 합니다.`,
    IS_NOT_ZERO: (field) => `${field}은(는) 0이 아니어야 합니다.`,
    INVALID_DATE_FORMAT: (field, format) => `${field}의 날짜 형식이 올바르지 않습니다. ${format} 형식이어야 합니다.`,
    INVALID_ARRAY_ITEM_TYPE: (field, type) => `${field}의 모든 항목은 ${type}이어야 합니다.`,
    INVALID_MILEAGE: (field) => `${field}은(는) 0 이상 999,999,999 이하의 정수여야 합니다.`,
};
const BusinessErrorMessage = {
    COMMON: {
        NOT_FOUND: '요청한 데이터를 찾을 수 없습니다.',
        DUPLICATE_USER: '이미 존재하는 사용자입니다.',
        UNAUTHORIZED: '권한이 없습니다.',
    },
    AUTH: {
        USER_NOT_FOUND: '사용자를 찾을 수 없습니다.',
        INVALID_PASSWORD: '비밀번호가 일치하지 않습니다.',
        SSO_LOGIN_FAILED: 'SSO 로그인에 실패했습니다.',
    },
    RESOURCE: {
        NOT_FOUND: '요청한 자원을 찾을 수 없습니다.',
        INVALID_STATUS: '잘못된 상태입니다.',
        HAS_RESOURCES: '자원이 포함된 그룹은 삭제할 수 없습니다.',
        IS_AVAILABLE: '사용 가능한 자원은 삭제할 수 없습니다.',
        GROUP_ID_REQUIRED: '자원 그룹 ID는 필수입니다.',
        MANAGERS_REQUIRED: '자원 관리자는 필수입니다.',
        UNSUPPORTED_TYPE: (type) => `지원하지 않는 자원 타입입니다: ${type}`,
        FAILED_CREATE: '자원 생성에 실패했습니다.',
        FAILED_UPDATE: '자원 수정에 실패했습니다.',
        FAILED_DELETE: '자원 삭제에 실패했습니다.',
        FAILED_REORDER: '자원 순서 변경에 실패했습니다.',
        DATE_REQUIRED: '시작 날짜와 종료 날짜는 필수입니다.',
        INVALID_DATE_RANGE: '시작 날짜는 종료 날짜보다 이전이어야 합니다.',
        TIME_RANGE_CONFLICT: '시간 범위와 시간 단위는 동시에 선택할 수 없습니다.',
    },
    RESOURCE_GROUP: {
        NOT_FOUND: '요청한 자원 그룹을 찾을 수 없습니다.',
        FAILED_REORDER: '자원 그룹 순서 변경에 실패했습니다.',
    },
    RESOURCE_MANAGER: {
        NOT_FOUND: '요청한 자원 관리자를 찾을 수 없습니다.',
    },
    VEHICLE_INFO: {
        NOT_FOUND: '요청한 차량 정보를 찾을 수 없습니다.',
        FAILED_RETURN: '차량 반납에 실패했습니다.',
    },
    CONSUMABLE: {
        NOT_FOUND: '요청한 소모품 정보를 찾을 수 없습니다.',
        UNAUTHORIZED: '소모품 관리 권한이 없습니다.',
        ALREADY_EXISTS: '이미 존재하는 소모품입니다.',
    },
    MAINTENANCE: {
        NOT_FOUND: '요청한 정비 정보를 찾을 수 없습니다.',
        UNAUTHORIZED: '정비 관리 권한이 없습니다.',
        INVALID_DATE: '직전 정비 이력 보다 이전 날짜에 정비 이력을 등록할 수 없습니다.',
    },
    RESERVATION: {
        NOT_FOUND: '요청한 예약 정보를 찾을 수 없습니다.',
        TIME_CONFLICT: '해당 시간엔 이미 예약이 되어있습니다.',
        INVALID_DATE_RANGE: '시작 시간은 종료 시간보다 이전이어야 합니다.',
        CANNOT_UPDATE_ACCOMMODATION_TIME: '확정된 숙소 예약의 시간은 변경할 수 없습니다.',
        CANNOT_UPDATE_STATUS: (status) => `${status} 상태의 예약은 수정할 수 없습니다.`,
        INVALID_RESOURCE_TYPE: '잘못된 자원 타입입니다.',
        CANNOT_RETURN_STATUS: (status) => `${status} 상태의 예약은 차량을 반납할 수 없습니다.`,
        VEHICLE_NOT_FOUND: '예약된 차량을 찾을 수 없습니다.',
        VEHICLE_ALREADY_RETURNED: '이미 반납된 차량입니다.',
        INVALID_MILEAGE: '반납 주행거리는 이전 주행거리보다 작을 수 없습니다.',
        RESOURCE_UNAVAILABLE: '예약 가능한 자원이 아닙니다.',
    },
    FILE: {
        NOT_FOUND: '요청한 파일을 찾을 수 없습니다.',
        ID_OR_PATH_REQUIRED: '파일 ID 또는 파일 경로는 필수입니다.',
    },
    EMPLOYEE: {
        NOT_FOUND: '존재하지 않는 사용자입니다.',
        SYNC_FAILED: '직원 정보 동기화에 실패했습니다.',
    },
};
exports.ERROR_MESSAGE = {
    VALIDATION: ValidationErrorMessage,
    BUSINESS: BusinessErrorMessage,
};


/***/ }),

/***/ "./libs/decorators/api-responses.decorator.ts":
/*!****************************************************!*\
  !*** ./libs/decorators/api-responses.decorator.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ApiDataResponse = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const paginate_response_dto_1 = __webpack_require__(/*! ../dtos/paginate-response.dto */ "./libs/dtos/paginate-response.dto.ts");
const response_dto_1 = __webpack_require__(/*! ../dtos/response.dto */ "./libs/dtos/response.dto.ts");
const ApiCommonErrors = () => (0, common_1.applyDecorators)((0, swagger_1.ApiBadRequestResponse)({ description: '잘못된 요청입니다.', type: response_dto_1.ErrorResponseDto }), (0, swagger_1.ApiUnauthorizedResponse)({ description: '인증되지 않은 요청입니다.' }), (0, swagger_1.ApiForbiddenResponse)({ description: '권한이 없습니다.' }), (0, swagger_1.ApiNotFoundResponse)({ description: '리소스를 찾을 수 없습니다.' }), (0, swagger_1.ApiConflictResponse)({ description: '중복된 리소스입니다.' }), (0, swagger_1.ApiInternalServerErrorResponse)({ description: '서버 에러가 발생했습니다.' }));
const ApiDataResponse = (options) => {
    const schema = options.type
        ? {
            allOf: [
                {
                    $ref: (0, swagger_1.getSchemaPath)(response_dto_1.BaseResponseDto),
                },
                {
                    properties: {
                        data: options.isPaginated || Array.isArray(options.type)
                            ? {
                                type: 'object',
                                properties: {
                                    items: {
                                        type: 'array',
                                        items: { $ref: (0, swagger_1.getSchemaPath)(options.type[0]) },
                                    },
                                    meta: {
                                        $ref: (0, swagger_1.getSchemaPath)(paginate_response_dto_1.PaginationMetaDto),
                                    },
                                },
                            }
                            : {
                                $ref: (0, swagger_1.getSchemaPath)(options.type),
                            },
                    },
                },
            ],
        }
        : {
            properties: {
                success: { type: 'boolean', example: true },
                message: { type: 'string', example: options.description },
            },
        };
    return (0, common_1.applyDecorators)((0, swagger_1.ApiOkResponse)({
        status: options.status || 200,
        description: options.description || '성공적으로 처리되었습니다.',
        schema,
    }), ApiCommonErrors());
};
exports.ApiDataResponse = ApiDataResponse;


/***/ }),

/***/ "./libs/decorators/public.decorator.ts":
/*!*********************************************!*\
  !*** ./libs/decorators/public.decorator.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Public = exports.IS_PUBLIC_KEY = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
exports.IS_PUBLIC_KEY = 'isPublic';
const Public = () => (0, common_1.SetMetadata)(exports.IS_PUBLIC_KEY, true);
exports.Public = Public;


/***/ }),

/***/ "./libs/decorators/role.decorator.ts":
/*!*******************************************!*\
  !*** ./libs/decorators/role.decorator.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Roles = exports.ROLES_KEY = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
exports.ROLES_KEY = 'roles';
const Roles = (...roles) => (0, common_1.SetMetadata)(exports.ROLES_KEY, roles);
exports.Roles = Roles;


/***/ }),

/***/ "./libs/decorators/user.decorator.ts":
/*!*******************************************!*\
  !*** ./libs/decorators/user.decorator.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.User = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
exports.User = (0, common_1.createParamDecorator)((data, ctx) => {
    const request = ctx.switchToHttp().getRequest();
    const user = request.user;
    return data ? user?.[data] : user;
});


/***/ }),

/***/ "./libs/dtos/paginate-query.dto.ts":
/*!*****************************************!*\
  !*** ./libs/dtos/paginate-query.dto.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PaginationQueryDto = void 0;
const class_validator_1 = __webpack_require__(/*! class-validator */ "class-validator");
const class_transformer_1 = __webpack_require__(/*! class-transformer */ "class-transformer");
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class PaginationQueryDto {
    constructor() {
        this.page = 1;
        this.limit = 100;
    }
    getOffset() {
        return (this.page - 1) * this.limit;
    }
}
exports.PaginationQueryDto = PaginationQueryDto;
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '페이지 번호 (1부터 시작)',
        type: Number,
        default: 1,
        minimum: 1,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)(),
    (0, class_validator_1.Min)(1),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], PaginationQueryDto.prototype, "page", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '한 페이지당 항목 수',
        type: Number,
        default: 100,
        minimum: 1,
        maximum: 100,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsInt)(),
    (0, class_validator_1.Min)(1),
    (0, class_validator_1.Max)(100),
    (0, class_transformer_1.Type)(() => Number),
    __metadata("design:type", Number)
], PaginationQueryDto.prototype, "limit", void 0);


/***/ }),

/***/ "./libs/dtos/paginate-response.dto.ts":
/*!********************************************!*\
  !*** ./libs/dtos/paginate-response.dto.ts ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.PaginationData = exports.PaginationMetaDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class PaginationMetaDto {
}
exports.PaginationMetaDto = PaginationMetaDto;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '전체 아이템 수',
        type: Number,
        example: 100,
    }),
    __metadata("design:type", Number)
], PaginationMetaDto.prototype, "total", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '현재 페이지 번호',
        type: Number,
        example: 1,
    }),
    __metadata("design:type", Number)
], PaginationMetaDto.prototype, "page", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '페이지당 아이템 수',
        type: Number,
        example: 20,
    }),
    __metadata("design:type", Number)
], PaginationMetaDto.prototype, "limit", void 0);
__decorate([
    (0, swagger_1.ApiPropertyOptional)({
        description: '다음 페이지 존재 여부',
        type: Boolean,
        example: true,
    }),
    __metadata("design:type", Boolean)
], PaginationMetaDto.prototype, "hasNext", void 0);
class PaginationData {
}
exports.PaginationData = PaginationData;
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '결과 아이템 배열',
        isArray: true,
    }),
    __metadata("design:type", Array)
], PaginationData.prototype, "items", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({
        description: '페이지네이션 메타데이터',
        type: PaginationMetaDto,
    }),
    __metadata("design:type", PaginationMetaDto)
], PaginationData.prototype, "meta", void 0);


/***/ }),

/***/ "./libs/dtos/response.dto.ts":
/*!***********************************!*\
  !*** ./libs/dtos/response.dto.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ErrorResponseDto = exports.BaseResponseDto = void 0;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
class BaseResponseDto {
}
exports.BaseResponseDto = BaseResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: true, type: 'except' }),
    __metadata("design:type", Boolean)
], BaseResponseDto.prototype, "success", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: true, description: '응답 데이터', type: 'except' }),
    __metadata("design:type", Object)
], BaseResponseDto.prototype, "data", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ required: false, example: '성공적으로 처리되었습니다.', description: '성공 메시지', type: 'except' }),
    __metadata("design:type", String)
], BaseResponseDto.prototype, "message", void 0);
class ErrorResponseDto {
}
exports.ErrorResponseDto = ErrorResponseDto;
__decorate([
    (0, swagger_1.ApiProperty)({ example: false, type: 'except' }),
    __metadata("design:type", Boolean)
], ErrorResponseDto.prototype, "success", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: 400, type: 'except' }),
    __metadata("design:type", Number)
], ErrorResponseDto.prototype, "statusCode", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ example: '잘못된 요청입니다.', type: 'except' }),
    __metadata("design:type", String)
], ErrorResponseDto.prototype, "message", void 0);


/***/ }),

/***/ "./libs/entities/accommodation-info.entity.ts":
/*!****************************************************!*\
  !*** ./libs/entities/accommodation-info.entity.ts ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.AccommodationInfo = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
let AccommodationInfo = class AccommodationInfo {
};
exports.AccommodationInfo = AccommodationInfo;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], AccommodationInfo.prototype, "accommodationInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], AccommodationInfo.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => resource_entity_1.Resource, resource => resource.accommodationInfo),
    (0, typeorm_1.JoinColumn)({ name: 'resourceId' }),
    __metadata("design:type", typeof (_a = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _a : Object)
], AccommodationInfo.prototype, "resource", void 0);
exports.AccommodationInfo = AccommodationInfo = __decorate([
    (0, typeorm_1.Entity)('accommodation_infos')
], AccommodationInfo);


/***/ }),

/***/ "./libs/entities/consumable.entity.ts":
/*!********************************************!*\
  !*** ./libs/entities/consumable.entity.ts ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Consumable = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const vehicle_info_entity_1 = __webpack_require__(/*! ./vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
const maintenance_entity_1 = __webpack_require__(/*! ./maintenance.entity */ "./libs/entities/maintenance.entity.ts");
let Consumable = class Consumable {
};
exports.Consumable = Consumable;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Consumable.prototype, "consumableId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Consumable.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Consumable.prototype, "name", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Consumable.prototype, "replaceCycle", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Consumable.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Consumable.prototype, "initMileage", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Consumable.prototype, "deletedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => vehicle_info_entity_1.VehicleInfo),
    (0, typeorm_1.JoinColumn)({ name: 'vehicleInfoId', referencedColumnName: 'vehicleInfoId' }),
    __metadata("design:type", typeof (_b = typeof vehicle_info_entity_1.VehicleInfo !== "undefined" && vehicle_info_entity_1.VehicleInfo) === "function" ? _b : Object)
], Consumable.prototype, "vehicleInfo", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => maintenance_entity_1.Maintenance, (maintenance) => maintenance.consumable),
    __metadata("design:type", Array)
], Consumable.prototype, "maintenances", void 0);
exports.Consumable = Consumable = __decorate([
    (0, typeorm_1.Entity)('consumables')
], Consumable);


/***/ }),

/***/ "./libs/entities/employee-notification.entity.ts":
/*!*******************************************************!*\
  !*** ./libs/entities/employee-notification.entity.ts ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeNotification = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./libs/entities/employee.entity.ts");
const notification_entity_1 = __webpack_require__(/*! ./notification.entity */ "./libs/entities/notification.entity.ts");
let EmployeeNotification = class EmployeeNotification {
};
exports.EmployeeNotification = EmployeeNotification;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], EmployeeNotification.prototype, "employeeNotificationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], EmployeeNotification.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], EmployeeNotification.prototype, "notificationId", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], EmployeeNotification.prototype, "isRead", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => notification_entity_1.Notification),
    (0, typeorm_1.JoinColumn)({ name: 'notificationId' }),
    __metadata("design:type", typeof (_a = typeof notification_entity_1.Notification !== "undefined" && notification_entity_1.Notification) === "function" ? _a : Object)
], EmployeeNotification.prototype, "notification", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_b = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _b : Object)
], EmployeeNotification.prototype, "employee", void 0);
exports.EmployeeNotification = EmployeeNotification = __decorate([
    (0, typeorm_1.Entity)('employee_notifications')
], EmployeeNotification);


/***/ }),

/***/ "./libs/entities/employee.entity.ts":
/*!******************************************!*\
  !*** ./libs/entities/employee.entity.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Employee = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_notification_entity_1 = __webpack_require__(/*! ./employee-notification.entity */ "./libs/entities/employee-notification.entity.ts");
const reservation_participant_entity_1 = __webpack_require__(/*! ./reservation-participant.entity */ "./libs/entities/reservation-participant.entity.ts");
const user_entity_1 = __webpack_require__(/*! ./user.entity */ "./libs/entities/user.entity.ts");
const resource_manager_entity_1 = __webpack_require__(/*! ./resource-manager.entity */ "./libs/entities/resource-manager.entity.ts");
let Employee = class Employee {
};
exports.Employee = Employee;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Employee.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Employee.prototype, "name", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Employee.prototype, "employeeNumber", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Employee.prototype, "department", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Employee.prototype, "position", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Employee.prototype, "userId", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => user_entity_1.User),
    (0, typeorm_1.JoinColumn)({ name: 'userId' }),
    __metadata("design:type", typeof (_a = typeof user_entity_1.User !== "undefined" && user_entity_1.User) === "function" ? _a : Object)
], Employee.prototype, "user", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => reservation_participant_entity_1.ReservationParticipant, (participant) => participant.employee),
    __metadata("design:type", Array)
], Employee.prototype, "participants", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => employee_notification_entity_1.EmployeeNotification, (notification) => notification.employee),
    __metadata("design:type", Array)
], Employee.prototype, "notifications", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => resource_manager_entity_1.ResourceManager, (resourceManager) => resourceManager.employee),
    __metadata("design:type", Array)
], Employee.prototype, "resourceManagers", void 0);
exports.Employee = Employee = __decorate([
    (0, typeorm_1.Entity)('employees')
], Employee);


/***/ }),

/***/ "./libs/entities/file.entity.ts":
/*!**************************************!*\
  !*** ./libs/entities/file.entity.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.File = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let File = class File {
};
exports.File = File;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], File.prototype, "fileId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], File.prototype, "fileName", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    __metadata("design:type", String)
], File.prototype, "filePath", void 0);
exports.File = File = __decorate([
    (0, typeorm_1.Entity)('files')
], File);


/***/ }),

/***/ "./libs/entities/index.ts":
/*!********************************!*\
  !*** ./libs/entities/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStats = exports.VehicleMaintenanceHistory = exports.ResourceUsageStats = exports.EmployeeReservationStats = exports.File = exports.EmployeeNotification = exports.Notification = exports.Maintenance = exports.Consumable = exports.ResourceManager = exports.Schedule = exports.ReservationParticipant = exports.ReservationSnapshot = exports.ReservationVehicle = exports.Reservation = exports.AccommodationInfo = exports.MeetingRoomInfo = exports.VehicleInfo = exports.ResourceGroup = exports.Resource = exports.User = exports.Employee = exports.EntitiesMap = exports.Entities = void 0;
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./libs/entities/employee.entity.ts");
Object.defineProperty(exports, "Employee", ({ enumerable: true, get: function () { return employee_entity_1.Employee; } }));
const user_entity_1 = __webpack_require__(/*! ./user.entity */ "./libs/entities/user.entity.ts");
Object.defineProperty(exports, "User", ({ enumerable: true, get: function () { return user_entity_1.User; } }));
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
Object.defineProperty(exports, "Resource", ({ enumerable: true, get: function () { return resource_entity_1.Resource; } }));
const resource_group_entity_1 = __webpack_require__(/*! ./resource-group.entity */ "./libs/entities/resource-group.entity.ts");
Object.defineProperty(exports, "ResourceGroup", ({ enumerable: true, get: function () { return resource_group_entity_1.ResourceGroup; } }));
const vehicle_info_entity_1 = __webpack_require__(/*! ./vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
Object.defineProperty(exports, "VehicleInfo", ({ enumerable: true, get: function () { return vehicle_info_entity_1.VehicleInfo; } }));
const meeting_room_info_entity_1 = __webpack_require__(/*! ./meeting-room-info.entity */ "./libs/entities/meeting-room-info.entity.ts");
Object.defineProperty(exports, "MeetingRoomInfo", ({ enumerable: true, get: function () { return meeting_room_info_entity_1.MeetingRoomInfo; } }));
const accommodation_info_entity_1 = __webpack_require__(/*! ./accommodation-info.entity */ "./libs/entities/accommodation-info.entity.ts");
Object.defineProperty(exports, "AccommodationInfo", ({ enumerable: true, get: function () { return accommodation_info_entity_1.AccommodationInfo; } }));
const reservation_entity_1 = __webpack_require__(/*! ./reservation.entity */ "./libs/entities/reservation.entity.ts");
Object.defineProperty(exports, "Reservation", ({ enumerable: true, get: function () { return reservation_entity_1.Reservation; } }));
const reservation_participant_entity_1 = __webpack_require__(/*! ./reservation-participant.entity */ "./libs/entities/reservation-participant.entity.ts");
Object.defineProperty(exports, "ReservationParticipant", ({ enumerable: true, get: function () { return reservation_participant_entity_1.ReservationParticipant; } }));
const schedule_entity_1 = __webpack_require__(/*! ./schedule.entity */ "./libs/entities/schedule.entity.ts");
Object.defineProperty(exports, "Schedule", ({ enumerable: true, get: function () { return schedule_entity_1.Schedule; } }));
const resource_manager_entity_1 = __webpack_require__(/*! ./resource-manager.entity */ "./libs/entities/resource-manager.entity.ts");
Object.defineProperty(exports, "ResourceManager", ({ enumerable: true, get: function () { return resource_manager_entity_1.ResourceManager; } }));
const consumable_entity_1 = __webpack_require__(/*! ./consumable.entity */ "./libs/entities/consumable.entity.ts");
Object.defineProperty(exports, "Consumable", ({ enumerable: true, get: function () { return consumable_entity_1.Consumable; } }));
const maintenance_entity_1 = __webpack_require__(/*! ./maintenance.entity */ "./libs/entities/maintenance.entity.ts");
Object.defineProperty(exports, "Maintenance", ({ enumerable: true, get: function () { return maintenance_entity_1.Maintenance; } }));
const notification_entity_1 = __webpack_require__(/*! ./notification.entity */ "./libs/entities/notification.entity.ts");
Object.defineProperty(exports, "Notification", ({ enumerable: true, get: function () { return notification_entity_1.Notification; } }));
const employee_notification_entity_1 = __webpack_require__(/*! ./employee-notification.entity */ "./libs/entities/employee-notification.entity.ts");
Object.defineProperty(exports, "EmployeeNotification", ({ enumerable: true, get: function () { return employee_notification_entity_1.EmployeeNotification; } }));
const file_entity_1 = __webpack_require__(/*! ./file.entity */ "./libs/entities/file.entity.ts");
Object.defineProperty(exports, "File", ({ enumerable: true, get: function () { return file_entity_1.File; } }));
const view_1 = __webpack_require__(/*! ./view */ "./libs/entities/view/index.ts");
Object.defineProperty(exports, "EmployeeReservationStats", ({ enumerable: true, get: function () { return view_1.EmployeeReservationStats; } }));
Object.defineProperty(exports, "ResourceUsageStats", ({ enumerable: true, get: function () { return view_1.ResourceUsageStats; } }));
Object.defineProperty(exports, "VehicleMaintenanceHistory", ({ enumerable: true, get: function () { return view_1.VehicleMaintenanceHistory; } }));
Object.defineProperty(exports, "ConsumableMaintenanceStats", ({ enumerable: true, get: function () { return view_1.ConsumableMaintenanceStats; } }));
const reservation_snapshot_entity_1 = __webpack_require__(/*! ./reservation-snapshot.entity */ "./libs/entities/reservation-snapshot.entity.ts");
Object.defineProperty(exports, "ReservationSnapshot", ({ enumerable: true, get: function () { return reservation_snapshot_entity_1.ReservationSnapshot; } }));
const reservation_vehicle_entity_1 = __webpack_require__(/*! ./reservation-vehicle.entity */ "./libs/entities/reservation-vehicle.entity.ts");
Object.defineProperty(exports, "ReservationVehicle", ({ enumerable: true, get: function () { return reservation_vehicle_entity_1.ReservationVehicle; } }));
exports.Entities = [
    employee_entity_1.Employee,
    user_entity_1.User,
    resource_entity_1.Resource,
    resource_group_entity_1.ResourceGroup,
    vehicle_info_entity_1.VehicleInfo,
    meeting_room_info_entity_1.MeetingRoomInfo,
    accommodation_info_entity_1.AccommodationInfo,
    reservation_entity_1.Reservation,
    reservation_vehicle_entity_1.ReservationVehicle,
    reservation_snapshot_entity_1.ReservationSnapshot,
    reservation_participant_entity_1.ReservationParticipant,
    schedule_entity_1.Schedule,
    resource_manager_entity_1.ResourceManager,
    consumable_entity_1.Consumable,
    maintenance_entity_1.Maintenance,
    notification_entity_1.Notification,
    employee_notification_entity_1.EmployeeNotification,
    file_entity_1.File,
    view_1.EmployeeReservationStats,
    view_1.ResourceUsageStats,
    view_1.VehicleMaintenanceHistory,
    view_1.ConsumableMaintenanceStats,
];
exports.EntitiesMap = {
    Employee: employee_entity_1.Employee,
    User: user_entity_1.User,
    Resource: resource_entity_1.Resource,
    ResourceGroup: resource_group_entity_1.ResourceGroup,
    VehicleInfo: vehicle_info_entity_1.VehicleInfo,
    MeetingRoomInfo: meeting_room_info_entity_1.MeetingRoomInfo,
    AccommodationInfo: accommodation_info_entity_1.AccommodationInfo,
    Reservation: reservation_entity_1.Reservation,
    ReservationVehicle: reservation_vehicle_entity_1.ReservationVehicle,
    ReservationSnapshot: reservation_snapshot_entity_1.ReservationSnapshot,
    ReservationParticipant: reservation_participant_entity_1.ReservationParticipant,
    Schedule: schedule_entity_1.Schedule,
    ResourceManager: resource_manager_entity_1.ResourceManager,
    Consumable: consumable_entity_1.Consumable,
    Maintenance: maintenance_entity_1.Maintenance,
    Notification: notification_entity_1.Notification,
    EmployeeNotification: employee_notification_entity_1.EmployeeNotification,
    File: file_entity_1.File,
    EmployeeReservationStats: view_1.EmployeeReservationStats,
    ResourceUsageStats: view_1.ResourceUsageStats,
    VehicleMaintenanceHistory: view_1.VehicleMaintenanceHistory,
    ConsumableMaintenanceStats: view_1.ConsumableMaintenanceStats,
};


/***/ }),

/***/ "./libs/entities/maintenance.entity.ts":
/*!*********************************************!*\
  !*** ./libs/entities/maintenance.entity.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Maintenance = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const consumable_entity_1 = __webpack_require__(/*! ./consumable.entity */ "./libs/entities/consumable.entity.ts");
let Maintenance = class Maintenance {
};
exports.Maintenance = Maintenance;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Maintenance.prototype, "maintenanceId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Maintenance.prototype, "consumableId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Maintenance.prototype, "date", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Maintenance.prototype, "mileage", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Maintenance.prototype, "cost", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'json', nullable: true, comment: '정비사진 배열' }),
    __metadata("design:type", Array)
], Maintenance.prototype, "images", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Maintenance.prototype, "maintananceBy", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Maintenance.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Maintenance.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => consumable_entity_1.Consumable),
    (0, typeorm_1.JoinColumn)({ name: 'consumableId' }),
    __metadata("design:type", typeof (_c = typeof consumable_entity_1.Consumable !== "undefined" && consumable_entity_1.Consumable) === "function" ? _c : Object)
], Maintenance.prototype, "consumable", void 0);
exports.Maintenance = Maintenance = __decorate([
    (0, typeorm_1.Entity)('maintenances')
], Maintenance);


/***/ }),

/***/ "./libs/entities/meeting-room-info.entity.ts":
/*!***************************************************!*\
  !*** ./libs/entities/meeting-room-info.entity.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.MeetingRoomInfo = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
let MeetingRoomInfo = class MeetingRoomInfo {
};
exports.MeetingRoomInfo = MeetingRoomInfo;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], MeetingRoomInfo.prototype, "meetingRoomInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], MeetingRoomInfo.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => resource_entity_1.Resource, resource => resource.meetingRoomInfo),
    (0, typeorm_1.JoinColumn)({ name: 'resourceId' }),
    __metadata("design:type", typeof (_a = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _a : Object)
], MeetingRoomInfo.prototype, "resource", void 0);
exports.MeetingRoomInfo = MeetingRoomInfo = __decorate([
    (0, typeorm_1.Entity)('meeting_room_infos')
], MeetingRoomInfo);


/***/ }),

/***/ "./libs/entities/notification.entity.ts":
/*!**********************************************!*\
  !*** ./libs/entities/notification.entity.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Notification = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_notification_entity_1 = __webpack_require__(/*! ./employee-notification.entity */ "./libs/entities/employee-notification.entity.ts");
const notification_type_enum_1 = __webpack_require__(/*! @libs/enums/notification-type.enum */ "./libs/enums/notification-type.enum.ts");
let Notification = class Notification {
};
exports.Notification = Notification;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Notification.prototype, "notificationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Notification.prototype, "title", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Notification.prototype, "body", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: notification_type_enum_1.NotificationType,
        nullable: true,
    }),
    __metadata("design:type", typeof (_a = typeof notification_type_enum_1.NotificationType !== "undefined" && notification_type_enum_1.NotificationType) === "function" ? _a : Object)
], Notification.prototype, "notificationType", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Notification.prototype, "notificationData", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Notification.prototype, "isSent", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Notification.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => employee_notification_entity_1.EmployeeNotification, (notification) => notification.notification),
    __metadata("design:type", Array)
], Notification.prototype, "employees", void 0);
exports.Notification = Notification = __decorate([
    (0, typeorm_1.Entity)('notifications')
], Notification);


/***/ }),

/***/ "./libs/entities/reservation-participant.entity.ts":
/*!*********************************************************!*\
  !*** ./libs/entities/reservation-participant.entity.ts ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationParticipant = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_entity_1 = __webpack_require__(/*! ./reservation.entity */ "./libs/entities/reservation.entity.ts");
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./libs/entities/employee.entity.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
let ReservationParticipant = class ReservationParticipant {
};
exports.ReservationParticipant = ReservationParticipant;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], ReservationParticipant.prototype, "participantId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ReservationParticipant.prototype, "reservationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ReservationParticipant.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: reservation_type_enum_1.ParticipantsType,
    }),
    __metadata("design:type", typeof (_a = typeof reservation_type_enum_1.ParticipantsType !== "undefined" && reservation_type_enum_1.ParticipantsType) === "function" ? _a : Object)
], ReservationParticipant.prototype, "type", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => reservation_entity_1.Reservation),
    (0, typeorm_1.JoinColumn)({ name: 'reservationId' }),
    __metadata("design:type", typeof (_b = typeof reservation_entity_1.Reservation !== "undefined" && reservation_entity_1.Reservation) === "function" ? _b : Object)
], ReservationParticipant.prototype, "reservation", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_c = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _c : Object)
], ReservationParticipant.prototype, "employee", void 0);
exports.ReservationParticipant = ReservationParticipant = __decorate([
    (0, typeorm_1.Entity)('reservation_participants')
], ReservationParticipant);


/***/ }),

/***/ "./libs/entities/reservation-snapshot.entity.ts":
/*!******************************************************!*\
  !*** ./libs/entities/reservation-snapshot.entity.ts ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationSnapshot = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const user_entity_1 = __webpack_require__(/*! ./user.entity */ "./libs/entities/user.entity.ts");
let ReservationSnapshot = class ReservationSnapshot {
};
exports.ReservationSnapshot = ReservationSnapshot;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], ReservationSnapshot.prototype, "snapshotId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ReservationSnapshot.prototype, "userId", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ReservationSnapshot.prototype, "step", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ReservationSnapshot.prototype, "resourceType", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "droppableGroupData", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "dateRange", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "startTime", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "endTime", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "timeRange", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", Number)
], ReservationSnapshot.prototype, "timeUnit", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], ReservationSnapshot.prototype, "selectedResource", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ReservationSnapshot.prototype, "title", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], ReservationSnapshot.prototype, "reminderTimes", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], ReservationSnapshot.prototype, "isAllDay", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], ReservationSnapshot.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], ReservationSnapshot.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], ReservationSnapshot.prototype, "attendees", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ReservationSnapshot.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ReservationSnapshot.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => user_entity_1.User),
    (0, typeorm_1.JoinColumn)({ name: 'userId' }),
    __metadata("design:type", typeof (_c = typeof user_entity_1.User !== "undefined" && user_entity_1.User) === "function" ? _c : Object)
], ReservationSnapshot.prototype, "user", void 0);
exports.ReservationSnapshot = ReservationSnapshot = __decorate([
    (0, typeorm_1.Entity)('reservation_snapshots')
], ReservationSnapshot);


/***/ }),

/***/ "./libs/entities/reservation-vehicle.entity.ts":
/*!*****************************************************!*\
  !*** ./libs/entities/reservation-vehicle.entity.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ReservationVehicle = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_entity_1 = __webpack_require__(/*! ./reservation.entity */ "./libs/entities/reservation.entity.ts");
const vehicle_info_entity_1 = __webpack_require__(/*! ./vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
let ReservationVehicle = class ReservationVehicle {
};
exports.ReservationVehicle = ReservationVehicle;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], ReservationVehicle.prototype, "reservationVehicleId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ReservationVehicle.prototype, "reservationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ReservationVehicle.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", Number)
], ReservationVehicle.prototype, "startOdometer", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", Number)
], ReservationVehicle.prototype, "endOdometer", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", Number)
], ReservationVehicle.prototype, "startFuelLevel", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", Number)
], ReservationVehicle.prototype, "endFuelLevel", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], ReservationVehicle.prototype, "isReturned", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp with time zone', nullable: true }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ReservationVehicle.prototype, "returnedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => reservation_entity_1.Reservation),
    (0, typeorm_1.JoinColumn)({ name: 'reservationId' }),
    __metadata("design:type", typeof (_b = typeof reservation_entity_1.Reservation !== "undefined" && reservation_entity_1.Reservation) === "function" ? _b : Object)
], ReservationVehicle.prototype, "reservation", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => vehicle_info_entity_1.VehicleInfo),
    (0, typeorm_1.JoinColumn)({ name: 'vehicleInfoId' }),
    __metadata("design:type", typeof (_c = typeof vehicle_info_entity_1.VehicleInfo !== "undefined" && vehicle_info_entity_1.VehicleInfo) === "function" ? _c : Object)
], ReservationVehicle.prototype, "vehicleInfo", void 0);
exports.ReservationVehicle = ReservationVehicle = __decorate([
    (0, typeorm_1.Entity)('reservation_vehicles')
], ReservationVehicle);


/***/ }),

/***/ "./libs/entities/reservation.entity.ts":
/*!*********************************************!*\
  !*** ./libs/entities/reservation.entity.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Reservation = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
const reservation_participant_entity_1 = __webpack_require__(/*! ./reservation-participant.entity */ "./libs/entities/reservation-participant.entity.ts");
const reservation_type_enum_1 = __webpack_require__(/*! @libs/enums/reservation-type.enum */ "./libs/enums/reservation-type.enum.ts");
const reservation_vehicle_entity_1 = __webpack_require__(/*! ./reservation-vehicle.entity */ "./libs/entities/reservation-vehicle.entity.ts");
let Reservation = class Reservation {
};
exports.Reservation = Reservation;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Reservation.prototype, "reservationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Reservation.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Reservation.prototype, "title", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Reservation.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Reservation.prototype, "startDate", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Reservation.prototype, "endDate", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: reservation_type_enum_1.ReservationStatus,
    }),
    __metadata("design:type", typeof (_c = typeof reservation_type_enum_1.ReservationStatus !== "undefined" && reservation_type_enum_1.ReservationStatus) === "function" ? _c : Object)
], Reservation.prototype, "status", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Reservation.prototype, "rejectReason", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Reservation.prototype, "isAllDay", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    __metadata("design:type", Boolean)
], Reservation.prototype, "notifyBeforeStart", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Array)
], Reservation.prototype, "notifyMinutesBeforeStart", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => resource_entity_1.Resource),
    (0, typeorm_1.JoinColumn)({ name: 'resourceId' }),
    __metadata("design:type", typeof (_d = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _d : Object)
], Reservation.prototype, "resource", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => reservation_participant_entity_1.ReservationParticipant, (participant) => participant.reservation),
    __metadata("design:type", Array)
], Reservation.prototype, "participants", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => reservation_vehicle_entity_1.ReservationVehicle, (reservationVehicle) => reservationVehicle.reservation),
    __metadata("design:type", Array)
], Reservation.prototype, "reservationVehicles", void 0);
exports.Reservation = Reservation = __decorate([
    (0, typeorm_1.Entity)('reservations')
], Reservation);


/***/ }),

/***/ "./libs/entities/resource-group.entity.ts":
/*!************************************************!*\
  !*** ./libs/entities/resource-group.entity.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceGroup = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
const resource_type_enum_1 = __webpack_require__(/*! ../enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
let ResourceGroup = class ResourceGroup {
};
exports.ResourceGroup = ResourceGroup;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], ResourceGroup.prototype, "resourceGroupId", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    __metadata("design:type", String)
], ResourceGroup.prototype, "title", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ResourceGroup.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], ResourceGroup.prototype, "parentResourceGroupId", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: resource_type_enum_1.ResourceType,
    }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], ResourceGroup.prototype, "type", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], ResourceGroup.prototype, "order", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => resource_entity_1.Resource, (resource) => resource.resourceGroup),
    __metadata("design:type", Array)
], ResourceGroup.prototype, "resources", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => ResourceGroup, (resourceGroup) => resourceGroup.children),
    (0, typeorm_1.JoinColumn)({ name: 'parentResourceGroupId' }),
    __metadata("design:type", ResourceGroup)
], ResourceGroup.prototype, "parent", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => ResourceGroup, (resourceGroup) => resourceGroup.parent),
    __metadata("design:type", Array)
], ResourceGroup.prototype, "children", void 0);
exports.ResourceGroup = ResourceGroup = __decorate([
    (0, typeorm_1.Entity)('resource_groups')
], ResourceGroup);


/***/ }),

/***/ "./libs/entities/resource-manager.entity.ts":
/*!**************************************************!*\
  !*** ./libs/entities/resource-manager.entity.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceManager = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./libs/entities/employee.entity.ts");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
let ResourceManager = class ResourceManager {
};
exports.ResourceManager = ResourceManager;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], ResourceManager.prototype, "resourceManagerId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ResourceManager.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], ResourceManager.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_a = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _a : Object)
], ResourceManager.prototype, "employee", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => resource_entity_1.Resource),
    (0, typeorm_1.JoinColumn)({ name: 'resourceId' }),
    __metadata("design:type", typeof (_b = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _b : Object)
], ResourceManager.prototype, "resource", void 0);
exports.ResourceManager = ResourceManager = __decorate([
    (0, typeorm_1.Entity)('resource_managers')
], ResourceManager);


/***/ }),

/***/ "./libs/entities/resource.entity.ts":
/*!******************************************!*\
  !*** ./libs/entities/resource.entity.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Resource = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_group_entity_1 = __webpack_require__(/*! ./resource-group.entity */ "./libs/entities/resource-group.entity.ts");
const vehicle_info_entity_1 = __webpack_require__(/*! ./vehicle-info.entity */ "./libs/entities/vehicle-info.entity.ts");
const meeting_room_info_entity_1 = __webpack_require__(/*! ./meeting-room-info.entity */ "./libs/entities/meeting-room-info.entity.ts");
const accommodation_info_entity_1 = __webpack_require__(/*! ./accommodation-info.entity */ "./libs/entities/accommodation-info.entity.ts");
const reservation_entity_1 = __webpack_require__(/*! ./reservation.entity */ "./libs/entities/reservation.entity.ts");
const resource_type_enum_1 = __webpack_require__(/*! @libs/enums/resource-type.enum */ "./libs/enums/resource-type.enum.ts");
const resource_manager_entity_1 = __webpack_require__(/*! ./resource-manager.entity */ "./libs/entities/resource-manager.entity.ts");
let Resource = class Resource {
};
exports.Resource = Resource;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Resource.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.Column)('uuid', { nullable: true }),
    __metadata("design:type", String)
], Resource.prototype, "resourceGroupId", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    __metadata("design:type", String)
], Resource.prototype, "name", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Resource.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Resource.prototype, "location", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Resource.prototype, "isAvailable", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Resource.prototype, "unavailableReason", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb'),
    __metadata("design:type", Array)
], Resource.prototype, "images", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Resource.prototype, "notifyParticipantChange", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], Resource.prototype, "notifyReservationChange", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'enum', enum: resource_type_enum_1.ResourceType }),
    __metadata("design:type", typeof (_a = typeof resource_type_enum_1.ResourceType !== "undefined" && resource_type_enum_1.ResourceType) === "function" ? _a : Object)
], Resource.prototype, "type", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Resource.prototype, "order", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)({ type: 'timestamp with time zone' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Resource.prototype, "deletedAt", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => resource_group_entity_1.ResourceGroup),
    (0, typeorm_1.JoinColumn)({ name: 'resourceGroupId' }),
    __metadata("design:type", typeof (_c = typeof resource_group_entity_1.ResourceGroup !== "undefined" && resource_group_entity_1.ResourceGroup) === "function" ? _c : Object)
], Resource.prototype, "resourceGroup", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => vehicle_info_entity_1.VehicleInfo, (vehicleInfo) => vehicleInfo.resource),
    __metadata("design:type", typeof (_d = typeof vehicle_info_entity_1.VehicleInfo !== "undefined" && vehicle_info_entity_1.VehicleInfo) === "function" ? _d : Object)
], Resource.prototype, "vehicleInfo", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => meeting_room_info_entity_1.MeetingRoomInfo, (meetingRoomInfo) => meetingRoomInfo.resource),
    __metadata("design:type", typeof (_e = typeof meeting_room_info_entity_1.MeetingRoomInfo !== "undefined" && meeting_room_info_entity_1.MeetingRoomInfo) === "function" ? _e : Object)
], Resource.prototype, "meetingRoomInfo", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => accommodation_info_entity_1.AccommodationInfo, (accommodationInfo) => accommodationInfo.resource),
    __metadata("design:type", typeof (_f = typeof accommodation_info_entity_1.AccommodationInfo !== "undefined" && accommodation_info_entity_1.AccommodationInfo) === "function" ? _f : Object)
], Resource.prototype, "accommodationInfo", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => reservation_entity_1.Reservation, (reservation) => reservation.resource),
    __metadata("design:type", Array)
], Resource.prototype, "reservations", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => resource_manager_entity_1.ResourceManager, (resourceManager) => resourceManager.resource),
    __metadata("design:type", Array)
], Resource.prototype, "resourceManagers", void 0);
exports.Resource = Resource = __decorate([
    (0, typeorm_1.Entity)('resources')
], Resource);


/***/ }),

/***/ "./libs/entities/schedule.entity.ts":
/*!******************************************!*\
  !*** ./libs/entities/schedule.entity.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Schedule = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const reservation_entity_1 = __webpack_require__(/*! ./reservation.entity */ "./libs/entities/reservation.entity.ts");
let Schedule = class Schedule {
};
exports.Schedule = Schedule;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], Schedule.prototype, "scheduleId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Schedule.prototype, "reservationId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Schedule.prototype, "year", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Schedule.prototype, "month", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], Schedule.prototype, "day", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: '0 ~ 1439 분으로 표시' }),
    __metadata("design:type", String)
], Schedule.prototype, "startDateTime", void 0);
__decorate([
    (0, typeorm_1.Column)({ comment: '0 ~ 1439 분으로 표시' }),
    __metadata("design:type", String)
], Schedule.prototype, "endDateTime", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => reservation_entity_1.Reservation),
    (0, typeorm_1.JoinColumn)({ name: 'reservationId' }),
    __metadata("design:type", typeof (_a = typeof reservation_entity_1.Reservation !== "undefined" && reservation_entity_1.Reservation) === "function" ? _a : Object)
], Schedule.prototype, "reservation", void 0);
exports.Schedule = Schedule = __decorate([
    (0, typeorm_1.Entity)('schedules')
], Schedule);


/***/ }),

/***/ "./libs/entities/user.entity.ts":
/*!**************************************!*\
  !*** ./libs/entities/user.entity.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.User = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const employee_entity_1 = __webpack_require__(/*! ./employee.entity */ "./libs/entities/employee.entity.ts");
const role_type_enum_1 = __webpack_require__(/*! @libs/enums/role-type.enum */ "./libs/enums/role-type.enum.ts");
const push_notification_port_1 = __webpack_require__(/*! @resource/modules/notification/domain/ports/push-notification.port */ "./apps/resource/src/modules/notification/domain/ports/push-notification.port.ts");
let User = class User {
};
exports.User = User;
__decorate([
    (0, typeorm_1.PrimaryColumn)('uuid', {
        generated: 'uuid',
    }),
    __metadata("design:type", String)
], User.prototype, "userId", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], User.prototype, "email", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "mobile", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], User.prototype, "password", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "accessToken", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], User.prototype, "expiredAt", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true, comment: '웹푸시 알림 관련 구독 정보' }),
    __metadata("design:type", typeof (_a = typeof push_notification_port_1.PushNotificationSubscription !== "undefined" && push_notification_port_1.PushNotificationSubscription) === "function" ? _a : Object)
], User.prototype, "subscription", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true, comment: '웹푸시 알림 관련 구독 정보 배열' }),
    __metadata("design:type", Array)
], User.prototype, "subscriptions", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true, comment: '웹푸시 알림 설정 여부' }),
    __metadata("design:type", Boolean)
], User.prototype, "isPushNotificationEnabled", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'enum', enum: role_type_enum_1.Role, array: true, default: [role_type_enum_1.Role.USER], comment: '사용자 역할' }),
    __metadata("design:type", Array)
], User.prototype, "roles", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => employee_entity_1.Employee),
    (0, typeorm_1.JoinColumn)({ name: 'employeeId' }),
    __metadata("design:type", typeof (_b = typeof employee_entity_1.Employee !== "undefined" && employee_entity_1.Employee) === "function" ? _b : Object)
], User.prototype, "employee", void 0);
exports.User = User = __decorate([
    (0, typeorm_1.Entity)('users')
], User);


/***/ }),

/***/ "./libs/entities/vehicle-info.entity.ts":
/*!**********************************************!*\
  !*** ./libs/entities/vehicle-info.entity.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleInfo = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const resource_entity_1 = __webpack_require__(/*! ./resource.entity */ "./libs/entities/resource.entity.ts");
const consumable_entity_1 = __webpack_require__(/*! ./consumable.entity */ "./libs/entities/consumable.entity.ts");
let VehicleInfo = class VehicleInfo {
};
exports.VehicleInfo = VehicleInfo;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], VehicleInfo.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], VehicleInfo.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], VehicleInfo.prototype, "vehicleNumber", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], VehicleInfo.prototype, "leftMileage", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], VehicleInfo.prototype, "totalMileage", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], VehicleInfo.prototype, "insuranceName", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], VehicleInfo.prototype, "insuranceNumber", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true, comment: '주차위치 이미지 배열' }),
    __metadata("design:type", Array)
], VehicleInfo.prototype, "parkingLocationImages", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true, comment: '계기판 이미지 배열' }),
    __metadata("design:type", Array)
], VehicleInfo.prototype, "odometerImages", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true, comment: '차량 실내 이미지 배열' }),
    __metadata("design:type", Array)
], VehicleInfo.prototype, "indoorImages", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => resource_entity_1.Resource, (resource) => resource.vehicleInfo),
    (0, typeorm_1.JoinColumn)({ name: `resourceId` }),
    __metadata("design:type", typeof (_a = typeof resource_entity_1.Resource !== "undefined" && resource_entity_1.Resource) === "function" ? _a : Object)
], VehicleInfo.prototype, "resource", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => consumable_entity_1.Consumable, (consumable) => consumable.vehicleInfo),
    __metadata("design:type", Array)
], VehicleInfo.prototype, "consumables", void 0);
exports.VehicleInfo = VehicleInfo = __decorate([
    (0, typeorm_1.Entity)('vehicle_infos')
], VehicleInfo);


/***/ }),

/***/ "./libs/entities/view/consumable-maintenance-stats.entity.ts":
/*!*******************************************************************!*\
  !*** ./libs/entities/view/consumable-maintenance-stats.entity.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStats = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let ConsumableMaintenanceStats = class ConsumableMaintenanceStats {
};
exports.ConsumableMaintenanceStats = ConsumableMaintenanceStats;
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "resourceName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "resourceType", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "vehicleNumber", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "consumableId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ConsumableMaintenanceStats.prototype, "consumableName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "replaceCycle", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Boolean)
], ConsumableMaintenanceStats.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "maintenanceCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ConsumableMaintenanceStats.prototype, "firstMaintenanceDate", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ConsumableMaintenanceStats.prototype, "lastMaintenanceDate", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "totalCost", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "averageCost", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "minMileage", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "maxMileage", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "averageMileage", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "averageDaysBetweenMaintenances", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "currentYear", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "currentMonth", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ConsumableMaintenanceStats.prototype, "recentMaintenanceCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ConsumableMaintenanceStats.prototype, "computedAt", void 0);
exports.ConsumableMaintenanceStats = ConsumableMaintenanceStats = __decorate([
    (0, typeorm_1.ViewEntity)({
        expression: `SELECT
    -- 자원 정보
    res."resourceId",
    res.name AS "resourceName",
    res.type AS "resourceType",
    
    -- 차량 정보
    vi."vehicleInfoId",
    vi."vehicleNumber",
    
    -- 소모품 정보
    c."consumableId",
    c.name AS "consumableName",
    c."replaceCycle",
    c."notifyReplacementCycle",
    
    -- 정비 통계
    COUNT(m."maintenanceId") AS "maintenanceCount",
    MIN(CAST(m.date AS timestamp)) AS "firstMaintenanceDate",
    MAX(CAST(m.date AS timestamp)) AS "lastMaintenanceDate",
    SUM(m.cost) AS "totalCost",
    AVG(m.cost) AS "averageCost",
    
    -- 마일리지 통계
    MIN(m.mileage) AS "minMileage",
    MAX(m.mileage) AS "maxMileage",
    AVG(m.mileage) AS "averageMileage",
    
    -- 정비 주기 분석
    (MAX(CAST(m.date AS timestamp)) - MIN(CAST(m.date AS timestamp))) / 
        NULLIF(COUNT(m."maintenanceId") - 1, 0) AS "averageDaysBetweenMaintenances",
    
    -- 년/월별 집계를 위한 필드
    EXTRACT(YEAR FROM NOW()) AS "currentYear",
    EXTRACT(MONTH FROM NOW()) AS "currentMonth",
    
    -- 최근 3개월 내 정비 횟수
    COUNT(CASE WHEN CAST(m.date AS timestamp) > NOW() - INTERVAL '3 months' THEN m."maintenanceId" END) AS "recentMaintenanceCount",
    
    -- 집계 시점
    NOW() AS "computedAt"
FROM
    resources res
    JOIN vehicle_infos vi ON res."resourceId" = vi."resourceId"
    JOIN consumables c ON vi."vehicleInfoId" = c."vehicleInfoId"
    LEFT JOIN maintenances m ON c."consumableId" = m."consumableId"
WHERE
    res.type = 'VEHICLE'
GROUP BY
    res."resourceId",
    res.name,
    res.type,
    vi."vehicleInfoId",
    vi."vehicleNumber",
    c."consumableId",
    c.name,
    c."replaceCycle",
    c."notifyReplacementCycle"
ORDER BY
    "resourceName",
    "consumableName"`,
    })
], ConsumableMaintenanceStats);


/***/ }),

/***/ "./libs/entities/view/employee-reservation-stats.entity.ts":
/*!*****************************************************************!*\
  !*** ./libs/entities/view/employee-reservation-stats.entity.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.EmployeeReservationStats = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let EmployeeReservationStats = class EmployeeReservationStats {
};
exports.EmployeeReservationStats = EmployeeReservationStats;
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "year", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "month", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], EmployeeReservationStats.prototype, "yearMonth", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], EmployeeReservationStats.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], EmployeeReservationStats.prototype, "employeeName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "reservationCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "totalHours", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "avgHoursPerReservation", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "vehicleCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "meetingRoomCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "accommodationCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], EmployeeReservationStats.prototype, "cancellationCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], EmployeeReservationStats.prototype, "computedAt", void 0);
exports.EmployeeReservationStats = EmployeeReservationStats = __decorate([
    (0, typeorm_1.ViewEntity)({
        expression: `SELECT
    -- 시간 기준
    EXTRACT(YEAR FROM r."startDate") AS year,
    EXTRACT(MONTH FROM r."startDate") AS month,
    TO_CHAR(r."startDate", 'YYYY-MM') AS "yearMonth",
    
    -- 직원 정보
    rp."employeeId",
    e.name AS "employeeName",
    
    -- 예약 통계
    COUNT(DISTINCT r."reservationId") AS "reservationCount",
    SUM(EXTRACT(EPOCH FROM (r."endDate" - r."startDate"))/3600) AS "totalHours",
    AVG(EXTRACT(EPOCH FROM (r."endDate" - r."startDate"))/3600) AS "avgHoursPerReservation",
    
    -- 자원 유형별 예약 횟수
    COUNT(DISTINCT CASE WHEN res.type = 'VEHICLE' THEN r."reservationId" END) AS "vehicleCount",
    COUNT(DISTINCT CASE WHEN res.type = 'MEETING_ROOM' THEN r."reservationId" END) AS "meetingRoomCount",
    COUNT(DISTINCT CASE WHEN res.type = 'ACCOMMODATION' THEN r."reservationId" END) AS "accommodationCount",
    
    -- 취소 및 변경 빈도
    COUNT(DISTINCT CASE WHEN r.status = 'CANCELLED' THEN r."reservationId" END) AS "cancellationCount",
    
    -- 가장 많이 예약한 자원 (서브쿼리로 처리해야 할 수 있음)
    -- 복잡한 구현은 애플리케이션 코드에서 처리 가능
    
    -- 집계 시점
    NOW() AS "computedAt"
FROM 
    reservations r
    JOIN reservation_participants rp ON r."reservationId" = rp."reservationId"
    JOIN resources res ON r."resourceId" = res."resourceId"
    JOIN employees e ON rp."employeeId" = e."employeeId"
WHERE
    rp.type = 'RESERVER'
GROUP BY
    EXTRACT(YEAR FROM r."startDate"),
    EXTRACT(MONTH FROM r."startDate"),
    TO_CHAR(r."startDate", 'YYYY-MM'),
    rp."employeeId",
    e.name`,
    })
], EmployeeReservationStats);


/***/ }),

/***/ "./libs/entities/view/index.ts":
/*!*************************************!*\
  !*** ./libs/entities/view/index.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ConsumableMaintenanceStats = exports.VehicleMaintenanceHistory = exports.ResourceUsageStats = exports.EmployeeReservationStats = void 0;
var employee_reservation_stats_entity_1 = __webpack_require__(/*! ./employee-reservation-stats.entity */ "./libs/entities/view/employee-reservation-stats.entity.ts");
Object.defineProperty(exports, "EmployeeReservationStats", ({ enumerable: true, get: function () { return employee_reservation_stats_entity_1.EmployeeReservationStats; } }));
var resource_usage_stats_entity_1 = __webpack_require__(/*! ./resource-usage-stats.entity */ "./libs/entities/view/resource-usage-stats.entity.ts");
Object.defineProperty(exports, "ResourceUsageStats", ({ enumerable: true, get: function () { return resource_usage_stats_entity_1.ResourceUsageStats; } }));
var vehicle_maintenance_history_entity_1 = __webpack_require__(/*! ./vehicle-maintenance-history.entity */ "./libs/entities/view/vehicle-maintenance-history.entity.ts");
Object.defineProperty(exports, "VehicleMaintenanceHistory", ({ enumerable: true, get: function () { return vehicle_maintenance_history_entity_1.VehicleMaintenanceHistory; } }));
var consumable_maintenance_stats_entity_1 = __webpack_require__(/*! ./consumable-maintenance-stats.entity */ "./libs/entities/view/consumable-maintenance-stats.entity.ts");
Object.defineProperty(exports, "ConsumableMaintenanceStats", ({ enumerable: true, get: function () { return consumable_maintenance_stats_entity_1.ConsumableMaintenanceStats; } }));


/***/ }),

/***/ "./libs/entities/view/resource-usage-stats.entity.ts":
/*!***********************************************************!*\
  !*** ./libs/entities/view/resource-usage-stats.entity.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceUsageStats = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let ResourceUsageStats = class ResourceUsageStats {
};
exports.ResourceUsageStats = ResourceUsageStats;
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "resourceName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "resourceType", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "employeeId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "employeeName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "year", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "month", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], ResourceUsageStats.prototype, "yearMonth", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "reservationCount", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "totalHours", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "countRank", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], ResourceUsageStats.prototype, "hoursRank", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], ResourceUsageStats.prototype, "computedAt", void 0);
exports.ResourceUsageStats = ResourceUsageStats = __decorate([
    (0, typeorm_1.ViewEntity)({
        expression: `SELECT
    -- 자원 정보
    res."resourceId",
    res.name AS "resourceName",
    res.type AS "resourceType",
    
    -- 직원 정보
    rp."employeeId",
    e.name AS "employeeName",
    
    -- 시간 기준
    EXTRACT(YEAR FROM r."startDate") AS year,
    EXTRACT(MONTH FROM r."startDate") AS month,
    TO_CHAR(r."startDate", 'YYYY-MM') AS "yearMonth",
    
    -- 이용 통계
    COUNT(DISTINCT r."reservationId") AS "reservationCount",
    SUM(EXTRACT(EPOCH FROM (r."endDate" - r."startDate"))/3600) AS "totalHours",
    
    -- 순위 계산 (동일 자원에 대한 직원별 예약 횟수 순위)
    RANK() OVER (
        PARTITION BY res."resourceId", EXTRACT(YEAR FROM r."startDate"), EXTRACT(MONTH FROM r."startDate")
        ORDER BY COUNT(DISTINCT r."reservationId") DESC
    ) AS "countRank",
    
    -- 시간 기준 순위 계산
    RANK() OVER (
        PARTITION BY res."resourceId", EXTRACT(YEAR FROM r."startDate"), EXTRACT(MONTH FROM r."startDate")
        ORDER BY SUM(EXTRACT(EPOCH FROM (r."endDate" - r."startDate"))/3600) DESC
    ) AS "hoursRank",
    
    -- 집계 시점
    NOW() AS "computedAt"
FROM 
    reservations r
    JOIN reservation_participants rp ON r."reservationId" = rp."reservationId"
    JOIN resources res ON r."resourceId" = res."resourceId"
    JOIN employees e ON rp."employeeId" = e."employeeId"
WHERE
    rp.type = 'RESERVER' -- 예약 주체만 집계
    AND r.status <> 'CANCELLED' -- 취소된 예약 제외
GROUP BY
    res."resourceId",
    res.name,
    res.type,
    rp."employeeId",
    e.name,
    EXTRACT(YEAR FROM r."startDate"),
    EXTRACT(MONTH FROM r."startDate"),
    TO_CHAR(r."startDate", 'YYYY-MM')
ORDER BY
    res."resourceId",
    year,
    month,
    "reservationCount" DESC,
    "totalHours" DESC`,
    })
], ResourceUsageStats);


/***/ }),

/***/ "./libs/entities/view/vehicle-maintenance-history.entity.ts":
/*!******************************************************************!*\
  !*** ./libs/entities/view/vehicle-maintenance-history.entity.ts ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.VehicleMaintenanceHistory = void 0;
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
let VehicleMaintenanceHistory = class VehicleMaintenanceHistory {
};
exports.VehicleMaintenanceHistory = VehicleMaintenanceHistory;
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "resourceId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "resourceName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "vehicleInfoId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "vehicleNumber", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "consumableId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "consumableName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], VehicleMaintenanceHistory.prototype, "replaceCycle", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Boolean)
], VehicleMaintenanceHistory.prototype, "notifyReplacementCycle", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "maintenanceId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "maintenanceDate", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], VehicleMaintenanceHistory.prototype, "mileage", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], VehicleMaintenanceHistory.prototype, "cost", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "maintananceBy", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Array)
], VehicleMaintenanceHistory.prototype, "images", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], VehicleMaintenanceHistory.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], VehicleMaintenanceHistory.prototype, "updatedAt", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "responsibleEmployeeId", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "responsibleEmployeeName", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "department", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "position", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], VehicleMaintenanceHistory.prototype, "year", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", Number)
], VehicleMaintenanceHistory.prototype, "month", void 0);
__decorate([
    (0, typeorm_1.ViewColumn)(),
    __metadata("design:type", String)
], VehicleMaintenanceHistory.prototype, "dateStr", void 0);
exports.VehicleMaintenanceHistory = VehicleMaintenanceHistory = __decorate([
    (0, typeorm_1.ViewEntity)({
        expression: `SELECT
    -- 자원 정보
    res."resourceId",
    res.name AS "resourceName",
    vi."vehicleInfoId",
    vi."vehicleNumber",
    
    -- 소모품 정보
    c."consumableId",
    c.name AS "consumableName",
    c."replaceCycle",
    c."notifyReplacementCycle",
    
    -- 정비 정보
    m."maintenanceId",
    m.date AS "maintenanceDate",
    m.mileage,
    m.cost,
    m."maintananceBy",
    m.images,
    m."createdAt",
    m."updatedAt",
    
    -- 담당자 정보
    e."employeeId" AS "responsibleEmployeeId",
    e.name AS "responsibleEmployeeName",
    e.department,
    e.position,
    
    -- 시간 정보
    EXTRACT(YEAR FROM CAST(m.date AS timestamp)) AS year,
    EXTRACT(MONTH FROM CAST(m.date AS timestamp)) AS month,
    m.date AS "dateStr"
FROM
    resources res
    JOIN vehicle_infos vi ON res."resourceId" = vi."resourceId"
    LEFT JOIN consumables c ON vi."vehicleInfoId" = c."vehicleInfoId"
    LEFT JOIN maintenances m ON c."consumableId" = m."consumableId"
    LEFT JOIN employees e ON m."maintananceBy"::uuid = e."employeeId"
WHERE
    res.type = 'VEHICLE'
    AND m."maintenanceId" IS NOT NULL
ORDER BY
    res."resourceId",
    CAST(m.date AS timestamp) DESC`,
    })
], VehicleMaintenanceHistory);


/***/ }),

/***/ "./libs/enums/notification-type.enum.ts":
/*!**********************************************!*\
  !*** ./libs/enums/notification-type.enum.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.NotificationType = void 0;
var NotificationType;
(function (NotificationType) {
    NotificationType["RESERVATION_STATUS_PENDING"] = "RESERVATION_STATUS_PENDING";
    NotificationType["RESERVATION_STATUS_CONFIRMED"] = "RESERVATION_STATUS_CONFIRMED";
    NotificationType["RESERVATION_STATUS_CANCELLED"] = "RESERVATION_STATUS_CANCELLED";
    NotificationType["RESERVATION_STATUS_REJECTED"] = "RESERVATION_STATUS_REJECTED";
    NotificationType["RESERVATION_DATE_UPCOMING"] = "RESERVATION_DATE_UPCOMING";
    NotificationType["RESERVATION_TIME_CHANGED"] = "RESERVATION_TIME_CHANGED";
    NotificationType["RESERVATION_PARTICIPANT_CHANGED"] = "RESERVATION_PARTICIPANT_CHANGED";
    NotificationType["RESOURCE_CONSUMABLE_REPLACING"] = "RESOURCE_CONSUMABLE_REPLACING";
    NotificationType["RESOURCE_VEHICLE_RETURNED"] = "RESOURCE_VEHICLE_RETURNED";
    NotificationType["RESOURCE_MAINTENANCE_COMPLETED"] = "RESOURCE_MAINTENANCE_COMPLETED";
})(NotificationType || (exports.NotificationType = NotificationType = {}));


/***/ }),

/***/ "./libs/enums/reservation-type.enum.ts":
/*!*********************************************!*\
  !*** ./libs/enums/reservation-type.enum.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ParticipantsType = exports.ReservationStatus = void 0;
var ReservationStatus;
(function (ReservationStatus) {
    ReservationStatus["PENDING"] = "PENDING";
    ReservationStatus["CONFIRMED"] = "CONFIRMED";
    ReservationStatus["CANCELLED"] = "CANCELLED";
    ReservationStatus["REJECTED"] = "REJECTED";
    ReservationStatus["CLOSED"] = "CLOSED";
})(ReservationStatus || (exports.ReservationStatus = ReservationStatus = {}));
var ParticipantsType;
(function (ParticipantsType) {
    ParticipantsType["RESERVER"] = "RESERVER";
    ParticipantsType["PARTICIPANT"] = "PARTICIPANT";
    ParticipantsType["CC_RECEIPIENT"] = "CC_RECEIPIENT";
})(ParticipantsType || (exports.ParticipantsType = ParticipantsType = {}));


/***/ }),

/***/ "./libs/enums/resource-type.enum.ts":
/*!******************************************!*\
  !*** ./libs/enums/resource-type.enum.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResourceType = void 0;
var ResourceType;
(function (ResourceType) {
    ResourceType["MEETING_ROOM"] = "MEETING_ROOM";
    ResourceType["VEHICLE"] = "VEHICLE";
    ResourceType["ACCOMMODATION"] = "ACCOMMODATION";
})(ResourceType || (exports.ResourceType = ResourceType = {}));


/***/ }),

/***/ "./libs/enums/role-type.enum.ts":
/*!**************************************!*\
  !*** ./libs/enums/role-type.enum.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Role = void 0;
var Role;
(function (Role) {
    Role["USER"] = "USER";
    Role["RESOURCE_ADMIN"] = "RESOURCE_ADMIN";
    Role["SYSTEM_ADMIN"] = "SYSTEM_ADMIN";
})(Role || (exports.Role = Role = {}));


/***/ }),

/***/ "./libs/guards/jwt-auth.guard.ts":
/*!***************************************!*\
  !*** ./libs/guards/jwt-auth.guard.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.JwtAuthGuard = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const passport_1 = __webpack_require__(/*! @nestjs/passport */ "@nestjs/passport");
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const public_decorator_1 = __webpack_require__(/*! @libs/decorators/public.decorator */ "./libs/decorators/public.decorator.ts");
let JwtAuthGuard = class JwtAuthGuard extends (0, passport_1.AuthGuard)('jwt') {
    constructor(reflector) {
        super();
        this.reflector = reflector;
    }
    canActivate(context) {
        const isPublic = this.reflector.getAllAndOverride(public_decorator_1.IS_PUBLIC_KEY, [
            context.getHandler(),
            context.getClass(),
        ]);
        if (isPublic) {
            return true;
        }
        return super.canActivate(context);
    }
};
exports.JwtAuthGuard = JwtAuthGuard;
exports.JwtAuthGuard = JwtAuthGuard = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof core_1.Reflector !== "undefined" && core_1.Reflector) === "function" ? _a : Object])
], JwtAuthGuard);


/***/ }),

/***/ "./libs/guards/role.guard.ts":
/*!***********************************!*\
  !*** ./libs/guards/role.guard.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.RolesGuard = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const role_decorator_1 = __webpack_require__(/*! @libs/decorators/role.decorator */ "./libs/decorators/role.decorator.ts");
let RolesGuard = class RolesGuard {
    constructor(reflector) {
        this.reflector = reflector;
    }
    canActivate(context) {
        const requiredRoles = this.reflector.getAllAndOverride(role_decorator_1.ROLES_KEY, [
            context.getHandler(),
            context.getClass(),
        ]);
        if (!requiredRoles) {
            return true;
        }
        const { user } = context.switchToHttp().getRequest();
        return requiredRoles.some((role) => user.roles?.includes(role));
    }
};
exports.RolesGuard = RolesGuard;
exports.RolesGuard = RolesGuard = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof core_1.Reflector !== "undefined" && core_1.Reflector) === "function" ? _a : Object])
], RolesGuard);


/***/ }),

/***/ "./libs/interceptors/error.interceptor.ts":
/*!************************************************!*\
  !*** ./libs/interceptors/error.interceptor.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ErrorInterceptor = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const rxjs_1 = __webpack_require__(/*! rxjs */ "rxjs");
const operators_1 = __webpack_require__(/*! rxjs/operators */ "rxjs/operators");
let ErrorInterceptor = class ErrorInterceptor {
    intercept(context, next) {
        return next.handle().pipe((0, operators_1.catchError)((error) => {
            if (error instanceof common_1.HttpException) {
                console.error('Error:', error);
                const response = error.getResponse();
                const message = response.message;
                const errorMessage = typeof message === 'object'
                    ? Array.isArray(message)
                        ? message.join('\n')
                        : message
                    : error.message;
                return (0, rxjs_1.throwError)(() => ({
                    success: false,
                    message: errorMessage,
                    statusCode: error.getStatus(),
                }));
            }
            console.error('Unexpected error:', error);
            return (0, rxjs_1.throwError)(() => ({
                success: false,
                message: '예상치 못한 오류가 발생했습니다.',
                statusCode: 500,
            }));
        }));
    }
};
exports.ErrorInterceptor = ErrorInterceptor;
exports.ErrorInterceptor = ErrorInterceptor = __decorate([
    (0, common_1.Injectable)()
], ErrorInterceptor);


/***/ }),

/***/ "./libs/interceptors/request.interceptor.ts":
/*!**************************************************!*\
  !*** ./libs/interceptors/request.interceptor.ts ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.RequestInterceptor = void 0;
const date_util_1 = __webpack_require__(/*! @libs/utils/date.util */ "./libs/utils/date.util.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const operators_1 = __webpack_require__(/*! rxjs/operators */ "rxjs/operators");
let RequestInterceptor = class RequestInterceptor {
    intercept(context, next) {
        const request = context.switchToHttp().getRequest();
        const { method, url, body, query, params } = request;
        const now = Date.now();
        console.log(`[Request] ${date_util_1.DateUtil.now().toISOString()} ${method} ${url}`);
        if (Object.keys(body).length > 0) {
            console.log('Body:', body);
        }
        if (Object.keys(query).length > 0) {
            console.log('Query:', query);
        }
        if (Object.keys(params).length > 0) {
            console.log('Params:', params);
        }
        return next.handle().pipe((0, operators_1.tap)(() => {
            console.log(`[Response Time] ${Date.now() - now}ms`);
        }));
    }
};
exports.RequestInterceptor = RequestInterceptor;
exports.RequestInterceptor = RequestInterceptor = __decorate([
    (0, common_1.Injectable)()
], RequestInterceptor);


/***/ }),

/***/ "./libs/interceptors/response.interceptor.ts":
/*!***************************************************!*\
  !*** ./libs/interceptors/response.interceptor.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ResponseInterceptor = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const operators_1 = __webpack_require__(/*! rxjs/operators */ "rxjs/operators");
let ResponseInterceptor = class ResponseInterceptor {
    intercept(context, next) {
        return next.handle().pipe((0, operators_1.map)((data) => {
            return {
                success: true,
                data: data,
                message: '요청이 성공적으로 처리되었습니다.',
            };
        }));
    }
};
exports.ResponseInterceptor = ResponseInterceptor;
exports.ResponseInterceptor = ResponseInterceptor = __decorate([
    (0, common_1.Injectable)()
], ResponseInterceptor);


/***/ }),

/***/ "./libs/swagger/swagger.ts":
/*!*********************************!*\
  !*** ./libs/swagger/swagger.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.setupSwagger = setupSwagger;
const swagger_1 = __webpack_require__(/*! @nestjs/swagger */ "@nestjs/swagger");
const response_dto_1 = __webpack_require__(/*! ../dtos/response.dto */ "./libs/dtos/response.dto.ts");
const paginate_response_dto_1 = __webpack_require__(/*! ../dtos/paginate-response.dto */ "./libs/dtos/paginate-response.dto.ts");
const user_domain_module_1 = __webpack_require__(/*! @resource/modules/auth/user.domain.module */ "./apps/resource/src/modules/auth/user.domain.module.ts");
const employee_domain_module_1 = __webpack_require__(/*! @resource/modules/employee/employee.domain.module */ "./apps/resource/src/modules/employee/employee.domain.module.ts");
const notification_domain_module_1 = __webpack_require__(/*! @resource/modules/notification/notification.domain.module */ "./apps/resource/src/modules/notification/notification.domain.module.ts");
const auth_module_1 = __webpack_require__(/*! @resource/modules/auth/auth.module */ "./apps/resource/src/modules/auth/auth.module.ts");
const employee_module_1 = __webpack_require__(/*! @resource/modules/employee/employee.module */ "./apps/resource/src/modules/employee/employee.module.ts");
const resource_module_1 = __webpack_require__(/*! @resource/modules/resource/resource.module */ "./apps/resource/src/modules/resource/resource.module.ts");
const reservation_module_1 = __webpack_require__(/*! @resource/modules/reservation/reservation.module */ "./apps/resource/src/modules/reservation/reservation.module.ts");
const notification_module_1 = __webpack_require__(/*! @resource/modules/notification/notification.module */ "./apps/resource/src/modules/notification/notification.module.ts");
const file_module_1 = __webpack_require__(/*! @resource/modules/file/file.module */ "./apps/resource/src/modules/file/file.module.ts");
const vehicle_resource_module_1 = __webpack_require__(/*! @resource/modules/resource/vehicle/vehicle-resource.module */ "./apps/resource/src/modules/resource/vehicle/vehicle-resource.module.ts");
const app_module_1 = __webpack_require__(/*! @resource/app.module */ "./apps/resource/src/app.module.ts");
function setupSwagger(app, dtos) {
    const config = new swagger_1.DocumentBuilder()
        .setTitle('Resource Management API')
        .setDescription('Resource Management API Description')
        .setVersion('1.0')
        .addBearerAuth()
        .build();
    const document = swagger_1.SwaggerModule.createDocument(app, config, {
        include: [
            app_module_1.AppModule,
            auth_module_1.AuthModule,
            employee_module_1.EmployeeModule,
            resource_module_1.ResourceModule,
            vehicle_resource_module_1.VehicleResourceModule,
            reservation_module_1.ReservationModule,
            notification_module_1.NotificationModule,
            file_module_1.FileModule,
        ],
        extraModels: [response_dto_1.BaseResponseDto, paginate_response_dto_1.PaginationData, ...dtos],
    });
    const domainConfig = new swagger_1.DocumentBuilder()
        .setTitle('Domain API')
        .setDescription('Domain API Description')
        .setVersion('1.0')
        .build();
    const domainDocument = swagger_1.SwaggerModule.createDocument(app, domainConfig, {
        include: [user_domain_module_1.UserDomainModule, employee_domain_module_1.EmployeeDomainModule, notification_domain_module_1.NotificationDomainModule],
    });
    swagger_1.SwaggerModule.setup('domain-api-docs', app, domainDocument, {
        jsonDocumentUrl: '/domain-api-docs-json',
        customJs: [
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-bundle.min.js',
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.js',
        ],
        customCssUrl: [
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui.min.css',
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.css',
        ],
    });
    swagger_1.SwaggerModule.setup('api-docs', app, document, {
        jsonDocumentUrl: '/api-docs-json',
        customJs: [
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-bundle.min.js',
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.js',
        ],
        customCssUrl: [
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui.min.css',
            'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.css',
        ],
        swaggerOptions: {
            tagsSorter: (a, b) => {
                const isAEnglish = /^[A-Za-z]/.test(a);
                const isBEnglish = /^[A-Za-z]/.test(b);
                if (isAEnglish && !isBEnglish)
                    return -1;
                if (!isAEnglish && isBEnglish)
                    return 1;
                return a.localeCompare(b, 'en');
            },
            docExpansion: 'none',
            persistAuthorization: true,
        },
    });
}


/***/ }),

/***/ "./libs/utils/api-doc.service.ts":
/*!***************************************!*\
  !*** ./libs/utils/api-doc.service.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var ApiDocService_1;
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ApiDocService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const fs = __webpack_require__(/*! fs */ "fs");
const axios_1 = __webpack_require__(/*! axios */ "axios");
const path_1 = __webpack_require__(/*! path */ "path");
let ApiDocService = ApiDocService_1 = class ApiDocService {
    constructor() {
        this.logger = new common_1.Logger(ApiDocService_1.name);
        this.MAX_RETRIES = 3;
        this.RETRY_DELAY = 2000;
        if (process.env.NODE_ENV === 'local') {
        }
    }
    async getApiJson(retries = this.MAX_RETRIES) {
        await new Promise((resolve) => setTimeout(resolve, this.RETRY_DELAY));
        try {
            const response = await axios_1.default.get('http://localhost:3060/api-docs-json');
            this.data = response.data;
        }
        catch (error) {
            if (retries > 0) {
                this.getApiJson(retries - 1);
            }
        }
    }
    getControllers() {
        const v1Paths = Object.entries(this.data.paths).filter(([path]) => path.startsWith('/api/v1/'));
        return v1Paths
            .map(([path, routes]) => {
            const pathParts = path.split('/');
            const isAdmin = pathParts[3] === 'admin';
            const controllerIndex = isAdmin ? 4 : 3;
            const controller = pathParts[controllerIndex] || 'undefined';
            const controllerName = isAdmin ? `admin-${controller}` : controller;
            const apis = Object.entries(routes).map(([method, metadata]) => {
                return {
                    method,
                    path,
                    metadata,
                    isAdmin,
                };
            });
            return {
                controller: controllerName,
                apis,
            };
        })
            .reduce((acc, curr) => {
            if (acc[curr.controller]) {
                acc[curr.controller].push(...curr.apis);
            }
            else {
                acc[curr.controller] = [...curr.apis];
            }
            return acc;
        }, {});
    }
    getSchemaType(schema) {
        if (schema.type === 'array') {
            const itemType = schema.items ? this.getSchemaType(schema.items) : 'any';
            return `${itemType}[]`;
        }
        return schema.type || 'object';
    }
    renderSchemaJson(schema, indentLevel = 1) {
        if (!schema)
            return 'null';
        const indent = '  '.repeat(indentLevel);
        const commentIndent = '  '.repeat(Math.max(0, indentLevel - 1));
        let content = '';
        if (schema.type === 'object' && schema.properties) {
            content += '{\n';
            const properties = Object.entries(schema.properties);
            properties.forEach(([key, prop], index) => {
                if (!prop) {
                    prop = {};
                }
                const isLast = index === properties.length - 1;
                const required = (schema.required || []).includes(key);
                const comment = [];
                if (prop.description)
                    comment.push(prop.description);
                if (required && prop.type !== 'except')
                    comment.push('✅ Required');
                if (!required && prop.type !== 'except')
                    comment.push('❌ Optional');
                if (prop.type === 'object' && prop.properties) {
                    content += `${indent}"${key}": ${this.renderSchemaJson(prop, indentLevel + 1)}${isLast ? '' : ','}`;
                }
                else if (prop.type === 'array' && prop.items) {
                    content += `${indent}"${key}": [`;
                    if (prop.items.type === 'object' && prop.items.properties) {
                        content += '\n';
                        content += `${indent}  ${this.renderSchemaJson(prop.items, indentLevel + 2).trim()}`;
                        content += `\n${indent}]${isLast ? '' : ','}`;
                    }
                    else {
                        const example = this.getExampleValue(prop.items);
                        content += `${example}]${isLast ? '' : ','}`;
                    }
                }
                else {
                    const example = this.getExampleValue(prop);
                    content += `${indent}"${key}": ${example}${isLast ? '' : ','}`;
                }
                if (comment.length > 0) {
                    content += ` // ${comment.join(', ')}`;
                }
                content += '\n';
            });
            content += `${commentIndent}}`;
        }
        else if (schema.type === 'array' && schema.items) {
            content = `[${this.getExampleValue(schema.items)}]`;
        }
        else {
            content = this.getExampleValue(schema);
        }
        return content;
    }
    getExampleValue(prop) {
        if (!prop)
            return 'null';
        if (prop.example !== undefined) {
            return typeof prop.example === 'string' ? `"${prop.example}"` : prop.example;
        }
        switch (prop.type) {
            case 'string':
                return prop.enum ? `"${prop.enum[0]}"` : '""';
            case 'number':
                return '0';
            case 'integer':
                return '0';
            case 'boolean':
                return 'false';
            case 'array':
                return '[]';
            default:
                return 'null';
        }
    }
    resolveSchema(schema, schemas, visited = new Set()) {
        if (!schema)
            return { type: 'object', properties: {} };
        if (schema.$ref) {
            const refPath = schema.$ref.split('/');
            const schemaName = refPath[refPath.length - 1];
            if (visited.has(schemaName)) {
                return { type: 'object', description: `Reference to ${schemaName}` };
            }
            visited.add(schemaName);
            if (!schemas[schemaName]) {
                this.logger.warn(`Schema reference not found: ${schemaName}`);
                return { type: 'object', properties: {} };
            }
            return this.resolveSchema(schemas[schemaName], schemas, visited);
        }
        if (schema.allOf) {
            const resolvedSchemas = schema.allOf
                .filter((s) => s)
                .map((s) => this.resolveSchema(s, schemas, visited));
            if (resolvedSchemas.length === 0) {
                return { type: 'object', properties: {} };
            }
            return resolvedSchemas.reduce((acc, curr) => {
                return {
                    ...acc,
                    ...curr,
                    properties: {
                        ...(acc.properties || {}),
                        ...(curr.properties || {}),
                    },
                    required: [...(acc.required || []), ...(curr.required || [])],
                };
            }, {});
        }
        if (schema.properties) {
            const resolvedProperties = {};
            Object.entries(schema.properties).forEach(([key, value]) => {
                if (value !== null && value !== undefined) {
                    resolvedProperties[key] = this.resolveSchema(value, schemas, new Set(visited));
                }
                else {
                    resolvedProperties[key] = { type: 'object', properties: {} };
                }
            });
            return { ...schema, properties: resolvedProperties };
        }
        if (schema.items) {
            return {
                ...schema,
                items: this.resolveSchema(schema.items, schemas, visited),
            };
        }
        return schema;
    }
    async generateApiDocs() {
        try {
            await this.getApiJson();
            if (!this.data || !this.data.paths) {
                this.logger.error('API 문서 데이터를 불러오는데 실패했습니다.');
                return;
            }
            const controllers = this.getControllers();
            if (Object.keys(controllers).length === 0) {
                this.logger.warn('API v1 경로를 찾을 수 없습니다.');
                return;
            }
            const schemas = this.data.components?.schemas || {};
            Object.keys(controllers).forEach((controller, index) => {
                try {
                    const isAdmin = controller.startsWith('admin-');
                    const controllerName = isAdmin ? controller.substring(6) : controller;
                    const apiType = isAdmin ? '[관리자 API]' : '[사용자 API]';
                    let markdownContent = `# ${apiType} ${controllerName[0].toUpperCase() + controllerName.slice(1)}\n\n`;
                    const domain = controllers[controller];
                    for (const api of domain) {
                        try {
                            const method = api.method.toUpperCase();
                            const path = api.path;
                            const metadata = api.metadata;
                            markdownContent += `### ${metadata.summary || path}\n\n`;
                            if (metadata.description) {
                                markdownContent += `${metadata.description}\n\n`;
                            }
                            markdownContent += `- **Method:** \`${method}\`\n`;
                            markdownContent += `- **Endpoint:** \`${path}\`\n\n`;
                            if (metadata.parameters && metadata.parameters.length > 0) {
                                const pathParams = metadata.parameters.filter((p) => p.in === 'path');
                                const queryParams = metadata.parameters.filter((p) => p.in === 'query');
                                if (pathParams.length > 0) {
                                    markdownContent += `#### 🔵 Path Parameters\n\n`;
                                    markdownContent += '```json\n';
                                    markdownContent += '{\n';
                                    pathParams.forEach((param, index) => {
                                        try {
                                            const resolvedSchema = this.resolveSchema(param.schema, schemas);
                                            const isLast = index === pathParams.length - 1;
                                            const example = this.getExampleValue(resolvedSchema);
                                            const required = param.required ? '✅ Required' : '❌ Optional';
                                            markdownContent += `  "${param.name}": ${example} // ${required} ${param.description || ''}\n`;
                                            markdownContent += `${isLast ? '' : ','}\n`;
                                        }
                                        catch (err) {
                                            this.logger.error(`Path parameter 처리 중 오류: ${err.message}`);
                                            markdownContent += `  "${param.name}": null // Error processing parameter\n`;
                                            markdownContent += `${index === pathParams.length - 1 ? '' : ','}\n`;
                                        }
                                    });
                                    markdownContent += '}\n';
                                    markdownContent += '```\n\n';
                                }
                                if (queryParams.length > 0) {
                                    markdownContent += `#### 🟣 Query Parameters\n\n`;
                                    markdownContent += '```json\n';
                                    markdownContent += '{\n';
                                    queryParams.forEach((param, index) => {
                                        try {
                                            const resolvedSchema = this.resolveSchema(param.schema, schemas);
                                            const isLast = index === queryParams.length - 1;
                                            const example = this.getExampleValue(resolvedSchema);
                                            const required = param.required ? '✅ Required' : '❌ Optional';
                                            markdownContent += `  "${param.name}": ${example} // ${required} ${param.description || ''}\n`;
                                            markdownContent += `${isLast ? '' : ','}\n`;
                                        }
                                        catch (err) {
                                            this.logger.error(`Query parameter 처리 중 오류: ${err.message}`);
                                            markdownContent += `  "${param.name}": null // Error processing parameter\n`;
                                            markdownContent += `${index === queryParams.length - 1 ? '' : ','}\n`;
                                        }
                                    });
                                    markdownContent += '}\n';
                                    markdownContent += '```\n\n';
                                }
                            }
                            if (metadata.requestBody) {
                                markdownContent += `#### 🟠 Request Body\n\n`;
                                const content = metadata.requestBody.content;
                                if (content) {
                                    Object.keys(content).forEach((contentType) => {
                                        try {
                                            markdownContent += `**Content Type:** \`${contentType}\`\n\n`;
                                            const resolvedSchema = this.resolveSchema(content[contentType].schema, schemas);
                                            markdownContent += '```json\n';
                                            markdownContent += this.renderSchemaJson(resolvedSchema);
                                            markdownContent += '\n```\n\n';
                                        }
                                        catch (err) {
                                            this.logger.error(`Request body 처리 중 오류: ${err.message}`);
                                            markdownContent +=
                                                '```json\n{ "error": "Error processing request body" }\n```\n\n';
                                        }
                                    });
                                }
                            }
                            markdownContent += `#### Responses\n\n`;
                            if (metadata.responses) {
                                Object.entries(metadata.responses).forEach(([code, response]) => {
                                    try {
                                        const titleEmoji = code.startsWith('2') ? '🟢' : '🔴';
                                        markdownContent += `##### ${titleEmoji} ${code} - ${response.description || 'No description'}\n\n`;
                                        if (response.content) {
                                            Object.keys(response.content).forEach((contentType) => {
                                                try {
                                                    markdownContent += `**Content Type:** \`${contentType}\`\n\n`;
                                                    const resolvedSchema = this.resolveSchema(response.content[contentType].schema, schemas);
                                                    markdownContent += '```json\n';
                                                    markdownContent += this.renderSchemaJson(resolvedSchema);
                                                    markdownContent += '\n```\n\n';
                                                }
                                                catch (err) {
                                                    this.logger.error(`Response content 처리 중 오류: ${err.message}`);
                                                    markdownContent +=
                                                        '```json\n{ "error": "Error processing response" }\n```\n\n';
                                                }
                                            });
                                        }
                                    }
                                    catch (err) {
                                        this.logger.error(`Response 처리 중 오류: ${err.message}`);
                                        markdownContent += `##### Status ${code} - Error processing response\n\n`;
                                    }
                                });
                            }
                            markdownContent += `---\n\n`;
                        }
                        catch (err) {
                            this.logger.error(`API 엔드포인트 처리 중 오류: ${err.message}`);
                            markdownContent += `### Error processing endpoint: ${api.path}\n\n---\n\n`;
                        }
                    }
                    const filePrefix = isAdmin ? 'admin_' : '';
                    const docsPath = (0, path_1.join)('C:/Users/USER/Desktop/projects/RMS-documents/docs/개발/03_api', `${index + 1 < 10 ? '0' : ''}${index + 1}_${filePrefix}${controllerName}.md`);
                    this.saveMarkdown(docsPath, markdownContent);
                }
                catch (err) {
                    this.logger.error(`컨트롤러 문서화 중 오류 발생: ${controller}, ${err.message}`);
                }
            });
            this.logger.log('API 문서 생성이 완료되었습니다.');
        }
        catch (err) {
            this.logger.error(`API 문서 생성 중 예상치 못한 오류 발생: ${err.message}`);
        }
    }
    saveMarkdown(filePath, content) {
        fs.writeFileSync(filePath, content);
        this.logger.log(`API 문서가 생성되었습니다: ${filePath}`);
    }
};
exports.ApiDocService = ApiDocService;
exports.ApiDocService = ApiDocService = ApiDocService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [])
], ApiDocService);


/***/ }),

/***/ "./libs/utils/date.util.ts":
/*!*********************************!*\
  !*** ./libs/utils/date.util.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DateUtil = void 0;
const dayjs = __webpack_require__(/*! dayjs */ "dayjs");
const utc = __webpack_require__(/*! dayjs/plugin/utc */ "dayjs/plugin/utc");
const timezone = __webpack_require__(/*! dayjs/plugin/timezone */ "dayjs/plugin/timezone");
dayjs.extend(utc);
dayjs.extend(timezone);
dayjs.tz.setDefault('Asia/Seoul');
class DateUtilWrapper {
    constructor(date) {
        this.date = date;
    }
    toDate() {
        return this.date.toDate();
    }
    format(format = 'YYYY-MM-DD HH:mm:ss') {
        return this.date.format(format);
    }
    addDays(days) {
        return new DateUtilWrapper(this.date.add(days, 'day'));
    }
    addMinutes(minutes) {
        return new DateUtilWrapper(this.date.add(minutes, 'minute'));
    }
    toISOString() {
        return this.date.toISOString();
    }
    toMinutes() {
        return this.date.hour() * 60 + this.date.minute();
    }
    hour(hours) {
        return new DateUtilWrapper(this.date.hour(hours));
    }
    minute(minutes) {
        return new DateUtilWrapper(this.date.minute(minutes));
    }
    second(seconds) {
        return new DateUtilWrapper(this.date.second(seconds));
    }
    getYear() {
        return this.date.year();
    }
    getMonth() {
        return this.date.month() + 1;
    }
    getDate() {
        return this.date.date();
    }
    getDaysInMonth() {
        return this.date.daysInMonth();
    }
    getFirstDayOfMonth() {
        return new DateUtilWrapper(this.date.startOf('month'));
    }
    getLastDayOfMonth() {
        return new DateUtilWrapper(this.date.endOf('month'));
    }
}
class DateUtil {
    static now() {
        return new DateUtilWrapper(dayjs().tz('Asia/Seoul'));
    }
    static date(date) {
        return new DateUtilWrapper(dayjs.tz(date, 'Asia/Seoul'));
    }
    static format(date, format = 'YYYY-MM-DD HH:mm:ss') {
        return this.date(date).format(format);
    }
    static parse(dateString) {
        return this.date(dateString);
    }
    static addDays(date, days) {
        return this.date(date).addDays(days);
    }
    static addMinutes(date, minutes) {
        return this.date(date).addMinutes(minutes);
    }
    static toISOString(date) {
        return this.date(date).toISOString();
    }
    static toMinutes(date) {
        const d = this.date(date);
        return d.toMinutes();
    }
    static fromMinutes(minutes) {
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        return this.now().hour(hours).minute(mins).second(0);
    }
    static getYear(date = new Date()) {
        return this.date(date).getYear();
    }
    static getMonth(date = new Date()) {
        return this.date(date).getMonth();
    }
    static getDate(date = new Date()) {
        return this.date(date).getDate();
    }
    static getDaysInMonth(date = new Date()) {
        return this.date(date).getDaysInMonth();
    }
    static getFirstDayOfMonth(date = new Date()) {
        return this.date(date).getFirstDayOfMonth();
    }
    static getLastDayOfMonth(date = new Date()) {
        return this.date(date).getLastDayOfMonth();
    }
    static toAlarmRangeString(startDate, endDate) {
        const start = dayjs(startDate);
        const end = dayjs(endDate);
        if (start.isSame(end, 'day')) {
            return `${this.replaceWeekday(start.format('YY.MM.DD(ddd) HH:mm'))} ~ ${end.format('HH:mm')}`;
        }
        return `${this.replaceWeekday(start.format('YY.MM.DD(ddd) HH:mm'))} ~ ${this.replaceWeekday(end.format('YY.MM.DD(ddd) HH:mm'))}`;
    }
    static replaceWeekday(str) {
        return str
            .replace('Mon', '월')
            .replace('Tue', '화')
            .replace('Wed', '수')
            .replace('Thu', '목')
            .replace('Fri', '금')
            .replace('Sat', '토')
            .replace('Sun', '일');
    }
}
exports.DateUtil = DateUtil;


/***/ }),

/***/ "./libs/utils/db-doc.service.ts":
/*!**************************************!*\
  !*** ./libs/utils/db-doc.service.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DbDocService = void 0;
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const typeorm_1 = __webpack_require__(/*! typeorm */ "typeorm");
const fs = __webpack_require__(/*! fs */ "fs");
const path = __webpack_require__(/*! path */ "path");
let DbDocService = class DbDocService {
    constructor() {
        if (process.env.NODE_ENV === 'local') {
            const storage = (0, typeorm_1.getMetadataArgsStorage)();
            this.metadata = storage.tables.map((table) => ({
                name: table.name,
                columns: storage.columns.filter((col) => col.target === table.target),
                relations: storage.relations.filter((rel) => rel.target === table.target),
            }));
        }
    }
    async generateDbDocumentation() {
        const doc = this.generateMarkdown();
        const outputPath = path.join('C:/Users/USER/Desktop/projects/RMS-documents/docs/개발/02_database-design.md');
        const outputDir = path.dirname(outputPath);
        await fs.promises.mkdir(outputDir, { recursive: true });
        await fs.promises.writeFile(outputPath, doc, 'utf8');
    }
    generateMarkdown() {
        let markdown = '# 데이터베이스 설계 문서\n\n';
        markdown += "import { MermaidDiagram } from '@site/src/components/MermaidDiagram';\n\n";
        markdown += this.generateErdSection();
        markdown += this.generateEntityDetailsSection();
        markdown += this.generateRelationsSection();
        return markdown;
    }
    generateErdSection() {
        let section = '## ERD (Entity Relationship Diagram)\n\n';
        section += '<MermaidDiagram\n';
        section += 'title="database-erd"\n';
        section += 'chart={`\n';
        section += 'erDiagram\n';
        this.metadata.forEach((metadata) => {
            const entityName = metadata.name.replace(/[^a-zA-Z0-9]/g, '').replace(/s$/, '');
            section += `    ${entityName} {\n`;
            metadata.columns.forEach((column) => {
                let type = 'unknown';
                if (column.options?.type) {
                    if (typeof column.options.type === 'string') {
                        type = column.options.type;
                    }
                    else if (typeof column.options.type === 'function') {
                        switch (column.options.type.name) {
                            case 'String':
                                type = 'string';
                                break;
                            case 'Number':
                                type = 'number';
                                break;
                            case 'Boolean':
                                type = 'boolean';
                                break;
                            case 'Date':
                                type = 'date';
                                break;
                            default:
                                type = column.options.type.name.toLowerCase();
                        }
                    }
                }
                const isPrimary = column.options?.primary ? 'PK' : '';
                section += `        ${type} ${column.propertyName} ${isPrimary}\n`;
            });
            section += '    }\n';
        });
        this.metadata.forEach((metadata) => {
            const sourceEntity = metadata.name.replace(/[^a-zA-Z0-9]/g, '').replace(/s$/, '');
            metadata.relations.forEach((relation) => {
                const targetEntity = relation.type.toString().split('.').pop();
                if (targetEntity) {
                    const sanitizedTarget = targetEntity
                        .toLowerCase()
                        .replace(/[^a-zA-Z0-9]/g, '')
                        .replace(/s$/, '');
                    let cardinality = '||--o{';
                    if (relation.relationType === 'one-to-one') {
                        cardinality = '||--||';
                    }
                    else if (relation.relationType === 'many-to-one') {
                        cardinality = '}|--||';
                    }
                    const relationDesc = relation.relationType === 'many-to-one' ? 'belongs_to' : 'has';
                    section += `    ${sourceEntity} ${cardinality} ${sanitizedTarget} : ${relationDesc}\n`;
                }
            });
        });
        section += '`}\n';
        section += '/>\n\n';
        return section;
    }
    generateEntityDetailsSection() {
        let section = '## 엔티티 상세 정보\n\n';
        this.metadata.forEach((metadata) => {
            section += `### ${metadata.name}\n\n`;
            section += '| 컬럼명 | 타입 | 제약조건 | 설명 |\n';
            section += '|--------|------|-----------|------|\n';
            metadata.columns.forEach((column) => {
                const constraints = [];
                if (column.options.primary)
                    constraints.push('PK');
                if (!column.options.nullable)
                    constraints.push('NOT NULL');
                if (column.options.unique)
                    constraints.push('UNIQUE');
                let type = column.options.type;
                if (typeof type === 'function') {
                    type = type.name;
                }
                section += `| ${column.propertyName} | ${type} | ${constraints.join(', ')} | ${column.options?.comment || ''} |\n`;
            });
            section += '\n';
        });
        return section;
    }
    generateRelationsSection() {
        let section = '## 관계 정보\n\n';
        this.metadata.forEach((metadata) => {
            if (metadata.relations.length > 0) {
                section += `### ${metadata.name} 관계\n\n`;
                section += '| 관계 타입 | 대상 엔티티 | 설명 |\n';
                section += '|------------|-------------|------|\n';
                metadata.relations.forEach((relation) => {
                    const targetEntity = relation.type.toString();
                    const relationType = relation.relationType;
                    section += `| ${relationType} | ${targetEntity} | ${relation.options?.comment || ''} |\n`;
                });
                section += '\n';
            }
        });
        return section;
    }
};
exports.DbDocService = DbDocService;
exports.DbDocService = DbDocService = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [])
], DbDocService);


/***/ }),

/***/ "@aws-sdk/client-s3":
/*!*************************************!*\
  !*** external "@aws-sdk/client-s3" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ "@nestjs/common":
/*!*********************************!*\
  !*** external "@nestjs/common" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@nestjs/common");

/***/ }),

/***/ "@nestjs/config":
/*!*********************************!*\
  !*** external "@nestjs/config" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@nestjs/config");

/***/ }),

/***/ "@nestjs/core":
/*!*******************************!*\
  !*** external "@nestjs/core" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("@nestjs/core");

/***/ }),

/***/ "@nestjs/event-emitter":
/*!****************************************!*\
  !*** external "@nestjs/event-emitter" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@nestjs/event-emitter");

/***/ }),

/***/ "@nestjs/event-emitter/dist":
/*!*********************************************!*\
  !*** external "@nestjs/event-emitter/dist" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("@nestjs/event-emitter/dist");

/***/ }),

/***/ "@nestjs/jwt":
/*!******************************!*\
  !*** external "@nestjs/jwt" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("@nestjs/jwt");

/***/ }),

/***/ "@nestjs/passport":
/*!***********************************!*\
  !*** external "@nestjs/passport" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("@nestjs/passport");

/***/ }),

/***/ "@nestjs/platform-express":
/*!*******************************************!*\
  !*** external "@nestjs/platform-express" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("@nestjs/platform-express");

/***/ }),

/***/ "@nestjs/schedule":
/*!***********************************!*\
  !*** external "@nestjs/schedule" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("@nestjs/schedule");

/***/ }),

/***/ "@nestjs/swagger":
/*!**********************************!*\
  !*** external "@nestjs/swagger" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("@nestjs/swagger");

/***/ }),

/***/ "@nestjs/throttler/dist/throttler.decorator":
/*!*************************************************************!*\
  !*** external "@nestjs/throttler/dist/throttler.decorator" ***!
  \*************************************************************/
/***/ ((module) => {

module.exports = require("@nestjs/throttler/dist/throttler.decorator");

/***/ }),

/***/ "@nestjs/typeorm":
/*!**********************************!*\
  !*** external "@nestjs/typeorm" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("@nestjs/typeorm");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = require("axios");

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "class-transformer":
/*!************************************!*\
  !*** external "class-transformer" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("class-transformer");

/***/ }),

/***/ "class-validator":
/*!**********************************!*\
  !*** external "class-validator" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("class-validator");

/***/ }),

/***/ "cron":
/*!***********************!*\
  !*** external "cron" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("cron");

/***/ }),

/***/ "cron/dist":
/*!****************************!*\
  !*** external "cron/dist" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("cron/dist");

/***/ }),

/***/ "dayjs":
/*!************************!*\
  !*** external "dayjs" ***!
  \************************/
/***/ ((module) => {

module.exports = require("dayjs");

/***/ }),

/***/ "dayjs/plugin/timezone":
/*!****************************************!*\
  !*** external "dayjs/plugin/timezone" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("dayjs/plugin/timezone");

/***/ }),

/***/ "dayjs/plugin/utc":
/*!***********************************!*\
  !*** external "dayjs/plugin/utc" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("dayjs/plugin/utc");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "firebase-admin/app":
/*!*************************************!*\
  !*** external "firebase-admin/app" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/app");

/***/ }),

/***/ "firebase-admin/messaging":
/*!*******************************************!*\
  !*** external "firebase-admin/messaging" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/messaging");

/***/ }),

/***/ "passport-jwt":
/*!*******************************!*\
  !*** external "passport-jwt" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("passport-jwt");

/***/ }),

/***/ "rxjs":
/*!***********************!*\
  !*** external "rxjs" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("rxjs");

/***/ }),

/***/ "rxjs/operators":
/*!*********************************!*\
  !*** external "rxjs/operators" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("rxjs/operators");

/***/ }),

/***/ "typeorm":
/*!**************************!*\
  !*** external "typeorm" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("typeorm");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;
/*!***********************************!*\
  !*** ./apps/resource/src/main.ts ***!
  \***********************************/

Object.defineProperty(exports, "__esModule", ({ value: true }));
const core_1 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const app_module_1 = __webpack_require__(/*! @resource/app.module */ "./apps/resource/src/app.module.ts");
const swagger_1 = __webpack_require__(/*! @libs/swagger/swagger */ "./libs/swagger/swagger.ts");
const env_config_1 = __webpack_require__(/*! @libs/configs/env.config */ "./libs/configs/env.config.ts");
const dtos = __webpack_require__(/*! @resource/dtos.index */ "./apps/resource/src/dtos.index.ts");
const response_interceptor_1 = __webpack_require__(/*! @libs/interceptors/response.interceptor */ "./libs/interceptors/response.interceptor.ts");
const error_interceptor_1 = __webpack_require__(/*! @libs/interceptors/error.interceptor */ "./libs/interceptors/error.interceptor.ts");
const jwt_auth_guard_1 = __webpack_require__(/*! @libs/guards/jwt-auth.guard */ "./libs/guards/jwt-auth.guard.ts");
const core_2 = __webpack_require__(/*! @nestjs/core */ "@nestjs/core");
const path_1 = __webpack_require__(/*! path */ "path");
const role_guard_1 = __webpack_require__(/*! @libs/guards/role.guard */ "./libs/guards/role.guard.ts");
const common_1 = __webpack_require__(/*! @nestjs/common */ "@nestjs/common");
const request_interceptor_1 = __webpack_require__(/*! @libs/interceptors/request.interceptor */ "./libs/interceptors/request.interceptor.ts");
async function bootstrap() {
    const app = await core_1.NestFactory.create(app_module_1.AppModule);
    const isProduction = process.env.NODE_ENV === 'production';
    app.enableCors({
        origin: function (origin, callback) {
            console.log('isProduction :', isProduction);
            console.log('origin :', origin);
            const whitelist = ['https://lrms.lumir.space'];
            if (!isProduction || whitelist.includes(origin)) {
                callback(null, true);
            }
            else {
                callback(new Error('Not allowed by CORS'));
            }
        },
        credentials: true,
    });
    app.setGlobalPrefix('api');
    app.useGlobalGuards(new jwt_auth_guard_1.JwtAuthGuard(app.get(core_2.Reflector)), new role_guard_1.RolesGuard(app.get(core_2.Reflector)));
    app.useGlobalInterceptors(new request_interceptor_1.RequestInterceptor(), new response_interceptor_1.ResponseInterceptor(), new error_interceptor_1.ErrorInterceptor());
    app.useGlobalPipes(new common_1.ValidationPipe({ transform: true }));
    const uploadPath = (0, path_1.join)(process.cwd(), 'public');
    app.useStaticAssets(uploadPath, {
        prefix: '/public',
        index: false,
        fallthrough: false,
    });
    (0, swagger_1.setupSwagger)(app, Object.values(dtos));
    await app.listen(env_config_1.ENV.APP_PORT || 3000);
}
bootstrap();

})();

/******/ })()
;